"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[56],{31477:function(e,t,r){r.d(t,{Or:function(){return v},VP:function(){return M},aq:function(){return U}});var n=r(71909),o=r.n(n);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(){s=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),c=new I(n||[]);return o(a,"_invoke",{value:P(e,r,c)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var y="suspendedStart",h="executing",m="completed",v={};function g(){}function b(){}function x(){}var w={};f(w,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(_([])));E&&E!==r&&n.call(E,c)&&(w=E);var O=x.prototype=g.prototype=Object.create(w);function j(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,c,u){var l=d(e[o],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==i(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(f).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function P(t,r,n){var o=y;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=d(t,r,n);if("normal"===l.type){if(o=n.done?m:"suspendedYield",l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return b.prototype=x,o(O,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},j(k.prototype),f(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(p(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(O),f(O,l,"Generator"),f(O,c,(function(){return this})),f(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function f(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){f(i,n,o,a,c,"next",e)}function c(e){f(i,n,o,a,c,"throw",e)}a(void 0)}))}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function y(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:String(t)}var m=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"driver",void 0),y(this,"session",void 0);try{this.driver=r&&n?o().driver(t,o().auth.basic(r,n)):o().driver(t)}catch(e){console.log(e)}}var t,r,n,i,a,c,u,l;return t=e,r=[{key:"connect",value:(l=p(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.driver){e.next=4;break}return e.next=3,this.driver.verifyConnectivity();case 3:return e.abrupt("return",!0);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"getSession",value:(u=p(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.driver){e.next=4;break}return t=this.driver.session(),this.session=t,e.abrupt("return",this.session);case 4:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getKDegreeRelationships",value:(c=p(s().mark((function e(t,r){var n,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.driver){e.next=3;break}return e.abrupt("return",{nodes:[],edges:[]});case 3:return n=this.driver.session({}),o="\n      match data=(n)-[*..".concat(r,"]-(m) WHERE id(n) in [").concat(t,"] RETURN data LIMIT 200\n      "),e.next=7,n.run(o);case 7:return i=e.sent,console.log("%c[Cypher Query Driver] NeighborsQuery 查询语句","color:blue",o),console.log("%c[Cypher Query Driver] NeighborsQuery 查询结果","color:green",i),n.close(),e.abrupt("return",g(i));case 14:return e.prev=14,e.t0=e.catch(0),console.log("error",e.t0),e.abrupt("return",{nodes:[],edges:[],raw:e.t0,mode:"error"});case 18:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e,t){return c.apply(this,arguments)})},{key:"query",value:(a=p(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getSession();case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",{nodes:[],edges:[]});case 6:return e.next=8,r.run(t);case 8:return n=e.sent,console.log("%c[Cypher Query Driver] QueryCypher 查询语句","color:blue",t),console.log("%c[Cypher Query Driver] QueryCypher 查询结果","color:green",n),r.close(),e.abrupt("return",g(n));case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",{nodes:[],edges:[],raw:e.t0,mode:"error"});case 18:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(e){return a.apply(this,arguments)})},{key:"close",value:(i=p(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.driver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.driver.close();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})}],r&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),v=m;function g(e){var t=[],r=[],n=[];return e.records.forEach((function(e){var o={};e._fields.forEach((function(n,i){var a="string"==typeof n,c=n.__isNode__,u=n.__isRelationship__,l=n.__isPath__,s=n.__isInteger__,f=b(n.properties);if(c){var p=n,d=p.labels,y=(p.identity,p.elementId),h=d[0];t.push({id:y,label:h,properties:f})}if(u){var m=n,v=m.type,g=m.startNodeElementId,x=m.endNodeElementId,w=m.elementId,S=g,E=x,O=v;r.push({id:w,source:S,target:E,label:O,properties:f})}l&&n.segments.forEach((function(e){var n,o,i=e.start,a=e.end,c=e.relationship,u=i.identity,l=i.labels,s=(i.properties,a.identity),f=a.labels;a.properties;t.forEach((function(e){e.id===u.low.toString()&&(n=!0),e.id===s.low.toString()&&(o=!0)})),n||t.push({id:u.low.toString(),label:l[0],properties:b(i.properties)}),o||t.push({id:s.low.toString(),label:f[0],properties:b(a.properties)});var p=c.identity,d=c.type,y=c.start,h=c.end;r.find((function(e){return e.id===p.low.toString()}))||r.push({id:"e_"+p.low.toString(),source:y.low.toString(),target:h.low.toString(),label:d,properties:b(c.properties)})}));s&&(o[e.keys[i]]=n.low),a&&(o[e.keys[i]]=n)})),0!==Object.keys(o).length&&n.push(o)})),l(l({},function(e,t){var r=new Map;e.forEach((function(e){r.set(e.id,e)}));var n=t.filter((function(e){var t=e.source,n=e.target,o=r.get(t),i=r.get(n);return o&&i}));return{nodes:a(r.values()),edges:n}}(t,r)),{},{table:n,raw:e})}function b(e){return e?(Object.keys(e).forEach((function(t){var r=e[t];r.__isInteger__&&(e[t]=r.low)})),e):{}}var x=r(35685),w=r.n(x);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=T(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function T(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(){L=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new I(n||[]);return o(a,"_invoke",{value:k(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(_([])));w&&w!==r&&n.call(w,a)&&(b=w);var E=g.prototype=m.prototype=Object.create(b);function O(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==S(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(S(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},O(j.prototype),l(j.prototype,c,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function I(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){I(i,n,o,a,c,"next",e)}function c(e){I(i,n,o,a,c,"throw",e)}a(void 0)}))}}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function Z(e,t,r){return(t=D(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:String(t)}var R=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"admin",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"password";A(this,e),Z(this,"driver",void 0),Z(this,"uri",void 0);try{var o=new(w().driver.auth.PlainTextSaslAuthenticator)(r,n),i=new(w().driver.Client)(t,{traversalSource:"g",authenticator:o});this.uri=t,this.driver=i}catch(e){console.log(e)}}var t,r,n,o,i,a,c,u,l,s,f,p,d;return t=e,r=[{key:"connect",value:(d=_(L().mark((function e(){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.driver){e.next=4;break}return e.next=3,this.driver.verifyConnectivity();case 3:return e.abrupt("return",!0);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getSession",value:(p=_(L().mark((function e(){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.driver){e.next=2;break}return e.abrupt("return",this.driver);case 2:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"query",value:(f=_(L().mark((function e(t){var r,n,o,i,a,c,u,l,s,f,p,d,y,h,m,v,g,b;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,console.log("%c[Query] 查询语句","color:blue",t),e.next=5,this.driver.submit(t);case 5:r=e.sent,console.log("%c[Query] 查询结果","color:green",r),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{nodes:[],edges:[],raw:e.t0,mode:"error"});case 12:n="graph",o=[],i={},a={},c=new Set,u=P(r),e.prev=18,u.s();case 20:if((l=u.n()).done){e.next=71;break}if(!((s=l.value)instanceof w().structure.Vertex)){e.next=27;break}return e.next=25,this.handleVertexMapping(a,c,s);case 25:e.next=69;break;case 27:if(!(s instanceof w().structure.Edge)){e.next=32;break}return e.next=30,this.handleEdgeMapping(a,i,c,s);case 30:e.next=69;break;case 32:if(!(s instanceof w().structure.Path)){e.next=35;break}e.next=69;break;case 35:if(!this.isGSExpandPath(s)){e.next=62;break}f=P(s),e.prev=37,f.s();case 39:if((p=f.n()).done){e.next=50;break}if(!((d=p.value)instanceof w().structure.Vertex)){e.next=46;break}return e.next=44,this.handleVertexMapping(a,c,d);case 44:e.next=48;break;case 46:return e.next=48,this.handleEdgeMapping(a,i,c,d);case 48:e.next=39;break;case 50:e.next=55;break;case 52:e.prev=52,e.t1=e.catch(37),f.e(e.t1);case 55:return e.prev=55,f.f(),e.finish(55);case 58:return e.next=60,this.handleTableResult(o,s);case 60:e.next=69;break;case 62:if(n="table","number"!=typeof s&&"string"!=typeof s){e.next=67;break}o.push(s),e.next=69;break;case 67:return e.next=69,this.handleTableResult(o,s);case 69:e.next=20;break;case 71:e.next=76;break;case 73:e.prev=73,e.t2=e.catch(18),u.e(e.t2);case 76:return e.prev=76,u.f(),e.finish(76);case 79:if("graph"!==n){e.next=84;break}return e.next=82,this.queryNodesProperties(k(c));case 82:for(h in y=e.sent)h in a&&(a[h].properties=y[h]);case 84:if("graph"!==n){e.next=90;break}for(g in m=[],v=[],a)m.push(a[g]);for(b in i)v.push(i[b]);return e.abrupt("return",{nodes:m,edges:v,mode:n,table:o,raw:r});case 90:if("table"!==n){e.next=92;break}return e.abrupt("return",{nodes:[],edges:[],mode:n,table:o,raw:r});case 92:case"end":return e.stop()}}),e,this,[[1,9],[18,73,76,79],[37,52,55,58]])}))),function(e){return f.apply(this,arguments)})},{key:"isGSExpandPath",value:function(e){if(!e instanceof Array)return!1;try{var t,r=!0,n=!1,o=P(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;r&&(r=i instanceof w().structure.Vertex||i instanceof w().structure.Edge),i instanceof w().structure.Edge&&(n=!0)}}catch(e){o.e(e)}finally{o.f()}return r&&n}catch(e){return!1}return!1}},{key:"jsonGraphData",value:(s=_(L().mark((function e(t){var r,n,o,i,a,c,u,l,s;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},n=t.id,o=t.label,i=t.properties,r.id="".concat(n),r.label=o,i){for(c in a={},i)(u=i[c])&&u[0]&&(a["".concat(c)]=u[0].value);r.properties=a}if(!(t instanceof w().structure.Edge)){e.next=13;break}return l=t.inV,s=t.outV,e.next=9,this.jsonGraphData(l);case 9:return r.inV=e.sent,e.next=12,this.jsonGraphData(s);case 12:r.outV=e.sent;case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"handleVertexMapping",value:(l=_(L().mark((function e(t,r,n){var o;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.jsonGraphData(n);case 2:o=e.sent,t[o.id]=j(j({},o),{},{nodeType:o.label}),r.add(o.id);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return l.apply(this,arguments)})},{key:"handleEdgeMapping",value:(u=_(L().mark((function e(t,r,n,o){var i,a,c;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.jsonGraphData(o);case 2:i=e.sent,a=i.outV,c=i.inV,r[i.id]=j(j({},i),{},{edgeType:i.label,source:a.id,target:c.id}),t[a.id]=j(j({},a),{},{nodeType:a.label}),n.add(a.id),t[c.id]=j(j({},c),{},{nodeType:c.label}),n.add(c.id);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return u.apply(this,arguments)})},{key:"handleTableResult",value:(c=_(L().mark((function e(t,r){var n,o,i,a,c,u,l,s;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.entries(),o={},i=P(n),e.prev=3,i.s();case 5:if((a=i.n()).done){e.next=22;break}if(c=a.value,u=E(c,2),l=u[0],s=u[1],l instanceof w().process.EnumValue&&(l="~".concat(l.elementName)),"number"!=typeof s){e.next=13;break}o[l]=s,e.next=20;break;case 13:if(!(s instanceof w().structure.Vertex||s instanceof w().structure.Edge)){e.next=19;break}return e.next=16,this.jsonGraphData(s);case 16:o[l]=e.sent,e.next=20;break;case 19:o[l]=JSON.stringify(s);case 20:e.next=5;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(3),i.e(e.t0);case 27:return e.prev=27,i.f(),e.finish(27);case 30:t.push(o);case 31:case"end":return e.stop()}}),e,this,[[3,24,27,30]])}))),function(e,t){return c.apply(this,arguments)})},{key:"queryNodesProperties",value:(a=_(L().mark((function e(t){var r,n,o,i,a,c,u,l,s,f,p,d,y,h,m;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},t&&0!==t.length){e.next=3;break}return e.abrupt("return",r);case 3:return n="g.V(".concat(t.join(","),").elementMap()"),e.next=6,this.driver.submit(n);case 6:o=e.sent,i=P(o);try{for(i.s();!(a=i.n()).done;){c=a.value,u=null,l=c.entries(),s={},f=P(l);try{for(f.s();!(p=f.n()).done;)d=p.value,y=E(d,2),h=y[0],m=y[1],h instanceof w().process.EnumValue?"id"===h.elementName&&(u=m):s[h]=m}catch(e){f.e(e)}finally{f.f()}r[u]=s}}catch(e){i.e(e)}finally{i.f()}return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"queryEdgesProperties",value:(i=_(L().mark((function e(t){var r;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"close",value:(o=_(L().mark((function e(){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.driver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.driver.close();case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}],r&&N(t.prototype,r),n&&N(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),M=R;function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function G(){G=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==r&&n.call(w,a)&&(b=w);var S=g.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==F(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(F(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(O.prototype),l(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function q(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){q(i,n,o,a,c,"next",e)}function c(e){q(i,n,o,a,c,"throw",e)}a(void 0)}))}}var B=new Map,U=function(){var e=z(G().mark((function e(t){var r,n,o,i,a,c,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.language,n=t.endpoint,o=t.script,i=t.username,a=t.password,c="".concat(r,"_").concat(n),B.has(c)||("cypher"===r&&B.set(c,new v(n,i,a)),"gremlin"===r&&B.set(c,new M(n,i,a))),u=B.get(c),e.abrupt("return",u.query(o));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},54326:function(e,t,r){r.d(t,{DI:function(){return dn},tk:function(){return en},v6:function(){return me}});var n=r(50959),o=r(17905),i=r(38943),a=r(84155),c=r(84310),u=c.Toolbar,l=r(33741);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){var n;return n=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==s(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y={data:{nodes:[],edges:[]},source:{nodes:[],edges:[]},groups:[],width:200,height:500,dataMap:{},render:"2D",graph:null,isReady:!1,emitter:null,nodeStyle:{},edgeStyle:{},nodeStatus:{},edgeStatus:{},graphId:"",schema:{nodes:[],edges:[]},isLoading:!1,getService:function(){return function(){}}},h=function(){return(0,l.qp)()},m=function(e){var t=e.children,r=e.id,o=e.services;return n.createElement(l.ZP,{id:r,store:p(p({},y),{},{getService:function(e){var t=o[e];return t||(console.error("service not found: ".concat(e)),function(){})}})},t)},v=r(53531),g=r(57526);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){var n;return n=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==b(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=function(e){var t=e.children,r=h(),o=r.store,i=r.updateStore,a=v.Z.useToken().token,c=o.graph,u=o.emitter,l=E(n.useState({visible:!1,data:{},x:0,y:0}),2),s=l[0],f=l[1],p=s.visible,d=(s.data,s.x),y=s.y;return n.useEffect((function(){return c&&u&&(u.on("node:contextmenu",(function(e){var t=e.node,r=e.evt,n=r.offsetX,o=r.offsetY;f((function(e){return w(w({},e),{},{visible:!0,data:t,x:n,y:o})})),i((function(e){e.nodeStatus=w(w({},e.nodeStatus),{},S({},t.id,{selected:!0}))}))})),u.on("node:click",(function(){f((function(e){return w(w({},e),{},{visible:!1,data:{},x:0,y:0})}))}))),null==u||u.on("canvas:click",(function(){f((function(e){return w(w({},e),{},{visible:!1,data:{},x:0,y:0})}))})),function(){null==u||u.off("node:click"),null==u||u.off("node:contextmenu")}}),[u]),n.createElement("div",{style:{opacity:p?1:0,visibility:p?"visible":"hidden",position:"absolute",left:d,top:y,width:180,height:"auto",backgroundColor:a.colorBgContainer,boxShadow:a.boxShadow,zIndex:100,padding:"4px",borderRadius:"8px"}},n.createElement(g.Z,{vertical:!0,gap:8},t))},k=r(82714),P=r(85971),T=r(65586),C=r(97585),L=r(48722),I=r(91702),_=r(75875),A=[_.blue[4],_.orange[4],_.purple[4],_.lime[4],_.magenta[4],_.cyan[4],_.gold[8],_.red[6],"#000","#f0f0f0"],N=[0,.1,.5,1,2,3,4,6,8,10,20],Z=[0,.1,.5,1,1.5,2,2.5,3,3.5,4,4.5,5],D=A[6],R=N[4],M="rgba(255, 255, 255, 0.8)",F="#f0f0f0",G=Z[3],q="#000";function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){var n;return n=function(e,t){if("object"!=z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==z(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H=v.Z.useToken,V={width:"16px",height:"16px",display:"block",borderRadius:"50%",cursor:"pointer"},Q=function(e){var t,r=e.color,o=e.size,i=e.caption,c=e.properties,u=e.label,l=e.onChange,s=e.type,f=e.captionStatus,p=H().token,d=c;Array.isArray(c)&&(d=c.reduce((function(e,t){return U(U({},e),{},Y({},t.name,t[s]))}),{}));var y=function(e,t){l&&l(Y({type:s,label:u,color:r,size:o,caption:i,properties:c,captionStatus:f},e,t))},h="2px solid ".concat(p.colorPrimary);return n.createElement("div",{style:{maxWidth:"220px",overflow:"hidden",padding:"12px"}},n.createElement(g.Z,{gap:12,style:{padding:"6px 0px"}},n.createElement(k.Z.Text,{style:{flexShrink:0}},n.createElement(a.Z,{id:"Color"})),n.createElement(L.Z,{wrap:!0},A.map((function(e){var t=r==e;return n.createElement("span",{key:e,onClick:function(){return y("color",e)},style:U(U({},V),{},{backgroundColor:e,boxSizing:"border-box",border:t?h:"none"})})})))),"node"===s&&n.createElement(g.Z,{gap:12,style:{padding:"6px 0px"}},n.createElement(k.Z.Text,{style:{flexShrink:0}},n.createElement(a.Z,{id:"Size"})),n.createElement(L.Z,{size:8,wrap:!0},N.map((function(e){var t=o==e,r=4*Math.sqrt(Math.max(0,e))+2;return n.createElement("span",{key:e,onClick:function(){return y("size",e)},style:U(U({},V),{},{width:"".concat(2*r,"px"),height:"".concat(2*r,"px"),background:"#ddd",boxSizing:"border-box",border:t?h:"none"})})})))),"edge"===s&&n.createElement(g.Z,{gap:12,style:{padding:"6px 0px"}},n.createElement(k.Z.Text,{style:{flexShrink:0}},n.createElement(a.Z,{id:"LineWidth"})),n.createElement(L.Z,{wrap:!0},Z.map((function(e){var t=o==e;return n.createElement("span",{key:e,onClick:function(){return y("size",e)},style:{cursor:"pointer",width:"".concat(5*e,"px"),height:"16px",background:"#ddd",display:"block",boxSizing:"border-box",border:t?h:"none"}})})))),n.createElement(g.Z,{gap:12,style:{padding:"6px 0px"}},n.createElement(k.Z.Text,{style:{flexShrink:0}},n.createElement(a.Z,{id:"Caption"})),n.createElement(L.Z,{wrap:!0},null===(t=Object.keys(d))||void 0===t?void 0:t.map((function(e){var t=i==e;return n.createElement("span",{key:e,style:{fontSize:"12px",color:p.colorTextSecondary,display:"block",borderRadius:"6px",padding:"0px 4px",boxSizing:"border-box",cursor:"pointer",background:p.colorBgBlur,border:t?h:"1px solid #ddd"},onClick:function(){return y("caption",e)}},e)})))),n.createElement(g.Z,{gap:12,style:{padding:"6px 0px"}},n.createElement(k.Z.Text,{style:{flexShrink:0}},n.createElement(a.Z,{id:"Caption Status"})),n.createElement(L.Z,{wrap:!0},n.createElement(I.ZP.Group,{value:f,onChange:function(e){y("captionStatus",e.target.value)}},n.createElement(I.ZP,{value:"hidden"},"hidden"),n.createElement(I.ZP,{value:"display"},"display")))))},W=function(e){var t=e.label,r=e.color,o=e.count,i=o?"".concat(t," (").concat(o,")"):t,a=(0,n.useRef)(null);return n.createElement(T.Z,{getPopupContainer:function(e){return a.current?a.current:e},trigger:"click",placement:"left",content:n.createElement(Q,e)},n.createElement(C.Z,{style:{textAlign:"center",borderRadius:"8px",backgroundColor:r,cursor:"pointer",minWidth:"60px",minHeight:"22px",color:"#000"},bordered:!1},i))},K=(0,n.memo)(W);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}var J=["properties"];function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X.apply(this,arguments)}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t,r){var n;return n=function(e,t){if("object"!=$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==$(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ae=k.Z.Title,ce=function(e){var t=h(),r=t.store,o=t.updateStore,i=r.nodeStyle,u=r.nodeStatus,l=r.data,s=r.edgeStatus,f=e.children,p=function(e,t){var r=t.nodeStatus,n=t.edgeStatus,o="node",i=e.nodes.find((function(e){var t=r[e.id];if(t&&t.selected)return t}));if(i)return{type:o,selectElement:i};var a=e.edges.find((function(e){var t=n[e.id];if(t&&t.selected)return t}));return a?{type:o="edge",selectElement:a}:{type:o,selectElement:null}}(l,{nodeStatus:u,edgeStatus:s}),d=p.selectElement,y=p.type;if(!d)return n.createElement("div",{style:{height:"100%"}},f);var m=d.label,v=d.properties,b=void 0===v?{}:v,x=d.id,w=function(e){return{dataSource:Object.entries(e).map((function(e){var t=oe(e,2),r=t[0];return{key:r,name:r,value:t[1]}})),columns:[{title:"name",dataIndex:"name",key:"name"},{title:"value",dataIndex:"value",key:"value"}]}}(b),S=w.dataSource,E=w.columns,O=i[x]||i[m],j="node"===y?"Vertex Properties":"Edge Properties";return n.createElement(g.Z,{vertical:!0,gap:12,style:te({padding:"12px 0px"},e.style||{})},n.createElement(g.Z,{justify:"space-between"},n.createElement(ae,{level:5,style:{margin:"0px"}},n.createElement(a.Z,{id:j})),n.createElement(K,X({},O,{label:m,type:y,properties:b,onChange:function(e){e.properties;var t=ne(e,J);o((function(e){var n=te(te({},e.nodeStyle),{},re({},x,t));e.nodeStyle=n,c.Utils.storage.set("GRAPH_".concat(r.graphId,"_STYLE"),{nodeStyle:n,edgeStyle:te({},e.edgeStyle)})}))}}))),n.createElement(P.Z,{style:{height:"100%",width:"100%"},showHeader:!1,columns:E,dataSource:S,scroll:{y:410},pagination:!1}))},ue=c.Icons.Graph3D,le=c.Icons.Graph2D,se=function(e){var t=h(),r=t.updateStore,u=t.store.render,l=e.title,s=void 0===l?"Switch graph view dimensions":l,f=(e.placement,(0,c.useStudioProvier)().isLight?"#000":"#ddd"),p="2D"===u?n.createElement(ue,{style:{color:f}}):n.createElement(le,{style:{color:f}});return n.createElement(o.Z,{title:n.createElement(a.Z,{id:"".concat(s)}),placement:"left"},n.createElement(i.ZP,{onClick:function(){r((function(e){e.render="2D"===u?"3D":"2D"}))},icon:p,type:"text"}))};function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ye(e,t,r){var n;return n=function(e,t){if("object"!=fe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==fe(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var he=c.Utils.storage;function me(e,t){var r=he.get("GRAPH_".concat(t,"_STYLE"));if(r)return r;var n={nodeStyle:{},edgeStyle:{}};return e.nodes.forEach((function(e,t){var r=e.label;n.nodeStyle[r]={label:e.label,size:R,color:A[t],caption:Object.keys(e.properties||{})[0]||"id",captionStatus:"display"}})),e.edges.forEach((function(e,t){var r=e.label;n.edgeStyle[r]={label:e.label,size:G,color:F,caption:Object.keys(e.properties||{})[0]||"id",captionStatus:"display"}})),n}function ve(e){var t={};return e.nodes.forEach((function(e){var r=e.id;t[r]=de(de({},e),{},{neighbors:[],links:[]})})),e.edges.forEach((function(e){var r=e.id,n=e.source.id||e.source,o=e.target.id||e.target;t[r]=e;var i=t[n],a=t[o];i&&a?(i.neighbors.push(o),a.neighbors.push(n),i.links.push(r),a.links.push(r)):console.log("edge source or target node not found",n,o)})),t}var ge=r(21896),be=r(19363),xe=r(92067),we={color:F,size:G},Se={color:D,size:R},Ee=function(e,t,r){var n=e.id,o=e.label,i=e.__style,a=t[n]||t[o]||i;return a||("edge"===r?we:Se)};function Oe(e){return function(e){if(Array.isArray(e))return je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return je(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ke=function(e,t,r){return function(n,o){if(void 0!==e.x&&void 0!==e.y){var i,a,c,u,l,s=Ee(e,n),f=(a=o,c=(i=e).id,u=i.label,l=i.__status,a[c]||a[u]||l||{}),p=s.color,d=s.size,y=s.caption,h=s.captionStatus,m=(s.icon,s.captionMode,f.selected),v=f.hovering,g=e.properties&&e.properties[y],b=2*Math.sqrt(Math.max(0,d))+1;if((m||v)&&(t.beginPath(),t.arc(e.x,e.y,1.2*b,0,2*Math.PI,!1),t.fillStyle="#000",v&&(t.fillStyle="rgba(255,0,0,0.3)"),t.fill()),t.beginPath(),t.arc(e.x,e.y,b,0,2*Math.PI,!1),t.fillStyle=p,t.fill(),"display"===h&&g){var x=Math.min(.5*r,14/r);if(r>3&&r<15){t.font="".concat(x,"px Sans-Serif");var w=[t.measureText(g).width,x].map((function(e){return e+.2*x}));t.fillStyle=M,t.fillRect.apply(t,[e.x-w[0]/2,1.2*b+e.y-w[1]/2].concat(Oe(w))),t.textAlign="center",t.textBaseline="middle",t.fillStyle=p,t.fillText(g,e.x,e.y+1.2*b),e.__bckgDimensions=w}if(r>=15){var S=16/r;t.font="".concat(S,"px Sans-Serif"),t.fillStyle=M,t.textAlign="center",t.textBaseline="middle",t.fillStyle="#fff",function(e,t){for(var r=t.text,n=void 0===r?"":r,o=t.x,i=t.y,a=t.maxWidth,c=t.lineHeight,u=String(n).split(" "),l="",s=[],f=0;f<u.length;f++){var p=l+u[f]+" ";e.measureText(p).width>a&&f>0?(s.push(l.trim()),l=u[f]+" "):l=p}s.push(l.trim());var d=s.length*c,y=i-d/2;d<a&&s.forEach((function(t,r){e.fillText(t,o,y+r*c)}))}(t,{text:g,x:e.x,y:e.y+S/2,maxWidth:2*b*.8,lineHeight:1.2*S})}}t.restore()}}};function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}var Te=function(e,t,r){return function(n,o,i){if(!(i||r<3)){var a=Ee(e,n,"edge"),c=(a.color,a.size,a.caption),u=a.captionStatus,l=(a.icon,e.properties&&e.properties[c]);if("hidden"!==u&&c&&l){var s=1*l.length,f=e.source,p=e.target;if("object"===Pe(f)&&"object"===Pe(p)&&void 0!==f.x&&void 0!==f.y&&void 0!==p.x&&void 0!==p.y){var d={x:f.x+(p.x-f.x)/2,y:f.y+(p.y-f.y)/2},y={x:p.x-f.x,y:p.y-f.y},h=(Math.sqrt(Math.pow(y.x,2)+Math.pow(y.y,2)),Math.atan2(y.y,y.x));h>Math.PI/2&&(h=-(Math.PI-h)),h<-Math.PI/2&&(h=-(-Math.PI-h)),t.save(),t.font="1px Sans-Serif";t.font="".concat(2,"px Sans-Serif");var m=[s+.4,2.4];t.translate(d.x,d.y),t.rotate(h),t.fillStyle="rgba(255, 255, 255, 0.8)",t.fillRect.apply(t,[-m[0]/2,-m[1]/2].concat(m)),t.textAlign="center",t.textBaseline="middle",t.fillStyle="darkgrey",t.fillText(l,0,0),t.restore()}}}}},Ce=r(68490),Le=r(44200);function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ae=null;function Ne(e){var t=e.onInit,r=(e.onReady,e.onDestroy,e.options,e.render),o=void 0===r?"2D":r,i=e.data,a=e.nodeStyle,u=e.edgeStyle,l=e.nodeStatus,s=e.edgeStatus,f=Ie((0,n.useState)(!1),2),p=f[0],d=f[1],y=(0,n.useRef)(null),h=(0,n.useRef)(null),m=(0,n.useRef)(null),v=(0,n.useRef)(!1);return(0,n.useEffect)((function(){if(m.current){h.current=(0,xe.Z)();var e=m.current.offsetWidth,r=m.current.offsetHeight,n=null;v.current=!1,"2D"===o&&(n=(0,ge.Z)()(m.current)).width(e).height(r).graphData(c.Utils.fakeSnapshot({nodes:i.nodes,links:i.edges})).nodeRelSize(2).nodeCanvasObjectMode((function(){return"replace"})).nodeCanvasObject((function(e,t,r){ke(e,t,r)(a,l)})).linkLabel((function(e){return Ee(e,u,"edge").caption})).linkWidth((function(e){return Ee(e,u,"edge").width})).linkColor((function(e){return Ee(e,u,"edge").color})).linkDirectionalArrowLength(3).linkDirectionalArrowRelPos(.9).linkCanvasObjectMode((function(){return"after"})).linkCanvasObject((function(e,t,r){Te(e,t,r)(u,s,i.edges.length>100)})).d3Force("collide",(0,Ce.Z)().radius((function(e){return Ee(e,a).size+5}))).d3Force("center",(0,Le.Z)().strength(1)).onNodeHover((function(e){var t;null===(t=h.current)||void 0===t||t.emit("node:hover",e)})).onNodeClick((function(e){var t;null===(t=h.current)||void 0===t||t.emit("node:click",e)})).onNodeRightClick((function(e,t){var r;null===(r=h.current)||void 0===r||r.emit("node:contextmenu",{node:e,evt:t})})).onBackgroundClick((function(e){var t;null===(t=h.current)||void 0===t||t.emit("canvas:click",e)})).onLinkClick((function(e){var t;null===(t=h.current)||void 0===t||t.emit("edge:click",e)})),"3D"===o&&(n=(0,be.Z)()(m.current).width(e).height(r).enableNodeDrag(!1).nodeRelSize(2).nodeVal((function(e){return Ee(e,a).size})).nodeLabel((function(e){return e&&e.properties&&e.properties[Ee(e,a).caption]})).nodeColor((function(e){return Ee(e,a).color})).linkLabel((function(e){return e&&e.properties&&e.properties[Ee(e,u).caption]})).linkWidth((function(e){return Ee(e,u,"edge").width})).linkColor((function(e){return Ee(e,u,"edge").color})).linkDirectionalArrowLength(3).linkDirectionalArrowRelPos(.9).graphData(c.Utils.fakeSnapshot({nodes:i.nodes,links:i.edges})).onNodeClick((function(e){var t;null===(t=h.current)||void 0===t||t.emit("node:click",e)})).onNodeRightClick((function(e,t){var r;null===(r=h.current)||void 0===r||r.emit("node:contextmenu",{node:e,evt:t})})).onBackgroundClick((function(e){var t;null===(t=h.current)||void 0===t||t.emit("canvas:click",e)})).onLinkClick((function(e){var t;null===(t=h.current)||void 0===t||t.emit("edge:click",e)}))),y.current=n,d(!0),null==t||t(n,h.current,{width:e,height:r});var f=c.Utils.debounce((function(){if(m.current){var e=m.current.offsetWidth,t=m.current.offsetHeight;y.current&&y.current.width(e).height(t)}}),200),p=new ResizeObserver(f);return p.observe(m.current),function(){y.current&&y.current._destructor(),m.current&&p.unobserve(m.current)}}}),[o]),(0,n.useEffect)((function(){if(y.current){var e=c.Utils.fakeSnapshot({nodes:i.nodes,links:i.edges}),t=function(e){var t=1.2+.5*Math.floor((e-1)/500);return 1e3*Math.min(t,15)}(e.nodes.length);v.current=!1,y.current.cooldownTime(t),y.current.onEngineStop((function(){v.current=!0,console.log("engine stop",v.current)})),y.current.graphData(e),Ae=setTimeout((function(){var e;null===(e=y.current)||void 0===e||e.zoomToFit(400,Math.max(400/(i.nodes.length+1),20))}),1200)}return function(){clearTimeout(Ae)}}),[i]),(0,n.useEffect)((function(){if(y.current){var e=y.current;"2D"===o&&e.nodeCanvasObject((function(e,t,r){ke(e,t,r)(a,l)})),"3D"===o&&e.nodeLabel((function(e){return Ee(e,a).caption})).nodeColor((function(e){return Ee(e,a).color})).nodeLabel((function(e){return e&&e.properties&&e.properties[Ee(e,a).caption]}))}}),[a,l]),(0,n.useEffect)((function(){if(y.current){var e=y.current.graphData().links.length,t=y.current;"2D"===o&&t.linkCanvasObject((function(t,r,n){Te(t,r,n)(u,s,e>100)})).linkColor((function(e){var t=Ee(e,u,"edge").color,r=s[e.id];return r&&r.selected?q:t})).linkLabel((function(e){var t=Ee(e,u,"edge").caption,r=e&&e.properties&&e.properties[t];return t&&r?"".concat(t,": ").concat(r):""})).linkWidth((function(e){var t=Ee(e,u,"edge").size,r=s[e.id];return r&&r.selected?t+1:t})).linkDirectionalParticles(1).linkDirectionalParticleWidth((function(e){var t=s[e.id];return t&&t.selected?Ee(e,u,"edge").size+1:0})),"3D"===o&&t.linkColor((function(e){var t=Ee(e,u,"edge").color,r=s[e.id];return r&&r.selected?q:t})).linkLabel((function(e){var t=Ee(e,u,"edge").caption,r=e&&e.properties&&e.properties[t];return t&&r?"".concat(t,": ").concat(r):""})).linkWidth((function(e){var t=Ee(e,u,"edge").size,r=s[e.id];return r&&r.selected?t+1:t})).linkDirectionalParticles(1).linkDirectionalParticleWidth((function(e){var t=s[e.id];return t&&t.selected?Ee(e,u,"edge").size+1:0}))}}),[u,s]),{graph:y.current,emitter:h.current,containerRef:m,isReady:p}}function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}var De=["id","style","children"];function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e,t,r){var n;return n=function(e,t){if("object"!=Ze(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ze(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Ge=(0,n.memo)((0,n.forwardRef)((function(e,t){var r=e.id,o=e.style,i=(e.children,Ne(Fe(e,De))),a=i.graph,c=i.containerRef,u=i.isReady;(0,n.useImperativeHandle)(t,(function(){return a}),[u]);var l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){Me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({height:"inherit",position:"relative"},o);return n.createElement("div",{id:"GRAPH_".concat(r),ref:c,style:l})}))),qe=Ge,ze=function(e){var t=h(),r=t.id,o=t.store,i=t.updateStore,a=o.data,c=o.render,u=o.nodeStyle,l=o.edgeStyle,s=o.nodeStatus,f=o.edgeStatus,p=v.Z.useToken().token;return n.createElement("div",{style:{width:"100%",height:"100%"}},n.createElement(qe,{id:r,nodeStyle:u,edgeStyle:l,nodeStatus:s,edgeStatus:f,style:{width:"100%",height:"100%",background:p.colorBgBase},data:a,render:c,onInit:function(e,t,r){var n=r.width,o=r.height;i((function(r){r.graph=e,r.emitter=t,r.width=n,r.height=o}))}}))},Be=r(77469),Ue=r(7234),Ye=r(96149),He=r(31105),Ve=r(7706),Qe=r(78620);function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){Je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Je(e,t,r){var n;return n=function(e,t){if("object"!=We(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=We(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==We(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e){return function(e){if(Array.isArray(e))return rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){if(e){if("string"==typeof e)return rt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rt(e,t):void 0}}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var nt=function(e){return Object.prototype.toString.call(e)},ot=function(e){var t=new Set;return e.forEach((function(e){var r=e.properties;r&&"[object Array]"===nt(r)&&r.forEach((function(e){"number"===e.type&&t.add(e.name)})),r&&function(e){return"[object Object]"===nt(e)}(r)&&Object.keys(r).forEach((function(e){"number"===r[e]&&t.add(e)}))})),et(t.values()).map((function(e){return{label:e,value:e}}))},it=function(){var e=h(),t=e.store,r=e.updateStore,o=t.schema,i=t.data,a=o.nodes,c=(o.edges,Xe((0,n.useState)("linear"),2)),u=c[0],l=c[1],s=ot(a),f=function(e,t){var r=e.nodes,n={};return t.map((function(e){var t=e.value;return n[t]={min:1/0,max:-1/0},t})),r.forEach((function(e){var t=e.properties;e.id,t&&Object.keys(t).forEach((function(e){var r=n[e];if(r){var o=t[e];r.min=Math.min(r.min,o),r.max=Math.max(r.max,o)}}))})),n}(i,s);return n.createElement(g.Z,{vertical:!0,gap:8},n.createElement(k.Z.Text,{type:"secondary"},"The size of nodes or width of edges is linearly scaled based on the range of values in the selected property field."),n.createElement(g.Z,{justify:"space-between",align:"center",gap:12},n.createElement(k.Z.Text,{type:"secondary"},"Choose Scaler:"),n.createElement(Ue.default,{defaultValue:"linear",style:{flex:1},options:[{label:"Linear",value:"linear"},{label:"Log",value:"log"},{label:"Pow",value:"pow"}],onChange:function(e){l(e)}})),n.createElement(g.Z,{justify:"space-between",align:"center",gap:12},n.createElement(k.Z.Text,{type:"secondary"},"Choose Property:"),n.createElement(Ue.default,{defaultValue:"",style:{flex:1},options:s,onChange:function(e){var t=i.nodes,n=(i.edges,f[e]),o=n.min,a=n.max,c=[.01,20],l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"log",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(e){case"linear":return(0,He.Z)().domain(t).range(r);case"log":return 0===t[0]&&(t[0]=t[0]+1e-5),0===r[0]&&(r[0]=r[0]+1e-5),(0,Ve.Z)(t,r);case"pow":return(0,Qe.ZP)().exponent(n).domain(t).range(r);default:throw new Error("Unknown scale type: ".concat(e))}}(u,[o,a],c),s={};console.log(o,a,f,c),t.forEach((function(t){var r=t.properties,n=t.id,i=t.label;if(r){var a=Number(r[e]),c=l(a);s[n]={label:i,color:isNaN(c)?o:c}}})),r((function(e){Object.keys(s).forEach((function(t){var r=s[t],n=r.color,o=r.label;e.nodeStyle[t]=$e($e($e({},e.nodeStyle[o]),e.nodeStyle[t]),{},{size:n})}))}))}})))},at=function(e){return n.createElement(Ye.Z,{expandIconPosition:"end",defaultActiveKey:["advanced"],expandIcon:function(e){var t=e.isActive;return n.createElement(Be.Z,{rotate:t?90:0})},items:[{key:"advanced",label:"Advanced Setting",children:n.createElement(it,null)}]})},ct=["properties","style"],ut=["properties","style"];function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function st(){return st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},st.apply(this,arguments)}function ft(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach((function(t){yt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yt(e,t,r){var n;return n=function(e,t){if("object"!=lt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==lt(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ht=k.Z.Title,mt=k.Z.Text,vt=function(e){var t=h(),r=t.updateStore,o=t.store,i=o.schema,u=o.nodeStyle,l=o.edgeStyle,s=o.graphId,f=e.showHeader,p=function(e){console.log("value",e);var t=e.caption,n=e.color,o=e.label,i=e.size,a=e.type,u=e.captionStatus;r((function(e){if("node"===a){var r=dt(dt({},e.nodeStyle),{},yt({},o,{color:n,size:i,caption:t,captionStatus:u}));e.nodeStyle=r,c.Utils.storage.set("GRAPH_".concat(s,"_STYLE"),{nodeStyle:r,edgeStyle:dt({},e.edgeStyle)})}if("edge"===a){var l=dt(dt({},e.edgeStyle),{},yt({},o,{color:n,size:i,caption:t,captionStatus:u}));e.edgeStyle=l,c.Utils.storage.set("GRAPH_".concat(s,"_STYLE"),{nodeStyle:dt({},e.nodeStyle),edgeStyle:l})}}))},d=i.nodes.map((function(e){return dt(dt({},e),{},{style:u[e.label]})})),y=i.edges.map((function(e){return dt(dt({},e),{},{style:l[e.label]})}));return n.createElement(g.Z,{vertical:!0,gap:12},f&&n.createElement(ht,{level:3,style:{margin:"0px"}},n.createElement(a.Z,{id:"Style Setting"})),n.createElement(mt,{type:"secondary"},"You can click on each label to set the color, size, and display text for vertices and edges."),n.createElement(ht,{level:5,style:{margin:"0px"}},n.createElement(a.Z,{id:"Vertex Labels"})),n.createElement(L.Z,{wrap:!0,size:[0,6]},d.map((function(e,t){var r=e.properties,o=e.style,i=ft(e,ct);return n.createElement(K,st({key:t,properties:r},i,o,{type:"node",onChange:p}))}))),n.createElement(ht,{level:5,style:{margin:"0px"}},n.createElement(a.Z,{id:"Edge Labels"})),n.createElement(L.Z,{wrap:!0,size:[0,6]},y.map((function(e,t){var r=e.properties,o=e.style,i=ft(e,ut);return n.createElement(K,st({key:t,properties:r},i,o,{type:"edge",onChange:p}))}))),n.createElement(at,null))},gt=n.memo(vt);function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){St(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function St(e,t,r){var n;return n=function(e,t){if("object"!=bt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==bt(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Et(e){var t=new Map,r=new Map;return e.nodes.forEach((function(e){var n=e.id;r.set(n,wt(wt({},e),{},{neighbors:[],inNeighbors:[],outNeighbors:[],inEdges:[],outEdges:[]})),t.set(n,r.get(n))})),e.edges.forEach((function(e,n){var o=e.source.id||e.source,i=e.target.id||e.target,a=e.id;if(!a)throw new Error("edge id is required");var c=r.get(o),u=r.get(i);t.has(a)||t.set(a,e),c&&u?(c.outEdges.push(a),c.outNeighbors.push(i),u.inEdges.push(a),u.inNeighbors.push(o),c.neighbors.push(i),u.neighbors.push(o)):console.log("edge source or target node not found",o,i)})),t}var Ot=function(e){var t=e.data,r=e.schema,o=e.graphId,i=h().updateStore;return n.useEffect((function(){if(t){var e=me(r,o);i((function(n){n.data=t,n.source=t,n.schema=r,n.graphId=o,n.nodeStyle=e.nodeStyle,n.edgeStyle=e.edgeStyle,n.dataMap=Et(t)}))}}),[t,r,o]),null},jt=(0,n.memo)(Ot),kt=function(e){var t=e.title,r=void 0===t?"Zoom to fitview":t,u=e.placement,l=void 0===u?"left":u,s=h().store.graph,f=(0,c.useStudioProvier)().isLight?"#000":"#ddd";return n.createElement(o.Z,{title:n.createElement(a.Z,{id:"".concat(r)}),placement:l},n.createElement(i.ZP,{onClick:function(){null==s||s.zoomToFit(1e3)},icon:n.createElement(c.Icons.ZoomFit,{style:{color:f}}),type:"text"}))},Pt=function(e){var t=h(),r=t.store,o=t.updateStore,i=r.emitter;return(0,n.useEffect)((function(){var e=function(e){o((function(e){e.nodeStatus={},e.edgeStatus={}}))};return null==i||i.on("canvas:click",e),function(){null==i||i.off("canvas:click",e)}}),[i]),null};var Tt=r(4081),Ct=r(62432);function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return It(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return It(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _t(e,t){if(null!=e&&"string"==typeof t){for(var r=0,n="",o=t.length,i=e;r<o;){var a=t[r];if("."===a){if(null==(i=i[n]))return;n=""}else n+=a;r++}return i[n]}}var At=function(e,t){for(var r=t.width,n=t.height,o=t.screen2GraphCoords,i=t.nodeStyle,a=t.clusterKey,u=c.Utils.groupBy(e,(function(e){return _t(e,a)})),l={name:"root",children:[]},s=0,f=Object.entries(u);s<f.length;s++){var p=Lt(f[s],2),d=p[0],y=p[1];l.children.push({name:d,children:y})}var h=(0,Tt.ZP)(l).sort((function(e,t){try{return Number(e.data.name)-Number(t.data.name)}catch(e){return 0}}));(0,Ct.Z)().size([r,n]).padding(20).radius((function(e){var t=Ee(e.data,i,"node").size;return Math.round(4*Math.sqrt(Math.max(0,t))+2-10)}))(h);var m=(h.children||[]).map((function(e){var t=o(e.x,e.y),r=t.x,n=t.y,a=Ee({label:e.data.name},i,"node").color;return{id:e.data.name,cluster:e.data.name,x:r,y:n,r:e.r,color:a,children:e.data.children.map((function(e){return e.id}))}})),v=new Map;return m.forEach((function(e){v.set(e.id,e)})),{groups:m,groupsMap:v}},Nt=r(80621),Zt=r(5271),Dt=r(56617);function Rt(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;function o(o){r.forEach((function(r){var i=e.get(_t(r,t));if(i){var a=i.x-r.x,c=i.y-r.y;r.vx+=a*o*n,r.vy+=c*o*n}}))}return o.initialize=function(e){return r=e},o}function Mt(e,t){var r;function n(n){r.forEach((function(r){var o=e.get(_t(r,t));if(o){var i=r.x-o.x,a=r.y-o.y,c=Math.sqrt(i*i+a*a),u=o.r-(r.size||3);if(c>u){var l=(c-u)/c*n;r.x-=i*l,r.y-=a*l}}}))}return n.initialize=function(e){return r=e},n}var Ft=function(){var e=h(),t=e.store,r=e.updateStore,n=t.graph,o=t.render,i=t.nodeStyle,a=t.width,u=t.height,l=c.Utils.fakeSnapshot(t.data);return{enableCluster:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"label";if("2D"===o&&n){n.zoom(1);var t=At(l.nodes,{width:a,height:u,screen2GraphCoords:n.screen2GraphCoords,nodeStyle:i,clusterKey:e}),c=t.groups,s=t.groupsMap;n.d3Force("cluster",Mt(s,e)),n.d3Force("radial",Rt(s,e)),n.d3Force("center",null),n.d3Force("charge",null),n.d3Force("link",null),n.d3Force("collide",Dt.Z().radius((function(e){var t=Ee(e,i).size;return Math.round(4*Math.sqrt(Math.max(0,t))+2)}))),n.onRenderFramePost((function(e,t){c.forEach((function(t){var r=t.r,n=t.x,o=t.y,i=t.color,a=t.cluster;e.beginPath(),e.setLineDash([5,5]),e.arc(n,o,r,0,2*Math.PI,!1),e.strokeStyle=i,e.lineWidth=1,e.stroke(),e.font="10px Arial",e.fillStyle=i,e.textAlign="center";var c=a,u=n,l=o-r-6;e.fillText(c,u,l)}))})),r((function(e){e.groups=c}))}if("3D"===o&&n){var f=At(l.nodes,{width:a,height:u,screen2GraphCoords:function(e,t){return{x:e,y:t}},nodeStyle:i,clusterKey:e}),p=f.groupsMap;n.d3Force("cluster",Mt(p,e)),n.d3Force("radial",Rt(p,e))}n&&n.d3ReheatSimulation()},disableCluster:function(){"2D"===o&&n&&(n.d3Force("charge",(0,Nt.Z)()),n.d3Force("center",(0,Le.Z)()),n.d3Force("cluster",null),n.d3Force("radial",null),n.d3Force("link",(0,Zt.Z)().links(l.edges).id((function(e){return e.id}))),n.onRenderFramePost((function(){}))),"3D"===o&&n&&(n.d3Force("cluster",null),n.d3Force("radial",null))}}};function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(r),!0).forEach((function(t){Bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bt(e,t,r){var n;return n=function(e,t){if("object"!=Gt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Gt(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ht=function(e){var t=Ft(),r=t.enableCluster,u=t.disableCluster,l=Ut(n.useState({cluster:!1}),2),s=l[0],f=l[1],p=s.cluster,d=(0,c.useStudioProvier)().isLight?"#000":"#ddd";return n.createElement(o.Z,{title:n.createElement(a.Z,{id:"Clustering layout"}),placement:"left"},n.createElement(i.ZP,{onClick:function(){f((function(e){return zt(zt({},e),{},{cluster:!e.cluster})})),p?u():r("label")},icon:n.createElement(c.Icons.Cluster,{style:{color:d}}),type:"text"}))};var Vt=r(83388);function Qt(e){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(r),!0).forEach((function(t){$t(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $t(e,t,r){var n;return n=function(e,t){if("object"!=Qt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Qt(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jt=function(e){var t=e.nodes,r=void 0===t?[]:t,n=e.edges,o=void 0===n?[]:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{selected:!0}},a=r.reduce((function(e,t){return Kt(Kt({},e),{},$t({},t.id,i(t)))}),{}),c=o.reduce((function(e,t){return Kt(Kt({},e),{},$t({},t.id,i(t)))}),{});return{nodeStatus:a,edgeStatus:c}},Xt=function(e,t,r){var n=e.graphData(),o=n.nodes,i=n.links.map((function(e){return Kt(Kt({},e),{},{source:e.source.id,target:e.target.id})})),a=o.filter((function(e){return-1!==r.indexOf(e.id)})),u=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=2*Math.PI/e.length;return e.map((function(e,o){var i=o*n;return Kt(Kt({},e),{},{x:t.x+r*Math.cos(i),y:t.y+r*Math.sin(i),z:0})}))}(t.nodes,a);return c.Utils.handleExpand({nodes:o,edges:i},{nodes:u,edges:t.edges})};function er(e){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},er(e)}function tr(){tr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==r&&n.call(w,a)&&(b=w);var S=g.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==er(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(er(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(O.prototype),l(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){or(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function or(e,t,r){var n;return n=function(e,t){if("object"!=er(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==er(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ir(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function ar(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ir(i,n,o,a,c,"next",e)}function c(e){ir(i,n,o,a,c,"throw",e)}a(void 0)}))}}function cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ur(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lr=function(e){var t=h(),r=t.store,o=t.updateStore,i=r.nodeStatus,a=r.schema,c=(r.dataMap,r.emitter),u=r.graph,l=r.data,s=r.getService,f=(0,n.useRef)(null),p=cr((0,n.useState)({itemMap:{},isLoading:!1}),2),d=p[0],y=p[1],m=d.itemMap,v=function(){var e=ar(tr().mark((function e(){var t;return tr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("queryNeighborItems")({schema:a});case 2:t=e.sent,y((function(e){return nr(nr({},e),{},{itemMap:t})}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){v()}),[a]);var g=Object.keys(i).filter((function(e){return i[e].selected})),b=l.nodes.find((function(e){return e.id===g[0]}));if(!b)return null;var x=function(){var e=ar(tr().mark((function e(t){var r,n,i,a,l,f,p;return tr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.key,null==c||c.emit("canvas:click"),o((function(e){e.isLoading=!0})),e.next=5,s("queryNeighborData");case 5:return n=e.sent,e.next=8,n({selectIds:g,key:r});case 8:(i=e.sent).nodes.length>0&&u?(a=Jt(i,(function(e){return{selected:!0}})),l=a.nodeStatus,f=a.edgeStatus,p=Xt(u,i,g),o((function(e){e.data=p,e.dataMap=ve(p),e.nodeStatus=l,e.edgeStatus=f,e.isLoading=!1}))):o((function(e){e.isLoading=!1}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.createElement("div",{ref:f},n.createElement(Vt.Z,{getPopupContainer:function(e){return f.current?f.current:e},onClick:x,style:{margin:"0px",padding:"0px",width:"103%"},mode:"vertical",items:[{key:"NeighborQuery",label:"NeighborQuery",children:m[b.label]}]}))},sr=r(9541);function fr(e){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(e)}function pr(){pr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==r&&n.call(w,a)&&(b=w);var S=g.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==fr(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(fr(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(O.prototype),l(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function dr(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var yr=function(e,t){var r=e.map((function(e,r){var n=t[e].properties,o=n.name,i=n.title,a="p".concat(r),c="l".concat(r),u="";return o&&(u="".concat(a,'.name = "').concat(o,'"\n      ')),i&&(u="".concat(a,'.title = "').concat(i,'"\n      ')),{whereScript:u,matchScript:"\n(".concat(a,")-[").concat(c,"]-(neighbor)"),returnScript:a+","+c}})),n=r.map((function(e){return e.matchScript})).join(","),o=r.map((function(e){return e.whereScript})).join(" AND "),i=r.map((function(e){return e.returnScript})).join(",");return console.log("\n  MATCH ".concat(n," \n  WHERE ").concat(o," \n  RETURN ").concat(i,",neighbor\n  ")),"\n  MATCH ".concat(n," \n  WHERE ").concat(o," \n  RETURN ").concat(i,",neighbor\n  ")},hr=function(e){var t=e.onQuery,r=h(),o=r.store,a=r.updateStore,c=o.nodeStatus,u=(o.schema,o.dataMap),l=o.emitter,s=o.graph,f=function(){var e,r=(e=pr().mark((function e(){var r,n,o,i,f,p;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a((function(e){e.isLoading=!0})),null==l||l.emit("canvas:click"),r=Object.keys(c).filter((function(e,t){return c[e].selected})),n=yr(r,u),e.next=6,t({script:n,language:"cypher"});case 6:(o=e.sent).nodes.length>0?(i=Jt(o,(function(e){return{selected:!0}})),f=i.nodeStatus,p=i.edgeStatus,a((function(e){var t=Xt(s,o,r);e.data=t,e.dataMap=ve(t),e.isLoading=!1,e.nodeStatus=f,e.edgeStatus=p}))):a((function(e){e.isLoading=!1}));case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){dr(i,n,o,a,c,"next",e)}function c(e){dr(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return n.createElement(i.ZP,{onClick:f,icon:n.createElement(sr.Z,null),type:"text",style:{width:"100%",justifyContent:"left"}},"CommonNeighbor")},mr=r(86132),vr=function(e){var t=h(),r=t.store,o=t.updateStore,a=r.nodeStatus,c=r.emitter;return n.createElement(i.ZP,{onClick:function(){null==c||c.emit("canvas:click");var e=Object.keys(a).filter((function(e,t){return a[e].selected}));o((function(t){var r={nodes:t.data.nodes.filter((function(t){return!e.includes(t.id)})),edges:t.data.edges.filter((function(t){return!e.includes(t.source)&&!e.includes(t.target)}))};t.data=r,t.dataMap=ve(r)}))},icon:n.createElement(mr.Z,null),type:"text",style:{width:"100%",justifyContent:"left"}},"Delete Vertex")},gr=r(10422),br=r(2941),xr=r(41468);function wr(e){return wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wr(e)}function Sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(r),!0).forEach((function(t){Or(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Or(e,t,r){var n;return n=function(e,t){if("object"!=wr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==wr(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pr=function(e){var t=e.onSelect,r=e.title,u=void 0===r?"Select nodes by box selection":r,l=e.placement,s=void 0===l?"left":l,f=h(),p=f.store,d=f.updateStore,y=f.id,m=p.graph,v=(0,c.useStudioProvier)().isLight?"#000":"#ddd",g=(0,n.useRef)(null),b=jr((0,n.useState)(!1),2),x=b[0],w=b[1];(0,n.useEffect)((function(){var e=function(e){"Escape"!==e.key&&"Enter"!==e.key||w(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]);(0,n.useEffect)((function(){var e=(0,xr.Z)(g.current);if(x&&m){var r=(m.graphData()||{}).nodes,n=void 0===r?[]:r,o=(0,br.Dm)().extent([[0,0],[e.node().clientWidth,e.node().clientHeight]]).on("end",(function(e){if(e.selection){var r=jr(e.selection,2),o=jr(r[0],2),i=o[0],a=o[1],c=jr(r[1],2),u=c[0],l=c[1],s=m.screen2GraphCoords(i,a,0),f=m.screen2GraphCoords(u,l,0);!function(e){var r=e.reduce((function(e,t){return Er(Er({},e),{},Or({},t.id,{selected:!0}))}),{});d((function(e){e.nodeStatus=r})),t&&t(e)}(n.filter((function(e){return e.x>=s.x&&e.x<=f.x&&e.y>=s.y&&e.y<=f.y})))}}));e.append("g").attr("class","brush").call(o)}return function(){e.select(".brush").remove()}}),[x,t,m]);var S=x?{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"block",background:"rgba(0, 0, 0, 0.05)"}:{display:"none"},E=document.getElementById("GRAPH_".concat(y));return E?n.createElement(n.Fragment,null,n.createElement(o.Z,{placement:s,title:n.createElement(a.Z,{id:"".concat(u)})},n.createElement(i.ZP,{icon:n.createElement(c.Icons.Lasso,{style:{color:v}}),type:"text",onClick:function(){w((function(e){return!e}))}})),gr.createPortal(n.createElement("svg",{ref:g,style:S}),E)):null},Tr=r(71433),Cr=function(e){return h().store.isLoading?n.createElement("div",{style:{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(0,0,0,0.1)"}},n.createElement(Tr.Z,null)):null},Lr=r(56977);function Ir(e){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ir(e)}function _r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(r),!0).forEach((function(t){Nr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nr(e,t,r){var n;return n=function(e,t){if("object"!=Ir(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ir(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zr=function(e){var t=h(),r=t.store,o=t.updateStore,a=r.nodeStatus,c=r.graph,u=(r.dataMap,r.emitter);return n.createElement(i.ZP,{onClick:function(){null==u||u.emit("canvas:click");var e=Object.keys(a).filter((function(e,t){return a[e].selected}))[0];if(c&&e){var t=Dr(c.graphData(),e);o((function(e){e.data=t,e.dataMap=ve(t)}))}},icon:n.createElement(Lr.Z,null),type:"text",style:{width:"100%",justifyContent:"left"}},"Delete LeafNodes")},Dr=function(e,t){var r=e.nodes,n=e.links,o=new Map;n.forEach((function(e){o.has(e.source.id)||o.set(e.source.id,[]),o.has(e.target.id)||o.set(e.target.id,[]),o.get(e.source.id).push(e),o.get(e.target.id).push(e)}));var i=new Set,a=new Set;(o.get(t)||[]).forEach((function(e){var r=e.source.id===t?e.target:e.source,n=o.get(r.id)||[],c=e.source.id===e.target.id;1!==n.length||c||(i.add(r.id),a.add(e))}));var c=n.filter((function(e){return!(a.has(e)&&e.source.id!==e.target.id)})).map((function(e){return Ar(Ar({},e),{},{source:e.source.id,target:e.target.id})}));return{nodes:r.filter((function(e){return!i.has(e.id)})),edges:c}},Rr=r(41794),Mr=function(e){var t=e.title,r=void 0===t?n.createElement(a.Z,{id:"Export graph json"}):t,u=e.placement,l=void 0===u?"left":u,s=h().store.data;return n.createElement(o.Z,{title:r,placement:l},n.createElement(i.ZP,{onClick:function(){c.Utils.createDownload(JSON.stringify({nodes:s.nodes,edges:s.edges},null,2),"graph.json")},icon:n.createElement(Rr.Z,null),type:"text"}))};function Fr(e){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(e)}function Gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(r),!0).forEach((function(t){zr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zr(e,t,r){var n;return n=function(e,t){if("object"!=Fr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Fr(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Br=function(){var e=h(),t=e.store,r=e.updateStore,o=t.emitter,i=t.data,a=t.graph;(0,n.useEffect)((function(){if(o&&a){var e=Et(i);o.on("node:click",(function(t){var n=t.id,o=e.get(n),i=o.outNeighbors,a=o.outEdges,c=i.reduce((function(e,t){return qr(qr({},e),{},zr({},t,{hovering:!0}))}),zr({},n,{selected:!0})),u=a.reduce((function(e,t){return qr(qr({},e),{},zr({},t,{selected:!0}))}),{});t&&r((function(e){e.nodeStatus=c,e.edgeStatus=u}))}))}return function(){null==o||o.off("node:click")}}),[o,i,a])};function Ur(e){return Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ur(e)}function Yr(e,t,r){var n;return n=function(e,t){if("object"!=Ur(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ur(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Hr=function(){var e=h(),t=e.store,r=e.updateStore,o=t.emitter,i=t.data,a=t.graph;(0,n.useEffect)((function(){if(o&&a){var e=Et(i);o.on("edge:click",(function(t){var n=t.id,o=e.get(n),i=o.source,a=o.target;t&&r((function(e){e.nodeStatus=Yr(Yr({},i,{hovering:!0}),a,{hovering:!0}),e.edgeStatus=Yr({},n,{selected:!0})}))}))}return function(){null==o||o.off("edge:click")}}),[o,i,a])},Vr=function(e){return Br(),Hr(),null};var Qr=r(84254);function Wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $r=function(e){var t=h().store.graph,r=Wr(n.useState(!1),2),a=r[0],c=r[1],u=a?"unFixed nodes when dragging":"Fixed nodes when dragging";return n.createElement(o.Z,{title:u,placement:"left"},n.createElement(i.ZP,{onClick:function(){t&&(a?t.onNodeDragEnd((function(e){e.fx=void 0,e.fy=void 0})):t.onNodeDragEnd((function(e){e.fx=e.x,e.fy=e.y}))),c(!a)},icon:n.createElement(Qr.Z,{rotate:a?0:90}),type:"text"}))},Jr=r(24279),Xr=function(e){var t=e.color,r=(0,c.useSection)().toggleRightSide;return n.createElement(o.Z,{title:n.createElement(a.Z,{id:"Toggle Right Side"}),placement:"left"},n.createElement(i.ZP,{icon:n.createElement(c.Icons.Sidebar,{revert:!0,style:{color:t}}),onClick:function(){return r()},type:"text"}))},en=function(e){var t=e.data,r=e.schema,o=e.graphId,i=e.onQuery,a=e.id,l=(0,c.useCustomToken)().buttonBackground,s=(0,c.useStudioProvier)().isLight?"#000":"#ddd",f=(0,n.useRef)(null),p=[];return p=dn.services,n.createElement("div",{style:{borderRadius:"8px",height:"500px"},ref:f},n.createElement(m,{id:a,services:p},n.createElement(c.Section,{splitBorder:!0,rightSide:n.createElement(ce,null,n.createElement(gt,null)),autoResize:!1,rightSideStyle:{width:"300px",padding:"12px 0px 12px 18px"},defaultCollapsed:{leftSide:!0,rightSide:!1}},n.createElement(jt,{data:t,schema:r,graphId:o}),n.createElement(ze,null),n.createElement(Vr,null),n.createElement(Pt,null),n.createElement(Cr,null),n.createElement(j,null,n.createElement(lr,null),n.createElement(hr,{onQuery:i}),n.createElement(Zr,null),n.createElement(vr,null)),n.createElement(u,{style:{position:"absolute",top:"20px",right:"20px",left:"unset",background:l}},n.createElement(Xr,{color:s}),n.createElement(Jr.Z,{style:{margin:"0px"}}),n.createElement(c.FullScreen,{containerRef:f}),n.createElement(kt,null),n.createElement(Pr,null),n.createElement($r,null),n.createElement(Jr.Z,{style:{margin:"0px"}}),n.createElement(se,null),n.createElement(Ht,null),n.createElement(Mr,null)))))},tn=r(31477);function rn(e){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(e)}function nn(){nn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==r&&n.call(w,a)&&(b=w);var S=g.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==rn(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(rn(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(O.prototype),l(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function on(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function an(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){on(i,n,o,a,c,"next",e)}function c(e){on(i,n,o,a,c,"throw",e)}a(void 0)}))}}var cn=c.Utils.storage,un=function(){var e=an(nn().mark((function e(t){var r,n,o,i,a,c;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cn.get("query_language")||"cypher",n=cn.get("query_endpoint")||"",o=cn.get("query_initiation"),i=cn.get("query_username"),a=cn.get("query_password"),c={script:t,language:r,endpoint:n,username:i,password:a},"Server"!==o){e.next=10;break}return e.next=9,fetch("/graph/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){return e.success?e.data:{nodes:[],edges:[]}}));case 9:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.abrupt("return",(0,tn.aq)(c));case 14:return e.prev=14,e.t0=e.catch(10),console.log("error",e.t0),e.abrupt("return",{nodes:[],edges:[]});case 18:case"end":return e.stop()}}),e,null,[[10,14]])})));return function(t){return e.apply(this,arguments)}}();function ln(e,t){var r=[];e.edges.forEach((function(e){var n=e.source,o=e.target,i=e.label;if((t===n||t===o)&&n===o)return"both",void r.push({key:"(a:".concat(n,")-[b:").concat(i,"]-(c:").concat(o,")"),label:"[".concat(i,"]-(").concat(o,")")});n===t&&("out",r.push({key:"(a:".concat(n,")-[b:").concat(i,"]->(c:").concat(o,")"),label:"[".concat(i,"]->(").concat(o,")")})),o===t&&("in",r.push({key:"(a:".concat(n,")<-[b:").concat(i,"]-(c:").concat(o,")"),label:"[".concat(i,"]<-(").concat(o,")")}))}));var n=r.length>1?[{key:"(a)-[b]-(c)",label:"All Neighbors"}]:[];return[].concat(n,r)}var sn,fn,pn={queryStatement:un,queryNeighborData:(fn=an(nn().mark((function e(t){var r,n,o,i;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.key,n=t.selectIds,o="\n    MATCH ".concat(r,"\n    WHERE  elementId(a) IN [").concat(n,"] \n    RETURN a,b,c\n    "),e.next=4,un(o);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)}))),function(e){return fn.apply(this,arguments)}),queryNeighborItems:(sn=an(nn().mark((function e(t){var r,n;return nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.schema,n={},r.nodes.forEach((function(e){n[e.label]=ln(r,e.label)})),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),function(e){return sn.apply(this,arguments)})},dn={id:"cypher",desc:"Query services with cypher language",services:pn}},55736:function(e,t,r){r.d(t,{C1:function(){return i},qp:function(){return a},rv:function(){return o}});var n=r(33741),o={mode:"GS_STUDIO_QUERY_MODE"},i={isReady:!1,graphId:"",activeNavbar:"recommended",collapse:!0,activeId:"query-1",globalScript:"Match (n) return n limit 10",autoRun:!1,absolutePosition:!1,schemaData:{nodes:[],edges:[]},statements:[],historyStatements:[],savedStatements:[],storeProcedures:[],mode:"flow",enableImmediateQuery:!1,language:"gremlin",defaultCollapsed:!0,welcome:void 0},a=function(){return(0,n.qp)()}},84158:function(e,t,r){r.d(t,{Ek:function(){return o},Id:function(){return n}});r(84310).Utils.storage;function n(e){for(var t=0,r=["MATCH","WHERE","RETURN","CREATE","DELETE"];t<r.length;t++){var n=r[t];e=e.replace(new RegExp("(".concat(n,")(?![^\\(]*\\))"),"g"),"\n$1")}return(e=(e=e.replace(/, /g,",\n")).replace(/\n+/g,"\n")).trim()}function o(e){return(e.match(/\r?\n/g)||[]).length+1}},63904:function(e,t,r){r.d(t,{Z:function(){return x}});var n=r(50959),o=r(84310),i=r(96066);r(52871);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e,t,r){var n;return n=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==a(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f={comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}]},p={defaultToken:"",tokenPostfix:".gremlin",ignoreCase:!0,brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["g","V","E","out","in","both","has","hasLabel","limit","order","by","select","count","filter","map","dedup","outE","inE","bothE"],builtinLiterals:["true","false","null"],builtinFunctions:["values","keys","id","label","property","outV","inV","bothV","sum","mean","min","max","coalesce","is","not","range","fold"],operators:["+","-","*","/","%","^","=","<>","<",">","<=",">="],escapes:/\\(?:[tbnrf\\"'`]|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+/,octaldigits:/[0-7]+/,hexdigits:/[0-9a-fA-F]+/,tokenizer:{root:[[/[{}[\]()]/,"@brackets"],{include:"common"}],common:[{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/:[a-zA-Z_][\w]*/,"type.identifier"],[/[a-zA-Z_][\w]*(?=\()/,{cases:{"@builtinFunctions":"predefined.function","@keywords":"keyword","@default":"identifier"}}],[/`/,"identifier.escape","@identifierBacktick"],[/[;,.:|]/,"delimiter"],[/[\+\-\*\/\^%]+/,"delimiter.operator"],[/[\!<>\?=\|&]/,"delimiter"]],numbers:[[/-?(@digits)[eE](-?(@digits))?/,"number.float"],[/-?(@digits)?\.(@digits)([eE]-?(@digits))?/,"number.float"],[/-?0x(@hexdigits)/,"number.hex"],[/-?0(@octaldigits)/,"number.octal"],[/-?(@digits)/,"number"]],strings:[[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@stringDouble"],[/'/,"string","@stringSingle"]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/\/\/.*/,"comment"],[/[^/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],stringDouble:[[/[^\\"]+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/"/,"string","@pop"]],stringSingle:[[/[^\\']+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/'/,"string","@pop"]],identifierBacktick:[[/[^\\`]+/,"identifier.escape"],[/@escapes/,"identifier.escape"],[/\\./,"identifier.escape.invalid"],[/`/,"identifier.escape","@pop"]]}};var d=[].concat(["count","fold","sum","min","max","mean","group","groupCount"],["hasId","hasLabel","has","hasNot","is","where","not","dedup","order","limit","coin","sample","union"],["id","label","constant","valueMap","values","elementMap","select"]),y=["outV","inV","otherV","bothV"],h=["outE","inE","bothE","out","in","both"],m={};function v(e){return(e.match(/\r?\n/g)||[]).length+1}[].concat(y,["out","in","both"]).forEach((function(e){m[e]=[].concat(h,l(d))})),["outE","inE","bothE"].forEach((function(e){m[e]=[].concat(y,l(d))})),i.Mj.register({id:"gremlin"}),i.Mj.setMonarchTokensProvider("gremlin",p),i.Mj.setLanguageConfiguration("gremlin",f),i.Mj.registerCompletionItemProvider("gremlin",{triggerCharacters:["."],provideCompletionItems:function(e,t){var r,n=e.getLineContent(t.lineNumber).slice(0,t.column-1).trim(),o=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({g:["V","E"],V:[].concat(h,["match"],l(d)),E:[].concat(y,l(d))},m)[e]||[];return t.map((function(e){return{label:e,kind:i.Mj.CompletionItemKind.Function,documentation:e,insertText:"".concat(e,"()")}}))}((r=n.replace(/\(.*?\)/g,"").split(/\s|\./).filter(Boolean)).length>0?r[r.length-1]:"");return{suggestions:o}}});var g={cypher:"cypherTheme",gremlin:"GremlinTheme"},b=(0,n.forwardRef)((function(e,t){(0,o.useDynamicStyle)("\n.monaco-editor .view-overlays .current-line {\n  background-color: transparent !important;\n}\n\n.monaco-editor .monaco-scrollable-element::-webkit-scrollbar {\n  display: none;\n}\n\n.decorationsOverviewRuler {\n  display: none !important;\n}\n\n.monaco-editor .view-overlays .current-line-exact {\n  border: none !important;\n}\n\n.monaco-editor .scroll-decoration {\n  box-shadow: none;\n}\n","cypher-editor-style");var r,a=e.value,c=e.language,u=void 0===c?"cypher":c,l=e.maxRows,s=void 0===l?10:l,f=e.minRows,p=void 0===f?1:f,d=e.onChangeContent,y=e.clear,h=e.onInit,m=d?0:v(a),b=(0,o.useStudioProvier)().isLight;return(0,n.useEffect)((function(){return t&&t.current&&(v(a)<=s&&(t.current.style.height=20*v(a)+"px"),r=i.j6.create(t.current,{language:"gremlin",value:a,theme:b?g[u]:"vs-dark",suggestLineHeight:20,automaticLayout:!0,minimap:{enabled:!1},fontSize:14,lineHeight:20,folding:!0,wordWrap:"on",scrollBeyondLastLine:!1,scrollBeyondLastColumn:0}),t.current.codeEditor=r,r.onDidChangeModelContent((function(){var e,n=r.getContentHeight(),o=null===(e=r.getModel())||void 0===e?void 0:e.getLineCount();n<=20*s&&(t.current.style.height=n+"px"),d&&d(o,r)})),h&&h(t.current)),function(){r.dispose()}}),[t,a,u,!b]),n.useEffect((function(){y&&t&&t.current&&t.current.codeEditor&&t.current.codeEditor.setValue("")}),[y]),n.createElement("div",{ref:t,style:{padding:"5px 0px",width:"100%",height:20*(p+m)+"px",border:b?"1px solid rgb(187, 190, 195)":"1px solid #434343",borderRadius:"6px"}})})),x=b},21050:function(e,t,r){r.r(t),r.d(t,{ConnectEndpoint:function(){return Ct},QueryStatement:function(){return qt},Statement:function(){return wt.default},default:function(){return Ut},sdk:function(){return Bt}});var n=r(50959),o=r(53531),i=r(31192),a=r(55736),c=r(4588),u=o.Z.useToken,l=function(e){var t=u().token,r=(0,a.qp)().store.welcome;if(r){var o=r.title,i=r.description;return n.createElement("div",{style:{margin:"12px",borderRadius:"8px",background:t.colorBgBase}},n.createElement(c.Z,{message:o,description:i,type:"info",closable:!0}))}return null},s=r(82714),f=r(84155),p=r(28541),d=function(e){var t=e.isDark,r=t?"#272727":"#E6E9EE";return n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 915 866",fill:"none"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M552.085 623.067C491.189 655.842 482.589 745.72 418.484 770.756C352.941 796.353 259.359 798.915 226.164 750.352C189.108 696.141 291.287 607.551 265.559 547.035C237.793 481.726 101.961 496.952 88.3682 426.238C76.2288 363.085 150.831 297.41 208.118 248.21C263.376 200.753 332.496 162.372 402.856 156.147C468.399 150.348 511.091 201.87 571.612 216.049C633.101 230.454 738.7 185.557 759.412 239.679C782.973 301.247 654.143 363.856 654.328 432.195C654.506 498.496 794.484 523.038 760.348 586.766C727.485 648.115 617.062 588.097 552.085 623.067Z",fill:t?"#272727":"#EEF1F6"}),n.createElement("circle",{cx:"595.876",cy:"255.218",r:"12.5406",transform:"rotate(30 595.876 255.218)",fill:r}),n.createElement("circle",{cx:"724.312",cy:"289.146",r:"12.5406",transform:"rotate(30 724.312 289.146)",fill:r}),n.createElement("circle",{cx:"735.006",cy:"235.789",r:"12.5406",transform:"rotate(30 735.006 235.789)",fill:r}),n.createElement("circle",{cx:"800.535",cy:"288.103",r:"12.5406",transform:"rotate(30 800.535 288.103)",fill:r}),n.createElement("circle",{cx:"613.406",cy:"199.774",r:"12.5406",transform:"rotate(30 613.406 199.774)",fill:r}),n.createElement("circle",{cx:"662.947",cy:"242.856",r:"12.5406",transform:"rotate(30 662.947 242.856)",fill:r}),n.createElement("circle",{cx:"722.216",cy:"420.273",r:"12.5406",transform:"rotate(30 722.216 420.273)",fill:r}),n.createElement("circle",{cx:"788.851",cy:"389.157",r:"12.5406",transform:"rotate(30 788.851 389.157)",fill:r}),n.createElement("line",{x1:"594.446",y1:"254.765",x2:"611.976",y2:"199.321",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"661.962",y1:"243.988",x2:"612.422",y2:"200.905",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"663.219",y1:"244.332",x2:"596.148",y2:"256.693",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"663.85",y1:"241.659",x2:"725.215",y2:"287.949",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"736.476",y1:"236.083",x2:"725.782",y2:"289.441",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"735.152",y1:"237.281",x2:"663.093",y2:"244.349",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"735.941",y1:"234.616",x2:"801.471",y2:"286.93",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"787.591",y1:"389.971",x2:"723.052",y2:"289.96",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"787.361",y1:"388.985",x2:"799.046",y2:"287.931",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"800.556",y1:"289.603",x2:"724.333",y2:"290.646",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"789.486",y1:"390.517",x2:"722.851",y2:"421.632",stroke:r,strokeWidth:"3"}),n.createElement("circle",{cx:"165.557",cy:"381.703",r:"16.9036",transform:"rotate(165 165.557 381.703)",fill:r}),n.createElement("circle",{cx:"131.703",cy:"474.871",r:"16.9036",transform:"rotate(165 131.703 474.871)",fill:r}),n.createElement("circle",{cx:"216.702",cy:"581.703",r:"16.9036",transform:"rotate(165 216.702 581.703)",fill:r}),n.createElement("line",{x1:"132.878",y1:"473.939",x2:"218.059",y2:"581.392",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"130.293",y1:"474.359",x2:"164.148",y2:"381.191",stroke:r,strokeWidth:"3"}),n.createElement("circle",{cx:"334",cy:"204",r:"7",fill:r}),n.createElement("circle",{cx:"361",cy:"152",r:"7",fill:r}),n.createElement("circle",{cx:"283",cy:"229",r:"7",fill:r}),n.createElement("circle",{cx:"385",cy:"219",r:"7",fill:r}),n.createElement("circle",{cx:"414",cy:"190",r:"7",fill:r}),n.createElement("line",{x1:"282.78",y1:"228.551",x2:"333.78",y2:"203.551",stroke:r}),n.createElement("line",{x1:"384.859",y1:"219.48",x2:"333.859",y2:"204.48",stroke:r}),n.createElement("line",{x1:"384.647",y1:"218.646",x2:"413.647",y2:"189.646",stroke:r}),n.createElement("line",{x1:"384.53",y1:"219.169",x2:"360.53",y2:"152.169",stroke:r}),n.createElement("line",{x1:"333.556",y1:"203.77",x2:"360.556",y2:"151.77",stroke:r}),n.createElement("ellipse",{cx:"553",cy:"673.5",rx:"25",ry:"24.5",fill:r}),n.createElement("circle",{cx:"786",cy:"553",r:"25",fill:r}),n.createElement("line",{x1:"551.872",y1:"671.669",x2:"785.082",y2:"551.223",stroke:r,strokeWidth:"4"}))},y=r(84310),h=function(e){var t=(0,y.useStudioProvier)().isLight;return n.createElement("div",{style:{fontSize:"14px",height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},n.createElement(d,{isDark:!t}),n.createElement(s.Z.Text,{type:"secondary",style:{position:"absolute"}},n.createElement(f.Z,{id:"You can write cypher or gremlin queries, and then click the {icon} button to query data",values:{icon:n.createElement(p.Z,null)}})))};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){var n;return n=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==m(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=(0,n.lazy)((function(){return Promise.resolve().then(r.bind(r,613))})),w=(0,n.lazy)((function(){return Promise.all([r.e(3155),r.e(2548),r.e(3322)]).then(r.bind(r,93322))})),S=o.Z.useToken,E=function(e){var t=e.createStatements,r=e.queryGraphData,o=e.enableImmediateQuery,c=e.handleCancelQuery,u=e.connectComponent,s=e.displaySidebarPosition,f=(0,a.qp)(),p=f.store,d=f.updateStore,y=p.activeId,m=p.mode,v=p.statements,b=p.savedStatements,E=p.schemaData,O=p.graphId,j=(p.language,b.map((function(e){return e.id})),S().token),k="tabs"===m?{position:"absolute",width:"100%"}:{},P=v.map((function(e,t){return{label:"query-".concat(t+1),value:e.id}})),T=function(e){var r=e.id,n=e.script,o=e.name,i=e.language;d((function(e){-1!==e.savedStatements.map((function(e){return e.id})).indexOf(r)?e.savedStatements.forEach((function(e){e.id===r&&(e.script=n)})):(e.savedStatements.push({id:r,script:n,name:o,language:i}),t&&t("saved",{id:r,script:n,name:o,language:i}))}))},C=function(e){d((function(t){t.statements=t.statements.filter((function(t){return t.id!==e})),t.activeId=t.statements[0]&&t.statements[0].id}))},L=0===v.length;return(0,n.useEffect)((function(){var e;y&&(null===(e=document.getElementById("statements-layout"))||void 0===e||e.scrollTo({top:0,behavior:"smooth"}))}),[y]),n.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},n.createElement("div",{style:{minHeight:"50px",background:j.colorBgBase,padding:"0px 12px",borderBottom:"1px solid ".concat(j.colorBorder)}},n.createElement(n.Suspense,null,n.createElement(w,{connectComponent:u,displaySidebarPosition:s})),"tabs"===m&&0!==P.length&&n.createElement("div",{style:{overflowX:"scroll",padding:"8px 0px"}},n.createElement(i.Z,{options:P,onChange:function(e){d((function(t){t.activeId=e}))},value:y}))),n.createElement("div",{id:"statements-layout",style:{overflowY:"scroll",flex:"1",position:"relative"}},L&&n.createElement(h,null),n.createElement(l,null),v.map((function(e){var t=e.id,i=e.script,a=e.timestamp,u=e.language;return n.createElement("div",{key:t,style:g(g({},k),{},{visibility:t===y||"flow"===m?"visible":"hidden",flex:1})},n.createElement(n.Suspense,null,n.createElement(x,{language:u,enableImmediateQuery:o,mode:m,active:t===y,id:t,timestamp:a,graphId:O,schemaData:E,script:i,onQuery:r,onCancel:c,onClose:C,onSave:T})))}))))},O=(0,n.memo)(E),j=r(791),k=r(17905),P=r(88648),T=r(57526),C=r(38943),L=r(86132),I=r(15098),_=r(41473),A=r(16483),N=r.n(A);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function D(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){var n;return n=function(e,t){if("object"!=Z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Z(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}s.Z.Text;var B=s.Z.Title,U=o.Z.useToken,Y={container:{position:"relative",flex:1,height:"100%"},list:{flex:1,height:"100%",overflow:"scroll"},ul:{paddingInlineStart:"0px",boxSizing:"border-box",margin:"0px"},li:{cursor:"pointer",listStyle:"none",boxSizing:"border-box",display:"flex",alignItems:"start",padding:"6px 12px",gap:"4px"}};function H(e){return e.sort((function(e,t){return t.timestamp-e.timestamp})).reduce((function(e,t){var r=N()(t.timestamp),n=r.format("YYYY-MM-DD"),o=r.format("HH:mm"),i=e.find((function(e){return e.day===n}));return i?i.items.push(q(q({},t),{},{hours:o})):e.push({day:n,items:[q(q({},t),{},{hours:o})]}),e}),[])}var V=function(e){var t=e.items,r=e.checkedSet,o=e.batch,i=e.onChange,a=e.onClick,c=U().token;return n.createElement("ul",{style:Y.ul},t.map((function(e){var t=e.hours,u=e.id,l=e.name,s=e.timestamp,f=e.description,p=(e.query,r.has(u)),d=l||t||N()(s).format("YYYY-MM-DD HH:mm");return n.createElement("li",{key:e.id,style:Y.li,className:"gs-query-list-item"},o&&n.createElement(j.Z,{checked:p,onChange:function(t){return i(e.id,t.target.checked)}}),n.createElement(k.Z,{title:"Click to start the query",placement:"right"},n.createElement("pre",{style:{background:c.colorBgLayout,overflow:"hidden",textWrap:"pretty",padding:"6px 14px",fontSize:"12px",border:"1px solid transparent",borderRadius:"6px",flex:1,margin:"0px"},className:"statement-list-item-pre",onClick:function(){a&&a(e)}},n.createElement("div",{style:{fontSize:"11px",padding:"4px 0px 12px 0px",color:c.colorTextDescription,fontStyle:"italic"}},d),f&&n.createElement("div",{style:{fontSize:"11px",padding:"4px 0px 12px 0px",color:c.colorTextDescription,fontStyle:"italic"}},f),n.createElement("code",{style:{fontSize:"12px",color:c.colorTextHeading}},e.script),e.query&&n.createElement(n.Fragment,null,n.createElement("br",null),n.createElement("br",null),n.createElement("code",{style:{fontSize:"12px",color:c.colorTextDescription}},e.query)))))})))},Q=function(e){var t=e.items,r=e.batch,o=e.checkedSet,i=e.onChange,a=e.onClick,c=H(t);return n.createElement("div",{style:Y.list},c.map((function(e){var t=e.day,c=e.items;return n.createElement("div",{key:t},n.createElement(B,{level:5,style:{padding:"12px 12px",margin:"0px",position:"sticky",top:0,backgroundColor:"white",zIndex:100}},t),n.createElement(V,{items:c,batch:r,checkedSet:o,onChange:i,onClick:a}))})))},W=function(e){var t=e.items,r=e.onClick,o=e.onDelete,i=e.actionStyle,a=e.group,c=e.placeholder,u=R((0,n.useState)({checkedSet:new Set,batch:!1}),2),l=u[0],f=u[1],p=l.checkedSet,d=l.batch,y=(H(t),p.size>0&&p.size<t.length),h=t.length>0&&t.length===p.size,m=function(e){f((function(t){return q(q({},t),{},{checkedSet:e})}))},v=function(e,t){t?p.add(e):p.delete(e),m(p)};return 0==t.length&&c?n.createElement("div",{style:{padding:"120px 0px"}},n.createElement(P.Z,{imageStyle:{height:"80px"},description:n.createElement(s.Z.Text,{style:{fontSize:"12px"}},c)})):n.createElement(n.Fragment,null,n.createElement(T.Z,{vertical:!0,flex:1,style:{position:"relative",height:"100%"}},n.createElement("div",{style:q({position:"absolute",top:"-34px",right:"0px",zIndex:99},i)},d&&n.createElement(j.Z,{indeterminate:y,onChange:function(e){var r=e.target.checked?new Set(t.map((function(e){return e.id}))):new Set;m(r)},checked:h},n.createElement(C.ZP,{icon:n.createElement(L.Z,null),size:"small",type:"text",onClick:function(){o(D(p))}})),n.createElement(C.ZP,{icon:d?n.createElement(I.Z,null):n.createElement(_.Z,null),size:"small",type:"text",onClick:function(){f((function(e){return q(q({},e),{},{batch:!e.batch})}))}})),a?n.createElement(Q,{items:t,batch:d,checkedSet:p,onChange:v,onClick:r}):n.createElement("div",{style:Y.list},n.createElement(V,{items:t,batch:d,checkedSet:p,onChange:v,onClick:r}))))},K=r(15001),$=function(e){var t=e.children,r=e.title,i=o.Z.useToken().token;return n.createElement(T.Z,{vertical:!0,style:{height:"100%",overflow:"hidden",borderTop:"1px solid ".concat(i.colorBorder),marginTop:"-2px",marginLeft:"-4px",marginRight:"-8px"}},n.createElement(s.Z.Title,{level:5,style:{margin:"0px",flexBasis:"30px",padding:"12px"}},n.createElement(f.Z,{id:r})),n.createElement("div",{style:{height:"100%",overflow:"hidden",marginBottom:"8px"}},t))};function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function X(){X=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==r&&n.call(w,a)&&(b=w);var S=g.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==J(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(J(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(O.prototype),l(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function ee(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var te=function(e){var t=(0,a.qp)(),r=t.store,o=t.updateStore,i=r.savedStatements,c=e.deleteStatements,u=i.map((function(e){return e})),l=function(){var e,t=(e=X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t),o((function(e){e.savedStatements=e.savedStatements.filter((function(e){return-1===t.indexOf(e.id)}))}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ee(i,n,o,a,c,"next",e)}function c(e){ee(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return n.createElement($,{title:"Saved"},n.createElement(W,{items:u,onClick:function(e){e.id;var t=e.script;o((function(e){e.globalScript=t,e.autoRun=!0}))},onDelete:l,placeholder:n.createElement(n.Fragment,null,n.createElement(f.Z,{id:"No saved query statements {br} You can click {icon} to save.",values:{icon:n.createElement(K.Z,null),br:n.createElement("br",null)}}))}))};function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ae(n.key),n)}}function oe(e,t,r){return t&&ne(e.prototype,t),r&&ne(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ie(e,t,r){return(t=ae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e){var t=function(e,t){if("object"!=re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==re(t)?t:String(t)}var ce=oe((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ie(this,"status",void 0),ie(this,"role",void 0),ie(this,"content",void 0),ie(this,"timestamp",void 0),ie(this,"reserved",void 0),this.status=t.status||"pending",this.role=t.role||"user",this.content=t.content||"",this.timestamp=t.timestamp||Date.now(),this.reserved=t.reserved||!1}));"\n你的角色是一个 Cypher 查询助手，你可以根据 Schema 结构，给用户推荐你任务最重要的5条 Cypher 查询语句\n\n任务1: 根据 Schema 结构，自动推荐出关联性最大，最利于用户分析的 10 条Cypher查询语句\nSchema：\n".concat(JSON.stringify({nodes:[{label:"Paper",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"conference",type:"DT_STRING"},{name:"CCFRank",type:"DT_STRING"},{name:"CCFField",type:"DT_STRING"},{name:"year",type:"DT_SIGNED_INT32"},{name:"paper",type:"DT_STRING"}],primary:"id"},{label:"Challenge",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"challenge",type:"DT_STRING"}],primary:"id"},{label:"Topic",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"category",type:"DT_STRING"}],primary:"id"},{label:"Task",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"task",type:"DT_STRING"}],primary:"id"},{label:"Solution",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"solution",type:"DT_STRING"}],primary:"id"},{label:"CCFField",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"field",type:"DT_STRING"}],primary:"id"}],edges:[{label:"WorkOn",properties:[],primary:"WorkOn",constraints:[["Paper","Task"]]},{label:"Resolve",properties:[],primary:"Resolve",constraints:[["Paper","Challenge"]]},{label:"Target",properties:[{name:"number",type:"DT_SIGNED_INT32"}],primary:"Target",constraints:[["Task","Challenge"]]},{label:"Belong",properties:[],primary:"Belong",constraints:[["Task","Topic"]]},{label:"Use",properties:[],primary:"Use",constraints:[["Paper","Solution"]]},{label:"ApplyOn",properties:[],primary:"ApplyOn",constraints:[["Solution","Challenge"]]},{label:"HasField",properties:[],primary:"HasField",constraints:[["Paper","CCFField"]]},{label:"Citation",properties:[],primary:"Citation",constraints:[["Paper","Paper"]]}]},null,2),"\nAnswers:\n").concat(JSON.stringify([{cypher:"Match (n:Paper) return n limit 30",desc:"查询出 Paper 类型的节点"},{cypher:"MATCH (p:Paper)-[:WorkOn]->(a:Task),(a)-[:Belong]->(t: Topic) RETURN t.category,  COUNT(p)",desc:"找出每个主题下的论文数量"},{cypher:"MATCH (t: Topic)<-[:Belong]-(a:Task),\n      (a)<-[:WorkOn]-(p:Paper)-[:Use]->(s:Solution),\n      (s)-[:ApplyOn]->(ch:Challenge)\n  WHERE t.category = $topic_name\n  RETURN t.category, ch.challenge, COUNT(p)",desc:"检索特定主题下，每个挑战（Challenge）所应用的解决方案（Solution）中与论文（Paper）相关的数量"}],null,2),"\n\n任务2: 根据 Schema 结构和用户的输入，生成 Cypher 查询语句，用于图数据库查询\n").concat("\n注意要以JSON的格式返回结果：\nRight Cases:\nquerys1: 列举出鲁迅的一个别名可以吗？\nanswer1: \"match (:ENTITY{name:'鲁迅'})<--(h)-[:Relationship{name:'别名'}]->(q) return distinct q.name limit 1\"\n\nquerys2: 我们常用的301SH不锈钢带的硬度公差是多少，你知道吗？ \nanswers2: \"match(p:ENTITY{name:'301SH不锈钢带'})-[:Relationship{name:'硬度公差'}]-> (q) return q.name\"\nWrong Cases:\nquerys: 12344加油这首歌真好听，你知道歌曲原唱是谁吗？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '12345加油' RETURN a.name\nquerys: 七宗梦是什么时候上映的？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '七宗梦' RETURN a.name LIMIT 30\n","\n\nInstructions:\nNote: Do not include any explanations or apologies in your responses.\nDo not respond to any questions that might ask anything else than for you to construct a Cypher statement.\nDo not include any text except the generated Cypher statement.\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\n你必须使用Sechema中出现的关键词！！！\n\n当前会话中图的 Schema 结构如下：\n\n{graphSchema}\n\n你需要根据用户的提问，自动切换到上述两个任务中，并且给出正确返回，让我们开始吧！\n\n");function ue(e,t){var r=function(e){return JSON.stringify(e,null,2)}(t);return e.replace(/\{graphSchema\}/g,r)}function le(e,t,r){return[t&&new ce({status:"success",role:"system",content:ue(t,r),timestamp:Date.now(),reserved:!0}),e&&new ce({status:"success",role:"assistant",content:e,timestamp:Date.now(),reserved:!0})].filter(Boolean)}var se=r(55216),fe=r(48722),pe=r(77332),de=r(31097),ye=r(12423),he=r(25046);function me(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){if(e){if("string"==typeof e)return ge(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ge(e,t):void 0}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function be(e){var t,r=[],n=0,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ve(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(me(e.matchAll(/```cypher\s*([\s\S]*?)\s*```/g)));try{for(o.s();!(t=o.n()).done;){var i=t.value,a=e.substring(n,i.index).trim();a&&r.push({type:"text",content:a});var c=i[1].trim();r.push({type:"cypher",content:c}),n=i.index+i[0].length}}catch(e){o.e(e)}finally{o.f()}var u=e.substring(n).trim();return u&&r.push({type:"text",content:u}),r}var xe=function(e){var t=e.style;return n.createElement("svg",{width:"41px",height:"62px",viewBox:"0 0 41 62",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:t},n.createElement("title",null,"logo image"),n.createElement("g",{id:"页面-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n.createElement("g",{id:"Medium",transform:"translate(-332, -376)",fillRule:"nonzero"},n.createElement("g",{id:"编组",transform:"translate(332, 376)"},n.createElement("path",{d:"M20.9765256,25 L20.9743827,19.8935471 L22.5478011,18.78271 L26,16.3451158 L25.9983928,13 L18.4270199,18.1683792 C16.9071738,19.2057816 15.8019773,20.29689 15,21.3704617 L15,21.4778737 L20.9765256,25 Z",id:"路径",fill:"#2281F2"}),n.createElement("path",{d:"M6.93795336,20.7840634 C8.51291573,17.334308 13.2733365,13.6674352 13.2733365,13.6674352 L29,3.26992071 L22.9018725,0 L10.9685669,7.75591857 C10.9685669,7.75591857 -0.854857679,14.9756228 0.049338003,26.8260698 C0.761651772,36.1593797 12.3046335,39 12.3046335,39 C5.52316592,36.2295591 4.72994467,25.6215065 6.93795336,20.7840634 Z",id:"路径",fill:"#2281F2"}),n.createElement("path",{d:"M29.2439473,3 L13.4603304,13.6082752 C13.4603304,13.6082752 8.68266998,17.3489173 7.10200396,20.8691596 C4.7340225,26.1425307 5.81651263,38.201864 13.9672848,39.9124792 C13.9672848,39.9124792 17.3656344,40.7454111 23.3969644,37.2721576 C26.5517126,35.4552583 30.7231127,39.070597 30.7231127,39.070597 C35.4705973,35.3685528 31.9076521,31.827613 28.0846459,30.5007395 C24.3395483,29.2007168 21.5847673,31.781743 17.5346192,32.8378717 C13.4844711,33.8940003 12.4480677,29.1934447 12.4480677,29.1934447 C12.4480677,29.1934447 10.5497323,23.0871416 17.786999,18.1633893 L25.5410959,12.8877806 L25.5427418,16.3022982 L20.3958387,19.9243496 L20.3980333,25.1367472 L29.4222592,19.0125436 L29.2439473,3 Z",id:"路径",fill:"#1FB2FD"}),n.createElement("path",{d:"M36.7904047,27.0251597 C32.1878283,23.2677091 25.8158521,23.5156909 20.7707852,25.0562844 C18.0303799,25.8934309 12.0176813,28.5163788 12.0176813,28.5163788 C12.0176813,28.5163788 12.0918982,28.8392544 12.2746294,29.2936102 C12.3094889,29.3801542 12.3471596,29.4705815 12.3904528,29.565447 C12.4309348,29.6547648 12.476477,29.747966 12.5248305,29.8422768 C12.5928627,29.9759761 12.6687665,30.1130041 12.7536662,30.2516963 C12.8082044,30.3415689 12.8649916,30.4314415 12.9268391,30.5207593 C13.016799,30.6516848 13.1146305,30.7815007 13.2208957,30.9079881 C13.3007352,31.0034083 13.3873216,31.0960548 13.4767193,31.1864821 C13.8635471,31.5770395 14.3408972,31.9132295 14.9284481,32.1068439 C15.0189704,32.1368014 15.1117416,32.1628756 15.2078863,32.1856211 C15.7825055,32.3220943 16.4521449,32.3265324 17.2302986,32.1301442 C17.2404191,32.1279251 17.2494151,32.1245965 17.2595356,32.1218227 C19.9341576,31.4411211 21.9492606,30.1523927 23.9930384,29.7130156 C25.2822771,29.3890305 26.5895077,29.3241225 28.042361,29.8123192 C31.9601172,31.1282314 35.611367,34.640474 30.74622,38.3113806 L30.74622,38.3113806 L30.74622,38.3113806 L17.8768858,46.5019905 L17.877448,46.5014357 L14.3510177,44.4709811 L22.2523132,39.6783315 L17.0768044,37.0060091 L4,44.7372702 L4.00056225,44.737825 L13.0353533,49.5842871 L13.0342288,49.5848419 L19.4039561,53 L37.3717709,41.2716281 C37.3706464,41.2732924 45.9106577,34.4712695 36.7904047,27.0251597 Z",id:"路径",fill:"#37EDD7"}),n.createElement("path",{d:"M40.9961107,35 C40.9955641,35 40.994471,35.0005545 40.9939244,35.0011089 C40.9928312,35.0238418 40.9884586,35.0454657 40.9873655,35.0676442 C40.8900752,39.0492238 37.4668795,41.8592287 37.4668795,41.8592287 L20,53.5810744 L20.0032794,62 L38.0440621,49.2618285 C41.053501,47.4803475 41,43.5348078 41,43.5348078 L40.9961107,35 Z",id:"路径",fill:"#1FB2FD"}),n.createElement("polygon",{id:"路径",fill:"#2281F2",points:"22.9982925 41 22.9982925 41 22.9982925 41 15 45.9410083 18.498008 47.9919928 18.6237906 48 23 45.1631669"}),n.createElement("polygon",{id:"路径",fill:"#2281F2",points:"18.9961684 53.4177665 4 45 4.00328419 53.0147944 19 62"})))))},we=o.Z.useToken,Se=function(e){var t=e.content,r=e.onQuery;return n.createElement("div",{style:{position:"relative"}},n.createElement("pre",{style:{border:"1px solid #ddd",padding:"6px",borderRadius:"4px"}},n.createElement("code",{style:{whiteSpace:"pre-wrap"}},t)),n.createElement(k.Z,{title:"开始查询"},n.createElement(C.ZP,{style:{position:"absolute",bottom:"2px",right:"2px"},onClick:function(){r&&r(t)},size:"small",icon:n.createElement(p.Z,{style:{color:"#52c41a"}}),type:"text"})))},Ee=function(e){var t=e.content,r=e.role,o=we().token,i="user"===r?"rgba(221,221,221,0.3)":o.colorPrimaryBg;return n.createElement("div",{style:{background:i,borderRadius:"6px",padding:"6px"}},n.createElement(s.Z.Text,{style:{fontSize:"12px"}}," ",t))},Oe=function(e){var t=e.role,r=e.content,o=(e.timestamp,e.onQuery),i="user"===t&&!r.includes("`"),a=be(r);return i?n.createElement(T.Z,{align:"start",justify:"flex-end",gap:4,style:{margin:"6px 0px"}},n.createElement(Ee,{content:r,role:t})):n.createElement("div",null,n.createElement(fe.Z,{align:"start",size:2},n.createElement(xe,{style:{fontSize:"12px",height:"14px",width:"14px",border:"1px solid #ddd",borderRadius:"50%",padding:"4px"}}),n.createElement("div",null,a.map((function(e,r){return"cypher"===e.type?n.createElement(Se,{key:r,content:e.content,onQuery:o}):n.createElement(Ee,{key:r,content:e.content,role:t})})))))},je=r(52018),ke=r(63432),Pe=r(37528);function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Le=function(e){var t=e.onChange,r=e.style,o=Te((0,n.useState)((function(){var e="copilot"===y.Utils.getSearchParams("tab");return!localStorage.getItem("OPENAI_KEY_FOR_GS")&&e})),2),i=o[0],a=o[1],c=(0,n.useRef)(null),u=(0,Pe.Z)(),l=localStorage.getItem("OPENAI_KEY_FOR_GS")||"";return n.createElement(n.Fragment,null,n.createElement(C.ZP,{icon:n.createElement(ke.Z,null),type:"text",onClick:function(){a(!0)},style:r}),n.createElement(je.Z,{title:n.createElement(f.Z,{id:"Setting"}),open:i,onOk:function(){if(c.current){var e=c.current.input.value,r=String(e).trim();localStorage.setItem("OPENAI_KEY_FOR_GS",r),t&&t(r)}a(!1)},onCancel:function(){a(!1)}},n.createElement(T.Z,{vertical:!0,gap:12},n.createElement(s.Z.Text,{strong:!0},n.createElement(f.Z,{id:"Privacy Security Notice"})),n.createElement(s.Z.Text,null,n.createElement(f.Z,{id:"query.app.sidebar.gpt.setting.security"})),n.createElement(s.Z.Text,{strong:!0},"OpenAI API key"),n.createElement(pe.Z,{ref:c,placeholder:u.formatMessage({id:"OpenAI API key is only stored locally in your browser"}),defaultValue:l}))))};function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_e.apply(this,arguments)}function Ae(){Ae=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==r&&n.call(w,a)&&(b=w);var S=g.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Ie(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Ie(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(O.prototype),l(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function Ne(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Ze(e){return function(e){if(Array.isArray(e))return qe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){Me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Me(e,t,r){var n;return n=function(e,t){if("object"!=Ie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ie(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||Ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){if(e){if("string"==typeof e)return qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qe(e,t):void 0}}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ze=o.Z.useToken,Be=function(e){var t=e.schemaData,r=e.prompt,o=void 0===r?'\n你的角色是一个 Cypher 查询助手，你可以根据用户的自然语言提问，再结合图数据库的 Schema 结构，给生成标准的 Cypher 查询语句。\n为了查询的准确性，请务必充分理解 Schema，并使用 Schema 中明确的字段，不要自己随意生成字段！\n为了查询的准确性，请务必充分理解 Schema，并使用 Schema 中明确的字段，不要自己随意生成字段！\n为了查询的准确性，请务必充分理解 Schema，并使用 Schema 中明确的字段，不要自己随意生成字段！\n\n你不要着急马上给出答案，你可以多生成几个语句，然后找出一个你觉得最准确的语句告诉我，推理的过程可以不用告诉我，我只需要最准确的那一个。\n你不要着急马上给出答案，你可以多生成几个语句，然后找出一个你觉得最准确的语句告诉我，推理的过程可以不用告诉我，我只需要最准确的那一个。\n你不要着急马上给出答案，你可以多生成几个语句，然后找出一个你觉得最准确的语句告诉我，推理的过程可以不用告诉我，我只需要最准确的那一个。\n\n其他注意事项:\n不支持 "MATCH p=()-[]-() RETURN p" 的写法，请都替换成 "MATCH (a)-[b]-(c) RETURN a,b,c"\n注意返回格式需要 markdown cypher 格式\n\n下面是数据库中的 Schema：\n{graphSchema}\n让我们开始吧～\n':r,i=Fe((0,n.useState)({messages:[],isLoading:!1,OPENAI_KEY_FOR_GS:localStorage.getItem("OPENAI_KEY_FOR_GS")}),2),c=i[0],u=i[1],l=c.messages,f=c.isLoading,p=c.OPENAI_KEY_FOR_GS,d=(0,n.useRef)(null),h=ze().token,m=function(){var e=(0,n.useRef)(new AbortController);return e.current.signal.aborted&&(e.current=new AbortController),e.current}(),v=(0,a.qp)().updateStore,g=(0,Pe.Z)(),b=[g.formatMessage({id:"recommend 5 interesting query statements"}),g.formatMessage({id:"query any subgraph"}),g.formatMessage({id:"insight the statistical distribution of vertex labels in the graph"})],x=g.formatMessage({id:"query.copilot.welcome"});(0,n.useEffect)((function(){t&&u((function(e){return Re(Re({},e),{},{messages:Ze(le(x,o,t))})}))}),[]);var w=function(){var e,t=(e=Ae().mark((function e(t){var r,n,o;return Ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.current){e.next=12;break}return r=d.current.input.value,n=new ce({role:"user",content:t||r}),u((function(e){return Re(Re({},e),{},{messages:[].concat(Ze(e.messages),[n]),isLoading:!0})})),console.log("OPENAI_KEY_FOR_GS",p),e.next=7,Ue([].concat(Ze(l),[n]),p,m.signal);case 7:if(o=e.sent){e.next=11;break}return u((function(e){return Re(Re({},e),{},{isLoading:!1})})),e.abrupt("return",!1);case 11:u((function(e){return Re(Re({},e),{},{messages:[].concat(Ze(e.messages),[new ce({role:o.message.role,content:o.message.content,status:"success"})]),isLoading:!1})}));case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ne(i,n,o,a,c,"next",e)}function c(e){Ne(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),S=function(e){v((function(t){t.autoRun=!0,t.globalScript=e}))};y.Utils.getSearchParams("tab");return n.createElement(T.Z,{vertical:!0,style:{height:"100%",overflow:"hidden",padding:"0px 12px"},justify:"space-between"},n.createElement("div",{style:{overflowY:"scroll",position:"relative"}},n.createElement(s.Z.Title,{level:5,style:{margin:"0px",flexBasis:"30px",padding:"12px 0px"}},"Copilot"),n.createElement(Le,{onChange:function(e){u((function(t){return Re(Re({},t),{},{OPENAI_KEY_FOR_GS:e})}))},style:{position:"absolute",right:"0px",top:"8px"}}),n.createElement("div",null,l.filter((function(e){return"system"!==e.role})).map((function(e){return n.createElement(Oe,_e({key:e.timestamp},e,{onQuery:S}))})),f&&n.createElement(se.Z,{style:{padding:"0px 6px"}}))),n.createElement("div",null,b.map((function(e,t){return n.createElement("div",{key:t,style:{cursor:"pointer",background:h.colorBgLayout,padding:"4px",borderRadius:"6px",margin:"6px 0px"}},n.createElement(de.Z,{style:{fontSize:"12px",marginRight:"4px"}}),n.createElement(s.Z.Text,{key:t,onClick:function(){w(e)},style:{fontSize:"12px"}},e))})),n.createElement(fe.Z,null,n.createElement(pe.Z,{ref:d}),n.createElement(C.ZP,{onClick:function(){return w()},icon:n.createElement(ye.Z,null)}),n.createElement(C.ZP,{onClick:function(){u((function(e){return Re(Re({},e),{},{messages:Ze(le(x,o,t))})}))},icon:n.createElement(he.Z,null)}))))};function Ue(e,t,r){return fetch("https://api.openai.com/v1/chat/completions",{signal:r,method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-3.5-turbo",messages:e.map((function(e){return{role:e.role,content:e.content}}))})}).then((function(e){return e.json()})).then((function(e){return{status:"success",message:e.choices[0].message}})).catch((function(e){return"AbortError"===e.name?{status:"cancel",message:null}:{status:"failed",message:e.message}}))}var Ye=r(97585),He=r(30548),Ve=r(54326);function Qe(e){return function(e){if(Array.isArray(e))return We(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return We(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ke=s.Z.Title,$e={title:{marginTop:"12px",fontSize:"14px",fontWeight:400}},Je=function(e){var t=e.schemaData,r=e.schemaId,o=(0,a.qp)(),i=o.updateStore,c=o.store.language,u=(0,He.h)(t),l=(0,Ve.v6)(t,r),s=t.nodes,p=t.edges,d=function(e){var t=new Set;return e.nodes.forEach((function(e){Object.keys(e.properties||{}).forEach((function(e){t.add(e)}))})),e.edges.forEach((function(e){Object.keys(e.properties||{}).forEach((function(e){t.add(e)}))})),Qe(t.values())}(u),h=(0,y.useStudioProvier)().isLight,m=function(e,t){var r="";"cypher"===c&&("nodes"===t&&(r="MATCH (n:".concat(e,") RETURN n LIMIT 25")),"edges"===t&&(r="MATCH (a)-[b:".concat(e,"]->(c) RETURN a,b,c LIMIT 25;")),"property"===t&&(r="MATCH(a) where a.".concat(e," IS NOT NULL AND a.").concat(e,' <> ""\n      WITH a.').concat(e," as ").concat(e,"\n      RETURN ").concat(e," , COUNT(").concat(e,") as ").concat(e,"_COUNT\n      ORDER BY ").concat(e,"_COUNT DESC\n      "))),"gremlin"===c&&("nodes"===t&&(r="g.V().hasLabel('".concat(e,"').limit(25)")),"edges"===t&&(r="g.V().outE('".concat(e,"').limit(25)")),"property"===t&&(r="g.V().has('".concat(e,"').groupCount().by('").concat(e,"').order().by(select(values), desc)"))),i((function(e){e.globalScript=r,e.autoRun=!0}))};return n.createElement($,{title:"Recommended"},n.createElement("div",{style:{padding:"0px 12px"}},n.createElement(Ke,{level:5,style:$e.title},n.createElement(f.Z,{id:"Vertex Labels"})),s.map((function(e){var t,r=e.label,o=(null!==(t=l.nodeStyle[r])&&void 0!==t?t:{color:"#000"}).color;return n.createElement(Ye.Z,{key:r,style:{borderRadius:"8px",backgroundColor:o,cursor:"pointer",margin:"4px"},bordered:!1,onClick:function(){m(r,"nodes")}},r)})),n.createElement(Ke,{level:5,style:$e.title},n.createElement(f.Z,{id:"Edge Labels"})),p.map((function(e){var t,r=e.label,o=(null!==(t=l.edgeStyle[r])&&void 0!==t?t:{color:"#000"}).color;return n.createElement(Ye.Z,{key:r,style:{borderRadius:"8px",backgroundColor:o,cursor:"pointer",margin:"4px",color:"#000"},bordered:!1,onClick:function(){m(r,"edges")}},r)})),n.createElement(Ke,{style:$e.title},n.createElement(f.Z,{id:"Property Keys"})),d.map((function(e){return n.createElement(Ye.Z,{key:e,style:{borderRadius:"8px",backgroundColor:h?"#000":"#fff",cursor:"pointer",margin:"4px",color:h?"#fff":"#000"},bordered:!1,onClick:function(){m(e,"property")}},e)}))))};function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function et(){et=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==r&&n.call(w,a)&&(b=w);var S=g.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Xe(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Xe(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(O.prototype),l(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function tt(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var rt=function(e){var t=e.deleteStatements,r=(0,a.qp)(),o=r.store,i=r.updateStore,c=o.storeProcedures.map((function(e){return e})),u=function(){var e,r=(e=et().mark((function e(r){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(r),i((function(e){e.storeProcedures=e.savedStatements.filter((function(e){return-1===r.indexOf(e.id)}))}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){tt(i,n,o,a,c,"next",e)}function c(e){tt(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();return n.createElement($,{title:"Stored Procedures"},n.createElement(W,{items:c,onClick:function(e){e.id;var t=e.script;e.name;i((function(e){e.globalScript=t,e.autoRun=!0}))},onDelete:u,placeholder:n.createElement(n.Fragment,null,n.createElement(f.Z,{id:"No stored procedures available. {br} Go to the <a>Extension</a> and create one now!",values:{a:function(e){return n.createElement(s.Z.Link,{style:{fontSize:"12px"},href:"/extension/create",target:"_blank"},e)},br:n.createElement("br",null)}}))}))};function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function ot(){ot=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==r&&n.call(w,a)&&(b=w);var S=g.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==nt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(nt(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(O.prototype),l(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function it(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var at=function(e){var t=e.deleteHistoryStatements,r=(0,a.qp)(),o=r.store,i=r.updateStore,c=o.historyStatements,u=function(){var e,r=(e=ot().mark((function e(r){return ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(r),i((function(e){e.historyStatements=e.historyStatements.filter((function(e){return-1===r.indexOf(e.id)}))}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){it(i,n,o,a,c,"next",e)}function c(e){it(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}(),l=c.map((function(e){return e}));return n.createElement($,{title:"History"},n.createElement(W,{items:l,onClick:function(e){e.id;var t=e.script;i((function(e){e.globalScript=t,e.autoRun=!1}))},onDelete:u,placeholder:n.createElement(f.Z,{id:"No query history available"})}))},ct=function(e){var t=e.items;return"Segmented"===e.type?n.createElement(y.SegmentedTabs,{items:t,block:!0,rootStyle:{padding:"8px 8px 8px 4px"}}):n.createElement(y.SideTabs,{items:t,width:320})},ut=(0,n.memo)(ct),lt=r(62950),st=r(84158),ft=r(37339),pt=r(91104),dt=r(33741),yt={"en-US":{Recommended:"Recommended",History:"History",Copilot:"Copilot",Saved:"Saved","Stored Procedures":"Stored Procedures","You can write cypher or gremlin queries, and then click the {icon} button to query data":"You can write cypher or gremlin queries, and then click the {icon} button to query data","Vertex Labels":"Vertex Labels","Edge Labels":"Edge Labels","Property Keys":"Property Keys","No saved query statements {br} You can click {icon} to save.":"No saved query statements {br} You can click {icon} to save.","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"No stored procedures available. {br} Go to the <a>Extension</a> and create one now!","Privacy Security Notice":"Privacy Security Notice",Setting:"Setting","query.app.sidebar.gpt.setting.security":"To improve the quality of generated Cypher query statements, we'll utilize your graph data schema as the prompt for ChatGPT. Your data will be kept strictly confidential and solely used for this purpose.Furthermore, please note that your OpenAI API key is only stored locally in your browser for added security","OpenAI API key is only stored locally in your browser":"OpenAI API key is only stored locally in your browser","query.copilot.welcome":"Hello! I'm the GraphScope Query Assistant. Feel free to ask me any questions about Cypher or Gremlin queries.","recommend 5 interesting query statements":"recommend 5 interesting query statements","query any subgraph":"query any subgraph","insight the statistical distribution of vertex labels in the graph":"insight the statistical distribution of vertex labels in the graph",Save:"Save",Delete:"Delete",Query:"Query",Share:"Share","query submmited on {submitTime}. It's running ... ":"query submmited on {submitTime}. It's running ... ","query submmited on {submitTime}. Running {runningTime} ms":"query submmited on {submitTime}. Running {runningTime} ms","A total of {totalCount} records were retrieved":"A total of {totalCount} records were retrieved","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.",Color:"Color",Size:"Size",Caption:"Caption",LineWidth:"LineWidth","Node properties":"Node properties",Graph:"Graph",Table:"Table",Raw:"Raw","Style Setting":"Style Setting","You can click on each label to set the color, size, and display text for vertices and edges.":"You can click on each label to set the color, size, and display text for vertices and edges.","Export graph json":"Export graph json","Clustering layout":"Clustering layout","Vertex Properties":"Vertex Properties","Connect Endpoint":"Connect Endpoint","Connection URL":"Connection URL","Query language":"Query language","Query initiation method":"Query initiation method",Username:"Username",Password:"Password",Connect:"Connect",Close:"Close","Select nodes by box selection":"Select nodes by box selection","Switch graph view dimensions":"Switch graph view dimensions","Zoom to fitview":"Zoom to fitview",Fullscreen:"Fullscreen","Toggle Right Side":"Toggle Right Side","Caption Status":"Caption Status"},"zh-CN":{Recommended:"推荐查询",History:"历史查询",Copilot:"智能查询",Saved:"保存查询","Stored Procedures":"存储过程","You can write cypher or gremlin queries, and then click the {icon} button to query data":"您可以在这里编写 cypher 或 gremlin 语句，点击 {icon} 按钮查询数据","Vertex Labels":"节点类型","Edge Labels":"边类型","Property Keys":"属性字段","No saved query statements {br} You can click {icon} to save.":"暂无保存的查询语句 {br} 您可以点击 {icon} 保存","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"暂无存储过程 {br} 快去 <a>插件市场</a> 创建一个吧","Privacy Security Notice":"隐私安全说明",Setting:"设置","query.app.sidebar.gpt.setting.security":"为了提高生成Cypher查询语句的质量，我们将使用您的图数据模式作为ChatGPT的提示。您的数据将被严格保密，仅用于此目的。此外，请注意我们的OpenAI API密钥仅存在于您的浏览器本地，以增加安全性。","OpenAI API key is only stored locally in your browser":"OpenAI API key 仅保存在您浏览器本地","query.copilot.welcome":"您好！我是 GraphScope 查询助理，您有任何关于 Cypher 或者 Gremlin 查询的问题都可以随时问我","recommend 5 interesting query statements":"帮我推荐5个有意思的查询","query any subgraph":"查询任意一个子图","insight the statistical distribution of vertex labels in the graph":"帮我分析图中节点类型的分布情况",Save:"保存",Delete:"删除",Query:"查询",Share:"分享","query submmited on {submitTime}. It's running ... ":"查询提交于 {submitTime}. 正在运行中...","query submmited on {submitTime}. Running {runningTime} ms":"查询提交于 {submitTime}. 查询时长 {runningTime} ms","A total of {totalCount} records were retrieved":"一共检索到 {totalCount} 条记录","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"一共检索到 {totalCount} 条记录, 其中包含 {nodeCount} 个节点，{edgeCount} 条边",Color:"颜色",Size:"大小",Caption:"文本",LineWidth:"边宽","Node properties":"属性详情",Graph:"图展示",Table:"表格展示",Raw:"原始数据","Style Setting":"样式设置","You can click on each label to set the color, size, and display text for vertices and edges.":"您可以单击每个标签来设置顶点和边缘的颜色、大小和显示文本。","Export graph json":"导出 json","Clustering layout":"集群布局","Vertex Properties":"节点属性","Connect Endpoint":"连接查询服务","Connection URL":"连接 URL","Query language":"查询语言","Query initiation method":"查询发起方式",Username:"用户名",Password:"密码",Connect:"连接",Close:"关闭","Select nodes by box selection":"通过框选选择节点","Switch graph view dimensions":"切换图表视图维度","Zoom to fitview":"缩放适当视图",Fullscreen:"全屏","Toggle Right Side":"切换右侧","Caption Status":"是否展示标签"}};function ht(e){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(e)}function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mt.apply(this,arguments)}function vt(){vt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==r&&n.call(w,a)&&(b=w);var S=g.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==ht(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(ht(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(O.prototype),l(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function gt(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var bt=y.Utils.getSearchParams,xt=function(e){var t=e.queryGraphData,r=e.handleCancelQuery,o=e.queryGraphSchema,i=e.displaySidebarPosition,c=void 0===i?"left":i,u=e.displaySidebarType,l=void 0===u?"Sidebar":u,s=(e.enableAbsolutePosition,e.queryStatements),p=e.deleteStatements,d=e.createStatements,h=e.enableImmediateQuery,m=e.connectComponent,v=e.sidebarCollapsed,g=e.sidebarStyle,b=e.welcome,x=(0,a.qp)(),w=x.store,S=x.updateStore,E=w.graphId,j=w.isReady,k=w.schemaData,P=[{key:"recommended",title:n.createElement(f.Z,{id:"Recommended"}),icon:n.createElement(ft.G,{icon:pt.X8G}),children:n.createElement(Je,{schemaData:k,schemaId:E})},{key:"saved",title:n.createElement(f.Z,{id:"Saved"}),icon:n.createElement(ft.G,{icon:pt.xVw}),children:n.createElement(te,{deleteStatements:function(e){return p("saved",e)}})},{key:"history",title:n.createElement(f.Z,{id:"History"}),icon:n.createElement(ft.G,{icon:pt.uF7}),children:n.createElement(at,{deleteHistoryStatements:function(e){return p("history",e)}})},{key:"store-procedure",title:n.createElement(f.Z,{id:"Stored Procedures"}),icon:n.createElement(ft.G,{icon:pt.xf3}),children:n.createElement(rt,{deleteStatements:function(e){return p("store-procedure",e)}})},{key:"copilot",title:n.createElement(f.Z,{id:"Copilot"}),icon:n.createElement(ft.G,{icon:pt.VE0}),children:n.createElement(Be,{schemaData:k})}];(0,n.useEffect)((function(){var t;(t=vt().mark((function t(){var r,n,i,c,u,l,f,p,d,y;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=bt("graph_id")||"",n=bt("language")||e.language,i=bt("global_script")||e.globalScript,c=bt("display_mode")||localStorage.getItem(a.rv.mode)||"flow",u=bt("auto_run"),l=u?"true"===u:e.autoRun,f={nodes:[],edges:[]},p=[],d=[],y=[],t.prev=10,t.next=13,o(r);case 13:return f=t.sent,t.next=16,s("history");case 16:return p=t.sent,t.next=19,s("saved");case 19:return d=t.sent,t.next=22,s("store-procedure");case 22:y=t.sent,t.next=27;break;case 25:t.prev=25,t.t0=t.catch(10);case 27:S((function(e){e.isReady=!0,e.graphId=r,e.schemaData=f,e.historyStatements=p,e.savedStatements=d,e.storeProcedures=y,e.autoRun=l,e.globalScript=(0,st.Id)(i),e.mode=c,e.language=n,e.welcome=b}));case 28:case"end":return t.stop()}}),t,null,[[10,25]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(e){gt(i,n,o,a,c,"next",e)}function c(e){gt(i,n,o,a,c,"throw",e)}a(void 0)}))})()}),[]);if(j){var T="left"===c?{leftSide:n.createElement(ut,{items:P,type:l})}:{rightSide:n.createElement(ut,{items:P,type:l})};return n.createElement(y.StudioProvier,{locales:yt},n.createElement(y.Section,mt({style:{height:"calc(100vh - 50px)"}},T,{defaultCollapsed:{leftSide:v,rightSide:v},leftSideStyle:g,rightSideStyle:g,splitBorder:!0}),n.createElement(O,{displaySidebarPosition:c,connectComponent:m,handleCancelQuery:r,createStatements:d,queryGraphData:function(e){var r=e.script,n=e.language,o={id:(0,lt.Z)(),timestamp:(new Date).getTime(),script:r,language:n};return S((function(e){e.historyStatements.push(o)})),t(o)},enableImmediateQuery:h})))}return null},wt=r(613),St=r(31477),Et=r(76842),Ot=r(7234);function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pt=y.Utils.storage,Tt=s.Z.Title,Ct=(s.Z.Text,function(e){var t=jt(Et.Z.useForm(),1)[0],r=e.onConnect,o=e.onClose;n.useEffect((function(){t.setFieldsValue({query_language:e.query_language||Pt.get("query_language")||"cypher",query_endpoint:e.query_endpoint||Pt.get("query_endpoint")||"neo4j://127.0.0.1:7687",query_initiation:e.query_initiation||Pt.get("query_initiation")||"Browser",query_username:e.query_username||Pt.get("query_username")||"admin",query_password:e.query_password||Pt.get("query_password")||"password"})}),[]);return n.createElement(T.Z,{vertical:!0,style:{padding:"12px 24px"}},n.createElement(Tt,{level:3,style:{marginBottom:"12px"}},n.createElement(f.Z,{id:"Connect Endpoint"})),n.createElement(Et.Z,{layout:"vertical",form:t},n.createElement(Et.Z.Item,{label:n.createElement(f.Z,{id:"Connection URL"}),name:"query_endpoint"},n.createElement(pe.Z,null)),n.createElement(Et.Z.Item,{label:n.createElement(f.Z,{id:"Query language"}),name:"query_language"},n.createElement(Ot.default,{allowClear:!0,options:[{label:"Cypher",value:"cypher"},{label:"Gremlin",value:"gremlin"}]})),n.createElement(Et.Z.Item,{label:n.createElement(f.Z,{id:"Query initiation method"}),name:"query_initiation"},n.createElement(Ot.default,{allowClear:!0,options:[{label:"Browser (client-side)",value:"Browser"},{label:'Server (Ensure that your "'.concat(location.origin,'/query" endpoint is available)'),value:"Server"}]})),n.createElement(Et.Z.Item,{label:n.createElement(f.Z,{id:"Username"}),name:"query_username"},n.createElement(pe.Z,null)),n.createElement(Et.Z.Item,{label:n.createElement(f.Z,{id:"Password"}),name:"query_password"},n.createElement(pe.Z.Password,null)),n.createElement(Et.Z.Item,{style:{marginTop:"48px"}},n.createElement(T.Z,{justify:"start"},n.createElement(C.ZP,{type:"primary",htmlType:"submit",style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:function(){var e=t.getFieldsValue(!0);Object.keys(e).forEach((function(t){Pt.set(t,e[t])})),r&&r(t.getFieldsValue(!0))}},n.createElement(f.Z,{id:"Connect"})),o&&n.createElement(C.ZP,{style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:o},n.createElement(f.Z,{id:"Close"}))))))});function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function It(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?It(Object(r),!0).forEach((function(t){At(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function At(e,t,r){var n;return n=function(e,t){if("object"!=Lt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Lt(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dt(){Dt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==r&&n.call(w,a)&&(b=w);var S=g.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Lt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Lt(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(O.prototype),l(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function Rt(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Mt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Rt(i,n,o,a,c,"next",e)}function c(e){Rt(i,n,o,a,c,"throw",e)}a(void 0)}))}}var Ft={},Gt=function(){var e=Mt(Dt().mark((function e(){var t,r,n,o,i=arguments;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:"cypher",r=i.length>1?i[1]:void 0,n=Ft.gremlin_driver,o=Ft.cypher_driver,"cypher"!==t){e.next=6;break}return o||(Ft.cypher_driver=new St.Or(r)),e.abrupt("return",Ft.cypher_driver);case 6:if("gremlin"!==t){e.next=9;break}return n||(Ft.gremlin_driver=new St.VP(r)),e.abrupt("return",Ft.gremlin_driver);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qt=function(e){var t=e||{},r=t.enableImmediateQuery,o=void 0!==r&&r,i=t.mode,a=void 0===i?"flow":i,c=t.id,u=void 0===c?"":c,l=t.timestamp,s=void 0===l?Date.now():l,f=t.graphId,p=void 0===f?"":f,d=t.schemaData,h=void 0===d?{nodes:[],edges:[]}:d,m=t.script,v=void 0===m?"Match (n) return n limit 10":m,g=t.onQuery,b=Nt((0,n.useState)({language:e.language||"cypher",endpoint:e.endpoint||"127.0.0.1:7687"}),2),x=b[0],w=b[1],S=x.language,E=x.endpoint,O=function(){var e=Mt(Dt().mark((function e(t){var r,n;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.language,e.next=3,Gt(r,E);case 3:return n=e.sent,e.abrupt("return",n.query(t.script));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Mt(Dt().mark((function e(t){var r;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.language,e.next=3,Gt(r,E);case 3:e.sent.close();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return g||E&&S?n.createElement(y.StudioProvier,{locales:yt},n.createElement(wt.default,{language:S,enableImmediateQuery:o,mode:a,active:!0,id:u,timestamp:s,graphId:p,schemaData:h,script:v,onQuery:g||O,onCancel:j})):n.createElement(y.StudioProvier,{locales:yt},n.createElement(Ct,{onConnect:function(e){w((function(t){return _t(_t({},t),{},{endpoint:e.query_endpoint||"",language:e.query_language})}))}}))},zt=r(10422),Bt={render_query_statement:function(e){var t=(e||{}).id,r=void 0===t?"root":t;zt.render(n.createElement(qt,e),document.getElementById(r))}},Ut=function(e){return n.createElement(dt.ZP,{store:a.C1},n.createElement(xt,e))}},613:function(e,t,r){r.r(t),r.d(t,{default:function(){return Le}});var n=r(50959),o=r(53531),i=r(16483),a=r.n(i),c=r(63904),u=r(57526),l=r(48722),s=r(82714),f=r(17905),p=r(38943),d=r(28541),y=r(42176),h=r(51558),m=r(45334),v=r(77332),g=r(15001),b=r(37528),x=function(e){var t=e.onSave,r=(0,n.useRef)(null),o=(0,b.Z)();return n.createElement(f.Z,{title:o.formatMessage({id:"Save"})},n.createElement(m.Z,{title:"name your statement",description:n.createElement(v.Z,{width:"200px",ref:r}),onConfirm:function(){if(r.current){var e=r.current.input.value;console.log("InputRef.current",e),t&&t(e)}},onCancel:function(){},okText:"Save",cancelText:"Cancel",placement:"bottomRight"},n.createElement(p.ZP,{type:"text",icon:n.createElement(g.Z,null)})))},w=r(62950);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function E(){E=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new I(n||[]);return o(a,"_invoke",{value:P(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(_([])));w&&w!==r&&n.call(w,a)&&(b=w);var O=g.prototype=m.prototype=Object.create(b);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==S(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function P(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(S(t)+" is not iterable")}return v.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},j(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(O),l(O,u,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function O(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var j=function(e){var t,r=e.onClose,o=e.onQuery,i=e.script,a=void 0===i?"Match (n) return n limit 10":i,m=e.onSave,v=e.id,g=e.isFetching,S=e.antdToken,j=(e.schemaData,e.timestamp,e.language),k=e.message,P=(0,n.useRef)(null),T=(0,b.Z)(),C=function(){var e,t=(e=E().mark((function e(){var t,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null==P||null===(t=P.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),o({id:v,script:r,language:j});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){O(i,n,o,a,c,"next",e)}function c(e){O(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return n.createElement("div",{style:{}},n.createElement(u.Z,{justify:"space-between",style:{paddingBottom:"8px"}},n.createElement(l.Z,null,n.createElement(s.Z.Text,{type:"secondary",style:{fontSize:"12px",textAlign:"center"}},(t=j).charAt(0).toUpperCase()+t.slice(1)," ",k)),n.createElement(l.Z,{size:0},n.createElement(f.Z,{title:T.formatMessage({id:"Query"})},n.createElement(p.ZP,{type:"text",icon:n.createElement(d.Z,{spin:g,style:{color:g?"#52c41a":S.green}}),onClick:C})),m&&n.createElement(x,{onSave:function(e){var t,r=null==P||null===(t=P.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),n=(0,w.Z)();m&&m({id:n,script:r,name:e,language:j})}}),r&&n.createElement(f.Z,{title:T.formatMessage({id:"Share"})},n.createElement(p.ZP,{type:"text",icon:n.createElement(y.Z,{onClick:function(){var e,t=null==P||null===(e=P.current)||void 0===e||null===(e=e.codeEditor)||void 0===e?void 0:e.getValue();window.open("".concat(window.location.origin,"/querying?language=").concat(j,"&auto_run=true&global_script=").concat(encodeURIComponent(t)))}})})),r&&n.createElement(f.Z,{title:T.formatMessage({id:"Delete"})},n.createElement(p.ZP,{type:"text",icon:n.createElement(h.Z,{onClick:function(){r&&r(v)}})})))),n.createElement(c.Z,{language:j,ref:P,value:a}))},k=r(84723),P=r(85971),T=r(31192),C=r(9069),L=r(57591),I=r(88766),_=r(7234),A=r(89966);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){var n;return n=function(e,t){if("object"!=F(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==F(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}var G=function(e){var t=e.table,r=(0,n.useRef)(null),o=n.useState((function(){var e=function(e){var t=e[0],r={},n=[];Object.keys(t).forEach((function(e){var o=F(t[e]);r[e]={key:e,type:o,enums:new Set},"number"===o&&n.push(e)})),e.forEach((function(e){Object.keys(e).forEach((function(t){r[t].enums.add(e[t])}))}));var o=Object.values(r).filter((function(e){return"string"===e.type})).sort((function(e,t){return e.enums.size<t.enums.size})).map((function(e){return e.key})),i=n[0],a=n[1],c=R(o,2),u=c[0],l=c[1];return{type:n.length>1?"point":"interval",x:a||u,y:i,color:l,keys:Object.keys(r)}}(t);return{x:e.x,y:e.y,color:e.color,type:e.type,options:e.keys.map((function(e){return{label:e,value:e}}))}})),i=R(o,2),a=i[0],c=i[1];console.log(a);var u=a.type,s=a.x,f=a.y,p=a.color,d=a.options;(0,n.useEffect)((function(){var e;return r.current&&((e=new A.kL({container:r.current,autoFit:!0})).options({type:u,data:t,encode:{x:s,y:f,color:p},transform:[{type:"dodgeX"}]}),e.render()),function(){r.current&&e.destroy()}}),[u,s,f,t,p,r]);return n.createElement("div",{style:{padding:"16px",overflowX:"hidden"}},n.createElement(l.Z,{style:{paddingBottom:"16px"}},"Type:",n.createElement(_.default,{size:"small",defaultValue:u,style:{width:120},onChange:function(e){c((function(t){return Z(Z({},t),{},{type:e})}))},options:[{label:"interval",value:"interval"},{label:"point",value:"point"}]}),"X:",n.createElement(_.default,{size:"small",defaultValue:s,style:{width:120},onChange:function(e){c((function(t){return Z(Z({},t),{},{x:e})}))},options:d}),"Y:",n.createElement(_.default,{size:"small",defaultValue:f,style:{width:120},onChange:function(e){c((function(t){return Z(Z({},t),{},{y:e})}))},options:d}),"Color:",n.createElement(_.default,{size:"small",defaultValue:p,style:{width:120},onChange:function(e){c((function(t){return Z(Z({},t),{},{color:e})}))},options:d})),n.createElement("div",{ref:r,style:{width:"100%"}}))},q=r(84310),z=r(35731),B=r(36523);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var V=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"12px",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-8px";return n.createElement(n.Fragment,null,Object.entries(t).map((function(t){var i=Y(t,2),a=i[0],c=i[1];return n.createElement("div",{style:{paddingLeft:"16px",overflowWrap:"break-word",wordBreak:"break-all",whiteSpace:"pre-wrap"},key:a},n.createElement("span",{style:{color:"#F9822F",paddingLeft:r}},'"',a,'" :'),n.createElement("span",{style:{paddingLeft:"6px",textIndent:o}},"object"===U(c)&&null!==c?n.createElement(n.Fragment,null,"{",e(c,"24px","16px"),"}"):JSON.stringify(c,null,2)))})))},Q=function(e){var t=e.expandData,r=e.width;return n.createElement(u.Z,null,Object.values(t).map((function(e){return e.key&&n.createElement("div",{style:{marginLeft:"12px",width:"".concat(r,"%")},key:e.key},"{",V(e.data),"}")})))};function W(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $=function(e){var t=e.data,r=t.map((function(e){var t=e.keys,r=e._fields;return t.reduce((function(e,t,n){var o=r[n];return e[t]={key:(0,w.Z)(),elementId:o.elementId,data:o,labels:o.labels?o.labels[0]:void 0,type:o.type,startNodeElementId:o.startNodeElementId,endNodeElementId:o.endNodeElementId},e.key=(0,w.Z)(),e}),{})})),o=t[0].keys,i=100/o.length,a=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,r){return r+1}}].concat(W(o.map((function(e){return{title:e,width:"".concat(i,"%"),key:(0,w.Z)(),render:function(t){return r=t[e],o=r.startNodeElementId,i=r.endNodeElementId,a=r.type,c=r.elementId,u=r.labels,o&&i?n.createElement("span",null,"{",n.createElement(q.Icons.Arrow,{style:{color:"#F97108"}})," : ",a," } ID ",c):n.createElement("span",null,"{",n.createElement(q.Icons.Punctuation,{style:{color:"#B668B0"}})," : ",u," } ID ",c);var r,o,i,a,c,u}}}))),[P.Z.EXPAND_COLUMN]);return n.createElement(P.Z,{size:"small",columns:a,dataSource:r,expandable:{expandedRowRender:function(e){return n.createElement(Q,{expandData:e,width:i})},expandIcon:function(e){var t=e.expanded,r=e.onExpand,o=e.record;return t?n.createElement(z.Z,{style:{color:"#F97108"},onClick:function(e){return r(o,e)}}):n.createElement(B.Z,{onClick:function(e){return r(o,e)}})},expandRowByClick:!0}})};function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t,r){var n;return n=function(e,t){if("object"!=J(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==J(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){if(e){if("string"==typeof e)return ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ie(e,t):void 0}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ae=function(e){var t=e.data,r=t[0],o=Object.keys(r),i=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,r){return r+1}}].concat(ne(o.map((function(e){return{title:e,dataIndex:e,width:"".concat(100/o.length,"%"),key:e}})))),a=t.map((function(e){return te(te({},e),{},{key:e.id})}));return n.createElement(P.Z,{size:"small",columns:i,dataSource:a})},ce=function(e){var t,r=e.data,o=r.table,i=void 0===o?[]:o,a=r.nodes,c=void 0===a?[]:a,d=r.edges,y=void 0===d?[]:d,h=r.raw,m=c.length,v=y.length,g=i.length,x=(0,b.Z)();t=0===m&&0===v&&0!==g?x.formatMessage({id:"A total of {totalCount} records were retrieved"},{totalCount:g}):x.formatMessage({id:"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges."},{totalCount:m+v,nodeCount:m,edgeCount:v});var w,S=X((0,n.useState)("table"),2),E=S[0],O=S[1];return"table"===E&&0!==i.length&&(w=n.createElement(ae,{data:i})),"table"===E&&0===i.length&&0!==h.records.length&&(w=n.createElement($,{data:h.records})),n.createElement("div",{style:{overflowX:"scroll"}},n.createElement(u.Z,{justify:"space-between",style:{padding:"0px 10px 10px 10px"},align:"center"},n.createElement(s.Z.Text,null,t),n.createElement(l.Z,null,n.createElement(T.Z,{value:E,onChange:function(e){O(e)},options:[{value:"chart",icon:n.createElement(C.Z,null),label:"chart"},{value:"table",icon:n.createElement(L.Z,null)}]}),n.createElement(f.Z,{title:"download"},n.createElement(p.ZP,{icon:n.createElement(I.Z,null),type:"text",onClick:function(){var e=c.map((function(e){var t=e.id,r=e.label,n=e.properties;return te({id:t,label:r},void 0===n?{}:n)})),t=y.map((function(e){var t=e.id,r=e.label,n=e.source,o=e.target,i=e.properties;return te({id:t,label:r,source:n,target:o},void 0===i?{}:i)}));q.Utils.createDownload(JSON.stringify({nodes:e,edges:t},null,2),"result.json")}}," ")))),w,"chart"===E&&0!==i.length&&n.createElement(G,{table:i}))},ue=r(5994),le=r(29643),se=r(24174),fe=r.n(se),pe=function(e){var t=e.data;return e.isFetching?n.createElement(ue.ZP,{icon:n.createElement(le.Z,{spin:!0}),status:"error",title:"Running"}):"error"===t.mode?n.createElement(ue.ZP,{status:"error",title:t.raw&&t.raw.name,subTitle:t.raw&&t.raw.message}):n.createElement("div",null,n.createElement(fe(),{src:t.raw}))},de=r(30548),ye=r(13049),he=r(31931);function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ge=function(e){var t=e.data,r=e.isFetching,o=e.schemaData,i=e.graphId,a=e.onQuery,c=me(n.useState(null),2),u=c[0],l=c[1],s=(0,b.Z)(),f=function(e,t,r){var n=e.nodes,o=void 0===n?[]:n,i=e.edges,a=void 0===i?[]:i,c=e.table,u=void 0===c?[]:c,l=(e.raw,o.length>0),s=a.length>0,f=u.length>0,p="raw",d=["raw"];return l&&(p="graph",d=["raw","table","graph"]),!l&&s&&(p="table",d=["raw","table"]),l||s||!f||(p="table",d=["raw","table"]),r&&(p=r),t&&(d=["raw"],p="raw"),{viewMode:p,options:d}}(t,r,u),p=f.viewMode,d=f.options,y=function(e){return-1!==d.indexOf(e)},h=[{label:s.formatMessage({id:"Graph"}),key:"graph",icon:n.createElement(ye.Z,null),children:n.createElement(de.Z,{data:t,schemaData:o,graphId:i,onQuery:a}),disabled:!y("graph")},{label:s.formatMessage({id:"Table"}),key:"table",icon:n.createElement(L.Z,null),children:n.createElement(ce,{data:t}),disabled:!y("table")},{label:s.formatMessage({id:"Raw"}),key:"raw",icon:n.createElement(he.Z,null),children:n.createElement(pe,{data:t,isFetching:r}),disabled:!y("raw")}];return n.createElement("div",{style:{padding:"16px 0px"}},n.createElement(k.Z,{items:h,size:"small",type:"card",activeKey:p,onChange:function(e){l(e)}}))},be=(0,n.memo)(ge);function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function we(){we=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==r&&n.call(w,a)&&(b=w);var S=g.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==xe(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(xe(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(O.prototype),l(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){Oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oe(e,t,r){var n;return n=function(e,t){if("object"!=xe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==xe(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Te=o.Z.useToken,Ce=function(e){var t=e.onQuery,r=e.onClose,o=e.onCancel,i=e.onSave,c=e.script,u=e.id,l=e.active,s=e.mode,f=e.schemaData,p=e.enableImmediateQuery,d=e.graphId,y=e.timestamp,h=e.language,m=Te().token,v=(0,b.Z)(),g=l&&"flow"===s?{border:"1px solid ".concat(m.colorBorder)}:{border:"1px solid  ".concat(m.colorBorder)},x=(0,n.useRef)(null),w=ke((0,n.useState)({data:{},isFetching:!1,startTime:0,endTime:0,abort:!1}),2),S=w[0],E=w[1],O=S.data,k=S.isFetching,P=S.startTime,T=S.endTime;(0,n.useEffect)((function(){x.current&&l&&"flow"===s&&x.current.scrollIntoView({behavior:"smooth"})}),[l]);var C=function(){var e,r=(e=we().mark((function e(r){var n;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=4;break}return o&&o(r),E((function(e){return Ee(Ee({},e),{},{isFetching:!1,data:{}})})),e.abrupt("return");case 4:return E((function(e){return Ee(Ee({},e),{},{isFetching:!0,startTime:(new Date).getTime()})})),e.next=7,t(r);case 7:n=e.sent,E((function(e){return Ee(Ee({},e),{},{data:n,isFetching:!1,endTime:(new Date).getTime()})}));case 9:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){je(i,n,o,a,c,"next",e)}function c(e){je(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();(0,n.useEffect)((function(){p&&(console.log("enableImmediateQuery script",p,c,h),C({id:u,script:c,language:h}))}),[p]);var L=T-P<0?v.formatMessage({id:"query submmited on {submitTime}. It's running ... "},{submitTime:a()(P).format("HH:mm:ss YYYY-MM-DD")}):v.formatMessage({id:"query submmited on {submitTime}. Running {runningTime} ms"},{submitTime:a()(P).format("HH:mm:ss YYYY-MM-DD"),runningTime:T-P});return n.createElement("div",{ref:x,style:Ee(Ee({display:"flex",flexDirection:"column",flex:1,margin:"12px",padding:"8px 16px",borderRadius:"8px"},g),{},{background:m.colorBgBase})},n.createElement(j,{message:L,language:h,timestamp:y,schemaData:f,id:u,script:c,onClose:r,onQuery:C,onSave:i,isFetching:k,antdToken:m}),n.createElement(be,{data:O,isFetching:k,schemaData:f,graphId:d,onQuery:t}))},Le=(0,n.memo)(Ce)},30548:function(e,t,r){r.d(t,{h:function(){return y}});var n=r(50959),o=r(54326);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var a=["properties"],c=["properties","constraints"];function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){var n;return n=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==i(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function y(e){return{nodes:e.nodes.map((function(e){var t=e.properties;return f(f({},d(e,a)),{},{properties:t.reduce((function(e,t){return f(f({},e),{},p({},t.name,t.type))}),{})})})),edges:e.edges.map((function(e){var t=e.properties,r=e.constraints,n=d(e,c),o=u(r[0],2),i=o[0],a=o[1];return f(f({},n),{},{source:i,target:a,properties:t.reduce((function(e,t){return f(f({},e),{},p({},t.name,t.type))}),{})})}))}}t.Z=function(e){var t=e.data,r=e.schemaData,i=e.graphId,a=e.onQuery,c=y(r);return n.createElement("div",{style:{width:"100%"}},n.createElement(o.tk,{data:t,schema:c,graphId:i,onQuery:a}))}},43282:function(e,t,r){r.r(t),r.d(t,{demos:function(){return n}});r(50959),r(85430);var n={}},78624:function(e,t,r){r.r(t),r.d(t,{demos:function(){return u}});var n=r(90228),o=r.n(n),i=r(87999),a=r.n(i),c=r(50959),u=(r(8646),{"packages-studio-components-readme-demo-0":{component:c.memo(c.lazy(a()(o()().mark((function e(){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(2428).then(r.bind(r,22428));case 2:return t=e.sent,n=t.default,e.abrupt("return",{default:function(){return c.createElement(n,null)}});case 5:case"end":return e.stop()}}),e)}))))),asset:null,context:void 0,renderOpts:void 0}})},31482:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return h}});var o,i=r(90228),a=r.n(i),c=r(26068),u=r.n(c),l=r(48305),s=r.n(l),f=r(87999),p=r.n(f),d=r(50959),y=(r(4480),r(84310)),h={"editabletext-demo-0":{component:d.memo(d.lazy(p()(a()().mark((function e(){var t,n,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,o=t.useState,e.next=7,Promise.resolve().then(r.bind(r,84310));case 7:return i=e.sent,c=i.EditableText,e.abrupt("return",{default:function(){var e=o({text:"double click"}),t=s()(e,2),r=t[0],i=t[1],a=r.text;return n.createElement("div",null,n.createElement(c,{text:a,onTextChange:function(e){console.log("value",e),i((function(t){return u()(u()({},t),{},{text:e})}))}}))}});case 10:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"editabletext-demo-0",refAtomIds:["EditableText"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { EditableText } from '@graphscope/studio-components';\nexport default () => {\n  const [state, updateState] = useState({\n    text: 'double click',\n  });\n  const onChange = value => {\n    console.log('value', value);\n    updateState(preState => {\n      return {\n        ...preState,\n        text: value,\n      };\n    });\n  };\n  const { text } = state;\n  return (\n    <div>\n      <EditableText text={text} onTextChange={onChange} />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.7"}},entry:"index.jsx"},context:{react:n||(n=r.t(d,2)),"@graphscope/studio-components":y},renderOpts:{compile:(o=p()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},87231:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return f}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),l=r(50959),s=(r(93238),r(84310)),f={"emptycanvas-demo-0":{component:l.memo(l.lazy(u()(a()().mark((function e(){var t,n,o,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,84310));case 7:return o=e.sent,i=o.EmptyCanvas,e.abrupt("return",{default:function(){return n.createElement("div",null,n.createElement(i,null))}});case 10:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"emptycanvas-demo-0",refAtomIds:["EmptyCanvas"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { EmptyCanvas } from '@graphscope/studio-components';\nexport default () => {\n  return (\n    <div>\n      <EmptyCanvas />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.7"}},entry:"index.jsx"},context:{react:n||(n=r.t(l,2)),"@graphscope/studio-components":s},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},70432:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return f}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),l=r(50959),s=(r(48741),r(84310)),f={"fullscreen-demo-0":{component:l.memo(l.lazy(u()(a()().mark((function e(){var t,n,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,o=t.useRef,e.next=8,Promise.resolve().then(r.bind(r,84310));case 8:return i=e.sent,c=i.FullScreen,e.abrupt("return",{default:function(){var e=o(null);return n.createElement("div",null,n.createElement(c,{containerRef:e}),n.createElement("div",{ref:e,style:{width:"100%",height:"500px",background:"#ddd",textAlign:"center",lineHeight:"100%"}},"Trigger full screen"))}});case 11:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"fullscreen-demo-0",refAtomIds:["FullScreen"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState, useRef } from 'react';\nimport { FullScreen } from '@graphscope/studio-components';\nexport default () => {\n  const containerRef = useRef(null);\n  return (\n    <div>\n      <FullScreen containerRef={containerRef} />\n      <div\n        ref={containerRef}\n        style={{ width: '100%', height: '500px', background: '#ddd', textAlign: 'center', lineHeight: '100%' }}\n      >\n        Trigger full screen\n      </div>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.7"}},entry:"index.jsx"},context:{react:n||(n=r.t(l,2)),"@graphscope/studio-components":s},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},83039:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return p}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),l=r(50959),s=(r(36666),r(16241)),f=r(84310),p={"illustration-demo-0":{component:l.memo(l.lazy(u()(a()().mark((function e(){var t,n,o,i,c,u,l;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,16241));case 7:return o=e.sent,o.Space,i=o.Flex,c=o.Typography,e.next=13,Promise.resolve().then(r.bind(r,84310));case 13:return u=e.sent,l=u.Illustration,e.abrupt("return",{default:function(){return n.createElement(i,{wrap:!0,gap:44},Object.keys(l).map((function(e){var t=l[e];return n.createElement(i,{key:e,gap:8,vertical:!0,align:"center"},n.createElement(t,null),n.createElement(c.Text,null,e))})))}});case 16:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"illustration-demo-0",refAtomIds:["Illustration"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space, Flex, Typography } from 'antd';\nimport { Illustration } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <Flex wrap gap={44}>\n      {Object.keys(Illustration).map(key => {\n        const Item = Illustration[key];\n        return (\n          <Flex key={key} gap={8} vertical align=\"center\">\n            <Item />\n            <Typography.Text>{key}</Typography.Text>\n          </Flex>\n        );\n      })}\n    </Flex>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.7"}},entry:"index.jsx"},context:{react:n||(n=r.t(l,2)),antd:s,"@graphscope/studio-components":f},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},67114:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return f}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),l=r(50959),s=(r(19895),r(84310)),f={"importfiles-demo-0":{component:l.memo(l.lazy(u()(a()().mark((function e(){var t,n,o,i,c,u;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,t.useRef,e.next=8,Promise.resolve().then(r.bind(r,84310));case 8:return o=e.sent,i=o.ImportFiles,c=o.Button,u=o.message,e.abrupt("return",{default:function(){return n.createElement("div",{style:{height:"500px"}},n.createElement(i,{upload:{accept:".json,.csv",title:"xxx",description:"xxx"},type:"json"},(function(e){return n.createElement(n.Fragment,null,n.createElement(c,{type:"primary",onClick:function(){return function(e){u(e)}(e)},loading:e.loading},"Visualization"))})))}});case 13:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"importfiles-demo-0",refAtomIds:["ImportFiles"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState, useRef } from 'react';\nimport { ImportFiles, Button, message } from '@graphscope/studio-components';\n\nexport default () => {\n  const onSubmit = params => {\n    message(params);\n  };\n  return (\n    <div style={{ height: '500px' }}>\n      <ImportFiles\n        upload={{\n          accept: '.json,.csv',\n          title: 'xxx',\n          description: 'xxx',\n        }}\n        type=\"json\"\n      >\n        {params => {\n          return (\n            <>\n              <Button type=\"primary\" onClick={() => onSubmit(params)} loading={params.loading}>\n                Visualization\n              </Button>\n            </>\n          );\n        }}\n      </ImportFiles>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.7"}},entry:"index.jsx"},context:{react:n||(n=r.t(l,2)),"@graphscope/studio-components":s},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},98063:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return p}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),l=r(50959),s=(r(54581),r(16241)),f=r(84310),p={"logo-demo-0":{component:l.memo(l.lazy(u()(a()().mark((function e(){var t,n,o,i,c,u,l;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,16241));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(r.bind(r,84310));case 11:return i=e.sent,c=i.Logo,u=i.LogoText,l=i.LogoImage,e.abrupt("return",{default:function(){return n.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"40px"}},n.createElement(c,null),n.createElement(u,null),n.createElement(l,null))}});case 16:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"logo-demo-0",refAtomIds:["Logo"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { Logo, LogoText, LogoImage } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', gap: '40px' }}>\n      <Logo />\n      <LogoText />\n      <LogoImage />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.7"}},entry:"index.jsx"},context:{react:n||(n=r.t(l,2)),antd:s,"@graphscope/studio-components":f},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},47785:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return y}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),l=r(50959),s=(r(518),r(16241)),f=r(9102),p=r(53420),d=r(5855),y={"provider-demo-0":{component:l.memo(l.lazy(u()(a()().mark((function e(){var t,n,o,i,c,u,l,s,f,p,d,y;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,16241));case 7:return o=e.sent,i=o.Button,o.Space,o.Input,e.next=13,Promise.resolve().then(r.bind(r,9102));case 13:return c=e.sent,u=c.default,e.next=17,Promise.resolve().then(r.bind(r,5855));case 17:return l=e.sent,s=l.useStudioProvier,e.next=21,Promise.resolve().then(r.bind(r,53420));case 21:return f=e.sent,p=f.components,d=f.token,y=function(){var e=s().handleThemeOrLocale;return n.createElement(i,{onClick:function(){e({components:p,token:d})}},"edit")},e.abrupt("return",{default:function(){return n.createElement(u,{mode:"defaultAlgorithm"},n.createElement(y,null),n.createElement(i,null,"colorPrimary"))}});case 26:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"provider-demo-0",refAtomIds:["Provider"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Button, Space, Input } from 'antd';\nimport ThemeProvider from './index.tsx';\nimport { useStudioProvier } from './useThemeConfigProvider.tsx';\nimport { components, token } from './const.ts';\n/** 修改主题色 */\nconst ToogleButton = () => {\n  const { handleThemeOrLocale } = useStudioProvier();\n  return (\n    <Button\n      onClick={() => {\n        handleThemeOrLocale({\n          components,\n          token,\n        });\n      }}\n    >\n      edit\n    </Button>\n  );\n};\n\nexport default () => {\n  return (\n    <ThemeProvider\n      /** 主题模式 */\n      mode=\"defaultAlgorithm\"\n    >\n      <ToogleButton />\n      <Button>colorPrimary</Button>\n    </ThemeProvider>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"./index.tsx":{type:"FILE",value:r(20880).Z},"./const.ts":{type:"FILE",value:r(22211).Z},"./useThemeConfigProvider.tsx":{type:"FILE",value:r(88241).Z}},entry:"index.jsx"},context:{"./index.tsx":f,"./const.ts":p,"./useThemeConfigProvider.tsx":d,react:n||(n=r.t(l,2)),antd:s,"/home/runner/work/portal/portal/packages/studio-components/src/Provider/index.tsx":f,"/home/runner/work/portal/portal/packages/studio-components/src/Provider/const.ts":p,"/home/runner/work/portal/portal/packages/studio-components/src/Provider/useThemeConfigProvider.tsx":d},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},91445:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return f}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),l=r(50959),s=(r(3750),r(78781)),f={"resizablepanel-demo-0":{component:l.memo(l.lazy(u()(a()().mark((function e(){var t,n,o,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,e.next=6,Promise.resolve().then(r.bind(r,78781));case 6:return o=e.sent,i=o.default,e.abrupt("return",{default:function(){return n.createElement(i,{leftSide:n.createElement("div",{style:{minWidth:"300px",height:"300px",background:"#F7F7F7",textAlign:"center"}},"leftSide"),middleSide:n.createElement("div",{style:{minWidth:"600px",height:"300px",background:"#FFA444",textAlign:"center"}},"middleSide"),rightSide:n.createElement("div",{style:{minWidth:"300px",height:"300px",background:"#91CAFA",textAlign:"center"}},"rightSide")})}});case 9:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"resizablepanel-demo-0",refAtomIds:["ResizablePanel"],dependencies:{"index.jsx":{type:"FILE",value:"import React from 'react';\nimport ResizablePanel from './index.tsx';\n\nexport default () => {\n  return (\n    <ResizablePanel\n      leftSide={\n        <div style={{ minWidth: '300px', height: '300px', background: '#F7F7F7', textAlign: 'center' }}>leftSide</div>\n      }\n      middleSide={\n        <div style={{ minWidth: '600px', height: '300px', background: '#FFA444', textAlign: 'center' }}>middleSide</div>\n      }\n      rightSide={\n        <div\n          style={{\n            minWidth: '300px',\n            height: '300px',\n            background: '#91CAFA',\n            textAlign: 'center',\n          }}\n        >\n          rightSide\n        </div>\n      }\n    />\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"./index.tsx":{type:"FILE",value:r(17239).Z}},entry:"index.jsx"},context:{"./index.tsx":s,react:n||(n=r.t(l,2)),"/home/runner/work/portal/portal/packages/studio-components/src/ResizablePanel/index.tsx":s},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},3151:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return p}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),l=r(50959),s=(r(43716),r(16241)),f=r(84310),p={"segmentedtabs-demo-0":{component:l.memo(l.lazy(u()(a()().mark((function e(){var t,n,o,i,c,u,l,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,16241));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(r.bind(r,84310));case 11:return i=e.sent,c=i.SegmentedTabs,u=function(){return n.createElement("div",null,"Tab-1 components")},l=function(){return n.createElement("div",null,"Tab-2 components")},s=function(){return n.createElement("div",null,"Tab-3 components")},e.abrupt("return",{default:function(){var e=[{key:"Tab-1",children:n.createElement(u,null),label:"Tab-1"},{key:"Tab-2",children:n.createElement(l,null),label:"Tab-2"},{key:"Tab-3",children:n.createElement(s,null),label:"Tab-3"}];return n.createElement("div",null,n.createElement(c,{items:e}))}});case 17:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"segmentedtabs-demo-0",refAtomIds:["SegmentedTabs"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { SegmentedTabs } from '@graphscope/studio-components';\nconst Tab1 = () => {\n  return <div>Tab-1 components</div>;\n};\nconst Tab2 = () => {\n  return <div>Tab-2 components</div>;\n};\nconst Tab3 = () => {\n  return <div>Tab-3 components</div>;\n};\nexport default () => {\n  const items = [\n    {\n      key: 'Tab-1',\n      children: <Tab1 />,\n      label: 'Tab-1',\n    },\n    {\n      key: 'Tab-2',\n      children: <Tab2 />,\n      label: 'Tab-2',\n    },\n    {\n      key: 'Tab-3',\n      children: <Tab3 />,\n      label: 'Tab-3',\n    },\n  ];\n  return (\n    <div>\n      <SegmentedTabs items={items}></SegmentedTabs>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.7"}},entry:"index.jsx"},context:{react:n||(n=r.t(l,2)),antd:s,"@graphscope/studio-components":f},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},62359:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return p}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),l=r(50959),s=(r(43765),r(16241)),f=r(84310),p={"sidetabs-demo-0":{component:l.memo(l.lazy(u()(a()().mark((function e(){var t,n,o,i,c,u,l;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,16241));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(r.bind(r,84310));case 11:return i=e.sent,i.SegmentedTabs,c=function(){return n.createElement("div",null,"Tab-1 components")},u=function(){return n.createElement("div",null,"Tab-2 components")},l=function(){return n.createElement("div",null,"Tab-3 components")},e.abrupt("return",{default:function(){var e=[{key:"Tab-1",children:n.createElement(c,null),label:"Tab-1"},{key:"Tab-2",children:n.createElement(u,null),label:"Tab-2"},{key:"Tab-3",children:n.createElement(l,null),label:"Tab-3"}];return n.createElement("div",null,n.createElement(Sidebar,{options:e,value:"Tab-1",collapse:!1}))}});case 17:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"sidetabs-demo-0",refAtomIds:["SideTabs"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { SegmentedTabs } from '@graphscope/studio-components';\nconst Tab1 = () => {\n  return <div>Tab-1 components</div>;\n};\nconst Tab2 = () => {\n  return <div>Tab-2 components</div>;\n};\nconst Tab3 = () => {\n  return <div>Tab-3 components</div>;\n};\nexport default () => {\n  const items = [\n    {\n      key: 'Tab-1',\n      children: <Tab1 />,\n      label: 'Tab-1',\n    },\n    {\n      key: 'Tab-2',\n      children: <Tab2 />,\n      label: 'Tab-2',\n    },\n    {\n      key: 'Tab-3',\n      children: <Tab3 />,\n      label: 'Tab-3',\n    },\n  ];\n  return (\n    <div>\n      <Sidebar options={items} value=\"Tab-1\" collapse={false} />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.7"}},entry:"index.jsx"},context:{react:n||(n=r.t(l,2)),antd:s,"@graphscope/studio-components":f},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},99409:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return p}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),l=r(50959),s=(r(44412),r(16241)),f=r(84310),p={"tablecard-demo-0":{component:l.memo(l.lazy(u()(a()().mark((function e(){var t,n,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,16241));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(r.bind(r,84310));case 11:return i=e.sent,c=i.TableCard,e.abrupt("return",{default:function(){return n.createElement("div",null,n.createElement(c,{data:{label:"table-1",properties:[{}]}}))}});case 14:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"tablecard-demo-0",refAtomIds:["TableCard"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { TableCard } from '@graphscope/studio-components';\n\nexport default () => {\n  const data = {\n    label: 'table-1',\n    properties: [{}],\n  };\n  return (\n    <div>\n      <TableCard data={data}></TableCard>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.7"}},entry:"index.jsx"},context:{react:n||(n=r.t(l,2)),antd:s,"@graphscope/studio-components":f},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},98440:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return p}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),l=r(50959),s=(r(85792),r(16241)),f=r(84310),p={"toolbar-demo-0":{component:l.memo(l.lazy(u()(a()().mark((function e(){var t,n,o,i,c,u,l;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,16241));case 7:return o=e.sent,o.Space,i=o.Button,e.next=12,Promise.resolve().then(r.bind(r,84310));case 12:return c=e.sent,u=c.Toolbar,l=c.Icons,e.abrupt("return",{default:function(){return n.createElement("div",{style:{position:"relative",height:"400px"}},n.createElement(u,null,n.createElement(i,{type:"text",icon:n.createElement(l.Sidebar,null)}),n.createElement(i,{type:"text",icon:n.createElement(l.AddNode,null)})))}});case 16:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"toolbar-demo-0",refAtomIds:["Toolbar"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space, Button } from 'antd';\nimport { Toolbar, Icons } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <div style={{ position: 'relative', height: '400px' }}>\n      <Toolbar>\n        <Button type=\"text\" icon={<Icons.Sidebar />} />\n        <Button type=\"text\" icon={<Icons.AddNode />} />\n      </Toolbar>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.7"}},entry:"index.jsx"},context:{react:n||(n=r.t(l,2)),antd:s,"@graphscope/studio-components":f},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},2434:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return p}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),l=r(50959),s=(r(44117),r(16241)),f=r(84310),p={"typingtext-demo-0":{component:l.memo(l.lazy(u()(a()().mark((function e(){var t,n,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,16241));case 7:return o=e.sent,o.Space,o.Button,e.next=12,Promise.resolve().then(r.bind(r,84310));case 12:return i=e.sent,c=i.TypingText,e.abrupt("return",{default:function(){return n.createElement(c,null,"GraphScope Portal is a user-friendly web interface that simplifies managing graph data with GraphScope. It offers one-stop access to data modeling, importing, querying, and monitoring, catering to both Interactive and Insight engines within the GraphScope Flex architecture.")}});case 15:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"typingtext-demo-0",refAtomIds:["TypingText"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space, Button } from 'antd';\nimport { TypingText } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <TypingText>\n      GraphScope Portal is a user-friendly web interface that simplifies managing graph data with GraphScope. It offers\n      one-stop access to data modeling, importing, querying, and monitoring, catering to both Interactive and Insight\n      engines within the GraphScope Flex architecture.\n    </TypingText>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.7"}},entry:"index.jsx"},context:{react:n||(n=r.t(l,2)),antd:s,"@graphscope/studio-components":f},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},54734:function(e,t,r){r.r(t),r.d(t,{demos:function(){return n}});r(50959),r(4866);var n={}},82463:function(e,t,r){r.r(t),r.d(t,{demos:function(){return s}});var n,o=r(90228),i=r.n(o),a=r(87999),c=r.n(a),u=r(50959),l=(r(93995),r(84310)),s={"layout-demo-0":{component:u.memo(u.lazy(c()(i()().mark((function e(){var t,n,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.bind(r,84310));case 2:return t=e.sent,n=t.Layout,o=t.Icons,t.StudioProvider,e.abrupt("return",{default:function(){var e=[{label:"home",key:"/home",icon:u.createElement(o.Cluster,null)}];return u.createElement("div",{style:{height:"500px",border:"1px solid red"}},u.createElement(n,{sideMenu:[e]}))}});case 7:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"layout-demo-0",refAtomIds:["layout"],dependencies:{"index.jsx":{type:"FILE",value:"import { Layout, Icons, StudioProvider } from '@graphscope/studio-components';\n\nexport default () => {\n  const sideMenu = [\n    {\n      label: 'home',\n      key: '/home',\n      icon: <Icons.Cluster />,\n    },\n  ];\n  return (\n    <div style={{ height: '500px', border: '1px solid red' }}>\n      <Layout sideMenu={[sideMenu]} />\n    </div>\n  );\n};"},"@graphscope/studio-components":{type:"NPM",value:"0.1.7"}},entry:"index.jsx"},context:{"@graphscope/studio-components":l},renderOpts:{compile:(n=c()(i()().mark((function e(){var t,n=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})}}}},55348:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return f}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),l=r(50959),s=(r(26973),r(61719)),f={"packages-studio-importor-src-app-demo-0":{component:l.memo(l.lazy(u()(a()().mark((function e(){var t,n,o,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,t.useEffect,e.next=8,Promise.resolve().then(r.bind(r,61719));case 8:return o=e.sent,i=o.default,e.abrupt("return",{default:function(){var e=function(){var e=u()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{nodes:[],edges:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.createElement("div",{style:{position:"fixed",top:"65px",left:"0px",right:"0px",zIndex:999,bottom:"0px",background:"#fff"}},n.createElement(i,{queryPrimitiveTypes:function(){return["DT_DOUBLE","DT_STRING","DT_SIGNED_INT32","DT_SIGNED_INT64"].map((function(e){return{label:e,value:e}}))},queryGraphSchema:e,appMode:"DATA_MODELING"}))}});case 11:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"packages-studio-importor-src-app-demo-0",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState, useEffect } from 'react';\nimport ModelingApp from '@graphscope/studio-importor';\nexport default () => {\n  const queryGraphSchema = async () => {\n    return { nodes: [], edges: [] };\n  };\n  return (\n    <div\n      style={{\n        // padding: '12px',\n        // height: 'calc(100vh - 64px)',\n        // boxSizing: 'border-box',\n        position: 'fixed',\n        top: '65px',\n        left: '0px',\n        right: '0px',\n        zIndex: 999,\n        bottom: '0px',\n        background: '#fff',\n      }}\n    >\n      <ModelingApp\n        /** 属性下拉选项值 */\n        queryPrimitiveTypes={() => {\n          return ['DT_DOUBLE', 'DT_STRING', 'DT_SIGNED_INT32', 'DT_SIGNED_INT64'].map(item => {\n            return { label: item, value: item };\n          });\n        }}\n        queryGraphSchema={queryGraphSchema}\n        appMode=\"DATA_MODELING\"\n      />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-importor":{type:"NPM",value:"0.1.7"}},entry:"index.jsx"},context:{react:n||(n=r.t(l,2)),"@graphscope/studio-importor":s},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},52545:function(e,t,r){r.r(t),r.d(t,{demos:function(){return f}});var n,o=r(90228),i=r.n(o),a=r(87999),c=r.n(a),u=r(50959),l=(r(67866),r(21050)),s=r(84310),f={"packages-studio-query-src-app-demo-0":{component:u.memo(u.lazy(c()(i()().mark((function e(){var t,n,o,a,c;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.bind(r,21050));case 2:return t=e.sent,n=t.default,e.next=6,Promise.resolve().then(r.bind(r,84310));case 6:return o=e.sent,a=o.Utils,c=a.storage,e.abrupt("return",{default:function(){var e=window.GS_ENGINE_TYPE,t="groot"===e?"gremlin":"cypher",r="groot"===e?"g.V().limit 10":"Match (n) return n limit 10",o=c.get("locale")||"en-US",i=c.get("primaryColor")||"#1978FF",a=c.get("themeColor")||"defaultAlgorithm";return u.createElement("div",{style:{position:"fixed",top:"65px",left:"0px",right:"0px",zIndex:999,bottom:"0px",background:"#fff"}},u.createElement(n,{theme:{mode:a,primaryColor:i},locale:o,globalScript:r,language:t,queryInfo:function(){return new Promise((function(e){e({graph_name:"demo"})}))},queryGraphSchema:function(){return new Promise((function(e){e({nodes:[],edges:[]})}))},queryStatements:function(){return new Promise((function(e){e([])}))}}))}});case 10:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"packages-studio-query-src-app-demo-0",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:"import QueryApp from '@graphscope/studio-query';\nimport { Utils } from '@graphscope/studio-components';\nconst { storage } = Utils;\n\nexport default () => {\n  const queryInfo = () => {\n    return new Promise(resolve => {\n      resolve({\n        graph_name: 'demo',\n      });\n    });\n  };\n  const queryGraphSchema = () => {\n    return new Promise(resolve => {\n      resolve({\n        nodes: [],\n        edges: [],\n      });\n    });\n  };\n  const queryStatements = () => {\n    return new Promise(resolve => {\n      resolve([]);\n    });\n  };\n  const { GS_ENGINE_TYPE } = window;\n  const language = GS_ENGINE_TYPE === 'groot' ? 'gremlin' : 'cypher';\n  const globalScript = GS_ENGINE_TYPE === 'groot' ? 'g.V().limit 10' : 'Match (n) return n limit 10';\n\n  const locale = storage.get('locale') || 'en-US';\n  const primaryColor = storage.get('primaryColor') || '#1978FF';\n  const themeMode = storage.get('themeColor') || 'defaultAlgorithm';\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        top: '65px',\n        left: '0px',\n        right: '0px',\n        zIndex: 999,\n        bottom: '0px',\n        background: '#fff',\n      }}\n    >\n      <QueryApp\n        /** 主题相关 */\n        theme={{ mode: themeMode, primaryColor }}\n        /** 国际化 */\n        locale={locale}\n        /** 返回导航 */\n        globalScript={globalScript}\n        language={language}\n        queryInfo={queryInfo}\n        queryGraphSchema={queryGraphSchema}\n        queryStatements={queryStatements}\n      />\n    </div>\n  );\n};"},"@graphscope/studio-query":{type:"NPM",value:"0.1.7"},"@graphscope/studio-components":{type:"NPM",value:"0.1.7"}},entry:"index.jsx"},context:{"@graphscope/studio-query":l,"@graphscope/studio-components":s},renderOpts:{compile:(n=c()(i()().mark((function e(){var t,n=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})}}}},57298:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return f}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),l=r(50959),s=(r(37275),r(59506)),f={"packages-studio-query-src-statement-demo-0":{component:l.memo(l.lazy(u()(a()().mark((function e(){var t,n,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,t.default,e.next=6,Promise.resolve().then(r.bind(r,59506));case 6:return n=e.sent,o=n.default,e.abrupt("return",{default:o});case 9:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"packages-studio-query-src-statement-demo-0",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:"import React from 'react';\nimport SDK from '../sdk/index.tsx';\nexport default SDK;"},react:{type:"NPM",value:"18.2.0"},"../sdk/index.tsx":{type:"FILE",value:r(9534).Z}},entry:"index.jsx"},context:{"../sdk/index.tsx":s,react:n||(n=r.t(l,2)),"/home/runner/work/portal/portal/packages/studio-query/src/sdk/index.tsx":s},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},53420:function(e,t,r){r.r(t),r.d(t,{components:function(){return n},token:function(){return o}});var n={Menu:{itemBg:"rgba(255, 255, 255, 0)",subMenuItemBg:"rgba(255, 255, 255, 0)",iconMarginInlineEnd:14,itemMarginInline:4,iconSize:14,collapsedWidth:50,itemActiveBg:"#eaeaea"},Typography:{titleMarginBottom:"0.2em",titleMarginTop:"0.8em"},Table:{cellPaddingBlock:4,cellPaddingInline:8},Pagination:{itemSize:20},Result:{iconFontSize:62,titleFontSize:20,colorError:"#00000073"}},o={colorBorder:"red",colorBgBase:"#fff"}},9102:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var n=r(26068),o=r.n(n),i=r(48305),a=r.n(i),c=r(50959),u=r(36276),l=r(53531),s=r(98262),f=r(5855);r(15558),r(31759),r(90228),r(87999);new(r(49582).Parser)("mysql");var p=function(e){try{var t=localStorage.getItem(e);if(t)return function(e){try{return JSON.parse(e)}catch(t){if("string"!=typeof e||e.startsWith('"')||e.endsWith('"'))return e;try{return JSON.parse('"'.concat(e,'"'))}catch(t){return console.error("Failed to parse the input:",t),e}}}(t)}catch(e){console.error("Error while retrieving data from localStorage:",e)}},d=function(e,t){try{localStorage.setItem(e,JSON.stringify(t,null,2))}catch(e){console.error("Error while storing data in localStorage:",e)}};var y=r(11527),h=function(e){var t=e.children,r=e.locales,n=(0,c.useState)((function(){var t=e.algorithm,r=e.locale;return r||(r=p("locale"))||d("locale",r="en-US"),t||(t=p("algorithm"))||d("algorithm",t="defaultAlgorithm"),{components:p("components"),token:p("token"),algorithm:t,locale:r}})),i=a()(n,2),h=i[0],m=i[1],v=h.components,g=h.token,b=h.algorithm,x=h.locale,w=function(e){var t="defaultAlgorithm"===e;return{componentsConfig:{Menu:{itemBg:"rgba(255, 255, 255, 0)",subMenuItemBg:"rgba(255, 255, 255, 0)",iconMarginInlineEnd:14,itemMarginInline:4,iconSize:14,collapsedWidth:56,horizontalLineHeight:32,itemHeight:32},Typography:{titleMarginBottom:"0.2em",titleMarginTop:"0.8em"},Table:{cellPaddingBlock:4,cellPaddingInline:8},Pagination:{itemSize:20},Result:{iconFontSize:62,titleFontSize:20,colorError:"#00000073"}},tokenConfig:{colorBorder:t?"#F0F0F0":"#303030",colorBgBase:t?"#fff":"#1d1d1d",colorBgLayout:t?"#f5f7f9":"rgba(43,43,43,1)"}}}(b),S=w.componentsConfig,E=w.tokenConfig,O=function(){var e="defaultAlgorithm"===(0,f.useStudioProvier)().algorithm;return{sectionBackground:e?"#fff":"#0D0D0D",containerBackground:e?"#f5f7f9":"#020202",instanceBackground:e?"#FCFCFC":"",jobDetailBorder:e?"#efefef":"#323232",jobDetailColor:e?"#1F1F1F":"#808080",codeMirrorBorder:e?"#efefef":"#323232",editorBackground:e?"#fff":"#151515",editorForeground:e?"#212121":"#FFF",buttonBackground:e?"#fff":"#1d1d1d",layoutBackground:e?"#fff":"#020202"}}(),j="defaultAlgorithm"===b,k=r[x||"en-US"];return(0,y.jsx)(f.ContainerProvider,{value:o()({token:o()(o()({},E),g),components:o()(o()({},S),v),handleThemeOrLocale:function(e){var t=e.components,r=e.token;Object.keys(e).forEach((function(t){d(t,e[t])})),m((function(n){var i;return d("token",o()(o()({},n.token),r)),o()(o()({},n),{},{components:o()(o()({},n.components),t),token:o()(o()({},n.token),r),algorithm:e.algorithm||n.algorithm,locale:null!==(i=e.locale)&&void 0!==i?i:p("locale")})}))},algorithm:b,locale:x,isLight:j},O),children:(0,y.jsx)(s.Z,{messages:k,locale:x,children:(0,y.jsx)(u.ZP,{theme:{algorithm:j?l.Z.defaultAlgorithm:l.Z.darkAlgorithm,components:o()(o()({},S),v),token:o()(o()({},E),g)},children:t})})})}},5855:function(e,t,r){r.r(t),r.d(t,{ContainerContext:function(){return a},ContainerProvider:function(){return c},useStudioProvier:function(){return u}});var n=r(36075),o=r.n(n),i=r(50959),a=(0,i.createContext)({components:{},token:{},handleThemeOrLocale:function(e){o()(e)},locale:"en-US",algorithm:"defaultAlgorithm",isLight:!1}),c=a.Provider,u=function(){var e=(0,i.useContext)(a);if(void 0===e||0===Object.keys(e).length)throw new Error("useContext must be used within a ContainerProvider");return e}},78781:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});r(50959);var n=r(8395),o=r(11527),i={ResizeHandleOuter:{flex:"0 0 1.5em",position:"relative",outline:"none",transform:"rotate(90deg)",backgroundColor:"transparent"},ResizeHandleInner:{position:"absolute",top:"0.25em",bottom:"0.25em",left:"0.25em",right:"0.25em",borderRadius:"0.25em",backgroundColor:"transparent",transition:"background-color 0.2s linear"},Icon:{width:"1em",height:"1em",position:"absolute",left:"calc(50% - 0.5rem)",top:"calc(50% - 0.5rem)"}};function a(e){e.className;var t=e.id;return(0,o.jsx)(n.OT,{style:i.ResizeHandleOuter,id:t,children:(0,o.jsx)("div",{style:i.ResizeHandleInner,children:(0,o.jsx)("svg",{style:i.Icon,viewBox:"0 0 24 24",children:(0,o.jsx)("path",{fill:"currentColor",d:"M8,18H11V15H2V13H22V15H13V18H16L12,22L8,18M12,2L8,6H11V9H2V11H22V9H13V6H16L12,2Z"})})})})}var c={Container:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:"1rem"},Panel:{display:"flex",flexDirection:"row"},PanelContent:{height:"100%",width:"100%",borderRadius:"0.5rem"}},u=function(e){var t=e.leftSide,r=e.middleSide,i=e.rightSide,u=e.leftMinSize,l=void 0===u?20:u,s=e.leftMaxSize,f=void 0===s?40:s,p=e.rightMinSize,d=void 0===p?20:p,y=e.rightMaxSize,h=void 0===y?40:y;return(0,o.jsx)("div",{style:c.Container,children:(0,o.jsxs)(n.eh,{autoSaveId:"example",direction:"horizontal",children:[t&&[(0,o.jsx)(n.s_,{style:c.Panel,collapsible:!1,order:1,minSize:l,maxSize:f,children:(0,o.jsx)("div",{style:c.PanelContent,children:t})}),(0,o.jsx)(a,{},"left-handle")],(0,o.jsx)(n.s_,{style:c.Panel,collapsible:!1,order:2,children:(0,o.jsx)("div",{style:c.PanelContent,children:r})}),i&&[(0,o.jsx)(a,{},"right-handle"),(0,o.jsx)(n.s_,{style:c.Panel,collapsible:!1,order:3,minSize:d,maxSize:h,children:(0,o.jsx)("div",{style:c.PanelContent,children:i})})]]})})}},73174:function(e,t,r){r.d(t,{qp:function(){return i},rv:function(){return o}});var n=r(33741),o={mode:"GS_STUDIO_QUERY_MODE"},i=function(){return(0,n.qp)()}},16471:function(e,t,r){r.d(t,{Ek:function(){return n}});r(84310).Utils.storage;function n(e){return(e.match(/\r?\n/g)||[]).length+1}},70667:function(e,t,r){r.d(t,{Z:function(){return x}});var n=r(50959),o=r(84310),i=r(96066),a=(r(52871),r(26068)),c=r.n(a),u=r(15558),l=r.n(u),s={comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}]},f={defaultToken:"",tokenPostfix:".gremlin",ignoreCase:!0,brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["g","V","E","out","in","both","has","hasLabel","limit","order","by","select","count","filter","map","dedup","outE","inE","bothE"],builtinLiterals:["true","false","null"],builtinFunctions:["values","keys","id","label","property","outV","inV","bothV","sum","mean","min","max","coalesce","is","not","range","fold"],operators:["+","-","*","/","%","^","=","<>","<",">","<=",">="],escapes:/\\(?:[tbnrf\\"'`]|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+/,octaldigits:/[0-7]+/,hexdigits:/[0-9a-fA-F]+/,tokenizer:{root:[[/[{}[\]()]/,"@brackets"],{include:"common"}],common:[{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/:[a-zA-Z_][\w]*/,"type.identifier"],[/[a-zA-Z_][\w]*(?=\()/,{cases:{"@builtinFunctions":"predefined.function","@keywords":"keyword","@default":"identifier"}}],[/`/,"identifier.escape","@identifierBacktick"],[/[;,.:|]/,"delimiter"],[/[\+\-\*\/\^%]+/,"delimiter.operator"],[/[\!<>\?=\|&]/,"delimiter"]],numbers:[[/-?(@digits)[eE](-?(@digits))?/,"number.float"],[/-?(@digits)?\.(@digits)([eE]-?(@digits))?/,"number.float"],[/-?0x(@hexdigits)/,"number.hex"],[/-?0(@octaldigits)/,"number.octal"],[/-?(@digits)/,"number"]],strings:[[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@stringDouble"],[/'/,"string","@stringSingle"]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/\/\/.*/,"comment"],[/[^/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],stringDouble:[[/[^\\"]+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/"/,"string","@pop"]],stringSingle:[[/[^\\']+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/'/,"string","@pop"]],identifierBacktick:[[/[^\\`]+/,"identifier.escape"],[/@escapes/,"identifier.escape"],[/\\./,"identifier.escape.invalid"],[/`/,"identifier.escape","@pop"]]}};var p=[].concat(["count","fold","sum","min","max","mean","group","groupCount"],["hasId","hasLabel","has","hasNot","is","where","not","dedup","order","limit","coin","sample","union"],["id","label","constant","valueMap","values","elementMap","select"]),d=["outV","inV","otherV","bothV"],y=["outE","inE","bothE","out","in","both"],h={};[].concat(d,["out","in","both"]).forEach((function(e){h[e]=[].concat(y,l()(p))})),["outE","inE","bothE"].forEach((function(e){h[e]=[].concat(d,l()(p))}));var m=r(11527);function v(e){return(e.match(/\r?\n/g)||[]).length+1}i.Mj.register({id:"gremlin"}),i.Mj.setMonarchTokensProvider("gremlin",f),i.Mj.setLanguageConfiguration("gremlin",s),i.Mj.registerCompletionItemProvider("gremlin",{triggerCharacters:["."],provideCompletionItems:function(e,t){var r,n=e.getLineContent(t.lineNumber).slice(0,t.column-1).trim(),o=function(e){var t=c()({g:["V","E"],V:[].concat(y,["match"],l()(p)),E:[].concat(d,l()(p))},h)[e]||[];return t.map((function(e){return{label:e,kind:i.Mj.CompletionItemKind.Function,documentation:e,insertText:"".concat(e,"()")}}))}((r=n.replace(/\(.*?\)/g,"").split(/\s|\./).filter(Boolean)).length>0?r[r.length-1]:"");return{suggestions:o}}});var g={cypher:"cypherTheme",gremlin:"GremlinTheme"},b=(0,n.forwardRef)((function(e,t){(0,o.useDynamicStyle)("\n.monaco-editor .view-overlays .current-line {\n  background-color: transparent !important;\n}\n\n.monaco-editor .monaco-scrollable-element::-webkit-scrollbar {\n  display: none;\n}\n\n.decorationsOverviewRuler {\n  display: none !important;\n}\n\n.monaco-editor .view-overlays .current-line-exact {\n  border: none !important;\n}\n\n.monaco-editor .scroll-decoration {\n  box-shadow: none;\n}\n","cypher-editor-style");var r,a=e.value,c=e.language,u=void 0===c?"cypher":c,l=e.maxRows,s=void 0===l?10:l,f=e.minRows,p=void 0===f?1:f,d=e.onChangeContent,y=e.clear,h=e.onInit,b=d?0:v(a),x=(0,o.useStudioProvier)().isLight;return(0,n.useEffect)((function(){return t&&t.current&&(v(a)<=s&&(t.current.style.height=20*v(a)+"px"),r=i.j6.create(t.current,{language:"gremlin",value:a,theme:x?g[u]:"vs-dark",suggestLineHeight:20,automaticLayout:!0,minimap:{enabled:!1},fontSize:14,lineHeight:20,folding:!0,wordWrap:"on",scrollBeyondLastLine:!1,scrollBeyondLastColumn:0}),t.current.codeEditor=r,r.onDidChangeModelContent((function(){var e,n=r.getContentHeight(),o=null===(e=r.getModel())||void 0===e?void 0:e.getLineCount();n<=20*s&&(t.current.style.height=n+"px"),d&&d(o,r)})),h&&h(t.current)),function(){r.dispose()}}),[t,a,u,!x]),n.useEffect((function(){y&&t&&t.current&&t.current.codeEditor&&t.current.codeEditor.setValue("")}),[y]),(0,m.jsx)("div",{ref:t,style:{padding:"5px 0px",width:"100%",height:20*(p+b)+"px",border:x?"1px solid rgb(187, 190, 195)":"1px solid #434343",borderRadius:"6px"}})})),x=b},59506:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var n=r(26068),o=r.n(n),i=r(48305),a=r.n(i),c=r(90228),u=r.n(c),l=r(87999),s=r.n(l),f=r(50959),p=r(53531),d=(r(73174),r(11527)),y=(p.Z.useToken,r(84310)),h=(p.Z.useToken,r(15558),r(82714));r(16483),h.Z.Text,h.Z.Title,p.Z.useToken;r(17069),r(25298),r(82092),"\n你的角色是一个 Cypher 查询助手，你可以根据 Schema 结构，给用户推荐你任务最重要的5条 Cypher 查询语句\n\n任务1: 根据 Schema 结构，自动推荐出关联性最大，最利于用户分析的 10 条Cypher查询语句\nSchema：\n".concat(JSON.stringify({nodes:[{label:"Paper",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"conference",type:"DT_STRING"},{name:"CCFRank",type:"DT_STRING"},{name:"CCFField",type:"DT_STRING"},{name:"year",type:"DT_SIGNED_INT32"},{name:"paper",type:"DT_STRING"}],primary:"id"},{label:"Challenge",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"challenge",type:"DT_STRING"}],primary:"id"},{label:"Topic",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"category",type:"DT_STRING"}],primary:"id"},{label:"Task",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"task",type:"DT_STRING"}],primary:"id"},{label:"Solution",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"solution",type:"DT_STRING"}],primary:"id"},{label:"CCFField",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"field",type:"DT_STRING"}],primary:"id"}],edges:[{label:"WorkOn",properties:[],primary:"WorkOn",constraints:[["Paper","Task"]]},{label:"Resolve",properties:[],primary:"Resolve",constraints:[["Paper","Challenge"]]},{label:"Target",properties:[{name:"number",type:"DT_SIGNED_INT32"}],primary:"Target",constraints:[["Task","Challenge"]]},{label:"Belong",properties:[],primary:"Belong",constraints:[["Task","Topic"]]},{label:"Use",properties:[],primary:"Use",constraints:[["Paper","Solution"]]},{label:"ApplyOn",properties:[],primary:"ApplyOn",constraints:[["Solution","Challenge"]]},{label:"HasField",properties:[],primary:"HasField",constraints:[["Paper","CCFField"]]},{label:"Citation",properties:[],primary:"Citation",constraints:[["Paper","Paper"]]}]},null,2),"\nAnswers:\n").concat(JSON.stringify([{cypher:"Match (n:Paper) return n limit 30",desc:"查询出 Paper 类型的节点"},{cypher:"MATCH (p:Paper)-[:WorkOn]->(a:Task),(a)-[:Belong]->(t: Topic) RETURN t.category,  COUNT(p)",desc:"找出每个主题下的论文数量"},{cypher:"MATCH (t: Topic)<-[:Belong]-(a:Task),\n      (a)<-[:WorkOn]-(p:Paper)-[:Use]->(s:Solution),\n      (s)-[:ApplyOn]->(ch:Challenge)\n  WHERE t.category = $topic_name\n  RETURN t.category, ch.challenge, COUNT(p)",desc:"检索特定主题下，每个挑战（Challenge）所应用的解决方案（Solution）中与论文（Paper）相关的数量"}],null,2),"\n\n任务2: 根据 Schema 结构和用户的输入，生成 Cypher 查询语句，用于图数据库查询\n").concat("\n注意要以JSON的格式返回结果：\nRight Cases:\nquerys1: 列举出鲁迅的一个别名可以吗？\nanswer1: \"match (:ENTITY{name:'鲁迅'})<--(h)-[:Relationship{name:'别名'}]->(q) return distinct q.name limit 1\"\n\nquerys2: 我们常用的301SH不锈钢带的硬度公差是多少，你知道吗？ \nanswers2: \"match(p:ENTITY{name:'301SH不锈钢带'})-[:Relationship{name:'硬度公差'}]-> (q) return q.name\"\nWrong Cases:\nquerys: 12344加油这首歌真好听，你知道歌曲原唱是谁吗？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '12345加油' RETURN a.name\nquerys: 七宗梦是什么时候上映的？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '七宗梦' RETURN a.name LIMIT 30\n","\n\nInstructions:\nNote: Do not include any explanations or apologies in your responses.\nDo not respond to any questions that might ask anything else than for you to construct a Cypher statement.\nDo not include any text except the generated Cypher statement.\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\n你必须使用Sechema中出现的关键词！！！\n\n当前会话中图的 Schema 结构如下：\n\n{graphSchema}\n\n你需要根据用户的提问，自动切换到上述两个任务中，并且给出正确返回，让我们开始吧！\n\n");r(335);p.Z.useToken,p.Z.useToken;r(47857),r(54326),h.Z.Title,r(16471),r(37339),r(33741);var m={"en-US":{Recommended:"Recommended",History:"History",Copilot:"Copilot",Saved:"Saved","Stored Procedures":"Stored Procedures","You can write cypher or gremlin queries, and then click the {icon} button to query data":"You can write cypher or gremlin queries, and then click the {icon} button to query data","Vertex Labels":"Vertex Labels","Edge Labels":"Edge Labels","Property Keys":"Property Keys","No saved query statements {br} You can click {icon} to save.":"No saved query statements {br} You can click {icon} to save.","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"No stored procedures available. {br} Go to the <a>Extension</a> and create one now!","Privacy Security Notice":"Privacy Security Notice",Setting:"Setting","query.app.sidebar.gpt.setting.security":"To improve the quality of generated Cypher query statements, we'll utilize your graph data schema as the prompt for ChatGPT. Your data will be kept strictly confidential and solely used for this purpose.Furthermore, please note that your OpenAI API key is only stored locally in your browser for added security","OpenAI API key is only stored locally in your browser":"OpenAI API key is only stored locally in your browser","query.copilot.welcome":"Hello! I'm the GraphScope Query Assistant. Feel free to ask me any questions about Cypher or Gremlin queries.","recommend 5 interesting query statements":"recommend 5 interesting query statements","query any subgraph":"query any subgraph","insight the statistical distribution of vertex labels in the graph":"insight the statistical distribution of vertex labels in the graph",Save:"Save",Delete:"Delete",Query:"Query",Share:"Share","query submmited on {submitTime}. It's running ... ":"query submmited on {submitTime}. It's running ... ","query submmited on {submitTime}. Running {runningTime} ms":"query submmited on {submitTime}. Running {runningTime} ms","A total of {totalCount} records were retrieved":"A total of {totalCount} records were retrieved","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.",Color:"Color",Size:"Size",Caption:"Caption",LineWidth:"LineWidth","Node properties":"Node properties",Graph:"Graph",Table:"Table",Raw:"Raw","Style Setting":"Style Setting","You can click on each label to set the color, size, and display text for vertices and edges.":"You can click on each label to set the color, size, and display text for vertices and edges.","Export graph json":"Export graph json","Clustering layout":"Clustering layout","Vertex Properties":"Vertex Properties","Connect Endpoint":"Connect Endpoint","Connection URL":"Connection URL","Query language":"Query language","Query initiation method":"Query initiation method",Username:"Username",Password:"Password",Connect:"Connect",Close:"Close","Select nodes by box selection":"Select nodes by box selection","Switch graph view dimensions":"Switch graph view dimensions","Zoom to fitview":"Zoom to fitview",Fullscreen:"Fullscreen","Toggle Right Side":"Toggle Right Side","Caption Status":"Caption Status"},"zh-CN":{Recommended:"推荐查询",History:"历史查询",Copilot:"智能查询",Saved:"保存查询","Stored Procedures":"存储过程","You can write cypher or gremlin queries, and then click the {icon} button to query data":"您可以在这里编写 cypher 或 gremlin 语句，点击 {icon} 按钮查询数据","Vertex Labels":"节点类型","Edge Labels":"边类型","Property Keys":"属性字段","No saved query statements {br} You can click {icon} to save.":"暂无保存的查询语句 {br} 您可以点击 {icon} 保存","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"暂无存储过程 {br} 快去 <a>插件市场</a> 创建一个吧","Privacy Security Notice":"隐私安全说明",Setting:"设置","query.app.sidebar.gpt.setting.security":"为了提高生成Cypher查询语句的质量，我们将使用您的图数据模式作为ChatGPT的提示。您的数据将被严格保密，仅用于此目的。此外，请注意我们的OpenAI API密钥仅存在于您的浏览器本地，以增加安全性。","OpenAI API key is only stored locally in your browser":"OpenAI API key 仅保存在您浏览器本地","query.copilot.welcome":"您好！我是 GraphScope 查询助理，您有任何关于 Cypher 或者 Gremlin 查询的问题都可以随时问我","recommend 5 interesting query statements":"帮我推荐5个有意思的查询","query any subgraph":"查询任意一个子图","insight the statistical distribution of vertex labels in the graph":"帮我分析图中节点类型的分布情况",Save:"保存",Delete:"删除",Query:"查询",Share:"分享","query submmited on {submitTime}. It's running ... ":"查询提交于 {submitTime}. 正在运行中...","query submmited on {submitTime}. Running {runningTime} ms":"查询提交于 {submitTime}. 查询时长 {runningTime} ms","A total of {totalCount} records were retrieved":"一共检索到 {totalCount} 条记录","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"一共检索到 {totalCount} 条记录, 其中包含 {nodeCount} 个节点，{edgeCount} 条边",Color:"颜色",Size:"大小",Caption:"文本",LineWidth:"边宽","Node properties":"属性详情",Graph:"图展示",Table:"表格展示",Raw:"原始数据","Style Setting":"样式设置","You can click on each label to set the color, size, and display text for vertices and edges.":"您可以单击每个标签来设置顶点和边缘的颜色、大小和显示文本。","Export graph json":"导出 json","Clustering layout":"集群布局","Vertex Properties":"节点属性","Connect Endpoint":"连接查询服务","Connection URL":"连接 URL","Query language":"查询语言","Query initiation method":"查询发起方式",Username:"用户名",Password:"密码",Connect:"连接",Close:"关闭","Select nodes by box selection":"通过框选选择节点","Switch graph view dimensions":"切换图表视图维度","Zoom to fitview":"缩放适当视图",Fullscreen:"全屏","Toggle Right Side":"切换右侧","Caption Status":"是否展示标签"}},v=(y.Utils.getSearchParams,r(39462)),g=r(76842),b=r(57526),x=r(77332),w=r(7234),S=r(38943),E=r(84155),O=y.Utils.storage,j=h.Z.Title,k=(h.Z.Text,function(e){var t=g.Z.useForm(),r=a()(t,1)[0],n=e.onConnect,o=e.onClose;f.useEffect((function(){r.setFieldsValue({query_language:e.query_language||O.get("query_language")||"cypher",query_endpoint:e.query_endpoint||O.get("query_endpoint")||"neo4j://127.0.0.1:7687",query_initiation:e.query_initiation||O.get("query_initiation")||"Browser",query_username:e.query_username||O.get("query_username")||"admin",query_password:e.query_password||O.get("query_password")||"password"})}),[]);return(0,d.jsxs)(b.Z,{vertical:!0,style:{padding:"12px 24px"},children:[(0,d.jsx)(j,{level:3,style:{marginBottom:"12px"},children:(0,d.jsx)(E.Z,{id:"Connect Endpoint"})}),(0,d.jsxs)(g.Z,{layout:"vertical",form:r,children:[(0,d.jsx)(g.Z.Item,{label:(0,d.jsx)(E.Z,{id:"Connection URL"}),name:"query_endpoint",children:(0,d.jsx)(x.Z,{})}),(0,d.jsx)(g.Z.Item,{label:(0,d.jsx)(E.Z,{id:"Query language"}),name:"query_language",children:(0,d.jsx)(w.default,{allowClear:!0,options:[{label:"Cypher",value:"cypher"},{label:"Gremlin",value:"gremlin"}]})}),(0,d.jsx)(g.Z.Item,{label:(0,d.jsx)(E.Z,{id:"Query initiation method"}),name:"query_initiation",children:(0,d.jsx)(w.default,{allowClear:!0,options:[{label:"Browser (client-side)",value:"Browser"},{label:'Server (Ensure that your "'.concat(location.origin,'/query" endpoint is available)'),value:"Server"}]})}),(0,d.jsx)(g.Z.Item,{label:(0,d.jsx)(E.Z,{id:"Username"}),name:"query_username",children:(0,d.jsx)(x.Z,{})}),(0,d.jsx)(g.Z.Item,{label:(0,d.jsx)(E.Z,{id:"Password"}),name:"query_password",children:(0,d.jsx)(x.Z.Password,{})}),(0,d.jsx)(g.Z.Item,{style:{marginTop:"48px"},children:(0,d.jsxs)(b.Z,{justify:"start",children:[(0,d.jsx)(S.ZP,{type:"primary",htmlType:"submit",style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:function(){var e=r.getFieldsValue(!0);Object.keys(e).forEach((function(t){O.set(t,e[t])})),n&&n(r.getFieldsValue(!0))},children:(0,d.jsx)(E.Z,{id:"Connect"})}),o&&(0,d.jsx)(S.ZP,{style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:o,children:(0,d.jsx)(E.Z,{id:"Close"})})]})})]})]})}),P=r(31477),T={},C=function(){var e=s()(u()().mark((function e(){var t,r,n,o,i=arguments;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:"cypher",r=i.length>1?i[1]:void 0,n=T.gremlin_driver,o=T.cypher_driver,"cypher"!==t){e.next=6;break}return o||(T.cypher_driver=new P.Or(r)),e.abrupt("return",T.cypher_driver);case 6:if("gremlin"!==t){e.next=9;break}return n||(T.gremlin_driver=new P.VP(r)),e.abrupt("return",T.gremlin_driver);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){var t=e||{},r=t.enableImmediateQuery,n=void 0!==r&&r,i=t.mode,c=void 0===i?"flow":i,l=t.id,p=void 0===l?"":l,h=t.timestamp,g=void 0===h?Date.now():h,b=t.graphId,x=void 0===b?"":b,w=t.schemaData,S=void 0===w?{nodes:[],edges:[]}:w,E=t.script,O=void 0===E?"Match (n) return n limit 10":E,j=t.onQuery,P=(0,f.useState)({language:e.language||"cypher",endpoint:e.endpoint||"127.0.0.1:7687"}),T=a()(P,2),L=T[0],I=T[1],_=L.language,A=L.endpoint,N=function(){var e=s()(u()().mark((function e(t){var r,n;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.language,e.next=3,C(r,A);case 3:return n=e.sent,e.abrupt("return",n.query(t.script));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=s()(u()().mark((function e(t){var r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.language,e.next=3,C(r,A);case 3:e.sent.close();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return j||A&&_?(0,d.jsx)(y.StudioProvier,{locales:m,children:(0,d.jsx)(v.default,{language:_,enableImmediateQuery:n,mode:c,active:!0,id:p,timestamp:g,graphId:x,schemaData:S,script:O,onQuery:j||N,onCancel:Z})}):(0,d.jsx)(y.StudioProvier,{locales:m,children:(0,d.jsx)(k,{onConnect:function(e){I((function(t){return o()(o()({},t),{},{endpoint:e.query_endpoint||"",language:e.query_language})}))}})})},I=r(10422),_={render_query_statement:function(e){var t=(e||{}).id,r=void 0===t?"root":t;I.render((0,d.jsx)(L,o()({},e)),document.getElementById(r))}}},39462:function(e,t,r){r.r(t),r.d(t,{default:function(){return fe}});var n=r(90228),o=r.n(n),i=r(26068),a=r.n(i),c=r(87999),u=r.n(c),l=r(48305),s=r.n(l),f=r(50959),p=r(53531),d=r(16483),y=r.n(d),h=r(70667),m=r(57526),v=r(48722),g=r(82714),b=r(17905),x=r(38943),w=r(28541),S=r(42176),E=r(51558),O=r(45334),j=r(77332),k=r(15001),P=r(37528),T=r(11527),C=function(e){var t=e.onSave,r=(0,f.useRef)(null),n=(0,P.Z)();return(0,T.jsx)(b.Z,{title:n.formatMessage({id:"Save"}),children:(0,T.jsx)(O.Z,{title:"name your statement",description:(0,T.jsx)(j.Z,{width:"200px",ref:r}),onConfirm:function(){if(r.current){var e=r.current.input.value;console.log("InputRef.current",e),t&&t(e)}},onCancel:function(){},okText:"Save",cancelText:"Cancel",placement:"bottomRight",children:(0,T.jsx)(x.ZP,{type:"text",icon:(0,T.jsx)(k.Z,{})})})})},L=r(62950);var I=function(e){var t,r=e.onClose,n=e.onQuery,i=e.script,a=void 0===i?"Match (n) return n limit 10":i,c=e.onSave,l=e.id,s=e.isFetching,p=e.antdToken,d=(e.schemaData,e.timestamp,e.language),y=e.message,O=(0,f.useRef)(null),j=(0,P.Z)(),k=function(){var e=u()(o()().mark((function e(){var t,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null==O||null===(t=O.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),n({id:l,script:r,language:d});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,T.jsxs)("div",{style:{},children:[(0,T.jsxs)(m.Z,{justify:"space-between",style:{paddingBottom:"8px"},children:[(0,T.jsx)(v.Z,{children:(0,T.jsxs)(g.Z.Text,{type:"secondary",style:{fontSize:"12px",textAlign:"center"},children:[(t=d,t.charAt(0).toUpperCase()+t.slice(1))," ",y]})}),(0,T.jsxs)(v.Z,{size:0,children:[(0,T.jsx)(b.Z,{title:j.formatMessage({id:"Query"}),children:(0,T.jsx)(x.ZP,{type:"text",icon:(0,T.jsx)(w.Z,{spin:s,style:{color:s?"#52c41a":p.green}}),onClick:k})}),c&&(0,T.jsx)(C,{onSave:function(e){var t,r=null==O||null===(t=O.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),n=(0,L.Z)();c&&c({id:n,script:r,name:e,language:d})}}),r&&(0,T.jsx)(b.Z,{title:j.formatMessage({id:"Share"}),children:(0,T.jsx)(x.ZP,{type:"text",icon:(0,T.jsx)(S.Z,{onClick:function(){var e,t=null==O||null===(e=O.current)||void 0===e||null===(e=e.codeEditor)||void 0===e?void 0:e.getValue();window.open("".concat(window.location.origin,"/querying?language=").concat(d,"&auto_run=true&global_script=").concat(encodeURIComponent(t)))}})})}),r&&(0,T.jsx)(b.Z,{title:j.formatMessage({id:"Delete"}),children:(0,T.jsx)(x.ZP,{type:"text",icon:(0,T.jsx)(E.Z,{onClick:function(){r&&r(l)}})})})]})]}),(0,T.jsx)(h.Z,{language:d,ref:O,value:a})]})},_=r(84723),A=r(15558),N=r.n(A),Z=r(85971),D=r(31192),R=r(9069),M=r(57591),F=r(88766),G=r(31759),q=r.n(G),z=r(7234),B=r(89966),U=function(e){var t=e.table,r=(0,f.useRef)(null),n=f.useState((function(){var e=function(e){var t=e[0],r={},n=[];Object.keys(t).forEach((function(e){var o=q()(t[e]);r[e]={key:e,type:o,enums:new Set},"number"===o&&n.push(e)})),e.forEach((function(e){Object.keys(e).forEach((function(t){r[t].enums.add(e[t])}))}));var o=Object.values(r).filter((function(e){return"string"===e.type})).sort((function(e,t){return e.enums.size<t.enums.size})).map((function(e){return e.key})),i=n[0],a=n[1],c=s()(o,2),u=c[0],l=c[1];return{type:n.length>1?"point":"interval",x:a||u,y:i,color:l,keys:Object.keys(r)}}(t);return{x:e.x,y:e.y,color:e.color,type:e.type,options:e.keys.map((function(e){return{label:e,value:e}}))}})),o=s()(n,2),i=o[0],c=o[1];console.log(i);var u=i.type,l=i.x,p=i.y,d=i.color,y=i.options;(0,f.useEffect)((function(){var e;return r.current&&((e=new B.kL({container:r.current,autoFit:!0})).options({type:u,data:t,encode:{x:l,y:p,color:d},transform:[{type:"dodgeX"}]}),e.render()),function(){r.current&&e.destroy()}}),[u,l,p,t,d,r]);return(0,T.jsxs)("div",{style:{padding:"16px",overflowX:"hidden"},children:[(0,T.jsxs)(v.Z,{style:{paddingBottom:"16px"},children:["Type:",(0,T.jsx)(z.default,{size:"small",defaultValue:u,style:{width:120},onChange:function(e){c((function(t){return a()(a()({},t),{},{type:e})}))},options:[{label:"interval",value:"interval"},{label:"point",value:"point"}]}),"X:",(0,T.jsx)(z.default,{size:"small",defaultValue:l,style:{width:120},onChange:function(e){c((function(t){return a()(a()({},t),{},{x:e})}))},options:y}),"Y:",(0,T.jsx)(z.default,{size:"small",defaultValue:p,style:{width:120},onChange:function(e){c((function(t){return a()(a()({},t),{},{y:e})}))},options:y}),"Color:",(0,T.jsx)(z.default,{size:"small",defaultValue:d,style:{width:120},onChange:function(e){c((function(t){return a()(a()({},t),{},{color:e})}))},options:y})]}),(0,T.jsx)("div",{ref:r,style:{width:"100%"}})]})},Y=r(84310),H=r(35731),V=r(36523),Q=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"12px",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-8px";return(0,T.jsx)(T.Fragment,{children:Object.entries(t).map((function(t){var o=s()(t,2),i=o[0],a=o[1];return(0,T.jsxs)("div",{style:{paddingLeft:"16px",overflowWrap:"break-word",wordBreak:"break-all",whiteSpace:"pre-wrap"},children:[(0,T.jsxs)("span",{style:{color:"#F9822F",paddingLeft:r},children:['"',i,'" :']}),(0,T.jsx)("span",{style:{paddingLeft:"6px",textIndent:n},children:"object"===q()(a)&&null!==a?(0,T.jsxs)(T.Fragment,{children:["{",e(a,"24px","16px"),"}"]}):JSON.stringify(a,null,2)})]},i)}))})},W=function(e){var t=e.expandData,r=e.width;return(0,T.jsx)(m.Z,{children:Object.values(t).map((function(e){return e.key&&(0,T.jsxs)("div",{style:{marginLeft:"12px",width:"".concat(r,"%")},children:["{",Q(e.data),"}"]},e.key)}))})},K=function(e){var t=e.data,r=t.map((function(e){var t=e.keys,r=e._fields;return t.reduce((function(e,t,n){var o=r[n];return e[t]={key:(0,L.Z)(),elementId:o.elementId,data:o,labels:o.labels?o.labels[0]:void 0,type:o.type,startNodeElementId:o.startNodeElementId,endNodeElementId:o.endNodeElementId},e.key=(0,L.Z)(),e}),{})})),n=t[0].keys,o=100/n.length,i=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,r){return r+1}}].concat(N()(n.map((function(e){return{title:e,width:"".concat(o,"%"),key:(0,L.Z)(),render:function(t){return r=t[e],n=r.startNodeElementId,o=r.endNodeElementId,i=r.type,a=r.elementId,c=r.labels,n&&o?(0,T.jsxs)("span",{children:["{",(0,T.jsx)(Y.Icons.Arrow,{style:{color:"#F97108"}})," : ",i," } ID ",a]}):(0,T.jsxs)("span",{children:["{",(0,T.jsx)(Y.Icons.Punctuation,{style:{color:"#B668B0"}})," : ",c," } ID ",a]});var r,n,o,i,a,c}}}))),[Z.Z.EXPAND_COLUMN]);return(0,T.jsx)(Z.Z,{size:"small",columns:i,dataSource:r,expandable:{expandedRowRender:function(e){return(0,T.jsx)(W,{expandData:e,width:o})},expandIcon:function(e){var t=e.expanded,r=e.onExpand,n=e.record;return t?(0,T.jsx)(H.Z,{style:{color:"#F97108"},onClick:function(e){return r(n,e)}}):(0,T.jsx)(V.Z,{onClick:function(e){return r(n,e)}})},expandRowByClick:!0}})},$=function(e){var t=e.data,r=t[0],n=Object.keys(r),o=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,r){return r+1}}].concat(N()(n.map((function(e){return{title:e,dataIndex:e,width:"".concat(100/n.length,"%"),key:e}})))),i=t.map((function(e){return a()(a()({},e),{},{key:e.id})}));return(0,T.jsx)(Z.Z,{size:"small",columns:o,dataSource:i})},J=function(e){var t,r=e.data,n=r.table,o=void 0===n?[]:n,i=r.nodes,c=void 0===i?[]:i,u=r.edges,l=void 0===u?[]:u,p=r.raw,d=c.length,y=l.length,h=o.length,w=(0,P.Z)();t=0===d&&0===y&&0!==h?w.formatMessage({id:"A total of {totalCount} records were retrieved"},{totalCount:h}):w.formatMessage({id:"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges."},{totalCount:d+y,nodeCount:d,edgeCount:y});var S,E=(0,f.useState)("table"),O=s()(E,2),j=O[0],k=O[1];return"table"===j&&0!==o.length&&(S=(0,T.jsx)($,{data:o})),"table"===j&&0===o.length&&0!==p.records.length&&(S=(0,T.jsx)(K,{data:p.records})),(0,T.jsxs)("div",{style:{overflowX:"scroll"},children:[(0,T.jsxs)(m.Z,{justify:"space-between",style:{padding:"0px 10px 10px 10px"},align:"center",children:[(0,T.jsx)(g.Z.Text,{children:t}),(0,T.jsxs)(v.Z,{children:[(0,T.jsx)(D.Z,{value:j,onChange:function(e){k(e)},options:[{value:"chart",icon:(0,T.jsx)(R.Z,{}),label:"chart"},{value:"table",icon:(0,T.jsx)(M.Z,{})}]}),(0,T.jsx)(b.Z,{title:"download",children:(0,T.jsx)(x.ZP,{icon:(0,T.jsx)(F.Z,{}),type:"text",onClick:function(){var e=c.map((function(e){var t=e.id,r=e.label,n=e.properties,o=void 0===n?{}:n;return a()({id:t,label:r},o)})),t=l.map((function(e){var t=e.id,r=e.label,n=e.source,o=e.target,i=e.properties,c=void 0===i?{}:i;return a()({id:t,label:r,source:n,target:o},c)}));Y.Utils.createDownload(JSON.stringify({nodes:e,edges:t},null,2),"result.json")},children:" "})})]})]}),S,"chart"===j&&0!==o.length&&(0,T.jsx)(U,{table:o})]})},X=r(5994),ee=r(29643),te=r(24174),re=r.n(te),ne=function(e){var t=e.data;return e.isFetching?(0,T.jsx)(X.ZP,{icon:(0,T.jsx)(ee.Z,{spin:!0}),status:"error",title:"Running"}):"error"===t.mode?(0,T.jsx)(X.ZP,{status:"error",title:t.raw&&t.raw.name,subTitle:t.raw&&t.raw.message}):(0,T.jsx)("div",{children:(0,T.jsx)(re(),{src:t.raw})})},oe=r(47857),ie=r(13049),ae=r(31931),ce=function(e){var t=e.data,r=e.isFetching,n=e.schemaData,o=e.graphId,i=e.onQuery,a=f.useState(null),c=s()(a,2),u=c[0],l=c[1],p=(0,P.Z)(),d=function(e,t,r){var n=e.nodes,o=void 0===n?[]:n,i=e.edges,a=void 0===i?[]:i,c=e.table,u=void 0===c?[]:c,l=(e.raw,o.length>0),s=a.length>0,f=u.length>0,p="raw",d=["raw"];return l&&(p="graph",d=["raw","table","graph"]),!l&&s&&(p="table",d=["raw","table"]),l||s||!f||(p="table",d=["raw","table"]),r&&(p=r),t&&(d=["raw"],p="raw"),{viewMode:p,options:d}}(t,r,u),y=d.viewMode,h=d.options,m=function(e){return-1!==h.indexOf(e)},v=[{label:p.formatMessage({id:"Graph"}),key:"graph",icon:(0,T.jsx)(ie.Z,{}),children:(0,T.jsx)(oe.Z,{data:t,schemaData:n,graphId:o,onQuery:i}),disabled:!m("graph")},{label:p.formatMessage({id:"Table"}),key:"table",icon:(0,T.jsx)(M.Z,{}),children:(0,T.jsx)(J,{data:t}),disabled:!m("table")},{label:p.formatMessage({id:"Raw"}),key:"raw",icon:(0,T.jsx)(ae.Z,{}),children:(0,T.jsx)(ne,{data:t,isFetching:r}),disabled:!m("raw")}];return(0,T.jsx)("div",{style:{padding:"16px 0px"},children:(0,T.jsx)(_.Z,{items:v,size:"small",type:"card",activeKey:y,onChange:function(e){l(e)}})})},ue=(0,f.memo)(ce),le=p.Z.useToken,se=function(e){var t=e.onQuery,r=e.onClose,n=e.onCancel,i=e.onSave,c=e.script,l=e.id,p=e.active,d=e.mode,h=e.schemaData,m=e.enableImmediateQuery,v=e.graphId,g=e.timestamp,b=e.language,x=le().token,w=(0,P.Z)(),S=p&&"flow"===d?{border:"1px solid ".concat(x.colorBorder)}:{border:"1px solid  ".concat(x.colorBorder)},E=(0,f.useRef)(null),O=(0,f.useState)({data:{},isFetching:!1,startTime:0,endTime:0,abort:!1}),j=s()(O,2),k=j[0],C=j[1],L=k.data,_=k.isFetching,A=k.startTime,N=k.endTime;(0,f.useEffect)((function(){E.current&&p&&"flow"===d&&E.current.scrollIntoView({behavior:"smooth"})}),[p]);var Z=function(){var e=u()(o()().mark((function e(r){var i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=4;break}return n&&n(r),C((function(e){return a()(a()({},e),{},{isFetching:!1,data:{}})})),e.abrupt("return");case 4:return C((function(e){return a()(a()({},e),{},{isFetching:!0,startTime:(new Date).getTime()})})),e.next=7,t(r);case 7:i=e.sent,C((function(e){return a()(a()({},e),{},{data:i,isFetching:!1,endTime:(new Date).getTime()})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){m&&(console.log("enableImmediateQuery script",m,c,b),Z({id:l,script:c,language:b}))}),[m]);var D=N-A<0?w.formatMessage({id:"query submmited on {submitTime}. It's running ... "},{submitTime:y()(A).format("HH:mm:ss YYYY-MM-DD")}):w.formatMessage({id:"query submmited on {submitTime}. Running {runningTime} ms"},{submitTime:y()(A).format("HH:mm:ss YYYY-MM-DD"),runningTime:N-A});return(0,T.jsxs)("div",{ref:E,style:a()(a()({display:"flex",flexDirection:"column",flex:1,margin:"12px",padding:"8px 16px",borderRadius:"8px"},S),{},{background:x.colorBgBase}),children:[(0,T.jsx)(I,{message:D,language:b,timestamp:g,schemaData:h,id:l,script:c,onClose:r,onQuery:Z,onSave:i,isFetching:_,antdToken:x}),(0,T.jsx)(ue,{data:L,isFetching:_,schemaData:h,graphId:v,onQuery:t})]})},fe=(0,f.memo)(se)},47857:function(e,t,r){var n=r(48305),o=r.n(n),i=r(82092),a=r.n(i),c=r(26068),u=r.n(c),l=r(67825),s=r.n(l),f=(r(50959),r(54326)),p=r(11527),d=["properties"],y=["properties","constraints"];t.Z=function(e){var t,r=e.data,n=e.schemaData,i=e.graphId,c=e.onQuery,l={nodes:(t=n).nodes.map((function(e){var t=e.properties,r=s()(e,d);return u()(u()({},r),{},{properties:t.reduce((function(e,t){return u()(u()({},e),{},a()({},t.name,t.type))}),{})})})),edges:t.edges.map((function(e){var t=e.properties,r=e.constraints,n=s()(e,y),i=o()(r[0],2),c=i[0],l=i[1];return u()(u()({},n),{},{source:c,target:l,properties:t.reduce((function(e,t){return u()(u()({},e),{},a()({},t.name,t.type))}),{})})}))};return(0,p.jsx)("div",{style:{width:"100%"},children:(0,p.jsx)(f.tk,{data:r,schema:l,graphId:i,onQuery:c})})}},15776:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(85430);const n=[{value:"update version",paraId:0,tocIndex:2},{value:"update",paraId:1,tocIndex:4},{value:"update version",paraId:2,tocIndex:6},{value:"update graph",paraId:3,tocIndex:8},{value:"First Release",paraId:4,tocIndex:10}]},70857:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(8646);const n=[]},12457:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(4480);const n=[]},2565:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(93238);const n=[]},74972:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(48741);const n=[]},27705:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(36666);const n=[{value:"open source : ",paraId:0,tocIndex:0},{value:"https://undraw.co/illustrations",paraId:0,tocIndex:0}]},54520:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(19895);const n=[]},57481:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(54581);const n=[]},28748:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(518);const n=[]},41895:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(3750);const n=[]},56309:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(43716);const n=[]},90389:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(43765);const n=[]},20391:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(44412);const n=[]},27388:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(85792);const n=[]},14872:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(44117);const n=[]},95081:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(4866);const n=[{value:"storage",paraId:0,tocIndex:0},{value:"isDarkTheme",paraId:0,tocIndex:0},{value:"debounce",paraId:0,tocIndex:0}]},13588:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(93995);const n=[]},26103:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(26973);const n=[]},31404:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(67866);const n=[]},2500:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(37275);const n=[]},22211:function(e,t){t.Z="/** components 基础配置 */\nexport const components = {\n  Menu: {\n    itemBg: 'rgba(255, 255, 255, 0)',\n    subMenuItemBg: 'rgba(255, 255, 255, 0)',\n    iconMarginInlineEnd: 14,\n    itemMarginInline: 4,\n    iconSize: 14,\n    collapsedWidth: 50,\n    itemActiveBg: '#eaeaea',\n  },\n  Typography: {\n    titleMarginBottom: '0.2em',\n    titleMarginTop: '0.8em',\n  },\n  Table: {\n    cellPaddingBlock: 4, //\t单元格纵向内间距\n    cellPaddingInline: 8, //单元格横向内间距（默认大尺寸）\n  },\n  Pagination: {\n    itemSize: 20,\n  },\n  Result: {\n    iconFontSize: 62,\n    titleFontSize: 20,\n    colorError: '#00000073',\n  },\n};\n\n/** token 基础配置 */\nexport const token = {\n  colorBorder: 'red',\n  colorBgBase: '#fff',\n};\n"},20880:function(e,t){t.Z="import React, { useEffect, useState } from 'react';\nimport { ConfigProvider, theme } from 'antd';\nimport { IntlProvider } from 'react-intl';\nimport { ContainerProvider } from './useThemeConfigProvider';\nimport type { ThemeProviderType } from './useThemeConfigProvider';\nimport { storage } from '../Utils';\nimport { getThemeConfig } from './getThemeConfig';\nimport { useCustomToken } from './useCustomToken';\n\ntype IThemeProvider = {\n  locales: {\n    'zh-CN': Record<string, string>;\n    'en-US': Record<string, string>;\n  };\n  children: React.ReactNode;\n  locale?: 'zh-CN' | 'en-US';\n  algorithm?: 'defaultAlgorithm' | 'darkAlgorithm';\n};\n\nconst Provider: React.FC<IThemeProvider> = props => {\n  const { children, locales } = props;\n  const [state, setState] = useState<ThemeProviderType>(() => {\n    let { algorithm, locale } = props;\n    if (!locale) {\n      locale = storage.get('locale');\n      if (!locale) {\n        locale = 'en-US';\n        storage.set('locale', locale);\n      }\n    }\n    if (!algorithm) {\n      algorithm = storage.get('algorithm');\n      if (!algorithm) {\n        algorithm = 'defaultAlgorithm';\n        storage.set('algorithm', algorithm);\n      }\n    }\n    return {\n      components: storage.get('components'),\n      token: storage.get('token'),\n      algorithm,\n      locale,\n    };\n  });\n\n  const { components, token, algorithm, locale } = state;\n  const { componentsConfig, tokenConfig } = getThemeConfig(algorithm);\n  const colorConfig = useCustomToken();\n  const isLight = algorithm === 'defaultAlgorithm';\n\n  const handleThemeOrLocale = (themeConfig: Partial<ThemeProviderType>) => {\n    const { components, token } = themeConfig;\n    Object.keys(themeConfig).forEach(key => {\n      storage.set(key, themeConfig[key]);\n    });\n\n    setState(preState => {\n      // 特殊化处理,切token数据需初始化数据做基础\n      storage.set('token', { ...preState.token, ...token });\n      return {\n        ...preState,\n        components: { ...preState.components, ...components },\n        token: { ...preState.token, ...token },\n        algorithm: themeConfig.algorithm || preState.algorithm,\n        locale: themeConfig.locale ?? storage.get('locale'),\n      };\n    });\n  };\n\n  const messages = locales[locale || 'en-US'];\n\n  return (\n    <ContainerProvider\n      value={{\n        token: { ...tokenConfig, ...token },\n        components: { ...componentsConfig, ...components },\n        handleThemeOrLocale,\n        algorithm,\n        locale: locale,\n        isLight,\n        ...colorConfig,\n      }}\n    >\n      <IntlProvider messages={messages} locale={locale as 'zh-CN' | 'en-US'}>\n        <ConfigProvider\n          theme={{\n            // 1. 单独使用暗色算法\n            algorithm: isLight ? theme.defaultAlgorithm : theme.darkAlgorithm,\n            components: {\n              ...componentsConfig,\n              ...components,\n            },\n            token: {\n              ...tokenConfig,\n              ...token,\n            },\n          }}\n        >\n          {children}\n        </ConfigProvider>\n      </IntlProvider>\n    </ContainerProvider>\n  );\n};\n\nexport default Provider;\n"},88241:function(e,t){t.Z="import { createContext, useContext } from 'react';\nimport type { IColorStore } from './getThemeConfig';\nexport interface ThemeProviderType extends IColorStore {\n  algorithm?: 'defaultAlgorithm' | 'darkAlgorithm';\n  components?: { [key: string]: { [key: string]: string | number } };\n  token?: { [key: string]: string | number };\n  locale?: 'zh-CN' | 'en-US';\n  isLight?: boolean;\n}\nexport interface IContainerContext extends ThemeProviderType {\n  handleThemeOrLocale: (value: ThemeProviderType) => void;\n}\nexport const ContainerContext = createContext<IContainerContext>({\n  components: {},\n  token: {},\n  handleThemeOrLocale: ({}) => {},\n  locale: 'en-US',\n  algorithm: 'defaultAlgorithm',\n  isLight: false,\n});\n\nexport const ContainerProvider = ContainerContext.Provider;\n\nexport const useStudioProvier = () => {\n  const context = useContext(ContainerContext);\n\n  if (context === undefined || Object.keys(context).length === 0) {\n    throw new Error(`useContext must be used within a ContainerProvider`);\n  }\n  return context;\n};\n"},17239:function(e,t){t.Z="import React from 'react';\nimport { Panel, PanelGroup } from 'react-resizable-panels';\nimport ResizeHandle from './ResizeHandle';\n\ninterface IResizablePanelsProps {\n  leftSide?: React.ReactNode;\n  middleSide?: React.ReactNode;\n  rightSide?: React.ReactNode;\n  leftMinSize?: number;\n  leftMaxSize?: number;\n  rightMinSize?: number;\n  rightMaxSize?: number;\n}\n\nconst styles: Record<string, React.CSSProperties> = {\n  Container: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '1rem',\n  },\n  Panel: { display: 'flex', flexDirection: 'row' },\n  PanelContent: {\n    height: '100%',\n    width: '100%',\n    borderRadius: '0.5rem',\n  },\n};\n\nconst ResizablePanels: React.FC<IResizablePanelsProps> = ({\n  leftSide,\n  middleSide,\n  rightSide,\n  leftMinSize = 20,\n  leftMaxSize = 40,\n  rightMinSize = 20,\n  rightMaxSize = 40,\n}) => {\n  const renderLeftPanel = () => (\n    <Panel style={styles.Panel} collapsible={false} order={1} minSize={leftMinSize} maxSize={leftMaxSize}>\n      <div style={styles.PanelContent}>{leftSide}</div>\n    </Panel>\n  );\n\n  const renderRightPanel = () => (\n    <Panel style={styles.Panel} collapsible={false} order={3} minSize={rightMinSize} maxSize={rightMaxSize}>\n      <div style={styles.PanelContent}>{rightSide}</div>\n    </Panel>\n  );\n\n  return (\n    <div style={styles.Container}>\n      <PanelGroup autoSaveId=\"example\" direction=\"horizontal\">\n        {leftSide && [renderLeftPanel(), <ResizeHandle key=\"left-handle\" />]}\n        <Panel style={styles.Panel} collapsible={false} order={2}>\n          <div style={styles.PanelContent}>{middleSide}</div>\n        </Panel>\n        {rightSide && [<ResizeHandle key=\"right-handle\" />, renderRightPanel()]}\n      </PanelGroup>\n    </div>\n  );\n};\n\nexport default ResizablePanels;\n"},9534:function(e,t){t.Z="import StatementQuery from './query-statement';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nexport default {\n  render_query_statement: config => {\n    const { id = 'root' } = config || {};\n    ReactDOM.render(<StatementQuery {...config} />, document.getElementById(id));\n  },\n};\n"}}]);