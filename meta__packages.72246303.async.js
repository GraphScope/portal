"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[56],{5576:function(e,t,n){n.d(t,{Or:function(){return b},VP:function(){return q},aq:function(){return ve}});var r=n(71909),o=n.n(r),a=["nodes_need_properties"];function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function d(){d=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:O(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var h="suspendedStart",m="executing",y="completed",v={};function g(){}function b(){}function x(){}var w={};l(w,c,(function(){return this}));var I=Object.getPrototypeOf,E=I&&I(I(_([])));E&&E!==n&&r.call(E,c)&&(w=E);var S=x.prototype=g.prototype=Object.create(w);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(o,a,c,u){var s=f(e[o],e,a);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==i(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,c,u)}),(function(e){n("throw",e,c,u)})):t.resolve(p).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,n,r){var o=h;return function(a,i){if(o===m)throw new Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=P(c,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var s=f(t,n,r);if("normal"===s.type){if(o=r.done?y:"suspendedYield",s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=y,r.method="throw",r.arg=s.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return b.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=l(x,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(j.prototype),l(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new j(p(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(S),l(S,s,"Generator"),l(S,c,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function f(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,c,"next",e)}function c(e){f(a,r,o,i,c,"throw",e)}i(void 0)}))}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function y(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:String(t)}var g=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"driver",void 0),y(this,"session",void 0);try{this.driver=n&&r?o().driver(t,o().auth.basic(n,r),{encrypted:!1}):o().driver(t,void 0,{encrypted:!1})}catch(e){console.log(e)}}var t,n,r,i,c,u,s,f;return t=e,n=[{key:"connect",value:(f=h(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.driver){e.next=4;break}return e.next=3,this.driver.verifyConnectivity();case 3:return e.abrupt("return",!0);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"getSession",value:(s=h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.driver){e.next=4;break}return t=this.driver.session(),this.session=t,e.abrupt("return",this.session);case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getKDegreeRelationships",value:(u=h(d().mark((function e(t,n){var r,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.driver){e.next=3;break}return e.abrupt("return",{nodes:[],edges:[]});case 3:return r=this.driver.session({}),o="\n      match data=(n)-[*..".concat(n,"]-(m) WHERE id(n) in [").concat(t,"] RETURN data LIMIT 200\n      "),e.next=7,r.run(o);case 7:return a=e.sent,console.log("%c[Cypher Query Driver] NeighborsQuery 查询语句","color:blue",o),console.log("%c[Cypher Query Driver] NeighborsQuery 查询结果","color:green",a),r.close(),e.abrupt("return",x(a));case 14:return e.prev=14,e.t0=e.catch(0),console.log("error",e.t0),e.abrupt("return",{nodes:[],edges:[],raw:e.t0,mode:"error"});case 18:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e,t){return u.apply(this,arguments)})},{key:"query",value:(c=h(d().mark((function e(t){var n,r,o,i,c,u,s,f,h,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("%c[Cypher Query Driver] Statement","color:blue",t),e.next=4,this.getSession();case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",{nodes:[],edges:[]});case 7:return e.next=9,n.run(t);case 9:if(r=e.sent,console.log("%c[Cypher Query Driver] Result","color:green",r),o=x(r),i=o.nodes_need_properties,c=p(o,a),0!==i.length){e.next=17;break}return n.close(),e.abrupt("return",c);case 17:return u="\n        Match (n) where elementId(n) in [".concat(i,"] return n;\n        "),e.next=20,n.run(u);case 20:return s=e.sent,f=x(s),h=f.nodes,m=h.reduce((function(e,t){return e[t.id]=t,e}),{}),c.nodes.forEach((function(e){m[e.id]&&(e.properties=l(l({},e.properties),m[e.id].properties))})),n.close(),e.abrupt("return",c);case 26:e.next=31;break;case 28:return e.prev=28,e.t0=e.catch(0),e.abrupt("return",{nodes:[],edges:[],raw:e.t0,mode:"error"});case 31:case"end":return e.stop()}}),e,this,[[0,28]])}))),function(e){return c.apply(this,arguments)})},{key:"close",value:(i=h(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.driver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.driver.close();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})}],n&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),b=g;function x(e){var t=[],n=[],r=[],o=new Set;return e.records.forEach((function(e){var a={};e._fields.forEach((function(r,i){var c="string"==typeof r,u=r.__isNode__,s=r.__isRelationship__,l=r.__isPath__,p=r.__isInteger__,d=w(r.properties);if(u){var f=r,h=f.labels,m=(f.identity,f.elementId),y=h[0];t.push({id:m,label:y,properties:d})}if(s){var v=r,g=v.type,b=v.startNodeElementId,x=v.endNodeElementId,I=v.elementId,E=b,S=x,k=g;n.push({id:I,source:E,target:S,label:k,properties:d})}if(l){var j=r,O=(j.start,j.segments);j.end;O.forEach((function(e){var r,a,i=e.start,c=e.end,u=e.relationship,s=i.elementId,l=i.labels,p=(i.properties,c.elementId),d=c.labels;c.properties;t.forEach((function(e){e.id===s&&(r=!0),e.id===p&&(a=!0)})),r||(t.push({id:s,label:l[0],properties:w(i.properties)}),o.add(s)),a||(t.push({id:p,label:d[0],properties:w(c.properties)}),o.add(p));var f=u.elementId,h=u.type,m=u.startNodeElementId,y=u.endNodeElementId;n.find((function(e){return e.id===f}))||n.push({id:f,source:m,target:y,label:h,properties:w(u.properties)})}))}p&&(a[e.keys[i]]=r.low),c&&(a[e.keys[i]]=r)})),0!==Object.keys(a).length&&r.push(a)})),l(l({},function(e,t){var n=new Map;e.forEach((function(e){n.set(e.id,e)}));var r=t.filter((function(e){var t=e.source,r=e.target,o=n.get(t),a=n.get(r);return o&&a}));return{nodes:c(n.values()),edges:r}}(t,n)),{},{table:r,raw:e,nodes_need_properties:c(o.values())})}function w(e){return e?(Object.keys(e).forEach((function(t){var n=e[t];n.__isInteger__&&(e[t]=n.low)})),e):{}}var I=n(35685),E=n.n(I);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||L(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=L(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function L(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(){_=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new L(r||[]);return o(i,"_invoke",{value:j(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(C([])));w&&w!==n&&r.call(w,i)&&(b=w);var I=g.prototype=y.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==S(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,n,r){var o=d;return function(a,i){if(o===f)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=O(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var s=p(t,n,r);if("normal"===s.type){if(o=r.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function O(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(S(t)+" is not iterable")}return v.prototype=g,o(I,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},E(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new k(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(I),s(I,u,"Generator"),s(I,i,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function N(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){N(a,r,o,i,c,"next",e)}function c(e){N(a,r,o,i,c,"throw",e)}i(void 0)}))}}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z(r.key),r)}}function R(e,t,n){return(t=Z(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:String(t)}var G=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"admin",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"password";D(this,e),R(this,"driver",void 0),R(this,"uri",void 0);try{var o=new(E().driver.auth.PlainTextSaslAuthenticator)(n,r),a=new(E().driver.Client)(t,{traversalSource:"g",authenticator:o});this.uri=t,this.driver=a}catch(e){console.log(e)}}var t,n,r,o,a,i,c,u,s,l,p,d,f;return t=e,n=[{key:"connect",value:(f=A(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.driver){e.next=4;break}return e.next=3,this.driver.verifyConnectivity();case 3:return e.abrupt("return",!0);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"getSession",value:(d=A(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.driver){e.next=2;break}return e.abrupt("return",this.driver);case 2:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"query",value:(p=A(_().mark((function e(t){var n,r,o,a,i,c,u,s,l,p,d,f,h,m,y,v,g,b;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,console.log("%c[Query] 查询语句","color:blue",t),e.next=5,this.driver.submit(t);case 5:n=e.sent,console.log("%c[Query] 查询结果","color:green",n),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{nodes:[],edges:[],raw:e.t0,mode:"error"});case 12:r="graph",o=[],a={},i={},c=new Set,u=T(n),e.prev=18,u.s();case 20:if((s=u.n()).done){e.next=71;break}if(!((l=s.value)instanceof E().structure.Vertex)){e.next=27;break}return e.next=25,this.handleVertexMapping(i,c,l);case 25:e.next=69;break;case 27:if(!(l instanceof E().structure.Edge)){e.next=32;break}return e.next=30,this.handleEdgeMapping(i,a,c,l);case 30:e.next=69;break;case 32:if(!(l instanceof E().structure.Path)){e.next=35;break}e.next=69;break;case 35:if(!this.isGSExpandPath(l)){e.next=62;break}p=T(l),e.prev=37,p.s();case 39:if((d=p.n()).done){e.next=50;break}if(!((f=d.value)instanceof E().structure.Vertex)){e.next=46;break}return e.next=44,this.handleVertexMapping(i,c,f);case 44:e.next=48;break;case 46:return e.next=48,this.handleEdgeMapping(i,a,c,f);case 48:e.next=39;break;case 50:e.next=55;break;case 52:e.prev=52,e.t1=e.catch(37),p.e(e.t1);case 55:return e.prev=55,p.f(),e.finish(55);case 58:return e.next=60,this.handleTableResult(o,l);case 60:e.next=69;break;case 62:if(r="table","number"!=typeof l&&"string"!=typeof l){e.next=67;break}o.push(l),e.next=69;break;case 67:return e.next=69,this.handleTableResult(o,l);case 69:e.next=20;break;case 71:e.next=76;break;case 73:e.prev=73,e.t2=e.catch(18),u.e(e.t2);case 76:return e.prev=76,u.f(),e.finish(76);case 79:if("graph"!==r){e.next=84;break}return e.next=82,this.queryNodesProperties(P(c));case 82:for(m in h=e.sent)m in i&&(i[m].properties=h[m]);case 84:if("graph"!==r){e.next=90;break}for(g in y=[],v=[],i)y.push(i[g]);for(b in a)v.push(a[b]);return e.abrupt("return",{nodes:y,edges:v,mode:r,table:o,raw:n});case 90:if("table"!==r){e.next=92;break}return e.abrupt("return",{nodes:[],edges:[],mode:r,table:o,raw:n});case 92:case"end":return e.stop()}}),e,this,[[1,9],[18,73,76,79],[37,52,55,58]])}))),function(e){return p.apply(this,arguments)})},{key:"isGSExpandPath",value:function(e){if(!e instanceof Array)return!1;try{var t,n=!0,r=!1,o=T(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;n&&(n=a instanceof E().structure.Vertex||a instanceof E().structure.Edge),a instanceof E().structure.Edge&&(r=!0)}}catch(e){o.e(e)}finally{o.f()}return n&&r}catch(e){return!1}return!1}},{key:"jsonGraphData",value:(l=A(_().mark((function e(t){var n,r,o,a,i,c,u,s,l;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},r=t.id,o=t.label,a=t.properties,n.id="".concat(r),n.label=o,a){for(c in i={},a)(u=a[c])&&u[0]&&(i["".concat(c)]=u[0].value);n.properties=i}if(!(t instanceof E().structure.Edge)){e.next=13;break}return s=t.inV,l=t.outV,e.next=9,this.jsonGraphData(s);case 9:return n.inV=e.sent,e.next=12,this.jsonGraphData(l);case 12:n.outV=e.sent;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"handleVertexMapping",value:(s=A(_().mark((function e(t,n,r){var o;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.jsonGraphData(r);case 2:o=e.sent,t[o.id]=O(O({},o),{},{nodeType:o.label}),n.add(o.id);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return s.apply(this,arguments)})},{key:"handleEdgeMapping",value:(u=A(_().mark((function e(t,n,r,o){var a,i,c;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.jsonGraphData(o);case 2:a=e.sent,i=a.outV,c=a.inV,n[a.id]=O(O({},a),{},{edgeType:a.label,source:i.id,target:c.id}),t[i.id]=O(O({},i),{},{nodeType:i.label}),r.add(i.id),t[c.id]=O(O({},c),{},{nodeType:c.label}),r.add(c.id);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return u.apply(this,arguments)})},{key:"handleTableResult",value:(c=A(_().mark((function e(t,n){var r,o,a,i,c,u,s,l;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.entries(),o={},a=T(r),e.prev=3,a.s();case 5:if((i=a.n()).done){e.next=22;break}if(c=i.value,u=k(c,2),s=u[0],l=u[1],s instanceof E().process.EnumValue&&(s="~".concat(s.elementName)),"number"!=typeof l){e.next=13;break}o[s]=l,e.next=20;break;case 13:if(!(l instanceof E().structure.Vertex||l instanceof E().structure.Edge)){e.next=19;break}return e.next=16,this.jsonGraphData(l);case 16:o[s]=e.sent,e.next=20;break;case 19:o[s]=JSON.stringify(l);case 20:e.next=5;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(3),a.e(e.t0);case 27:return e.prev=27,a.f(),e.finish(27);case 30:t.push(o);case 31:case"end":return e.stop()}}),e,this,[[3,24,27,30]])}))),function(e,t){return c.apply(this,arguments)})},{key:"queryNodesProperties",value:(i=A(_().mark((function e(t){var n,r,o,a,i,c,u,s,l,p,d,f,h,m,y;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},t&&0!==t.length){e.next=3;break}return e.abrupt("return",n);case 3:return r="g.V(".concat(t.join(","),").elementMap()"),e.next=6,this.driver.submit(r);case 6:o=e.sent,a=T(o);try{for(a.s();!(i=a.n()).done;){c=i.value,u=null,s=c.entries(),l={},p=T(s);try{for(p.s();!(d=p.n()).done;)f=d.value,h=k(f,2),m=h[0],y=h[1],m instanceof E().process.EnumValue?"id"===m.elementName&&(u=y):l[m]=y}catch(e){p.e(e)}finally{p.f()}n[u]=l}}catch(e){a.e(e)}finally{a.f()}return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"queryEdgesProperties",value:(a=A(_().mark((function e(t){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"close",value:(o=A(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.driver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.driver.close();case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}],n&&F(t.prototype,n),r&&F(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),q=G;var M=n(28526);var U=function(e,t){return e.reduce((function(e,n){return e.some((function(e){return t(n,e)}))||e.push(n),e}),[])};var B=["_id","_src","_dst","_label"];function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Q(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(){J=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:k(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==n&&r.call(w,i)&&(b=w);var I=g.prototype=y.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==z(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,n,r){var o=d;return function(a,i){if(o===f)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=j(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var s=p(t,n,r);if("normal"===s.type){if(o=r.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(z(t)+" is not iterable")}return v.prototype=g,o(I,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},E(S.prototype),s(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(I),s(I,u,"Generator"),s(I,i,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function K(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){K(a,r,o,i,c,"next",e)}function c(e){K(a,r,o,i,c,"throw",e)}i(void 0)}))}}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,re(r.key),r)}}function ee(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t,n){return(t=re(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z(t)?t:String(t)}var oe=function(){function e(){te(this,e),ne(this,"kuzu",void 0),ne(this,"db",void 0),ne(this,"conn",void 0),ne(this,"FS",void 0),ne(this,"dbname",void 0),ne(this,"schema",void 0),ne(this,"curDataset",void 0),ne(this,"targetPath",void 0),ne(this,"kuzuEngine",void 0),ne(this,"indexdb",void 0),ne(this,"mountedPath",void 0),this.kuzu=M.Z,this.db=null,this.conn=null,this.FS=null,this.schema={nodes:[],edges:[]},this.dbname="",this.curDataset="",this.targetPath="",this.kuzuEngine=null,this.mountedPath=new Set}var t,n,r,o,a,i,c,u,s,l,p,d,f,h,m,y,v,g,b;return ee(e,[{key:"initialize",value:(b=$(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("initialize again official"),e.next=3,this.kuzu;case 3:return this.kuzuEngine=e.sent,this.FS=this.kuzuEngine.FS,console.log("mkdir"),e.prev=6,e.next=9,null===(t=this.FS)||void 0===t?void 0:t.mkdir("data");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.log("folder data already exists");case 14:console.log("finish mkdir");case 15:case"end":return e.stop()}}),e,this,[[6,11]])}))),function(){return b.apply(this,arguments)})},{key:"installUDF",value:(g=$(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=this.conn)||void 0===t?void 0:t.query('CREATE MACRO elementid(x) AS CAST(ID(x),"STRING")');case 3:return n=e.sent,e.t0=console,e.next=7,n.toString();case 7:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1),e.next=11,n.close();case 11:e.next=16;break;case 13:e.prev=13,e.t2=e.catch(0),console.log(e.t2);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(){return g.apply(this,arguments)})},{key:"use",value:(v=$(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.curDataset){e.next=3;break}return e.next=3,this.closeDataset();case 3:return e.next=5,this.setDatasetId(t);case 5:return e.prev=5,e.next=8,null===(r=this.FS)||void 0===r?void 0:r.mkdir("".concat(this.curDataset));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log("Directory ".concat(this.curDataset," exists"));case 13:return e.next=15,null===(n=this.FS)||void 0===n?void 0:n.mountIdbfs(this.targetPath);case 15:return console.log("Mount ",this.targetPath),e.next=18,this.existDataset(t);case 18:if(!e.sent){e.next=22;break}return console.log("Loading from indexdb ".concat(t)),e.next=22,this.loadFromIndexDB();case 22:return e.next=24,this.openDataset();case 24:return e.next=26,this.installUDF();case 26:return e.abrupt("return",this.curDataset);case 27:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(e){return v.apply(this,arguments)})},{key:"setDatasetId",value:(y=$(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.curDataset=t,this.targetPath=this.pathJoin("/",this.curDataset);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"existDataset",value:(m=$(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.pathJoin("/",t),!indexedDB.databases){e.next=15;break}return e.prev=2,e.next=5,indexedDB.databases();case 5:return r=e.sent,e.abrupt("return",r.some((function(e){return e.name===n})));case 9:return e.prev=9,e.t0=e.catch(2),console.error("Error accessing databases:",e.t0),e.abrupt("return",!1);case 13:e.next=17;break;case 15:return console.warn("indexedDB.databases() is not supported in this browser."),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return m.apply(this,arguments)})},{key:"datasetLoaded",value:(h=$(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.FS.lookupPath("/"+t).node;case 3:if(n=e.sent,r=n.mode,n.timestamp,!this.FS.isDir(r)){e.next=8;break}return e.abrupt("return",!0);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),console.error('Error retrieving "'.concat(t,'":'),e.t0),e.abrupt("return",!1);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return h.apply(this,arguments)})},{key:"typeConvert",value:function(e){switch(e.toUpperCase()){case"DT_STRING":default:return"STRING";case"DT_DOUBLE":return"DOUBLE";case"DT_SIGNED_INT32":return"INT32";case"DT_SIGNED_INT64":return"INT64"}}},{key:"createSchema",value:(f=$(J().mark((function e(t){var n,r,o,a,i,c,u,s,l,p,d,f=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.nodes,r=t.edges,this.schema=t,o=n.map((function(e){var t=e.label,n=e.properties,r=n.map((function(e){var t=e.name,n=e.type;return e.primaryKey,"".concat(t," ").concat(f.typeConvert(n))})),o=n.map((function(e){var t=e.name;return e.type,e.primaryKey?"PRIMARY KEY (".concat(t,")"):null})).filter((function(e){return null!==e})),a=r.concat(o);return"CREATE NODE TABLE ".concat(t," (").concat(a.join(", "),");")})),a=r.map((function(e){var t=e.label,n=e.source,r=e.target,o=e.properties.map((function(e){var t=e.name,n=e.type;return"".concat(t," ").concat(f.typeConvert(n))}));return 0===o.length?"CREATE REL TABLE ".concat(t," (FROM ").concat(n," TO ").concat(r,");"):"CREATE REL TABLE ".concat(t," (FROM ").concat(n," TO ").concat(r," , ").concat(o.join(", "),");")})),i=[],c=0;case 6:if(!(c<o.length)){e.next=21;break}return console.log("create nodes script: ",o[c]),e.next=10,null===(u=this.conn)||void 0===u?void 0:u.query(o[c]);case 10:return s=e.sent,e.t0=i,e.next=14,s.toString();case 14:return e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=18,s.close();case 18:c++,e.next=6;break;case 21:l=0;case 22:if(!(l<a.length)){e.next=37;break}return console.log("create edges script: ",a[l]),e.next=26,null===(p=this.conn)||void 0===p?void 0:p.query(a[l]);case 26:return d=e.sent,e.t2=i,e.next=30,d.toString();case 30:return e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=34,d.close();case 34:l++,e.next=22;break;case 37:console.log("Schema created: ",i);case 38:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"uploadCsvFile",value:(d=$(J().mark((function e(t,n){var r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){if(t){var a=new FileReader;a.onload=function(){var a=$(J().mark((function a(i){var c,u,s,l,p,d,f;return J().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,u=new Uint8Array(i.target.result),s=t.name,l="data/"+s,p=t.name.split(".")[0],a.next=7,r.FS.writeFile(l,u);case 7:return f=n.delimiter,a.next=10,null===(c=r.conn)||void 0===c?void 0:c.query("COPY ".concat(p,' FROM "').concat(l,"\" (HEADER=true, DELIM='").concat(f,"');"));case 10:d=a.sent,e(d),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),o(a.t0);case 17:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}(),a.onerror=function(e){o(e)},a.readAsArrayBuffer(t)}else o(new Error("No file provided"))})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return d.apply(this,arguments)})},{key:"loadGraph",value:(p=$(J().mark((function e(t){var n,r,o,a,i,c,u,s=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={nodes:[],edges:[]},r=Q(this.schema.nodes),e.prev=2,a=J().mark((function e(){var r,a,i,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.value,!(a=t.find((function(e){return e.name===r.label+".csv"})))){e.next=20;break}return console.log("node: ",a.name),e.prev=4,e.next=7,s.uploadCsvFile(a,r.meta);case 7:return i=e.sent,e.next=10,i.toString();case 10:return c=e.sent,e.next=13,i.close();case 13:n.nodes.push({success:!0,name:a.name,message:c}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),console.error("Error uploading file:",e.t0),n.nodes.push({success:!1,name:a.name,message:e.t0.toString()});case 20:case"end":return e.stop()}}),e,null,[[4,16]])})),r.s();case 5:if((o=r.n()).done){e.next=9;break}return e.delegateYield(a(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),r.e(e.t1);case 14:return e.prev=14,r.f(),e.finish(14);case 17:i=Q(this.schema.edges),e.prev=18,u=J().mark((function e(){var r,o,a,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.value,!(o=t.find((function(e){return e.name===r.label+".csv"})))){e.next=19;break}return e.prev=3,e.next=6,s.uploadCsvFile(o,r.meta);case 6:return a=e.sent,e.next=9,a.toString();case 9:return i=e.sent,e.next=12,a.close();case 12:n.edges.push({success:!0,name:o.name,message:i}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),console.error("Error uploading file:",e.t0),n.edges.push({success:!1,name:o.name,message:e.t0.toString()});case 19:case"end":return e.stop()}}),e,null,[[3,15]])})),i.s();case 21:if((c=i.n()).done){e.next=25;break}return e.delegateYield(u(),"t2",23);case 23:e.next=21;break;case 25:e.next=30;break;case 27:e.prev=27,e.t3=e.catch(18),i.e(e.t3);case 30:return e.prev=30,i.f(),e.finish(30);case 33:return e.abrupt("return",n);case 34:case"end":return e.stop()}}),e,this,[[2,11,14,17],[18,27,30,33]])}))),function(e){return p.apply(this,arguments)})},{key:"pathJoin",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join("/").replace(/\/+/g,"/")}},{key:"rmdirs",value:(l=$(J().mark((function e(t){var n,r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.FS.readDir(t);case 2:return n=e.sent,console.log(n),e.next=6,Promise.all(n.map(function(){var e=$(J().mark((function e(n){var o,a,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("."===n||".."===n){e.next=16;break}return o=r.pathJoin(t,n),console.log("remove ".concat(o)),e.next=5,r.FS.lookupPath(o).node;case 5:if(a=e.sent,i=a.mode,a.timestamp,!r.FS.isFile(i)){e.next=13;break}return e.next=11,r.FS.unlink(o);case 11:e.next=16;break;case 13:if(!r.FS.isDir(i)){e.next=16;break}return e.next=16,r.rmdirs(o);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return e.sent,e.prev=7,e.next=10,this.FS.rmdir(t);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.log("Error when remove ".concat(t));case 15:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(e){return l.apply(this,arguments)})},{key:"query",value:(s=$(J().mark((function e(t){var n,r,o,a,i,c,u,s,l,p;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("query: ",t),"CALL kuzu.meta.schema"!==t){e.next=5;break}return e.next=4,this.querySchema();case 4:case 8:return e.abrupt("return",e.sent);case 5:if("CALL kuzu.meta.statistics"!==t){e.next=9;break}return e.next=8,this.getCount();case 9:return console.time("Query cost"),e.next=12,null===(n=this.conn)||void 0===n?void 0:n.query(t);case 12:if(r=e.sent,console.timeEnd("Query cost"),r){e.next=18;break}return e.next=17,r.close();case 17:return e.abrupt("return",{nodes:[],edges:[],table:[]});case 18:return e.prev=18,o=function(e){return JSON.stringify(e,(function(e,t){return"bigint"==typeof t?t.toString():t}))},e.next=22,r.getAllObjects();case 22:return a=e.sent,i=JSON.parse(o(a)),c=[],u=[],i.forEach((function(e){Object.values(e).forEach((function(e){var t=e._id,n=e._src,r=e._dst,o=e._label,a=H(e,B);if(t){var i=t.offset,s=t.table,l='"'.concat(s,":").concat(i,'"');if(n&&r){var p='"'.concat(n.table,":").concat(n.offset,'"'),d='"'.concat(r.table,":").concat(r.offset,'"');u.push({id:l,label:o,source:p,target:d,properties:V({},a)})}else c.push({id:l,label:o,properties:V({},a)})}}))})),s=U(c,(function(e,t){return e.id===t.id})),l=U(u,(function(e,t){return e.id===t.id})),console.log({nodes:s,edges:l,table:i}),e.next=32,r.close();case 32:return e.abrupt("return",{nodes:s,edges:l,table:i});case 35:return e.prev=35,e.t0=e.catch(18),console.error(e.t0),e.t1=JSON,e.next=41,r.toString();case 41:return e.t2=e.sent,p=e.t1.parse.call(e.t1,e.t2),e.next=45,r.close();case 45:return e.abrupt("return",{nodes:[],edges:[],table:p});case 46:case"end":return e.stop()}}),e,this,[[18,35]])}))),function(e){return s.apply(this,arguments)})},{key:"querySchema",value:(u=$(J().mark((function e(){var t,n,r,o,a,i,c,u,s,l,p,d,f,h,m,y;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("query schema"),e.next=3,null===(t=this.conn)||void 0===t?void 0:t.query("call show_tables() return *");case 3:return n=e.sent,e.next=6,n.getAllObjects();case 6:return r=e.sent,e.next=9,n.close();case 9:o=[],a=[],i=0;case 12:if(!(i<r.length)){e.next=38;break}return u=r[i],s=u.name,l=u.type,e.next=16,null===(c=this.conn)||void 0===c?void 0:c.query("call TABLE_INFO('".concat(s,"') return *"));case 16:return p=e.sent,e.next=19,p.getAllObjects();case 19:return d=e.sent,e.next=22,p.close();case 22:if("NODE"===l&&o.push({label:s,properties:d.map((function(e){return{name:e.name,type:e.type}}))}),"REL"!==l){e.next=35;break}return e.next=26,null===(f=this.conn)||void 0===f?void 0:f.query("call SHOW_CONNECTION('".concat(s,"') return *"));case 26:return h=e.sent,e.next=29,h.getAllObjects();case 29:return m=e.sent,console.log(s,l,m),y=m[0],e.next=34,h.close();case 34:a.push({source:y["source table name"],target:y["destination table name"],label:s,properties:d.map((function(e){return{name:e.name,type:e.type}}))});case 35:i++,e.next=12;break;case 38:return e.abrupt("return",{nodes:o,edges:a});case 39:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getCount",value:(c=$(J().mark((function e(){var t,n,r,o,a,i,c,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.curDataset){e.next=2;break}return e.abrupt("return",[0,0]);case 2:return e.next=4,null===(t=this.conn)||void 0===t?void 0:t.query("MATCH (n) RETURN COUNT(n) AS vertex_count;");case 4:return r=e.sent,e.next=7,null===(n=this.conn)||void 0===n?void 0:n.query("MATCH ()-[r]->() RETURN COUNT(r) AS edge_count;");case 7:return o=e.sent,e.next=10,r.toString();case 10:return a=e.sent,e.next=13,o.toString();case 13:return i=e.sent,c=parseInt(a.split("\n")[1],10),u=parseInt(i.split("\n")[1],10),s=[c,u],e.next=19,r.close();case 19:return e.next=21,o.close();case 21:return e.abrupt("return",s);case 22:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"loadFromIndexDB",value:(i=$(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.FS.syncfs(!0);case 3:console.log("Load from indexdb successfully"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Error loading from indexdb: ",e.t0);case 9:console.log("finish load from indexdb");case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return i.apply(this,arguments)})},{key:"openDataset",value:(a=$(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=console,e.next=3,this.FS.readDir("/");case 3:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1),console.log("Open dataset ".concat(this.curDataset)),this.db=new this.kuzuEngine.Database(this.curDataset),this.conn=new this.kuzuEngine.Connection(this.db),e.next=10,null===(t=this.conn)||void 0===t?void 0:t.query("MATCH (n) RETURN count(n);");case 10:return n=e.sent,e.t2=console,e.next=14,n.toString();case 14:return e.t3=e.sent,e.t2.log.call(e.t2,e.t3),e.next=18,n.close();case 18:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"closeDataset",value:(o=$(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Close dataset ".concat(this.curDataset)),!this.conn){e.next=5;break}return e.next=4,this.conn.close();case 4:console.log("Connection closed.");case 5:if(!this.db){e.next=9;break}return e.next=8,this.db.close();case 8:console.log("Database closed.");case 9:return e.next=11,this.FS.unmount(this.targetPath);case 11:console.log("Unmount ",this.targetPath);case 12:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"writeBack",value:(r=$(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("start to write back"),e.prev=1,console.log("Attempting to sync to IndexDB..."),e.next=5,this.FS.syncfs(!1);case 5:return console.log("Save to indexdb successfully"),e.abrupt("return",{success:!0,message:"Save to indexdb successfully"});case 9:return e.prev=9,e.t0=e.catch(1),console.error("Error saving to indexdb: ",e.t0),e.abrupt("return",{success:!1,message:"error: "+e.t0.toString()});case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return r.apply(this,arguments)})},{key:"close",value:(n=$(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.closeDataset();case 3:return console.log("Close database successfully"),e.abrupt("return",{success:!0,message:"Cloase database successfully"});case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error saving to indexdb: ",e.t0),e.abrupt("return",{success:!1,message:"error: "+e.t0.toString()});case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return n.apply(this,arguments)})},{key:"cancel",value:(t=$(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.closeDataset();case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ie(){ie=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:k(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==n&&r.call(w,i)&&(b=w);var I=g.prototype=y.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ae(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,n,r){var o=d;return function(a,i){if(o===f)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=j(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var s=p(t,n,r);if("normal"===s.type){if(o=r.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ae(t)+" is not iterable")}return v.prototype=g,o(I,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},E(S.prototype),s(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(I),s(I,u,"Generator"),s(I,i,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function le(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){se(a,r,o,i,c,"next",e)}function c(e){se(a,r,o,i,c,"throw",e)}i(void 0)}))}}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fe(r.key),r)}}function de(e,t,n){return(t=fe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e){var t=function(e,t){if("object"!=ae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ae(t)?t:String(t)}var he=new Map,me=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),de(this,"_locked",void 0),de(this,"_waiting",void 0),this._locked=!1,this._waiting=[]}var t,n,r;return t=e,(n=[{key:"lock",value:function(){var e=this,t=function t(){if(e._locked=!1,e._waiting.length>0){var n=e._waiting.shift();e._locked=!0,n(t)}};return this._locked?new Promise((function(t){e._waiting.push(t)})).then((function(){return t})):(this._locked=!0,Promise.resolve(t))}}])&&pe(t.prototype,n),r&&pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()),ye=function(){var e=le(ie().mark((function e(t){var n,r,o,a,i,c,u,s,l,p,d;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.language,r=t.endpoint,o=t.username,a=t.password,i="".concat(n,"_").concat(r),e.next=4,me.lock();case 4:if(c=e.sent,he.has(i)){e.next=26;break}if(console.log("create new driver"),"cypher"!==n){e.next=25;break}if(u=r.split("://"),s=ce(u,2),l=s[0],p=s[1],"kuzu_wasm"!==l){e.next=24;break}return d=new oe,e.next=13,d.initialize();case 13:return e.next=15,d.existDataset(p);case 15:if(!e.sent){e.next=21;break}return console.log("start to use ",p),e.next=20,d.use(p);case 20:console.log("finish to use ",p);case 21:he.set(i,d),e.next=25;break;case 24:he.set(i,new b(r,o,a));case 25:"gremlin"===n&&he.set(i,new q(r,o,a));case 26:return c(),e.abrupt("return",he.get(i));case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=le(ie().mark((function e(t){var n,r;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.script,e.next=3,ye(t);case 3:return r=e.sent,e.abrupt("return",r.query(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},55736:function(e,t,n){n.d(t,{C1:function(){return a},qp:function(){return i},rv:function(){return o}});var r=n(33741),o={mode:"GS_STUDIO_QUERY_MODE"},a={isReady:!1,graphId:"",activeNavbar:"recommended",collapse:!0,activeId:"query-1",globalScript:"Match (n) return n limit 10",autoRun:!1,absolutePosition:!1,schemaData:{nodes:[],edges:[]},statements:[],historyStatements:[],savedStatements:[],storeProcedures:[],mode:"flow",enableImmediateQuery:!1,language:"gremlin",defaultCollapsed:!0,welcome:void 0},i=function(){return(0,r.qp)()}},84158:function(e,t,n){n.d(t,{Ek:function(){return o},Id:function(){return r}});n(2268).Utils.storage;function r(e){for(var t=0,n=["MATCH","WHERE","RETURN","CREATE","DELETE"];t<n.length;t++){var r=n[t];e=e.replace(new RegExp("(".concat(r,")(?![^\\(]*\\))"),"g"),"\n$1")}return(e=(e=e.replace(/, /g,",\n")).replace(/\n+/g,"\n")).trim()}function o(e){return(e.match(/\r?\n/g)||[]).length+1}},63904:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(50959),o=n(2268),a=n(96066);n(52871);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t,n){var r;return r=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==i(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p={comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}]},d={defaultToken:"",tokenPostfix:".gremlin",ignoreCase:!0,brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["g","V","E","out","in","both","has","hasLabel","limit","order","by","select","count","filter","map","dedup","outE","inE","bothE"],builtinLiterals:["true","false","null"],builtinFunctions:["values","keys","id","label","property","outV","inV","bothV","sum","mean","min","max","coalesce","is","not","range","fold"],operators:["+","-","*","/","%","^","=","<>","<",">","<=",">="],escapes:/\\(?:[tbnrf\\"'`]|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+/,octaldigits:/[0-7]+/,hexdigits:/[0-9a-fA-F]+/,tokenizer:{root:[[/[{}[\]()]/,"@brackets"],{include:"common"}],common:[{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/:[a-zA-Z_][\w]*/,"type.identifier"],[/[a-zA-Z_][\w]*(?=\()/,{cases:{"@builtinFunctions":"predefined.function","@keywords":"keyword","@default":"identifier"}}],[/`/,"identifier.escape","@identifierBacktick"],[/[;,.:|]/,"delimiter"],[/[\+\-\*\/\^%]+/,"delimiter.operator"],[/[\!<>\?=\|&]/,"delimiter"]],numbers:[[/-?(@digits)[eE](-?(@digits))?/,"number.float"],[/-?(@digits)?\.(@digits)([eE]-?(@digits))?/,"number.float"],[/-?0x(@hexdigits)/,"number.hex"],[/-?0(@octaldigits)/,"number.octal"],[/-?(@digits)/,"number"]],strings:[[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@stringDouble"],[/'/,"string","@stringSingle"]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/\/\/.*/,"comment"],[/[^/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],stringDouble:[[/[^\\"]+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/"/,"string","@pop"]],stringSingle:[[/[^\\']+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/'/,"string","@pop"]],identifierBacktick:[[/[^\\`]+/,"identifier.escape"],[/@escapes/,"identifier.escape"],[/\\./,"identifier.escape.invalid"],[/`/,"identifier.escape","@pop"]]}};var f=[].concat(["count","fold","sum","min","max","mean","group","groupCount"],["hasId","hasLabel","has","hasNot","is","where","not","dedup","order","limit","coin","sample","union"],["id","label","constant","valueMap","values","elementMap","select"]),h=["outV","inV","otherV","bothV"],m=["outE","inE","bothE","out","in","both"],y={};function v(e){return(e.match(/\r?\n/g)||[]).length+1}[].concat(h,["out","in","both"]).forEach((function(e){y[e]=[].concat(m,s(f))})),["outE","inE","bothE"].forEach((function(e){y[e]=[].concat(h,s(f))})),a.Mj.register({id:"gremlin"}),a.Mj.setMonarchTokensProvider("gremlin",d),a.Mj.setLanguageConfiguration("gremlin",p),a.Mj.registerCompletionItemProvider("gremlin",{triggerCharacters:["."],provideCompletionItems:function(e,t){var n,r=e.getLineContent(t.lineNumber).slice(0,t.column-1).trim(),o=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({g:["V","E"],V:[].concat(m,["match"],s(f)),E:[].concat(h,s(f))},y)[e]||[];return t.map((function(e){return{label:e,kind:a.Mj.CompletionItemKind.Function,documentation:e,insertText:"".concat(e,"()")}}))}((n=r.replace(/\(.*?\)/g,"").split(/\s|\./).filter(Boolean)).length>0?n[n.length-1]:"");return{suggestions:o}}});var g={cypher:"cypherTheme",gremlin:"GremlinTheme"},b=(0,r.forwardRef)((function(e,t){(0,o.useDynamicStyle)("\n.monaco-editor .view-overlays .current-line {\n  background-color: transparent !important;\n}\n\n.monaco-editor .monaco-scrollable-element::-webkit-scrollbar {\n  display: none;\n}\n\n.decorationsOverviewRuler {\n  display: none !important;\n}\n\n.monaco-editor .view-overlays .current-line-exact {\n  border: none !important;\n}\n\n.monaco-editor .scroll-decoration {\n  box-shadow: none;\n}\n","cypher-editor-style");var n,i=e.value,c=e.language,u=void 0===c?"cypher":c,s=e.maxRows,l=void 0===s?10:s,p=e.minRows,d=void 0===p?1:p,f=e.onChangeContent,h=e.clear,m=e.onInit,y=f?0:v(i),b=(0,o.useStudioProvier)().isLight;return(0,r.useEffect)((function(){return t&&t.current&&(v(i)<=l&&(t.current.style.height=20*v(i)+"px"),n=a.j6.create(t.current,{language:"gremlin",value:i,theme:b?g[u]:"vs-dark",suggestLineHeight:20,automaticLayout:!0,minimap:{enabled:!1},fontSize:14,lineHeight:20,folding:!0,wordWrap:"on",scrollBeyondLastLine:!1,scrollBeyondLastColumn:0}),t.current.codeEditor=n,n.onDidChangeModelContent((function(){var e,r=n.getContentHeight(),o=null===(e=n.getModel())||void 0===e?void 0:e.getLineCount();r<=20*l&&(t.current.style.height=r+"px"),f&&f(o,n)})),m&&m(t.current)),function(){n.dispose()}}),[t,i,u,!b]),r.useEffect((function(){h&&t&&t.current&&t.current.codeEditor&&t.current.codeEditor.setValue("")}),[h]),r.createElement("div",{ref:t,style:{padding:"5px 0px",width:"100%",height:20*(d+y)+"px",border:b?"1px solid rgb(187, 190, 195)":"1px solid #434343",borderRadius:"6px"}})})),x=b},21050:function(e,t,n){n.r(t),n.d(t,{ConnectEndpoint:function(){return Ct},QueryStatement:function(){return Bt},Statement:function(){return Et.default},default:function(){return Vt},sdk:function(){return Yt}});var r=n(50959),o=n(53531),a=n(31192),i=n(55736),c=n(56331),u=o.Z.useToken,s=function(e){var t=u().token,n=(0,i.qp)().store.welcome;if(n){var o=n.title,a=n.description;return r.createElement("div",{style:{margin:"12px",borderRadius:"8px",background:t.colorBgBase}},r.createElement(c.Z,{message:o,description:a,type:"info",closable:!0}))}return null},l=n(54016),p=n(84155),d=n(28541),f=function(e){var t=e.isDark,n=t?"#272727":"#E6E9EE";return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 915 866",fill:"none"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M552.085 623.067C491.189 655.842 482.589 745.72 418.484 770.756C352.941 796.353 259.359 798.915 226.164 750.352C189.108 696.141 291.287 607.551 265.559 547.035C237.793 481.726 101.961 496.952 88.3682 426.238C76.2288 363.085 150.831 297.41 208.118 248.21C263.376 200.753 332.496 162.372 402.856 156.147C468.399 150.348 511.091 201.87 571.612 216.049C633.101 230.454 738.7 185.557 759.412 239.679C782.973 301.247 654.143 363.856 654.328 432.195C654.506 498.496 794.484 523.038 760.348 586.766C727.485 648.115 617.062 588.097 552.085 623.067Z",fill:t?"#272727":"#EEF1F6"}),r.createElement("circle",{cx:"595.876",cy:"255.218",r:"12.5406",transform:"rotate(30 595.876 255.218)",fill:n}),r.createElement("circle",{cx:"724.312",cy:"289.146",r:"12.5406",transform:"rotate(30 724.312 289.146)",fill:n}),r.createElement("circle",{cx:"735.006",cy:"235.789",r:"12.5406",transform:"rotate(30 735.006 235.789)",fill:n}),r.createElement("circle",{cx:"800.535",cy:"288.103",r:"12.5406",transform:"rotate(30 800.535 288.103)",fill:n}),r.createElement("circle",{cx:"613.406",cy:"199.774",r:"12.5406",transform:"rotate(30 613.406 199.774)",fill:n}),r.createElement("circle",{cx:"662.947",cy:"242.856",r:"12.5406",transform:"rotate(30 662.947 242.856)",fill:n}),r.createElement("circle",{cx:"722.216",cy:"420.273",r:"12.5406",transform:"rotate(30 722.216 420.273)",fill:n}),r.createElement("circle",{cx:"788.851",cy:"389.157",r:"12.5406",transform:"rotate(30 788.851 389.157)",fill:n}),r.createElement("line",{x1:"594.446",y1:"254.765",x2:"611.976",y2:"199.321",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"661.962",y1:"243.988",x2:"612.422",y2:"200.905",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"663.219",y1:"244.332",x2:"596.148",y2:"256.693",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"663.85",y1:"241.659",x2:"725.215",y2:"287.949",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"736.476",y1:"236.083",x2:"725.782",y2:"289.441",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"735.152",y1:"237.281",x2:"663.093",y2:"244.349",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"735.941",y1:"234.616",x2:"801.471",y2:"286.93",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"787.591",y1:"389.971",x2:"723.052",y2:"289.96",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"787.361",y1:"388.985",x2:"799.046",y2:"287.931",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"800.556",y1:"289.603",x2:"724.333",y2:"290.646",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"789.486",y1:"390.517",x2:"722.851",y2:"421.632",stroke:n,strokeWidth:"3"}),r.createElement("circle",{cx:"165.557",cy:"381.703",r:"16.9036",transform:"rotate(165 165.557 381.703)",fill:n}),r.createElement("circle",{cx:"131.703",cy:"474.871",r:"16.9036",transform:"rotate(165 131.703 474.871)",fill:n}),r.createElement("circle",{cx:"216.702",cy:"581.703",r:"16.9036",transform:"rotate(165 216.702 581.703)",fill:n}),r.createElement("line",{x1:"132.878",y1:"473.939",x2:"218.059",y2:"581.392",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"130.293",y1:"474.359",x2:"164.148",y2:"381.191",stroke:n,strokeWidth:"3"}),r.createElement("circle",{cx:"334",cy:"204",r:"7",fill:n}),r.createElement("circle",{cx:"361",cy:"152",r:"7",fill:n}),r.createElement("circle",{cx:"283",cy:"229",r:"7",fill:n}),r.createElement("circle",{cx:"385",cy:"219",r:"7",fill:n}),r.createElement("circle",{cx:"414",cy:"190",r:"7",fill:n}),r.createElement("line",{x1:"282.78",y1:"228.551",x2:"333.78",y2:"203.551",stroke:n}),r.createElement("line",{x1:"384.859",y1:"219.48",x2:"333.859",y2:"204.48",stroke:n}),r.createElement("line",{x1:"384.647",y1:"218.646",x2:"413.647",y2:"189.646",stroke:n}),r.createElement("line",{x1:"384.53",y1:"219.169",x2:"360.53",y2:"152.169",stroke:n}),r.createElement("line",{x1:"333.556",y1:"203.77",x2:"360.556",y2:"151.77",stroke:n}),r.createElement("ellipse",{cx:"553",cy:"673.5",rx:"25",ry:"24.5",fill:n}),r.createElement("circle",{cx:"786",cy:"553",r:"25",fill:n}),r.createElement("line",{x1:"551.872",y1:"671.669",x2:"785.082",y2:"551.223",stroke:n,strokeWidth:"4"}))},h=n(2268),m=function(e){var t=(0,h.useStudioProvier)().isLight;return r.createElement("div",{style:{fontSize:"14px",height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},r.createElement(f,{isDark:!t}),r.createElement(l.Z.Text,{type:"secondary",style:{position:"absolute"}},r.createElement(p.Z,{id:"You can write cypher or gremlin queries, and then click the {icon} button to query data",values:{icon:r.createElement(d.Z,null)}})))};function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){var r;return r=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==y(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,613))})),w=(0,r.lazy)((function(){return Promise.all([n.e(3155),n.e(2548),n.e(3322)]).then(n.bind(n,93322))})),I=o.Z.useToken,E=function(e){var t=e.createStatements,n=e.queryGraphData,o=e.enableImmediateQuery,c=e.handleCancelQuery,u=e.connectComponent,l=e.displaySidebarPosition,p=(0,i.qp)(),d=p.store,f=p.updateStore,h=d.activeId,y=d.mode,v=d.statements,b=d.savedStatements,E=d.schemaData,S=d.graphId,k=(d.language,b.map((function(e){return e.id})),I().token),j="tabs"===y?{position:"absolute",width:"100%"}:{},O=v.map((function(e,t){return{label:"query-".concat(t+1),value:e.id}})),P=function(e){var n=e.id,r=e.script,o=e.name,a=e.language;f((function(e){-1!==e.savedStatements.map((function(e){return e.id})).indexOf(n)?e.savedStatements.forEach((function(e){e.id===n&&(e.script=r)})):(e.savedStatements.push({id:n,script:r,name:o,language:a}),t&&t("saved",{id:n,script:r,name:o,language:a}))}))},T=function(e){f((function(t){t.statements=t.statements.filter((function(t){return t.id!==e})),t.activeId=t.statements[0]&&t.statements[0].id}))},L=0===v.length;return(0,r.useEffect)((function(){var e;h&&(null===(e=document.getElementById("statements-layout"))||void 0===e||e.scrollTo({top:0,behavior:"smooth"}))}),[h]),r.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},r.createElement("div",{style:{minHeight:"50px",background:k.colorBgBase,padding:"0px 12px",borderBottom:"1px solid ".concat(k.colorBorder)}},r.createElement(r.Suspense,null,r.createElement(w,{connectComponent:u,displaySidebarPosition:l})),"tabs"===y&&0!==O.length&&r.createElement("div",{style:{overflowX:"scroll",padding:"8px 0px"}},r.createElement(a.Z,{options:O,onChange:function(e){f((function(t){t.activeId=e}))},value:h}))),r.createElement("div",{id:"statements-layout",style:{overflowY:"scroll",flex:"1",position:"relative",background:k.colorBgLayout}},L&&r.createElement(m,null),r.createElement(s,null),v.map((function(e){var t=e.id,a=e.script,i=e.timestamp,u=e.language;return r.createElement("div",{key:t,style:g(g({},j),{},{visibility:t===h||"flow"===y?"visible":"hidden",flex:1})},r.createElement(r.Suspense,null,r.createElement(x,{language:u,enableImmediateQuery:o,mode:y,active:t===h,id:t,timestamp:i,graphId:S,schemaData:E,script:a,onQuery:n,onCancel:c,onClose:T,onSave:P})))}))))},S=(0,r.memo)(E),k=n(791),j=n(17905),O=n(88648),P=n(57526),T=n(38943),L=n(86132),C=n(15098),_=n(41473),N=n(16483),A=n.n(N);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function F(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){var r;return r=function(e,t){if("object"!=D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==D(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}l.Z.Text;var B=l.Z.Title,z=o.Z.useToken,Y={container:{position:"relative",flex:1,height:"100%"},list:{flex:1,height:"100%",overflow:"scroll"},ul:{paddingInlineStart:"0px",boxSizing:"border-box",margin:"0px"},li:{cursor:"pointer",listStyle:"none",boxSizing:"border-box",display:"flex",alignItems:"start",padding:"6px 12px",gap:"4px"}};function V(e){return e.sort((function(e,t){return t.timestamp-e.timestamp})).reduce((function(e,t){var n=A()(t.timestamp),r=n.format("YYYY-MM-DD"),o=n.format("HH:mm"),a=e.find((function(e){return e.day===r}));return a?a.items.push(M(M({},t),{},{hours:o})):e.push({day:r,items:[M(M({},t),{},{hours:o})]}),e}),[])}var H=function(e){var t=e.items,n=e.checkedSet,o=e.batch,a=e.onChange,i=e.onClick,c=z().token;return r.createElement("ul",{style:Y.ul},t.map((function(e){var t=e.hours,u=e.id,s=e.name,l=e.timestamp,p=e.description,d=(e.query,n.has(u)),f=s||t||A()(l).format("YYYY-MM-DD HH:mm");return r.createElement("li",{key:e.id,style:Y.li,className:"gs-query-list-item"},o&&r.createElement(k.Z,{checked:d,onChange:function(t){return a(e.id,t.target.checked)}}),r.createElement(j.Z,{title:"Click to start the query",placement:"right"},r.createElement("pre",{style:{background:c.colorBgLayout,overflow:"hidden",textWrap:"pretty",padding:"6px 14px",fontSize:"12px",border:"1px solid transparent",borderRadius:"6px",flex:1,margin:"0px"},className:"statement-list-item-pre",onClick:function(){i&&i(e)}},r.createElement("div",{style:{fontSize:"11px",padding:"4px 0px 12px 0px",color:c.colorTextDescription,fontStyle:"italic"}},f),p&&r.createElement("div",{style:{fontSize:"11px",padding:"4px 0px 12px 0px",color:c.colorTextDescription,fontStyle:"italic"}},p),r.createElement("code",{style:{fontSize:"12px",color:c.colorTextHeading}},e.script),e.query&&r.createElement(r.Fragment,null,r.createElement("br",null),r.createElement("br",null),r.createElement("code",{style:{fontSize:"12px",color:c.colorTextDescription}},e.query)))))})))},Q=function(e){var t=e.items,n=e.batch,o=e.checkedSet,a=e.onChange,i=e.onClick,c=V(t);return r.createElement("div",{style:Y.list},c.map((function(e){var t=e.day,c=e.items;return r.createElement("div",{key:t},r.createElement(B,{level:5,style:{padding:"12px 12px",margin:"0px",position:"sticky",top:0,backgroundColor:"white",zIndex:100}},t),r.createElement(H,{items:c,batch:n,checkedSet:o,onChange:a,onClick:i}))})))},W=function(e){var t=e.items,n=e.onClick,o=e.onDelete,a=e.actionStyle,i=e.group,c=e.placeholder,u=R((0,r.useState)({checkedSet:new Set,batch:!1}),2),s=u[0],p=u[1],d=s.checkedSet,f=s.batch,h=(V(t),d.size>0&&d.size<t.length),m=t.length>0&&t.length===d.size,y=function(e){p((function(t){return M(M({},t),{},{checkedSet:e})}))},v=function(e,t){t?d.add(e):d.delete(e),y(d)};return 0==t.length&&c?r.createElement("div",{style:{padding:"120px 0px"}},r.createElement(O.Z,{imageStyle:{height:"80px"},description:r.createElement(l.Z.Text,{style:{fontSize:"12px"}},c)})):r.createElement(r.Fragment,null,r.createElement(P.Z,{vertical:!0,flex:1,style:{position:"relative",height:"100%"}},r.createElement("div",{style:M({position:"absolute",top:"-34px",right:"0px",zIndex:99},a)},f&&r.createElement(k.Z,{indeterminate:h,onChange:function(e){var n=e.target.checked?new Set(t.map((function(e){return e.id}))):new Set;y(n)},checked:m},r.createElement(T.ZP,{icon:r.createElement(L.Z,null),size:"small",type:"text",onClick:function(){o(F(d))}})),r.createElement(T.ZP,{icon:f?r.createElement(C.Z,null):r.createElement(_.Z,null),size:"small",type:"text",onClick:function(){p((function(e){return M(M({},e),{},{batch:!e.batch})}))}})),i?r.createElement(Q,{items:t,batch:f,checkedSet:d,onChange:v,onClick:n}):r.createElement("div",{style:Y.list},r.createElement(H,{items:t,batch:f,checkedSet:d,onChange:v,onClick:n}))))},J=n(15001),K=function(e){var t=e.children,n=e.title,a=o.Z.useToken().token;return r.createElement(P.Z,{vertical:!0,style:{height:"100%",overflow:"hidden",borderTop:"1px solid ".concat(a.colorBorder),marginTop:"-2px",marginLeft:"-4px",marginRight:"-8px"}},r.createElement(l.Z.Title,{level:5,style:{margin:"0px",flexBasis:"30px",padding:"12px"}},r.createElement(p.Z,{id:n})),r.createElement("div",{style:{height:"100%",overflow:"hidden",marginBottom:"8px"}},t))};function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function X(){X=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:k(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==n&&r.call(w,i)&&(b=w);var I=g.prototype=y.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==$(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,n,r){var o=d;return function(a,i){if(o===f)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=j(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var s=p(t,n,r);if("normal"===s.type){if(o=r.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError($(t)+" is not iterable")}return v.prototype=g,o(I,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},E(S.prototype),s(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(I),s(I,u,"Generator"),s(I,i,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function ee(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}var te=function(e){var t=(0,i.qp)(),n=t.store,o=t.updateStore,a=n.savedStatements,c=e.deleteStatements,u=a.map((function(e){return e})),s=function(){var e,t=(e=X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t),o((function(e){e.savedStatements=e.savedStatements.filter((function(e){return-1===t.indexOf(e.id)}))}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ee(a,r,o,i,c,"next",e)}function c(e){ee(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return r.createElement(K,{title:"Saved"},r.createElement(W,{items:u,onClick:function(e){e.id;var t=e.script;o((function(e){e.globalScript=t,e.autoRun=!0}))},onDelete:s,placeholder:r.createElement(r.Fragment,null,r.createElement(p.Z,{id:"No saved query statements {br} You can click {icon} to save.",values:{icon:r.createElement(J.Z,null),br:r.createElement("br",null)}}))}))};function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ie(r.key),r)}}function oe(e,t,n){return t&&re(e.prototype,t),n&&re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ae(e,t,n){return(t=ie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ne(t)?t:String(t)}var ce=oe((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ae(this,"status",void 0),ae(this,"role",void 0),ae(this,"content",void 0),ae(this,"timestamp",void 0),ae(this,"reserved",void 0),this.status=t.status||"pending",this.role=t.role||"user",this.content=t.content||"",this.timestamp=t.timestamp||Date.now(),this.reserved=t.reserved||!1}));"\n你的角色是一个 Cypher 查询助手，你可以根据 Schema 结构，给用户推荐你任务最重要的5条 Cypher 查询语句\n\n任务1: 根据 Schema 结构，自动推荐出关联性最大，最利于用户分析的 10 条Cypher查询语句\nSchema：\n".concat(JSON.stringify({nodes:[{label:"Paper",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"conference",type:"DT_STRING"},{name:"CCFRank",type:"DT_STRING"},{name:"CCFField",type:"DT_STRING"},{name:"year",type:"DT_SIGNED_INT32"},{name:"paper",type:"DT_STRING"}],primary:"id"},{label:"Challenge",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"challenge",type:"DT_STRING"}],primary:"id"},{label:"Topic",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"category",type:"DT_STRING"}],primary:"id"},{label:"Task",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"task",type:"DT_STRING"}],primary:"id"},{label:"Solution",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"solution",type:"DT_STRING"}],primary:"id"},{label:"CCFField",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"field",type:"DT_STRING"}],primary:"id"}],edges:[{label:"WorkOn",properties:[],primary:"WorkOn",constraints:[["Paper","Task"]]},{label:"Resolve",properties:[],primary:"Resolve",constraints:[["Paper","Challenge"]]},{label:"Target",properties:[{name:"number",type:"DT_SIGNED_INT32"}],primary:"Target",constraints:[["Task","Challenge"]]},{label:"Belong",properties:[],primary:"Belong",constraints:[["Task","Topic"]]},{label:"Use",properties:[],primary:"Use",constraints:[["Paper","Solution"]]},{label:"ApplyOn",properties:[],primary:"ApplyOn",constraints:[["Solution","Challenge"]]},{label:"HasField",properties:[],primary:"HasField",constraints:[["Paper","CCFField"]]},{label:"Citation",properties:[],primary:"Citation",constraints:[["Paper","Paper"]]}]},null,2),"\nAnswers:\n").concat(JSON.stringify([{cypher:"Match (n:Paper) return n limit 30",desc:"查询出 Paper 类型的节点"},{cypher:"MATCH (p:Paper)-[:WorkOn]->(a:Task),(a)-[:Belong]->(t: Topic) RETURN t.category,  COUNT(p)",desc:"找出每个主题下的论文数量"},{cypher:"MATCH (t: Topic)<-[:Belong]-(a:Task),\n      (a)<-[:WorkOn]-(p:Paper)-[:Use]->(s:Solution),\n      (s)-[:ApplyOn]->(ch:Challenge)\n  WHERE t.category = $topic_name\n  RETURN t.category, ch.challenge, COUNT(p)",desc:"检索特定主题下，每个挑战（Challenge）所应用的解决方案（Solution）中与论文（Paper）相关的数量"}],null,2),"\n\n任务2: 根据 Schema 结构和用户的输入，生成 Cypher 查询语句，用于图数据库查询\n").concat("\n注意要以JSON的格式返回结果：\nRight Cases:\nquerys1: 列举出鲁迅的一个别名可以吗？\nanswer1: \"match (:ENTITY{name:'鲁迅'})<--(h)-[:Relationship{name:'别名'}]->(q) return distinct q.name limit 1\"\n\nquerys2: 我们常用的301SH不锈钢带的硬度公差是多少，你知道吗？ \nanswers2: \"match(p:ENTITY{name:'301SH不锈钢带'})-[:Relationship{name:'硬度公差'}]-> (q) return q.name\"\nWrong Cases:\nquerys: 12344加油这首歌真好听，你知道歌曲原唱是谁吗？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '12345加油' RETURN a.name\nquerys: 七宗梦是什么时候上映的？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '七宗梦' RETURN a.name LIMIT 30\n","\n\nInstructions:\nNote: Do not include any explanations or apologies in your responses.\nDo not respond to any questions that might ask anything else than for you to construct a Cypher statement.\nDo not include any text except the generated Cypher statement.\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\n你必须使用Sechema中出现的关键词！！！\n\n当前会话中图的 Schema 结构如下：\n\n{graphSchema}\n\n你需要根据用户的提问，自动切换到上述两个任务中，并且给出正确返回，让我们开始吧！\n\n");function ue(e,t){var n=function(e){return JSON.stringify(e,null,2)}(t);return e.replace(/\{graphSchema\}/g,n)}function se(e,t,n){return[t&&new ce({status:"success",role:"system",content:ue(t,n),timestamp:Date.now(),reserved:!0}),e&&new ce({status:"success",role:"assistant",content:e,timestamp:Date.now(),reserved:!0})].filter(Boolean)}var le=n(55216),pe=n(48722),de=n(16889),fe=n(31097),he=n(12423),me=n(25046);function ye(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){if(e){if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function be(e){var t,n=[],r=0,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ve(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(ye(e.matchAll(/```cypher\s*([\s\S]*?)\s*```/g)));try{for(o.s();!(t=o.n()).done;){var a=t.value,i=e.substring(r,a.index).trim();i&&n.push({type:"text",content:i});var c=a[1].trim();n.push({type:"cypher",content:c}),r=a.index+a[0].length}}catch(e){o.e(e)}finally{o.f()}var u=e.substring(r).trim();return u&&n.push({type:"text",content:u}),n}var xe=function(e){var t=e.style;return r.createElement("svg",{width:"41px",height:"62px",viewBox:"0 0 41 62",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:t},r.createElement("title",null,"logo image"),r.createElement("g",{id:"页面-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"Medium",transform:"translate(-332, -376)",fillRule:"nonzero"},r.createElement("g",{id:"编组",transform:"translate(332, 376)"},r.createElement("path",{d:"M20.9765256,25 L20.9743827,19.8935471 L22.5478011,18.78271 L26,16.3451158 L25.9983928,13 L18.4270199,18.1683792 C16.9071738,19.2057816 15.8019773,20.29689 15,21.3704617 L15,21.4778737 L20.9765256,25 Z",id:"路径",fill:"#2281F2"}),r.createElement("path",{d:"M6.93795336,20.7840634 C8.51291573,17.334308 13.2733365,13.6674352 13.2733365,13.6674352 L29,3.26992071 L22.9018725,0 L10.9685669,7.75591857 C10.9685669,7.75591857 -0.854857679,14.9756228 0.049338003,26.8260698 C0.761651772,36.1593797 12.3046335,39 12.3046335,39 C5.52316592,36.2295591 4.72994467,25.6215065 6.93795336,20.7840634 Z",id:"路径",fill:"#2281F2"}),r.createElement("path",{d:"M29.2439473,3 L13.4603304,13.6082752 C13.4603304,13.6082752 8.68266998,17.3489173 7.10200396,20.8691596 C4.7340225,26.1425307 5.81651263,38.201864 13.9672848,39.9124792 C13.9672848,39.9124792 17.3656344,40.7454111 23.3969644,37.2721576 C26.5517126,35.4552583 30.7231127,39.070597 30.7231127,39.070597 C35.4705973,35.3685528 31.9076521,31.827613 28.0846459,30.5007395 C24.3395483,29.2007168 21.5847673,31.781743 17.5346192,32.8378717 C13.4844711,33.8940003 12.4480677,29.1934447 12.4480677,29.1934447 C12.4480677,29.1934447 10.5497323,23.0871416 17.786999,18.1633893 L25.5410959,12.8877806 L25.5427418,16.3022982 L20.3958387,19.9243496 L20.3980333,25.1367472 L29.4222592,19.0125436 L29.2439473,3 Z",id:"路径",fill:"#1FB2FD"}),r.createElement("path",{d:"M36.7904047,27.0251597 C32.1878283,23.2677091 25.8158521,23.5156909 20.7707852,25.0562844 C18.0303799,25.8934309 12.0176813,28.5163788 12.0176813,28.5163788 C12.0176813,28.5163788 12.0918982,28.8392544 12.2746294,29.2936102 C12.3094889,29.3801542 12.3471596,29.4705815 12.3904528,29.565447 C12.4309348,29.6547648 12.476477,29.747966 12.5248305,29.8422768 C12.5928627,29.9759761 12.6687665,30.1130041 12.7536662,30.2516963 C12.8082044,30.3415689 12.8649916,30.4314415 12.9268391,30.5207593 C13.016799,30.6516848 13.1146305,30.7815007 13.2208957,30.9079881 C13.3007352,31.0034083 13.3873216,31.0960548 13.4767193,31.1864821 C13.8635471,31.5770395 14.3408972,31.9132295 14.9284481,32.1068439 C15.0189704,32.1368014 15.1117416,32.1628756 15.2078863,32.1856211 C15.7825055,32.3220943 16.4521449,32.3265324 17.2302986,32.1301442 C17.2404191,32.1279251 17.2494151,32.1245965 17.2595356,32.1218227 C19.9341576,31.4411211 21.9492606,30.1523927 23.9930384,29.7130156 C25.2822771,29.3890305 26.5895077,29.3241225 28.042361,29.8123192 C31.9601172,31.1282314 35.611367,34.640474 30.74622,38.3113806 L30.74622,38.3113806 L30.74622,38.3113806 L17.8768858,46.5019905 L17.877448,46.5014357 L14.3510177,44.4709811 L22.2523132,39.6783315 L17.0768044,37.0060091 L4,44.7372702 L4.00056225,44.737825 L13.0353533,49.5842871 L13.0342288,49.5848419 L19.4039561,53 L37.3717709,41.2716281 C37.3706464,41.2732924 45.9106577,34.4712695 36.7904047,27.0251597 Z",id:"路径",fill:"#37EDD7"}),r.createElement("path",{d:"M40.9961107,35 C40.9955641,35 40.994471,35.0005545 40.9939244,35.0011089 C40.9928312,35.0238418 40.9884586,35.0454657 40.9873655,35.0676442 C40.8900752,39.0492238 37.4668795,41.8592287 37.4668795,41.8592287 L20,53.5810744 L20.0032794,62 L38.0440621,49.2618285 C41.053501,47.4803475 41,43.5348078 41,43.5348078 L40.9961107,35 Z",id:"路径",fill:"#1FB2FD"}),r.createElement("polygon",{id:"路径",fill:"#2281F2",points:"22.9982925 41 22.9982925 41 22.9982925 41 15 45.9410083 18.498008 47.9919928 18.6237906 48 23 45.1631669"}),r.createElement("polygon",{id:"路径",fill:"#2281F2",points:"18.9961684 53.4177665 4 45 4.00328419 53.0147944 19 62"})))))},we=o.Z.useToken,Ie=function(e){var t=e.content,n=e.onQuery;return r.createElement("div",{style:{position:"relative"}},r.createElement("pre",{style:{border:"1px solid #ddd",padding:"6px",borderRadius:"4px"}},r.createElement("code",{style:{whiteSpace:"pre-wrap"}},t)),r.createElement(j.Z,{title:"开始查询"},r.createElement(T.ZP,{style:{position:"absolute",bottom:"2px",right:"2px"},onClick:function(){n&&n(t)},size:"small",icon:r.createElement(d.Z,{style:{color:"#52c41a"}}),type:"text"})))},Ee=function(e){var t=e.content,n=e.role,o=we().token,a="user"===n?"rgba(221,221,221,0.3)":o.colorPrimaryBg;return r.createElement("div",{style:{background:a,borderRadius:"6px",padding:"6px"}},r.createElement(l.Z.Text,{style:{fontSize:"12px"}}," ",t))},Se=function(e){var t=e.role,n=e.content,o=(e.timestamp,e.onQuery),a="user"===t&&!n.includes("`"),i=be(n);return a?r.createElement(P.Z,{align:"start",justify:"flex-end",gap:4,style:{margin:"6px 0px"}},r.createElement(Ee,{content:n,role:t})):r.createElement("div",null,r.createElement(pe.Z,{align:"start",size:2},r.createElement(xe,{style:{fontSize:"12px",height:"14px",width:"14px",border:"1px solid #ddd",borderRadius:"50%",padding:"4px"}}),r.createElement("div",null,i.map((function(e,n){return"cypher"===e.type?r.createElement(Ie,{key:n,content:e.content,onQuery:o}):r.createElement(Ee,{key:n,content:e.content,role:t})})))))},ke=n(52018),je=n(63432),Oe=n(37528);function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Le=function(e){var t=e.onChange,n=e.style,o=Pe((0,r.useState)((function(){var e="copilot"===h.Utils.getSearchParams("tab");return!localStorage.getItem("OPENAI_KEY_FOR_GS")&&e})),2),a=o[0],i=o[1],c=(0,r.useRef)(null),u=(0,Oe.Z)(),s=localStorage.getItem("OPENAI_KEY_FOR_GS")||"";return r.createElement(r.Fragment,null,r.createElement(T.ZP,{icon:r.createElement(je.Z,null),type:"text",onClick:function(){i(!0)},style:n}),r.createElement(ke.Z,{title:r.createElement(p.Z,{id:"Setting"}),open:a,onOk:function(){if(c.current){var e=c.current.input.value,n=String(e).trim();localStorage.setItem("OPENAI_KEY_FOR_GS",n),t&&t(n)}i(!1)},onCancel:function(){i(!1)}},r.createElement(P.Z,{vertical:!0,gap:12},r.createElement(l.Z.Text,{strong:!0},r.createElement(p.Z,{id:"Privacy Security Notice"})),r.createElement(l.Z.Text,null,r.createElement(p.Z,{id:"query.app.sidebar.gpt.setting.security"})),r.createElement(l.Z.Text,{strong:!0},"OpenAI API key"),r.createElement(de.Z,{ref:c,placeholder:u.formatMessage({id:"OpenAI API key is only stored locally in your browser"}),defaultValue:s}))))};function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}function Ne(){Ne=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:k(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==n&&r.call(w,i)&&(b=w);var I=g.prototype=y.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ce(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,n,r){var o=d;return function(a,i){if(o===f)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=j(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var s=p(t,n,r);if("normal"===s.type){if(o=r.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ce(t)+" is not iterable")}return v.prototype=g,o(I,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},E(S.prototype),s(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(I),s(I,u,"Generator"),s(I,i,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function Ae(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function De(e){return function(e){if(Array.isArray(e))return Me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){Ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e,t,n){var r;return r=function(e,t){if("object"!=Ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ce(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||qe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){if(e){if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(e,t):void 0}}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ue=o.Z.useToken,Be=function(e){var t=e.schemaData,n=e.prompt,o=void 0===n?'\n你的角色是一个 Cypher 查询助手，你可以根据用户的自然语言提问，再结合图数据库的 Schema 结构，给生成标准的 Cypher 查询语句。\n为了查询的准确性，请务必充分理解 Schema，并使用 Schema 中明确的字段，不要自己随意生成字段！\n为了查询的准确性，请务必充分理解 Schema，并使用 Schema 中明确的字段，不要自己随意生成字段！\n为了查询的准确性，请务必充分理解 Schema，并使用 Schema 中明确的字段，不要自己随意生成字段！\n\n你不要着急马上给出答案，你可以多生成几个语句，然后找出一个你觉得最准确的语句告诉我，推理的过程可以不用告诉我，我只需要最准确的那一个。\n你不要着急马上给出答案，你可以多生成几个语句，然后找出一个你觉得最准确的语句告诉我，推理的过程可以不用告诉我，我只需要最准确的那一个。\n你不要着急马上给出答案，你可以多生成几个语句，然后找出一个你觉得最准确的语句告诉我，推理的过程可以不用告诉我，我只需要最准确的那一个。\n\n其他注意事项:\n不支持 "MATCH p=()-[]-() RETURN p" 的写法，请都替换成 "MATCH (a)-[b]-(c) RETURN a,b,c"\n注意返回格式需要 markdown cypher 格式\n\n下面是数据库中的 Schema：\n{graphSchema}\n让我们开始吧～\n':n,a=Ge((0,r.useState)({messages:[],isLoading:!1,OPENAI_KEY_FOR_GS:localStorage.getItem("OPENAI_KEY_FOR_GS")}),2),c=a[0],u=a[1],s=c.messages,p=c.isLoading,d=c.OPENAI_KEY_FOR_GS,f=(0,r.useRef)(null),m=Ue().token,y=function(){var e=(0,r.useRef)(new AbortController);return e.current.signal.aborted&&(e.current=new AbortController),e.current}(),v=(0,i.qp)().updateStore,g=(0,Oe.Z)(),b=[g.formatMessage({id:"recommend 5 interesting query statements"}),g.formatMessage({id:"query any subgraph"}),g.formatMessage({id:"insight the statistical distribution of vertex labels in the graph"})],x=g.formatMessage({id:"query.copilot.welcome"});(0,r.useEffect)((function(){t&&u((function(e){return Re(Re({},e),{},{messages:De(se(x,o,t))})}))}),[]);var w=function(){var e,t=(e=Ne().mark((function e(t){var n,r,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.current){e.next=12;break}return n=f.current.input.value,r=new ce({role:"user",content:t||n}),u((function(e){return Re(Re({},e),{},{messages:[].concat(De(e.messages),[r]),isLoading:!0})})),console.log("OPENAI_KEY_FOR_GS",d),e.next=7,Ye([].concat(De(s),[r]),d,y.signal);case 7:if(o=e.sent){e.next=11;break}return u((function(e){return Re(Re({},e),{},{isLoading:!1})})),e.abrupt("return",!1);case 11:u((function(e){return Re(Re({},e),{},{messages:[].concat(De(e.messages),[new ce({role:o.message.role,content:o.message.content,status:"success"})]),isLoading:!1})}));case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ae(a,r,o,i,c,"next",e)}function c(e){Ae(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),I=function(e){v((function(t){t.autoRun=!0,t.globalScript=e}))};h.Utils.getSearchParams("tab");return r.createElement(P.Z,{vertical:!0,style:{height:"100%",overflow:"hidden",padding:"0px 12px"},justify:"space-between"},r.createElement("div",{style:{overflowY:"scroll",position:"relative"}},r.createElement(l.Z.Title,{level:5,style:{margin:"0px",flexBasis:"30px",padding:"12px 0px"}},"Copilot"),r.createElement(Le,{onChange:function(e){u((function(t){return Re(Re({},t),{},{OPENAI_KEY_FOR_GS:e})}))},style:{position:"absolute",right:"0px",top:"8px"}}),r.createElement("div",null,s.filter((function(e){return"system"!==e.role})).map((function(e){return r.createElement(Se,_e({key:e.timestamp},e,{onQuery:I}))})),p&&r.createElement(le.Z,{style:{padding:"0px 6px"}}))),r.createElement("div",null,b.map((function(e,t){return r.createElement("div",{key:t,style:{cursor:"pointer",background:m.colorBgLayout,padding:"4px",borderRadius:"6px",margin:"6px 0px"}},r.createElement(fe.Z,{style:{fontSize:"12px",marginRight:"4px"}}),r.createElement(l.Z.Text,{key:t,onClick:function(){w(e)},style:{fontSize:"12px"}},e))})),r.createElement(pe.Z,null,r.createElement(de.Z,{ref:f}),r.createElement(T.ZP,{onClick:function(){return w()},icon:r.createElement(he.Z,null)}),r.createElement(T.ZP,{onClick:function(){u((function(e){return Re(Re({},e),{},{messages:De(se(x,o,t))})}))},icon:r.createElement(me.Z,null)}))))},ze=[{name:"deepseek-chat",endpoint:"https://api.deepseek.com/chat/completions"},{name:"gpt-3.5-turbo",endpoint:"https://api.openai.com/v1/chat/completions"},{name:"qwen-plus",endpoint:"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions"}];function Ye(e,t,n,r){var o=ze.find((function(e){return e.name===r}))||ze[2],a=o.endpoint,i=o.name;return fetch(a,{signal:n,method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:i,messages:e.map((function(e){return{role:e.role,content:e.content}}))})}).then((function(e){return e.json()})).then((function(e){return{status:"success",message:e.choices[0].message}})).catch((function(e){return"AbortError"===e.name?{status:"cancel",message:null}:{status:"failed",message:e.message}}))}var Ve=n(97585),He=n(33052),Qe=n(16835);function We(e){return function(e){if(Array.isArray(e))return Je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ke=l.Z.Title,$e=o.Z.useToken,Xe={title:{marginTop:"12px",fontSize:"14px",fontWeight:400}},et=function(e){var t=e.schemaData,n=e.schemaId,o=$e().token,a=(0,i.qp)(),c=a.updateStore,u=a.store.language,s=(0,He.h)(t),l=(0,Qe.getStyleConfig)(t,n),d=t.nodes,f=t.edges,h=function(e){var t=new Set;return e.nodes.reduce((function(e,t){return e.concat(t.properties||[])}),[]).forEach((function(e){return Object.keys(e).forEach((function(e){return t.add(e)}))})),e.edges.reduce((function(e,t){return e.concat(t.properties||[])}),[]).forEach((function(e){return Object.keys(e).forEach((function(e){return t.add(e)}))})),We(t.values())}(s),m=function(e,t){var n="";"cypher"===u&&("nodes"===t&&(n="MATCH (n:".concat(e,") RETURN n LIMIT 25")),"edges"===t&&(n="MATCH (a)-[b:".concat(e,"]->(c) RETURN a,b,c LIMIT 25;")),"property"===t&&(n="MATCH(a) where a.".concat(e," IS NOT NULL AND a.").concat(e,' <> ""\n      WITH a.').concat(e," as ").concat(e,"\n      RETURN ").concat(e," , COUNT(").concat(e,") as ").concat(e,"_COUNT\n      ORDER BY ").concat(e,"_COUNT DESC\n      "))),"gremlin"===u&&("nodes"===t&&(n="g.V().hasLabel('".concat(e,"').limit(25)")),"edges"===t&&(n="g.V().outE('".concat(e,"').limit(25)")),"property"===t&&(n="g.V().has('".concat(e,"').groupCount().by('").concat(e,"').order().by(select(values), desc)"))),c((function(e){e.globalScript=n,e.autoRun=!0}))};return r.createElement(K,{title:"Recommended"},r.createElement("div",{style:{padding:"0px 12px"}},r.createElement(Ke,{level:5,style:Xe.title},r.createElement(p.Z,{id:"Vertex Labels"})),d.map((function(e){var t,n=e.label,o=(null!==(t=l.nodeStyle[n])&&void 0!==t?t:{color:"#000"}).color;return r.createElement(Ve.Z,{key:n,style:{borderRadius:"8px",backgroundColor:o,cursor:"pointer",margin:"4px"},bordered:!1,onClick:function(){m(n,"nodes")}},n)})),r.createElement(Ke,{level:5,style:Xe.title},r.createElement(p.Z,{id:"Edge Labels"})),f.map((function(e){var t=e.label;return r.createElement(Ve.Z,{key:t,style:{borderRadius:"8px",cursor:"pointer",margin:"4px",color:o.colorText},bordered:!1,onClick:function(){m(t,"edges")}},t)})),r.createElement(Ke,{style:Xe.title},r.createElement(p.Z,{id:"Property Keys"})),h.map((function(e){return r.createElement(Ve.Z,{key:e,style:{borderRadius:"8px",cursor:"pointer",margin:"4px",color:o.colorText},bordered:!1,onClick:function(){m(e,"property")}},e)}))))};function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function nt(){nt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:k(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==n&&r.call(w,i)&&(b=w);var I=g.prototype=y.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==tt(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,n,r){var o=d;return function(a,i){if(o===f)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=j(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var s=p(t,n,r);if("normal"===s.type){if(o=r.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(tt(t)+" is not iterable")}return v.prototype=g,o(I,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},E(S.prototype),s(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(I),s(I,u,"Generator"),s(I,i,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function rt(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}var ot=function(e){var t=e.deleteStatements,n=(0,i.qp)(),o=n.store,a=n.updateStore,c=o.storeProcedures.map((function(e){return e})),u=function(){var e,n=(e=nt().mark((function e(n){return nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n),a((function(e){e.storeProcedures=e.savedStatements.filter((function(e){return-1===n.indexOf(e.id)}))}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){rt(a,r,o,i,c,"next",e)}function c(e){rt(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}();return r.createElement(K,{title:"Stored Procedures"},r.createElement(W,{items:c,onClick:function(e){e.id;var t=e.script;e.name;a((function(e){e.globalScript=t,e.autoRun=!0}))},onDelete:u,placeholder:r.createElement(r.Fragment,null,r.createElement(p.Z,{id:"No stored procedures available. {br} Go to the <a>Extension</a> and create one now!",values:{a:function(e){return r.createElement(l.Z.Link,{style:{fontSize:"12px"},href:"/extension/create",target:"_blank"},e)},br:r.createElement("br",null)}}))}))};function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function it(){it=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:k(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==n&&r.call(w,i)&&(b=w);var I=g.prototype=y.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==at(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,n,r){var o=d;return function(a,i){if(o===f)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=j(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var s=p(t,n,r);if("normal"===s.type){if(o=r.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(at(t)+" is not iterable")}return v.prototype=g,o(I,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},E(S.prototype),s(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(I),s(I,u,"Generator"),s(I,i,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function ct(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}var ut=function(e){var t=e.deleteHistoryStatements,n=(0,i.qp)(),o=n.store,a=n.updateStore,c=o.historyStatements,u=function(){var e,n=(e=it().mark((function e(n){return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n),a((function(e){e.historyStatements=e.historyStatements.filter((function(e){return-1===n.indexOf(e.id)}))}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ct(a,r,o,i,c,"next",e)}function c(e){ct(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),s=c.map((function(e){return e}));return r.createElement(K,{title:"History"},r.createElement(W,{items:s,onClick:function(e){e.id;var t=e.script;a((function(e){e.globalScript=t,e.autoRun=!1}))},onDelete:u,placeholder:r.createElement(p.Z,{id:"No query history available"})}))},st=function(e){var t=e.items;return"Segmented"===e.type?r.createElement(h.SegmentedTabs,{items:t,block:!0,rootStyle:{padding:"8px 8px 8px 4px"}}):r.createElement(h.SideTabs,{items:t,width:320})},lt=(0,r.memo)(st),pt=n(62950),dt=n(84158),ft=n(37339),ht=n(91104),mt=n(33741),yt={"en-US":{Recommended:"Recommended",History:"History",Copilot:"Copilot",Saved:"Saved","Stored Procedures":"Stored Procedures","You can write cypher or gremlin queries, and then click the {icon} button to query data":"You can write cypher or gremlin queries, and then click the {icon} button to query data","Vertex Labels":"Vertex Labels","Edge Labels":"Edge Labels","Property Keys":"Property Keys","No saved query statements {br} You can click {icon} to save.":"No saved query statements {br} You can click {icon} to save.","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"No stored procedures available. {br} Go to the <a>Extension</a> and create one now!","Privacy Security Notice":"Privacy Security Notice",Setting:"Setting","query.app.sidebar.gpt.setting.security":"To improve the quality of generated Cypher query statements, we'll utilize your graph data schema as the prompt for ChatGPT. Your data will be kept strictly confidential and solely used for this purpose.Furthermore, please note that your OpenAI API key is only stored locally in your browser for added security","OpenAI API key is only stored locally in your browser":"OpenAI API key is only stored locally in your browser","query.copilot.welcome":"Hello! I'm the GraphScope Query Assistant. Feel free to ask me any questions about Cypher or Gremlin queries.","recommend 5 interesting query statements":"recommend 5 interesting query statements","query any subgraph":"query any subgraph","insight the statistical distribution of vertex labels in the graph":"insight the statistical distribution of vertex labels in the graph",Save:"Save",Delete:"Delete",Query:"Query",Share:"Share","query submmited on {submitTime}. It's running ... ":"query submmited on {submitTime}. It's running ... ","query submmited on {submitTime}. Running {runningTime} ms":"query submmited on {submitTime}. Running {runningTime} ms","A total of {totalCount} records were retrieved":"A total of {totalCount} records were retrieved","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.",Color:"Color",Size:"Size",Caption:"Caption",LineWidth:"LineWidth","Node properties":"Node properties",Graph:"Graph",Table:"Table",Raw:"Raw","Style Setting":"Style Setting","You can click on each label to set the color, size, and display text for vertices and edges.":"You can click on each label to set the color, size, and display text for vertices and edges.","Export graph json":"Export graph json","Clustering layout":"Clustering layout","Vertex Properties":"Vertex Properties","Connect Endpoint":"Connect Endpoint","Connection URL":"Connection URL","Query language":"Query language","Query initiation method":"Query initiation method",Username:"Username",Password:"Password",Connect:"Connect",Close:"Close","Select nodes by box selection":"Select nodes by box selection","Switch graph view dimensions":"Switch graph view dimensions","Zoom to fitview":"Zoom to fitview",Fullscreen:"Fullscreen","Toggle Right Side":"Toggle Right Side","Caption Status":"Caption Status"},"zh-CN":{Recommended:"推荐查询",History:"历史查询",Copilot:"智能查询",Saved:"保存查询","Stored Procedures":"存储过程","You can write cypher or gremlin queries, and then click the {icon} button to query data":"您可以在这里编写 cypher 或 gremlin 语句，点击 {icon} 按钮查询数据","Vertex Labels":"节点类型","Edge Labels":"边类型","Property Keys":"属性字段","No saved query statements {br} You can click {icon} to save.":"暂无保存的查询语句 {br} 您可以点击 {icon} 保存","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"暂无存储过程 {br} 快去 <a>插件市场</a> 创建一个吧","Privacy Security Notice":"隐私安全说明",Setting:"设置","query.app.sidebar.gpt.setting.security":"为了提高生成Cypher查询语句的质量，我们将使用您的图数据模式作为ChatGPT的提示。您的数据将被严格保密，仅用于此目的。此外，请注意我们的OpenAI API密钥仅存在于您的浏览器本地，以增加安全性。","OpenAI API key is only stored locally in your browser":"OpenAI API key 仅保存在您浏览器本地","query.copilot.welcome":"您好！我是 GraphScope 查询助理，您有任何关于 Cypher 或者 Gremlin 查询的问题都可以随时问我","recommend 5 interesting query statements":"帮我推荐5个有意思的查询","query any subgraph":"查询任意一个子图","insight the statistical distribution of vertex labels in the graph":"帮我分析图中节点类型的分布情况",Save:"保存",Delete:"删除",Query:"查询",Share:"分享","query submmited on {submitTime}. It's running ... ":"查询提交于 {submitTime}. 正在运行中...","query submmited on {submitTime}. Running {runningTime} ms":"查询提交于 {submitTime}. 查询时长 {runningTime} ms","A total of {totalCount} records were retrieved":"一共检索到 {totalCount} 条记录","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"一共检索到 {totalCount} 条记录, 其中包含 {nodeCount} 个节点，{edgeCount} 条边",Color:"颜色",Size:"大小",Caption:"文本",LineWidth:"边宽","Node properties":"属性详情",Graph:"图展示",Table:"表格展示",Raw:"原始数据","Style Setting":"样式设置","You can click on each label to set the color, size, and display text for vertices and edges.":"您可以单击每个标签来设置顶点和边缘的颜色、大小和显示文本。","Export graph json":"导出 json","Clustering layout":"集群布局","Vertex Properties":"节点属性","Connect Endpoint":"连接查询服务","Connection URL":"连接 URL","Query language":"查询语言","Query initiation method":"查询发起方式",Username:"用户名",Password:"密码",Connect:"连接",Close:"关闭","Select nodes by box selection":"通过框选选择节点","Switch graph view dimensions":"切换图表视图维度","Zoom to fitview":"缩放适当视图",Fullscreen:"全屏","Toggle Right Side":"切换右侧","Caption Status":"是否展示标签"}};function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gt.apply(this,arguments)}function bt(){bt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:k(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==n&&r.call(w,i)&&(b=w);var I=g.prototype=y.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==vt(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,n,r){var o=d;return function(a,i){if(o===f)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=j(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var s=p(t,n,r);if("normal"===s.type){if(o=r.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(vt(t)+" is not iterable")}return v.prototype=g,o(I,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},E(S.prototype),s(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(I),s(I,u,"Generator"),s(I,i,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function xt(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}var wt=h.Utils.getSearchParams,It=function(e){var t=e.queryGraphData,n=e.handleCancelQuery,o=e.queryGraphSchema,a=e.displaySidebarPosition,c=void 0===a?"left":a,u=e.displaySidebarType,s=void 0===u?"Sidebar":u,l=(e.enableAbsolutePosition,e.queryStatements),d=e.deleteStatements,f=e.createStatements,m=e.enableImmediateQuery,y=e.connectComponent,v=e.sidebarCollapsed,g=e.sidebarStyle,b=e.welcome,x=(0,i.qp)(),w=x.store,I=x.updateStore,E=w.graphId,k=w.isReady,j=w.schemaData,O=[{key:"recommended",title:r.createElement(p.Z,{id:"Recommended"}),icon:r.createElement(ft.G,{icon:ht.X8G}),children:r.createElement(et,{schemaData:j,schemaId:E})},{key:"saved",title:r.createElement(p.Z,{id:"Saved"}),icon:r.createElement(ft.G,{icon:ht.xVw}),children:r.createElement(te,{deleteStatements:function(e){return d("saved",e)}})},{key:"history",title:r.createElement(p.Z,{id:"History"}),icon:r.createElement(ft.G,{icon:ht.uF7}),children:r.createElement(ut,{deleteHistoryStatements:function(e){return d("history",e)}})},{key:"store-procedure",title:r.createElement(p.Z,{id:"Stored Procedures"}),icon:r.createElement(ft.G,{icon:ht.xf3}),children:r.createElement(ot,{deleteStatements:function(e){return d("store-procedure",e)}})},{key:"copilot",title:r.createElement(p.Z,{id:"Copilot"}),icon:r.createElement(ft.G,{icon:ht.VE0}),children:r.createElement(Be,{schemaData:j})}];(0,r.useEffect)((function(){var t;(t=bt().mark((function t(){var n,r,a,c,u,s,p,d,f,h;return bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=wt("graph_id")||"",r=wt("language")||e.language,a=wt("global_script")||e.globalScript,c=wt("display_mode")||localStorage.getItem(i.rv.mode)||"flow",u=wt("auto_run"),s=u?"true"===u:e.autoRun,p={nodes:[],edges:[]},d=[],f=[],h=[],t.prev=10,t.next=13,o(n);case 13:return p=t.sent,t.next=16,l("history");case 16:return d=t.sent,t.next=19,l("saved");case 19:return f=t.sent,t.next=22,l("store-procedure");case 22:h=t.sent,t.next=27;break;case 25:t.prev=25,t.t0=t.catch(10);case 27:I((function(e){e.isReady=!0,e.graphId=n,e.schemaData=p,e.historyStatements=d,e.savedStatements=f,e.storeProcedures=h,e.autoRun=s,e.globalScript=(0,dt.Id)(a),e.mode=c,e.language=r,e.welcome=b}));case 28:case"end":return t.stop()}}),t,null,[[10,25]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){xt(a,r,o,i,c,"next",e)}function c(e){xt(a,r,o,i,c,"throw",e)}i(void 0)}))})()}),[]);if(k){var P="left"===c?{leftSide:r.createElement(lt,{items:O,type:s})}:{rightSide:r.createElement(lt,{items:O,type:s})};return r.createElement(h.StudioProvier,{locales:yt},r.createElement(h.Section,gt({style:{height:"calc(100vh - 50px)"}},P,{defaultCollapsed:{leftSide:v,rightSide:v},leftSideStyle:g,rightSideStyle:g,splitBorder:!0}),r.createElement(S,{displaySidebarPosition:c,connectComponent:y,handleCancelQuery:n,createStatements:f,queryGraphData:function(e){var n=e.script,r=e.language,o={id:(0,pt.Z)(),timestamp:(new Date).getTime(),script:n,language:r};return I((function(e){e.historyStatements.push(o)})),t(o)},enableImmediateQuery:m})))}return null},Et=n(613),St=n(5576),kt=n(40434),jt=n(7234);function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tt=h.Utils.storage,Lt=l.Z.Title,Ct=(l.Z.Text,function(e){var t=Ot(kt.Z.useForm(),1)[0],n=e.onConnect,o=e.onClose;r.useEffect((function(){t.setFieldsValue({query_language:e.query_language||Tt.get("query_language")||"cypher",query_endpoint:e.query_endpoint||Tt.get("query_endpoint")||"neo4j://127.0.0.1:7687",query_initiation:e.query_initiation||Tt.get("query_initiation")||"Browser",query_username:e.query_username||Tt.get("query_username")||"admin",query_password:e.query_password||Tt.get("query_password")||"password",query_initiation_service:e.query_initiation_service||Tt.get("query_initiation_service")||""})}),[]);var a=kt.Z.useWatch("query_initiation",t);return r.createElement(P.Z,{vertical:!0,style:{padding:"12px 24px"}},r.createElement(Lt,{level:3,style:{marginBottom:"12px"}},r.createElement(p.Z,{id:"Connect Endpoint"})),r.createElement(kt.Z,{layout:"vertical",form:t},r.createElement(kt.Z.Item,{label:r.createElement(p.Z,{id:"Connection URL"}),name:"query_endpoint"},r.createElement(de.Z,null)),r.createElement(kt.Z.Item,{label:r.createElement(p.Z,{id:"Query language"}),name:"query_language"},r.createElement(jt.default,{allowClear:!0,options:[{label:"Cypher",value:"cypher"},{label:"Gremlin",value:"gremlin"}]})),r.createElement(kt.Z.Item,{label:r.createElement(p.Z,{id:"Query initiation method"}),name:"query_initiation"},r.createElement(jt.default,{allowClear:!0,options:[{label:"Browser (client-side)",value:"Browser"},{label:"Server (server-side)",value:"Server"}]})),"Server"===a&&r.createElement(kt.Z.Item,{label:r.createElement(p.Z,{id:"Query initiation service"}),name:"query_initiation_service"},r.createElement(de.Z,{allowClear:!0})),r.createElement(kt.Z.Item,{label:r.createElement(p.Z,{id:"Username"}),name:"query_username"},r.createElement(de.Z,null)),r.createElement(kt.Z.Item,{label:r.createElement(p.Z,{id:"Password"}),name:"query_password"},r.createElement(de.Z.Password,null)),r.createElement(kt.Z.Item,{style:{marginTop:"48px"}},r.createElement(P.Z,{justify:"start"},r.createElement(T.ZP,{type:"primary",htmlType:"submit",style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:function(){var e=t.getFieldsValue(!0);Object.keys(e).forEach((function(t){Tt.set(t,e[t])})),n&&n(t.getFieldsValue(!0))}},r.createElement(p.Z,{id:"Connect"})),o&&r.createElement(T.ZP,{style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:o},r.createElement(p.Z,{id:"Close"}))))))});function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){Dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dt(e,t,n){var r;return r=function(e,t){if("object"!=_t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==_t(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zt(){Zt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:k(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==n&&r.call(w,i)&&(b=w);var I=g.prototype=y.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==_t(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,n,r){var o=d;return function(a,i){if(o===f)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=j(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var s=p(t,n,r);if("normal"===s.type){if(o=r.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(_t(t)+" is not iterable")}return v.prototype=g,o(I,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},E(S.prototype),s(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(I),s(I,u,"Generator"),s(I,i,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function Gt(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function qt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Gt(a,r,o,i,c,"next",e)}function c(e){Gt(a,r,o,i,c,"throw",e)}i(void 0)}))}}var Mt={},Ut=function(){var e=qt(Zt().mark((function e(){var t,n,r,o,a=arguments;return Zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:"cypher",n=a.length>1?a[1]:void 0,r=Mt.gremlin_driver,o=Mt.cypher_driver,"cypher"!==t){e.next=6;break}return o||(Mt.cypher_driver=new St.Or(n)),e.abrupt("return",Mt.cypher_driver);case 6:if("gremlin"!==t){e.next=9;break}return r||(Mt.gremlin_driver=new St.VP(n)),e.abrupt("return",Mt.gremlin_driver);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Bt=function(e){var t=e||{},n=t.enableImmediateQuery,o=void 0!==n&&n,a=t.mode,i=void 0===a?"flow":a,c=t.id,u=void 0===c?"":c,s=t.timestamp,l=void 0===s?Date.now():s,p=t.graphId,d=void 0===p?"":p,f=t.schemaData,m=void 0===f?{nodes:[],edges:[]}:f,y=t.script,v=void 0===y?"Match (n) return n limit 10":y,g=t.onQuery,b=Ft((0,r.useState)({language:e.language||"cypher",endpoint:e.endpoint||"127.0.0.1:7687"}),2),x=b[0],w=b[1],I=x.language,E=x.endpoint,S=function(){var e=qt(Zt().mark((function e(t){var n,r;return Zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.language,e.next=3,Ut(n,E);case 3:return r=e.sent,e.abrupt("return",r.query(t.script));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=qt(Zt().mark((function e(t){var n;return Zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.language,e.next=3,Ut(n,E);case 3:e.sent.close();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return g||E&&I?r.createElement(h.StudioProvier,{locales:yt},r.createElement(Et.default,{language:I,enableImmediateQuery:o,mode:i,active:!0,id:u,timestamp:l,graphId:d,schemaData:m,script:v,onQuery:g||S,onCancel:k})):r.createElement(h.StudioProvier,{locales:yt},r.createElement(Ct,{onConnect:function(e){w((function(t){return At(At({},t),{},{endpoint:e.query_endpoint||"",language:e.query_language})}))}}))},zt=n(10422),Yt={render_query_statement:function(e){var t=(e||{}).id,n=void 0===t?"root":t;zt.render(r.createElement(Bt,e),document.getElementById(n))}},Vt=function(e){return r.createElement(mt.ZP,{store:i.C1},r.createElement(It,e))}},613:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ne}});var r=n(50959),o=n(53531),a=n(16483),i=n.n(a),c=n(63904),u=n(57526),s=n(48722),l=n(54016),p=n(17905),d=n(38943),f=n(28541),h=n(42176),m=n(51558),y=n(45334),v=n(16889),g=n(15001),b=n(37528),x=function(e){var t=e.onSave,n=(0,r.useRef)(null),o=(0,b.Z)();return r.createElement(p.Z,{title:o.formatMessage({id:"Save"})},r.createElement(y.Z,{title:"name your statement",description:r.createElement(v.Z,{width:"200px",ref:n}),onConfirm:function(){if(n.current){var e=n.current.input.value;console.log("InputRef.current",e),t&&t(e)}},onCancel:function(){},okText:"Save",cancelText:"Cancel",placement:"bottomRight"},r.createElement(d.ZP,{type:"text",icon:r.createElement(g.Z,null)})))},w=n(62950);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function E(){E=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:O(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(_([])));w&&w!==n&&r.call(w,i)&&(b=w);var S=g.prototype=y.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==I(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,n,r){var o=d;return function(a,i){if(o===f)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=P(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var s=p(t,n,r);if("normal"===s.type){if(o=r.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(I(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(j.prototype),s(j.prototype,c,(function(){return this})),t.AsyncIterator=j,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new j(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(S),s(S,u,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function S(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}var k=function(e){var t,n=e.onClose,o=e.onQuery,a=e.script,i=void 0===a?"Match (n) return n limit 10":a,y=e.onSave,v=e.id,g=e.isFetching,I=e.antdToken,k=(e.schemaData,e.timestamp,e.language),j=e.message,O=(0,r.useRef)(null),P=(0,b.Z)(),T=function(){var e,t=(e=E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null==O||null===(t=O.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),o({id:v,script:n,language:k});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){S(a,r,o,i,c,"next",e)}function c(e){S(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return r.createElement("div",{style:{}},r.createElement(u.Z,{justify:"space-between",style:{paddingBottom:"8px"}},r.createElement(s.Z,null,r.createElement(l.Z.Text,{type:"secondary",style:{fontSize:"12px",textAlign:"center"}},(t=k).charAt(0).toUpperCase()+t.slice(1)," ",j)),r.createElement(s.Z,{size:0},r.createElement(p.Z,{title:P.formatMessage({id:"Query"})},r.createElement(d.ZP,{type:"text",icon:r.createElement(f.Z,{spin:g,style:{color:g?"#52c41a":I.green}}),onClick:T})),y&&r.createElement(x,{onSave:function(e){var t,n=null==O||null===(t=O.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),r=(0,w.Z)();y&&y({id:r,script:n,name:e,language:k})}}),n&&r.createElement(p.Z,{title:P.formatMessage({id:"Share"})},r.createElement(d.ZP,{type:"text",icon:r.createElement(h.Z,{onClick:function(){var e,t=null==O||null===(e=O.current)||void 0===e||null===(e=e.codeEditor)||void 0===e?void 0:e.getValue();window.open("".concat(window.location.origin,"/querying?language=").concat(k,"&auto_run=true&global_script=").concat(encodeURIComponent(t)))}})})),n&&r.createElement(p.Z,{title:P.formatMessage({id:"Delete"})},r.createElement(d.ZP,{type:"text",icon:r.createElement(m.Z,{onClick:function(){n&&n(v)}})})))),r.createElement(c.Z,{language:k,ref:O,value:i}))},j=n(84723),O=n(35215),P=n(65586),T=n(31192),L=n(9069),C=n(57591),_=n(88766),N=n(7234),A=n(86976);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){var r;return r=function(e,t){if("object"!=q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==q(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}var M=function(e){var t=e.table,n=(0,r.useRef)(null),o=r.useState((function(){var e=function(e){var t=e[0],n={},r=[];Object.keys(t).forEach((function(e){var o=q(t[e]);n[e]={key:e,type:o,enums:new Set},"number"===o&&r.push(e)})),e.forEach((function(e){Object.keys(e).forEach((function(t){n[t].enums.add(e[t])}))}));var o=Object.values(n).filter((function(e){return"string"===e.type})).sort((function(e,t){return e.enums.size<t.enums.size})).map((function(e){return e.key})),a=r[0],i=r[1],c=Z(o,2),u=c[0],s=c[1];return{type:r.length>1?"point":"interval",x:i||u,y:a,color:s,keys:Object.keys(n)}}(t);return{x:e.x,y:e.y,color:e.color,type:e.type,options:e.keys.map((function(e){return{label:e,value:e}}))}})),a=Z(o,2),i=a[0],c=a[1];console.log(i);var u=i.type,l=i.x,p=i.y,d=i.color,f=i.options;(0,r.useEffect)((function(){var e;return n.current&&((e=new A.kL({container:n.current,autoFit:!0})).options({type:u,data:t,encode:{x:l,y:p,color:d},transform:[{type:"dodgeX"}]}),e.render()),function(){n.current&&e.destroy()}}),[u,l,p,t,d,n]);return r.createElement("div",{style:{padding:"16px",overflowX:"hidden"}},r.createElement(s.Z,{style:{paddingBottom:"16px"}},"Type:",r.createElement(N.default,{size:"small",defaultValue:u,style:{width:120},onChange:function(e){c((function(t){return F(F({},t),{},{type:e})}))},options:[{label:"interval",value:"interval"},{label:"point",value:"point"}]}),"X:",r.createElement(N.default,{size:"small",defaultValue:l,style:{width:120},onChange:function(e){c((function(t){return F(F({},t),{},{x:e})}))},options:f}),"Y:",r.createElement(N.default,{size:"small",defaultValue:p,style:{width:120},onChange:function(e){c((function(t){return F(F({},t),{},{y:e})}))},options:f}),"Color:",r.createElement(N.default,{size:"small",defaultValue:d,style:{width:120},onChange:function(e){c((function(t){return F(F({},t),{},{color:e})}))},options:f})),r.createElement("div",{ref:n,style:{width:"100%"}}))},U=n(2268),B=n(35731),z=n(36523);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Q=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"12px",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-8px";return r.createElement(r.Fragment,null,Object.entries(t).map((function(t){var a=V(t,2),i=a[0],c=a[1];return r.createElement("div",{style:{paddingLeft:"16px",overflowWrap:"break-word",wordBreak:"break-all",whiteSpace:"pre-wrap"},key:i},r.createElement("span",{style:{color:"#F9822F",paddingLeft:n}},'"',i,'" :'),r.createElement("span",{style:{paddingLeft:"6px",textIndent:o}},"object"===Y(c)&&null!==c?r.createElement(r.Fragment,null,"{",e(c,"24px","16px"),"}"):JSON.stringify(c,null,2)))})))},W=function(e){var t=e.expandData,n=e.width;return r.createElement(u.Z,null,Object.values(t).map((function(e){return e.key&&r.createElement("div",{style:{marginLeft:"12px",width:"".concat(n,"%")},key:e.key},"{",Q(e.data),"}")})))};function J(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=e.data,n=t.map((function(e){var t=e.keys,n=e._fields;return t.reduce((function(e,t,r){var o=n[r];return e[t]={key:(0,w.Z)(),elementId:o.elementId,data:o,labels:o.labels?o.labels[0]:void 0,type:o.type,startNodeElementId:o.startNodeElementId,endNodeElementId:o.endNodeElementId},e.key=(0,w.Z)(),e}),{})})),o=t[0].keys,a=100/o.length,i=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,n){return n+1}}].concat(J(o.map((function(e){return{title:e,width:"".concat(a,"%"),key:(0,w.Z)(),render:function(t){return n=t[e],o=n.startNodeElementId,a=n.endNodeElementId,i=n.type,c=n.elementId,u=n.labels,o&&a?r.createElement("span",null,"{",r.createElement(U.Icons.Arrow,{style:{color:"#F97108"}})," : ",i," } ID ",c):r.createElement("span",null,"{",r.createElement(U.Icons.Punctuation,{style:{color:"#B668B0"}})," : ",u," } ID ",c);var n,o,a,i,c,u}}}))),[O.Z.EXPAND_COLUMN]);return r.createElement(O.Z,{size:"small",columns:i,dataSource:n,expandable:{expandedRowRender:function(e){return r.createElement(W,{expandData:e,width:a})},expandIcon:function(e){var t=e.expanded,n=e.onExpand,o=e.record;return t?r.createElement(B.Z,{style:{color:"#F97108"},onClick:function(e){return n(o,e)}}):r.createElement(z.Z,{onClick:function(e){return n(o,e)}})},expandRowByClick:!0}})};function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t,n){var r;return r=function(e,t){if("object"!=X(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==X(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){if(e){if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ce=function(e){var t=e.data,n=t[0],o="number"==typeof n?["value"]:Object.keys(n),a=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,n){return n+1}}].concat(oe(o.map((function(e){return{title:e,dataIndex:e,width:"".concat(100/o.length,"%"),key:e}})))),i=t.map((function(e,t){return"number"==typeof e?{value:e}:ne(ne({},e),{},{key:t})}));return r.createElement(O.Z,{size:"small",columns:a,dataSource:i})},ue=function(e){var t=e.nodes,n=e.edges,o={},a=t.map((function(e){var t=e.id,n=e.label,r=e.properties;return o[t]=n,{key:t,id:t,label:n,properties:JSON.stringify(ne({},r),null,2)}})),i=n.map((function(e){var t=e.id,n=e.label,r=e.properties,a=e.source,i=e.target;return{key:t,id:t,label:"(".concat(o[a],")-[:").concat(n,"]-(").concat(o[i],")"),properties:JSON.stringify(r,null,2)}}));var c=[].concat(oe(a),oe(i)).map((function(e){var t=e.id,n=e.label,r=e.properties;return ne({id:t,label:n},r&&JSON.parse(r))})),u=c[0],s=Object.keys(u).map((function(e){return{title:e,dataIndex:e,key:e,width:180,render:function(e){return String(e).length>30?r.createElement(P.Z,{content:r.createElement("div",{style:{width:"500px",wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap"}},e)},function(e,t){if(e.length>t)return e.substring(0,t)+"..."}(String(e),30)):r.createElement(r.Fragment,null,e)}}}));return r.createElement(O.Z,{columns:s,dataSource:c,scroll:{x:"max-content"},pagination:{simple:!0,pageSize:10,size:"small"}})},se=function(e){var t,n=e.data,o=n.table,a=void 0===o?[]:o,i=n.nodes,c=void 0===i?[]:i,f=n.edges,h=void 0===f?[]:f,m=n.raw,y=c.length,v=h.length,g=a.length,x=(0,b.Z)();t=0===y&&0===v&&0!==g?x.formatMessage({id:"A total of {totalCount} records were retrieved"},{totalCount:g}):x.formatMessage({id:"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges."},{totalCount:y+v,nodeCount:y,edgeCount:v});var w,I=ee((0,r.useState)("table"),2),E=I[0],S=I[1];return"table"===E&&(0!==c.length&&(w=r.createElement(ue,{nodes:c,edges:h})),0!==a.length&&(w=r.createElement(ce,{data:a})),0===a.length&&"interactive"===window.GS_ENGINE_TYPE&&0!==m.records.length&&(w=r.createElement($,{data:m.records}))),r.createElement("div",{style:{overflowX:"scroll"}},r.createElement(u.Z,{justify:"space-between",style:{padding:"0px 10px 10px 10px"},align:"center"},r.createElement(l.Z.Text,null,t),r.createElement(s.Z,null,r.createElement(T.Z,{value:E,onChange:function(e){S(e)},options:[{value:"chart",icon:r.createElement(L.Z,null),label:"chart"},{value:"table",icon:r.createElement(C.Z,null)}]}),r.createElement(p.Z,{title:"download"},r.createElement(d.ZP,{icon:r.createElement(_.Z,null),type:"text",onClick:function(){var e=c.map((function(e){var t=e.id,n=e.label,r=e.properties;return ne({id:t,label:n},void 0===r?{}:r)})),t=h.map((function(e){var t=e.id,n=e.label,r=e.source,o=e.target,a=e.properties;return ne({id:t,label:n,source:r,target:o},void 0===a?{}:a)}));U.Utils.createDownload(JSON.stringify({nodes:e,edges:t},null,2),"result.json")}})))),w,"chart"===E&&0!==a.length&&r.createElement(M,{table:a}))},le=n(55874),pe=n(29643),de=n(24174),fe=n.n(de),he=function(e){var t=e.data;return e.isFetching?r.createElement(le.ZP,{icon:r.createElement(pe.Z,{spin:!0}),status:"success",title:"Running"}):"error"===t.mode?r.createElement(le.ZP,{status:"error",title:t.raw&&t.raw.name,subTitle:t.raw&&t.raw.message}):r.createElement("div",null,r.createElement(fe(),{src:t.raw}))},me=n(33052),ye=n(13049),ve=n(31931);function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xe=function(e){var t=e.data,n=e.isFetching,o=e.schemaData,a=e.graphId,i=(e.onQuery,ge(r.useState(null),2)),c=i[0],u=i[1],s=(0,b.Z)(),l=function(e,t,n){var r=e.nodes,o=void 0===r?[]:r,a=e.edges,i=void 0===a?[]:a,c=e.table,u=void 0===c?[]:c,s=(e.raw,o.length>0),l=i.length>0,p=u.length>0,d="raw",f=["raw"];return s&&(d="graph",f=["raw","table","graph"]),!s&&l&&(d="table",f=["raw","table"]),s||l||!p||(d="table",f=["raw","table"]),n&&(d=n),t&&(f=["raw"],d="raw"),{viewMode:d,options:f}}(t,n,c),p=l.viewMode,d=l.options,f=function(e){return-1!==d.indexOf(e)},h=[{label:s.formatMessage({id:"Graph"}),key:"graph",icon:r.createElement(ye.Z,null),children:r.createElement(me.Z,{data:t,schemaData:o,graphId:a}),disabled:!f("graph")},{label:s.formatMessage({id:"Table"}),key:"table",icon:r.createElement(C.Z,null),children:r.createElement(se,{data:t}),disabled:!f("table")},{label:s.formatMessage({id:"Raw"}),key:"raw",icon:r.createElement(ve.Z,null),children:r.createElement(he,{data:t,isFetching:n}),disabled:!f("raw")}];return r.createElement("div",{style:{padding:"16px 0px"}},r.createElement(j.Z,{items:h,size:"small",type:"card",activeKey:p,onChange:function(e){u(e)}}))},we=(0,r.memo)(xe);function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Ee(){Ee=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:k(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==n&&r.call(w,i)&&(b=w);var I=g.prototype=y.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ie(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,n,r){var o=d;return function(a,i){if(o===f)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=j(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var s=p(t,n,r);if("normal"===s.type){if(o=r.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ie(t)+" is not iterable")}return v.prototype=g,o(I,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},E(S.prototype),s(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(I),s(I,u,"Generator"),s(I,i,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e,t,n){var r;return r=function(e,t){if("object"!=Ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ie(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Le=U.Utils.debounce,Ce=o.Z.useToken,_e=function(e){var t=e.onQuery,n=e.onClose,o=e.onCancel,a=e.onSave,c=e.script,u=e.id,s=e.active,l=e.mode,p=e.schemaData,d=e.enableImmediateQuery,f=e.graphId,h=e.timestamp,m=e.language,y=Ce().token,v=(0,b.Z)(),g=s&&"flow"===l?{border:"1px solid ".concat(y.colorBorder)}:{border:"1px solid  ".concat(y.colorBorder)},x=(0,r.useRef)(null),w=Pe((0,r.useState)({data:{},isFetching:!1,startTime:0,endTime:0,abort:!1}),2),I=w[0],E=w[1],S=I.data,j=I.isFetching,O=I.startTime,P=I.endTime;(0,r.useEffect)((function(){x.current&&s&&"flow"===l&&x.current.scrollIntoView({behavior:"smooth"})}),[s]);var T=Le(function(){var e,n=(e=Ee().mark((function e(n){var r;return Ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=4;break}return o&&o(n),E((function(e){return ke(ke({},e),{},{isFetching:!1,data:{}})})),e.abrupt("return");case 4:return E((function(e){return ke(ke({},e),{},{isFetching:!0,startTime:(new Date).getTime()})})),e.next=7,t(n);case 7:r=e.sent,E((function(e){return ke(ke({},e),{},{data:r,isFetching:!1,endTime:(new Date).getTime()})}));case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Oe(a,r,o,i,c,"next",e)}function c(e){Oe(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),500);(0,r.useEffect)((function(){d&&(console.log("enableImmediateQuery script",d,c,m),T({id:u,script:c,language:m}))}),[d]);var L=P-O<0?v.formatMessage({id:"query submmited on {submitTime}. It's running ... "},{submitTime:i()(O).format("HH:mm:ss YYYY-MM-DD")}):v.formatMessage({id:"query submmited on {submitTime}. Running {runningTime} ms"},{submitTime:i()(O).format("HH:mm:ss YYYY-MM-DD"),runningTime:P-O});return r.createElement("div",{ref:x,style:ke(ke({display:"flex",flexDirection:"column",flex:1,margin:"12px",padding:"8px 16px",borderRadius:"8px"},g),{},{background:y.colorBgContainer})},r.createElement(k,{message:L,language:m,timestamp:h,schemaData:p,id:u,script:c,onClose:n,onQuery:T,onSave:a,isFetching:j,antdToken:y}),r.createElement(we,{data:S,isFetching:j,schemaData:p,graphId:f,onQuery:t}))},Ne=(0,r.memo)(_e)},33052:function(e,t,n){n.d(t,{Z:function(){return z},h:function(){return B}});var r=n(50959),o=n(17905),a=n(38943),i=n(53531),c=n(84155),u=n(2268),s=n(16835),l=n(24279),p=n(63806),d=n(5576);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(){h=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:O(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",m="executing",y="completed",v={};function g(){}function b(){}function x(){}var w={};s(w,i,(function(){return this}));var I=Object.getPrototypeOf,E=I&&I(I(_([])));E&&E!==n&&r.call(E,i)&&(w=E);var S=x.prototype=g.prototype=Object.create(w);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==f(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,n,r){var o=d;return function(a,i){if(o===m)throw new Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=P(c,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var s=p(t,n,r);if("normal"===s.type){if(o=r.done?y:"suspendedYield",s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=y,r.method="throw",r.arg=s.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(f(t)+" is not iterable")}return b.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=s(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,s(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(j.prototype),s(j.prototype,c,(function(){return this})),t.AsyncIterator=j,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new j(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(S),s(S,u,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function m(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}var y=u.Utils.storage,v=function(){var e,t=(e=h().mark((function e(t){var n,r,o,a,i,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.get("query_language")||"cypher",r=y.get("query_endpoint")||"",o=y.get("query_initiation"),a=y.get("query_username"),i=y.get("query_password"),c=y.get("query_initiation_service"),e.prev=6,u={script:t,language:n,endpoint:r,username:a,password:i},"Server"!==o||!c){e.next=12;break}return e.next=11,fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){return e.success?e.data:{nodes:[],edges:[]}}));case 11:return e.abrupt("return",e.sent);case 12:return e.abrupt("return",(0,d.aq)(u));case 15:return e.prev=15,e.t0=e.catch(6),e.abrupt("return",{nodes:[],edges:[]});case 18:case"end":return e.stop()}}),e,null,[[6,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,c,"next",e)}function c(e){m(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(){b=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:O(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="executing",h="completed",m={};function y(){}function v(){}function x(){}var w={};s(w,i,(function(){return this}));var I=Object.getPrototypeOf,E=I&&I(I(_([])));E&&E!==n&&r.call(E,i)&&(w=E);var S=x.prototype=y.prototype=Object.create(w);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==g(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,n,r){var o=d;return function(a,i){if(o===f)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=P(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var s=p(t,n,r);if("normal"===s.type){if(o=r.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(g(t)+" is not iterable")}return v.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:v,configurable:!0}),v.displayName=s(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,s(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(j.prototype),s(j.prototype,c,(function(){return this})),t.AsyncIterator=j,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new j(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(S),s(S,u,"Generator"),s(S,i,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function x(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){x(a,r,o,i,c,"next",e)}function c(e){x(a,r,o,i,c,"throw",e)}i(void 0)}))}}var I=function(){var e=w(b().mark((function e(t){var n,r,o,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,r=t.selectIds,o="\n    MATCH ".concat(n,"\n    WHERE  elementId(a) IN [").concat(r,"] \n    RETURN a,b,c\n    "),e.next=4,v(o);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=w(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.schema,r={all:[{key:"(a)-[b]-(c)",label:"One-Hop Neighbors"}]},n.nodes.forEach((function(e){r[e.label]=S(n,e.label)})),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function S(e,t){var n=[];return e.edges.forEach((function(e){var r=e.source,o=e.target,a=e.label;if((t===r||t===o)&&r===o)return"both",void n.push({key:"(a:".concat(r,")-[b:").concat(a,"]-(c:").concat(o,")"),label:"[".concat(a,"]-(").concat(o,")")});r===t&&("out",n.push({key:"(a:".concat(r,")-[b:").concat(a,"]->(c:").concat(o,")"),label:"[".concat(a,"]->(").concat(o,")")})),o===t&&("in",n.push({key:"(a:".concat(r,")<-[b:").concat(a,"]-(c:").concat(o,")"),label:"[".concat(a,"]<-(").concat(o,")")}))})),[{key:"(a)-[b]-(c)",label:"One-Hop Neighbors"}].concat(n)}var k={queryNeighborData:I,queryNeighborItems:E,queryStatement:v};function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function O(){O=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:k(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,i,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(_([])));w&&w!==n&&r.call(w,i)&&(b=w);var I=g.prototype=y.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==j(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,n,r){var o=d;return function(a,i){if(o===f)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=P(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var s=p(t,n,r);if("normal"===s.type){if(o=r.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(j(t)+" is not iterable")}return v.prototype=g,o(I,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},E(S.prototype),s(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new S(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(I),s(I,u,"Generator"),s(I,i,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function P(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){P(a,r,o,i,c,"next",e)}function c(e){P(a,r,o,i,c,"throw",e)}i(void 0)}))}}var L=function(){var e=T(O().mark((function e(t){var n,r,o,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.selectIds,r=n.join(","),o="g.V().hasId(".concat(r,").both().dedup()"),e.next=5,v(o);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=T(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{all:[{key:"(a)-[b]-(c)",label:"One-Hop Neighbors"}]});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_={queryStatement:v,queryNeighborData:L,queryNeighborItems:C},N=function(){var e=(0,u.useSection)().toggleLeftSide;return r.createElement(o.Z,{title:r.createElement(c.Z,{id:"Style settings"}),placement:"left"},r.createElement(a.ZP,{icon:r.createElement(p.Z,null),onClick:function(){return e()},type:"text"}))};(0,s.registerIcons)();var A=function(e){var t=e.data,n=e.schema,o=e.graphId,a=e.id,c=(0,r.useRef)(null),p="gremlin"===u.Utils.storage.get("query_language")?_:k,d=i.Z.useToken().token;return r.createElement("div",{style:{borderRadius:"8px",height:"500px",background:d.colorBgContainer},ref:c},r.createElement(s.GraphProvider,{id:a,services:p},r.createElement(u.Section,{splitBorder:!0,leftSide:r.createElement(s.StyleSetting,null),autoResize:!1,rightSideStyle:{width:"300px",padding:"12px 0px 12px 18px"},defaultCollapsed:{leftSide:!0,rightSide:!0}},r.createElement(s.Prepare,{data:t,schema:n,graphId:o}),r.createElement(s.Canvas,null),r.createElement(s.ZoomStatus,{style:{position:"absolute",bottom:0,left:0,zIndex:998,padding:"12px"}}),r.createElement(s.BasicInteraction,null),r.createElement(s.ClearStatus,null),r.createElement(s.PropertiesPanel,null),r.createElement(s.Loading,null),r.createElement(s.ContextMenu,null,r.createElement(s.NeighborQuery,null),r.createElement(s.DeleteLeafNodes,null),r.createElement(s.DeleteNode,null)),r.createElement(s.Toolbar,{style:{position:"absolute",top:"20px",left:"20px",right:"unset"}},r.createElement(N,null),r.createElement(l.Z,{style:{margin:"0px"}}),r.createElement(u.FullScreen,{containerRef:c}),r.createElement(s.ZoomFit,null),r.createElement(s.Brush,null),r.createElement(s.FixedMode,null),r.createElement(l.Z,{style:{margin:"0px"}}),r.createElement(s.SwitchEngine,null),r.createElement(s.RunCluster,null),r.createElement(s.Export,null)))))};function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}var F=["properties","constraints"];function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t,n){var r;return r=function(e,t){if("object"!=D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==D(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function B(e){return{nodes:e.nodes,edges:e.edges.map((function(e){var t=e.properties,n=e.constraints,r=U(e,F),o=q(n[0],2),a=o[0],i=o[1];return Z(Z({},r),{},{source:a,target:i,properties:t})}))}}var z=function(e){var t=e.data,n=e.schemaData,o=e.graphId,a=B(n);return r.createElement("div",{style:{width:"100%"}},r.createElement(A,{data:u.Utils.fakeSnapshot(t),schema:a,graphId:o}))}},43282:function(e,t,n){n.r(t),n.d(t,{demos:function(){return r}});n(50959),n(85430);var r={}},78624:function(e,t,n){n.r(t),n.d(t,{demos:function(){return u}});var r=n(90228),o=n.n(r),a=n(87999),i=n.n(a),c=n(50959),u=(n(8646),{"packages-studio-components-readme-demo-0":{component:c.memo(c.lazy(i()(o()().mark((function e(){var t,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(3238).then(n.bind(n,14730));case 2:return t=e.sent,r=t.default,e.abrupt("return",{default:function(){return c.createElement(r,null)}});case 5:case"end":return e.stop()}}),e)}))))),asset:null,context:void 0,renderOpts:void 0}})},31482:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return m}});var o,a=n(90228),i=n.n(a),c=n(26068),u=n.n(c),s=n(48305),l=n.n(s),p=n(87999),d=n.n(p),f=n(50959),h=(n(4480),n(2268)),m={"editabletext-demo-0":{component:f.memo(f.lazy(d()(i()().mark((function e(){var t,r,o,a,c;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,o=t.useState,e.next=7,Promise.resolve().then(n.bind(n,2268));case 7:return a=e.sent,c=a.EditableText,e.abrupt("return",{default:function(){var e=o({text:"double click"}),t=l()(e,2),n=t[0],a=t[1],i=n.text;return r.createElement("div",null,r.createElement(c,{text:i,onTextChange:function(e){console.log("value",e),a((function(t){return u()(u()({},t),{},{text:e})}))}}))}});case 10:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"editabletext-demo-0",refAtomIds:["EditableText"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { EditableText } from '@graphscope/studio-components';\nexport default () => {\n  const [state, updateState] = useState({\n    text: 'double click',\n  });\n  const onChange = value => {\n    console.log('value', value);\n    updateState(preState => {\n      return {\n        ...preState,\n        text: value,\n      };\n    });\n  };\n  const { text } = state;\n  return (\n    <div>\n      <EditableText text={text} onTextChange={onChange} />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:r||(r=n.t(f,2)),"@graphscope/studio-components":h},renderOpts:{compile:(o=d()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},87231:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return p}});var o,a=n(90228),i=n.n(a),c=n(87999),u=n.n(c),s=n(50959),l=(n(93238),n(2268)),p={"emptycanvas-demo-0":{component:s.memo(s.lazy(u()(i()().mark((function e(){var t,r,o,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,2268));case 7:return o=e.sent,a=o.EmptyCanvas,e.abrupt("return",{default:function(){return r.createElement("div",null,r.createElement(a,null))}});case 10:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"emptycanvas-demo-0",refAtomIds:["EmptyCanvas"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { EmptyCanvas } from '@graphscope/studio-components';\nexport default () => {\n  return (\n    <div>\n      <EmptyCanvas />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:r||(r=n.t(s,2)),"@graphscope/studio-components":l},renderOpts:{compile:(o=u()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},70432:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return p}});var o,a=n(90228),i=n.n(a),c=n(87999),u=n.n(c),s=n(50959),l=(n(48741),n(2268)),p={"fullscreen-demo-0":{component:s.memo(s.lazy(u()(i()().mark((function e(){var t,r,o,a,c;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,o=t.useRef,e.next=8,Promise.resolve().then(n.bind(n,2268));case 8:return a=e.sent,c=a.FullScreen,e.abrupt("return",{default:function(){var e=o(null);return r.createElement("div",null,r.createElement(c,{containerRef:e}),r.createElement("div",{ref:e,style:{width:"100%",height:"500px",background:"#ddd",textAlign:"center",lineHeight:"100%"}},"Trigger full screen"))}});case 11:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"fullscreen-demo-0",refAtomIds:["FullScreen"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState, useRef } from 'react';\nimport { FullScreen } from '@graphscope/studio-components';\nexport default () => {\n  const containerRef = useRef(null);\n  return (\n    <div>\n      <FullScreen containerRef={containerRef} />\n      <div\n        ref={containerRef}\n        style={{ width: '100%', height: '500px', background: '#ddd', textAlign: 'center', lineHeight: '100%' }}\n      >\n        Trigger full screen\n      </div>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:r||(r=n.t(s,2)),"@graphscope/studio-components":l},renderOpts:{compile:(o=u()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},83039:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return d}});var o,a=n(90228),i=n.n(a),c=n(87999),u=n.n(c),s=n(50959),l=(n(36666),n(99300)),p=n(2268),d={"illustration-demo-0":{component:s.memo(s.lazy(u()(i()().mark((function e(){var t,r,o,a,c,u,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,99300));case 7:return o=e.sent,o.Space,a=o.Flex,c=o.Typography,e.next=13,Promise.resolve().then(n.bind(n,2268));case 13:return u=e.sent,s=u.Illustration,e.abrupt("return",{default:function(){return r.createElement(a,{wrap:!0,gap:44},Object.keys(s).map((function(e){var t=s[e];return r.createElement(a,{key:e,gap:8,vertical:!0,align:"center"},r.createElement(t,null),r.createElement(c.Text,null,e))})))}});case 16:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"illustration-demo-0",refAtomIds:["Illustration"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space, Flex, Typography } from 'antd';\nimport { Illustration } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <Flex wrap gap={44}>\n      {Object.keys(Illustration).map(key => {\n        const Item = Illustration[key];\n        return (\n          <Flex key={key} gap={8} vertical align=\"center\">\n            <Item />\n            <Typography.Text>{key}</Typography.Text>\n          </Flex>\n        );\n      })}\n    </Flex>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:r||(r=n.t(s,2)),antd:l,"@graphscope/studio-components":p},renderOpts:{compile:(o=u()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},67114:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return p}});var o,a=n(90228),i=n.n(a),c=n(87999),u=n.n(c),s=n(50959),l=(n(19895),n(2268)),p={"importfiles-demo-0":{component:s.memo(s.lazy(u()(i()().mark((function e(){var t,r,o,a,c,u;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,t.useRef,e.next=8,Promise.resolve().then(n.bind(n,2268));case 8:return o=e.sent,a=o.ImportFiles,c=o.Button,u=o.message,e.abrupt("return",{default:function(){return r.createElement("div",{style:{height:"500px"}},r.createElement(a,{upload:{accept:".json,.csv",title:"xxx",description:"xxx"},type:"json"},(function(e){return r.createElement(r.Fragment,null,r.createElement(c,{type:"primary",onClick:function(){return function(e){u(e)}(e)},loading:e.loading},"Visualization"))})))}});case 13:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"importfiles-demo-0",refAtomIds:["ImportFiles"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState, useRef } from 'react';\nimport { ImportFiles, Button, message } from '@graphscope/studio-components';\n\nexport default () => {\n  const onSubmit = params => {\n    message(params);\n  };\n  return (\n    <div style={{ height: '500px' }}>\n      <ImportFiles\n        upload={{\n          accept: '.json,.csv',\n          title: 'xxx',\n          description: 'xxx',\n        }}\n        type=\"json\"\n      >\n        {params => {\n          return (\n            <>\n              <Button type=\"primary\" onClick={() => onSubmit(params)} loading={params.loading}>\n                Visualization\n              </Button>\n            </>\n          );\n        }}\n      </ImportFiles>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:r||(r=n.t(s,2)),"@graphscope/studio-components":l},renderOpts:{compile:(o=u()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},98063:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return d}});var o,a=n(90228),i=n.n(a),c=n(87999),u=n.n(c),s=n(50959),l=(n(54581),n(99300)),p=n(2268),d={"logo-demo-0":{component:s.memo(s.lazy(u()(i()().mark((function e(){var t,r,o,a,c,u,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,99300));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(n.bind(n,2268));case 11:return a=e.sent,c=a.Logo,u=a.LogoText,s=a.LogoImage,e.abrupt("return",{default:function(){return r.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"40px"}},r.createElement(c,null),r.createElement(u,null),r.createElement(s,null))}});case 16:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"logo-demo-0",refAtomIds:["Logo"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { Logo, LogoText, LogoImage } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', gap: '40px' }}>\n      <Logo />\n      <LogoText />\n      <LogoImage />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:r||(r=n.t(s,2)),antd:l,"@graphscope/studio-components":p},renderOpts:{compile:(o=u()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},47785:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return h}});var o,a=n(90228),i=n.n(a),c=n(87999),u=n.n(c),s=n(50959),l=(n(518),n(99300)),p=n(53420),d=n(67794),f=n(5855),h={"provider-demo-0":{component:s.memo(s.lazy(u()(i()().mark((function e(){var t,r,o,a,c,u,s,l,p,d,f,h;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,99300));case 7:return o=e.sent,a=o.Button,o.Space,o.Input,e.next=13,Promise.resolve().then(n.bind(n,67794));case 13:return c=e.sent,u=c.default,e.next=17,Promise.resolve().then(n.bind(n,5855));case 17:return s=e.sent,l=s.useStudioProvier,e.next=21,Promise.resolve().then(n.bind(n,53420));case 21:return p=e.sent,d=p.components,f=p.token,h=function(){var e=l().handleThemeOrLocale;return r.createElement(a,{onClick:function(){e({components:d,token:f})}},"edit")},e.abrupt("return",{default:function(){return r.createElement(u,{mode:"defaultAlgorithm"},r.createElement(h,null),r.createElement(a,null,"colorPrimary"))}});case 26:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"provider-demo-0",refAtomIds:["Provider"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Button, Space, Input } from 'antd';\nimport ThemeProvider from './index.tsx';\nimport { useStudioProvier } from './useThemeConfigProvider.tsx';\nimport { components, token } from './const.ts';\n/** 修改主题色 */\nconst ToogleButton = () => {\n  const { handleThemeOrLocale } = useStudioProvier();\n  return (\n    <Button\n      onClick={() => {\n        handleThemeOrLocale({\n          components,\n          token,\n        });\n      }}\n    >\n      edit\n    </Button>\n  );\n};\n\nexport default () => {\n  return (\n    <ThemeProvider\n      /** 主题模式 */\n      mode=\"defaultAlgorithm\"\n    >\n      <ToogleButton />\n      <Button>colorPrimary</Button>\n    </ThemeProvider>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"./const.ts":{type:"FILE",value:n(22211).Z},"./index.tsx":{type:"FILE",value:n(20880).Z},"./useThemeConfigProvider.tsx":{type:"FILE",value:n(88241).Z}},entry:"index.jsx"},context:{"./const.ts":p,"./index.tsx":d,"./useThemeConfigProvider.tsx":f,react:r||(r=n.t(s,2)),antd:l,"/home/runner/work/portal/portal/packages/studio-components/src/Provider/const.ts":p,"/home/runner/work/portal/portal/packages/studio-components/src/Provider/index.tsx":d,"/home/runner/work/portal/portal/packages/studio-components/src/Provider/useThemeConfigProvider.tsx":f},renderOpts:{compile:(o=u()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},91445:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return p}});var o,a=n(90228),i=n.n(a),c=n(87999),u=n.n(c),s=n(50959),l=(n(3750),n(78781)),p={"resizablepanel-demo-0":{component:s.memo(s.lazy(u()(i()().mark((function e(){var t,r,o,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,e.next=6,Promise.resolve().then(n.bind(n,78781));case 6:return o=e.sent,a=o.default,e.abrupt("return",{default:function(){return r.createElement(a,{leftSide:r.createElement("div",{style:{minWidth:"300px",height:"300px",background:"#F7F7F7",textAlign:"center"}},"leftSide"),middleSide:r.createElement("div",{style:{minWidth:"600px",height:"300px",background:"#FFA444",textAlign:"center"}},"middleSide"),rightSide:r.createElement("div",{style:{minWidth:"300px",height:"300px",background:"#91CAFA",textAlign:"center"}},"rightSide")})}});case 9:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"resizablepanel-demo-0",refAtomIds:["ResizablePanel"],dependencies:{"index.jsx":{type:"FILE",value:"import React from 'react';\nimport ResizablePanel from './index.tsx';\n\nexport default () => {\n  return (\n    <ResizablePanel\n      leftSide={\n        <div style={{ minWidth: '300px', height: '300px', background: '#F7F7F7', textAlign: 'center' }}>leftSide</div>\n      }\n      middleSide={\n        <div style={{ minWidth: '600px', height: '300px', background: '#FFA444', textAlign: 'center' }}>middleSide</div>\n      }\n      rightSide={\n        <div\n          style={{\n            minWidth: '300px',\n            height: '300px',\n            background: '#91CAFA',\n            textAlign: 'center',\n          }}\n        >\n          rightSide\n        </div>\n      }\n    />\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"./index.tsx":{type:"FILE",value:n(17239).Z}},entry:"index.jsx"},context:{"./index.tsx":l,react:r||(r=n.t(s,2)),"/home/runner/work/portal/portal/packages/studio-components/src/ResizablePanel/index.tsx":l},renderOpts:{compile:(o=u()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},3151:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return d}});var o,a=n(90228),i=n.n(a),c=n(87999),u=n.n(c),s=n(50959),l=(n(43716),n(99300)),p=n(2268),d={"segmentedtabs-demo-0":{component:s.memo(s.lazy(u()(i()().mark((function e(){var t,r,o,a,c,u,s,l;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,99300));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(n.bind(n,2268));case 11:return a=e.sent,c=a.SegmentedTabs,u=function(){return r.createElement("div",null,"Tab-1 components")},s=function(){return r.createElement("div",null,"Tab-2 components")},l=function(){return r.createElement("div",null,"Tab-3 components")},e.abrupt("return",{default:function(){var e=[{key:"Tab-1",children:r.createElement(u,null),label:"Tab-1"},{key:"Tab-2",children:r.createElement(s,null),label:"Tab-2"},{key:"Tab-3",children:r.createElement(l,null),label:"Tab-3"}];return r.createElement("div",null,r.createElement(c,{items:e}))}});case 17:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"segmentedtabs-demo-0",refAtomIds:["SegmentedTabs"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { SegmentedTabs } from '@graphscope/studio-components';\nconst Tab1 = () => {\n  return <div>Tab-1 components</div>;\n};\nconst Tab2 = () => {\n  return <div>Tab-2 components</div>;\n};\nconst Tab3 = () => {\n  return <div>Tab-3 components</div>;\n};\nexport default () => {\n  const items = [\n    {\n      key: 'Tab-1',\n      children: <Tab1 />,\n      label: 'Tab-1',\n    },\n    {\n      key: 'Tab-2',\n      children: <Tab2 />,\n      label: 'Tab-2',\n    },\n    {\n      key: 'Tab-3',\n      children: <Tab3 />,\n      label: 'Tab-3',\n    },\n  ];\n  return (\n    <div>\n      <SegmentedTabs items={items}></SegmentedTabs>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:r||(r=n.t(s,2)),antd:l,"@graphscope/studio-components":p},renderOpts:{compile:(o=u()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},62359:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return d}});var o,a=n(90228),i=n.n(a),c=n(87999),u=n.n(c),s=n(50959),l=(n(43765),n(99300)),p=n(2268),d={"sidetabs-demo-0":{component:s.memo(s.lazy(u()(i()().mark((function e(){var t,r,o,a,c,u,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,99300));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(n.bind(n,2268));case 11:return a=e.sent,a.SegmentedTabs,c=function(){return r.createElement("div",null,"Tab-1 components")},u=function(){return r.createElement("div",null,"Tab-2 components")},s=function(){return r.createElement("div",null,"Tab-3 components")},e.abrupt("return",{default:function(){var e=[{key:"Tab-1",children:r.createElement(c,null),label:"Tab-1"},{key:"Tab-2",children:r.createElement(u,null),label:"Tab-2"},{key:"Tab-3",children:r.createElement(s,null),label:"Tab-3"}];return r.createElement("div",null,r.createElement(Sidebar,{options:e,value:"Tab-1",collapse:!1}))}});case 17:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"sidetabs-demo-0",refAtomIds:["SideTabs"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { SegmentedTabs } from '@graphscope/studio-components';\nconst Tab1 = () => {\n  return <div>Tab-1 components</div>;\n};\nconst Tab2 = () => {\n  return <div>Tab-2 components</div>;\n};\nconst Tab3 = () => {\n  return <div>Tab-3 components</div>;\n};\nexport default () => {\n  const items = [\n    {\n      key: 'Tab-1',\n      children: <Tab1 />,\n      label: 'Tab-1',\n    },\n    {\n      key: 'Tab-2',\n      children: <Tab2 />,\n      label: 'Tab-2',\n    },\n    {\n      key: 'Tab-3',\n      children: <Tab3 />,\n      label: 'Tab-3',\n    },\n  ];\n  return (\n    <div>\n      <Sidebar options={items} value=\"Tab-1\" collapse={false} />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:r||(r=n.t(s,2)),antd:l,"@graphscope/studio-components":p},renderOpts:{compile:(o=u()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},99409:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return d}});var o,a=n(90228),i=n.n(a),c=n(87999),u=n.n(c),s=n(50959),l=(n(44412),n(99300)),p=n(2268),d={"tablecard-demo-0":{component:s.memo(s.lazy(u()(i()().mark((function e(){var t,r,o,a,c;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,99300));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(n.bind(n,2268));case 11:return a=e.sent,c=a.TableCard,e.abrupt("return",{default:function(){return r.createElement("div",null,r.createElement(c,{data:{label:"table-1",properties:[{}]}}))}});case 14:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"tablecard-demo-0",refAtomIds:["TableCard"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { TableCard } from '@graphscope/studio-components';\n\nexport default () => {\n  const data = {\n    label: 'table-1',\n    properties: [{}],\n  };\n  return (\n    <div>\n      <TableCard data={data}></TableCard>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:r||(r=n.t(s,2)),antd:l,"@graphscope/studio-components":p},renderOpts:{compile:(o=u()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},98440:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return d}});var o,a=n(90228),i=n.n(a),c=n(87999),u=n.n(c),s=n(50959),l=(n(85792),n(99300)),p=n(2268),d={"toolbar-demo-0":{component:s.memo(s.lazy(u()(i()().mark((function e(){var t,r,o,a,c,u,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,99300));case 7:return o=e.sent,o.Space,a=o.Button,e.next=12,Promise.resolve().then(n.bind(n,2268));case 12:return c=e.sent,u=c.Toolbar,s=c.Icons,e.abrupt("return",{default:function(){return r.createElement("div",{style:{position:"relative",height:"400px"}},r.createElement(u,null,r.createElement(a,{type:"text",icon:r.createElement(s.Sidebar,null)}),r.createElement(a,{type:"text",icon:r.createElement(s.AddNode,null)})))}});case 16:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"toolbar-demo-0",refAtomIds:["Toolbar"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space, Button } from 'antd';\nimport { Toolbar, Icons } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <div style={{ position: 'relative', height: '400px' }}>\n      <Toolbar>\n        <Button type=\"text\" icon={<Icons.Sidebar />} />\n        <Button type=\"text\" icon={<Icons.AddNode />} />\n      </Toolbar>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:r||(r=n.t(s,2)),antd:l,"@graphscope/studio-components":p},renderOpts:{compile:(o=u()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},2434:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return d}});var o,a=n(90228),i=n.n(a),c=n(87999),u=n.n(c),s=n(50959),l=(n(44117),n(99300)),p=n(2268),d={"typingtext-demo-0":{component:s.memo(s.lazy(u()(i()().mark((function e(){var t,r,o,a,c;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,99300));case 7:return o=e.sent,o.Space,o.Button,e.next=12,Promise.resolve().then(n.bind(n,2268));case 12:return a=e.sent,c=a.TypingText,e.abrupt("return",{default:function(){return r.createElement(c,null,"GraphScope Portal is a user-friendly web interface that simplifies managing graph data with GraphScope. It offers one-stop access to data modeling, importing, querying, and monitoring, catering to both Interactive and Insight engines within the GraphScope Flex architecture.")}});case 15:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"typingtext-demo-0",refAtomIds:["TypingText"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space, Button } from 'antd';\nimport { TypingText } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <TypingText>\n      GraphScope Portal is a user-friendly web interface that simplifies managing graph data with GraphScope. It offers\n      one-stop access to data modeling, importing, querying, and monitoring, catering to both Interactive and Insight\n      engines within the GraphScope Flex architecture.\n    </TypingText>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:r||(r=n.t(s,2)),antd:l,"@graphscope/studio-components":p},renderOpts:{compile:(o=u()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},54734:function(e,t,n){n.r(t),n.d(t,{demos:function(){return r}});n(50959),n(4866);var r={}},82463:function(e,t,n){n.r(t),n.d(t,{demos:function(){return l}});var r,o=n(90228),a=n.n(o),i=n(87999),c=n.n(i),u=n(50959),s=(n(93995),n(2268)),l={"layout-demo-0":{component:u.memo(u.lazy(c()(a()().mark((function e(){var t,r,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,2268));case 2:return t=e.sent,r=t.Layout,o=t.Icons,t.StudioProvider,e.abrupt("return",{default:function(){var e=[{label:"home",key:"/home",icon:u.createElement(o.Cluster,null)}];return u.createElement("div",{style:{height:"500px",border:"1px solid red"}},u.createElement(r,{sideMenu:[e]}))}});case 7:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"layout-demo-0",refAtomIds:["layout"],dependencies:{"index.jsx":{type:"FILE",value:"import { Layout, Icons, StudioProvider } from '@graphscope/studio-components';\n\nexport default () => {\n  const sideMenu = [\n    {\n      label: 'home',\n      key: '/home',\n      icon: <Icons.Cluster />,\n    },\n  ];\n  return (\n    <div style={{ height: '500px', border: '1px solid red' }}>\n      <Layout sideMenu={[sideMenu]} />\n    </div>\n  );\n};"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{"@graphscope/studio-components":s},renderOpts:{compile:(r=c()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})}}}},55348:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return p}});var o,a=n(90228),i=n.n(a),c=n(87999),u=n.n(c),s=n(50959),l=(n(26973),n(43221)),p={"packages-studio-importor-src-app-demo-0":{component:s.memo(s.lazy(u()(i()().mark((function e(){var t,r,o,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,t.useEffect,e.next=8,Promise.resolve().then(n.bind(n,43221));case 8:return o=e.sent,a=o.default,e.abrupt("return",{default:function(){var e=function(){var e=u()(i()().mark((function e(){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{nodes:[],edges:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.createElement("div",{style:{position:"fixed",top:"65px",left:"0px",right:"0px",zIndex:999,bottom:"0px",background:"#fff"}},r.createElement(a,{queryPrimitiveTypes:function(){return["DT_DOUBLE","DT_STRING","DT_SIGNED_INT32","DT_SIGNED_INT64"].map((function(e){return{label:e,value:e}}))},queryGraphSchema:e,appMode:"DATA_MODELING"}))}});case 11:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"packages-studio-importor-src-app-demo-0",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState, useEffect } from 'react';\nimport ModelingApp from '@graphscope/studio-importor';\nexport default () => {\n  const queryGraphSchema = async () => {\n    return { nodes: [], edges: [] };\n  };\n  return (\n    <div\n      style={{\n        // padding: '12px',\n        // height: 'calc(100vh - 64px)',\n        // boxSizing: 'border-box',\n        position: 'fixed',\n        top: '65px',\n        left: '0px',\n        right: '0px',\n        zIndex: 999,\n        bottom: '0px',\n        background: '#fff',\n      }}\n    >\n      <ModelingApp\n        /** 属性下拉选项值 */\n        queryPrimitiveTypes={() => {\n          return ['DT_DOUBLE', 'DT_STRING', 'DT_SIGNED_INT32', 'DT_SIGNED_INT64'].map(item => {\n            return { label: item, value: item };\n          });\n        }}\n        queryGraphSchema={queryGraphSchema}\n        appMode=\"DATA_MODELING\"\n      />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-importor":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:r||(r=n.t(s,2)),"@graphscope/studio-importor":l},renderOpts:{compile:(o=u()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},52545:function(e,t,n){n.r(t),n.d(t,{demos:function(){return p}});var r,o=n(90228),a=n.n(o),i=n(87999),c=n.n(i),u=n(50959),s=(n(67866),n(21050)),l=n(2268),p={"packages-studio-query-src-app-demo-0":{component:u.memo(u.lazy(c()(a()().mark((function e(){var t,r,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,21050));case 2:return t=e.sent,r=t.default,e.next=6,Promise.resolve().then(n.bind(n,2268));case 6:return o=e.sent,i=o.Utils,c=i.storage,e.abrupt("return",{default:function(){var e=window.GS_ENGINE_TYPE,t="groot"===e?"gremlin":"cypher",n="groot"===e?"g.V().limit 10":"Match (n) return n limit 10",o=c.get("locale")||"en-US",a=c.get("primaryColor")||"#1978FF",i=c.get("themeColor")||"defaultAlgorithm";return u.createElement("div",{style:{position:"fixed",top:"65px",left:"0px",right:"0px",zIndex:999,bottom:"0px",background:"#fff"}},u.createElement(r,{theme:{mode:i,primaryColor:a},locale:o,globalScript:n,language:t,queryInfo:function(){return new Promise((function(e){e({graph_name:"demo"})}))},queryGraphSchema:function(){return new Promise((function(e){e({nodes:[],edges:[]})}))},queryStatements:function(){return new Promise((function(e){e([])}))}}))}});case 10:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"packages-studio-query-src-app-demo-0",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:"import QueryApp from '@graphscope/studio-query';\nimport { Utils } from '@graphscope/studio-components';\nconst { storage } = Utils;\n\nexport default () => {\n  const queryInfo = () => {\n    return new Promise(resolve => {\n      resolve({\n        graph_name: 'demo',\n      });\n    });\n  };\n  const queryGraphSchema = () => {\n    return new Promise(resolve => {\n      resolve({\n        nodes: [],\n        edges: [],\n      });\n    });\n  };\n  const queryStatements = () => {\n    return new Promise(resolve => {\n      resolve([]);\n    });\n  };\n  const { GS_ENGINE_TYPE } = window;\n  const language = GS_ENGINE_TYPE === 'groot' ? 'gremlin' : 'cypher';\n  const globalScript = GS_ENGINE_TYPE === 'groot' ? 'g.V().limit 10' : 'Match (n) return n limit 10';\n\n  const locale = storage.get('locale') || 'en-US';\n  const primaryColor = storage.get('primaryColor') || '#1978FF';\n  const themeMode = storage.get('themeColor') || 'defaultAlgorithm';\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        top: '65px',\n        left: '0px',\n        right: '0px',\n        zIndex: 999,\n        bottom: '0px',\n        background: '#fff',\n      }}\n    >\n      <QueryApp\n        /** 主题相关 */\n        theme={{ mode: themeMode, primaryColor }}\n        /** 国际化 */\n        locale={locale}\n        /** 返回导航 */\n        globalScript={globalScript}\n        language={language}\n        queryInfo={queryInfo}\n        queryGraphSchema={queryGraphSchema}\n        queryStatements={queryStatements}\n      />\n    </div>\n  );\n};"},"@graphscope/studio-query":{type:"NPM",value:"0.1.18"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{"@graphscope/studio-query":s,"@graphscope/studio-components":l},renderOpts:{compile:(r=c()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})}}}},57298:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return p}});var o,a=n(90228),i=n.n(a),c=n(87999),u=n.n(c),s=n(50959),l=(n(37275),n(59506)),p={"packages-studio-query-src-statement-demo-0":{component:s.memo(s.lazy(u()(i()().mark((function e(){var t,r,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,t.default,e.next=6,Promise.resolve().then(n.bind(n,59506));case 6:return r=e.sent,o=r.default,e.abrupt("return",{default:o});case 9:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"packages-studio-query-src-statement-demo-0",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:"import React from 'react';\nimport SDK from '../sdk/index.tsx';\nexport default SDK;"},react:{type:"NPM",value:"18.2.0"},"../sdk/index.tsx":{type:"FILE",value:n(9534).Z}},entry:"index.jsx"},context:{"../sdk/index.tsx":l,react:r||(r=n.t(s,2)),"/home/runner/work/portal/portal/packages/studio-query/src/sdk/index.tsx":l},renderOpts:{compile:(o=u()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},53420:function(e,t,n){n.r(t),n.d(t,{components:function(){return r},token:function(){return o}});var r={Menu:{itemBg:"rgba(255, 255, 255, 0)",subMenuItemBg:"rgba(255, 255, 255, 0)",iconMarginInlineEnd:14,itemMarginInline:4,iconSize:14,collapsedWidth:50,itemActiveBg:"#eaeaea"},Typography:{titleMarginBottom:"0.2em",titleMarginTop:"0.8em"},Table:{cellPaddingBlock:4,cellPaddingInline:8},Pagination:{itemSize:20},Result:{iconFontSize:62,titleFontSize:20,colorError:"#00000073"}},o={colorBorder:"red",colorBgBase:"#fff"}},67794:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var r=n(26068),o=n.n(r),a=n(48305),i=n.n(a),c=n(50959),u=n(36276),s=n(53531),l=n(98262),p=n(5855);n(15558),n(31759),n(90228),n(87999);var d=function(e){try{var t=localStorage.getItem(e);if(t)return function(e){try{return JSON.parse(e)}catch(t){if("string"!=typeof e||e.startsWith('"')||e.endsWith('"'))return e;try{return JSON.parse('"'.concat(e,'"'))}catch(t){return console.error("Failed to parse the input:",t),e}}}(t)}catch(e){console.error("Error while retrieving data from localStorage:",e)}},f=function(e,t){try{localStorage.setItem(e,JSON.stringify(t,null,2))}catch(e){console.error("Error while storing data in localStorage:",e)}};var h=n(11527),m=function(e){var t=e.children,n=e.locales,r=(0,c.useState)((function(){var t=e.algorithm,n=e.locale;return n||(n=d("locale"))||f("locale",n="en-US"),t||(t=d("algorithm"))||f("algorithm",t="defaultAlgorithm"),{components:d("components"),token:d("token"),algorithm:t,locale:n}})),a=i()(r,2),m=a[0],y=a[1],v=m.components,g=m.token,b=m.algorithm,x=m.locale,w=function(e){var t="defaultAlgorithm"===e;return{componentsConfig:{Menu:{itemBg:"rgba(255, 255, 255, 0)",subMenuItemBg:"rgba(255, 255, 255, 0)",iconMarginInlineEnd:14,itemMarginInline:4,iconSize:14,collapsedWidth:56,horizontalLineHeight:32,itemHeight:32},Typography:{titleMarginBottom:"0.2em",titleMarginTop:"0.8em"},Table:{cellPaddingBlock:4,cellPaddingInline:8},Pagination:{itemSize:20},Result:{iconFontSize:62,titleFontSize:20,paddingLG:0,marginXS:0,colorError:t?"#00000073":"#ddd"}},tokenConfig:{colorBorder:t?"#F0F0F0":"#303030",colorBgBase:t?"#fff":"#1d1d1d",colorBgLayout:t?"#f5f7f9":"rgba(43,43,43,1)"}}}(b),I=w.componentsConfig,E=w.tokenConfig,S=function(){var e="defaultAlgorithm"===(0,p.useStudioProvier)().algorithm;return{sectionBackground:e?"#fff":"#0D0D0D",containerBackground:e?"#f5f7f9":"#020202",instanceBackground:e?"#FCFCFC":"",jobDetailBorder:e?"#efefef":"#323232",jobDetailColor:e?"#1F1F1F":"#808080",codeMirrorBorder:e?"#efefef":"#323232",editorBackground:e?"#fff":"#151515",editorForeground:e?"#212121":"#FFF",buttonBackground:e?"#fff":"#1d1d1d",layoutBackground:e?"#fff":"#020202"}}(),k="defaultAlgorithm"===b,j=n[x||"en-US"];return(0,h.jsx)(p.ContainerProvider,{value:o()({token:o()(o()({},E),g),components:o()(o()({},I),v),handleThemeOrLocale:function(e){var t=e.components,n=e.token;Object.keys(e).forEach((function(t){f(t,e[t])})),y((function(r){var a;return f("token",o()(o()({},r.token),n)),o()(o()({},r),{},{components:o()(o()({},r.components),t),token:o()(o()({},r.token),n),algorithm:e.algorithm||r.algorithm,locale:null!==(a=e.locale)&&void 0!==a?a:d("locale")})}))},algorithm:b,locale:x,isLight:k},S),children:(0,h.jsx)(l.Z,{messages:j,locale:x,children:(0,h.jsx)(u.ZP,{theme:{algorithm:k?s.Z.defaultAlgorithm:s.Z.darkAlgorithm,components:o()(o()({},I),v),token:o()(o()({},E),g)},children:t})})})}},5855:function(e,t,n){n.r(t),n.d(t,{ContainerContext:function(){return i},ContainerProvider:function(){return c},useStudioProvier:function(){return u}});var r=n(36075),o=n.n(r),a=n(50959),i=(0,a.createContext)({components:{},token:{},handleThemeOrLocale:function(e){o()(e)},locale:"en-US",algorithm:"defaultAlgorithm",isLight:!1}),c=i.Provider,u=function(){var e=(0,a.useContext)(i);if(void 0===e||0===Object.keys(e).length)throw new Error("useContext must be used within a ContainerProvider");return e}},78781:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});n(50959);var r=n(8395),o=n(11527),a={ResizeHandleOuter:{flex:"0 0 1.5em",position:"relative",outline:"none",transform:"rotate(90deg)",backgroundColor:"transparent"},ResizeHandleInner:{position:"absolute",top:"0.25em",bottom:"0.25em",left:"0.25em",right:"0.25em",borderRadius:"0.25em",backgroundColor:"transparent",transition:"background-color 0.2s linear"},Icon:{width:"1em",height:"1em",position:"absolute",left:"calc(50% - 0.5rem)",top:"calc(50% - 0.5rem)"}};function i(e){e.className;var t=e.id;return(0,o.jsx)(r.OT,{style:a.ResizeHandleOuter,id:t,children:(0,o.jsx)("div",{style:a.ResizeHandleInner,children:(0,o.jsx)("svg",{style:a.Icon,viewBox:"0 0 24 24",children:(0,o.jsx)("path",{fill:"currentColor",d:"M8,18H11V15H2V13H22V15H13V18H16L12,22L8,18M12,2L8,6H11V9H2V11H22V9H13V6H16L12,2Z"})})})})}var c={Container:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:"1rem"},Panel:{display:"flex",flexDirection:"row"},PanelContent:{height:"100%",width:"100%",borderRadius:"0.5rem"}},u=function(e){var t=e.leftSide,n=e.middleSide,a=e.rightSide,u=e.leftMinSize,s=void 0===u?20:u,l=e.leftMaxSize,p=void 0===l?40:l,d=e.rightMinSize,f=void 0===d?20:d,h=e.rightMaxSize,m=void 0===h?40:h;return(0,o.jsx)("div",{style:c.Container,children:(0,o.jsxs)(r.eh,{autoSaveId:"example",direction:"horizontal",children:[t&&[(0,o.jsx)(r.s_,{style:c.Panel,collapsible:!1,order:1,minSize:s,maxSize:p,children:(0,o.jsx)("div",{style:c.PanelContent,children:t})}),(0,o.jsx)(i,{},"left-handle")],(0,o.jsx)(r.s_,{style:c.Panel,collapsible:!1,order:2,children:(0,o.jsx)("div",{style:c.PanelContent,children:n})}),a&&[(0,o.jsx)(i,{},"right-handle"),(0,o.jsx)(r.s_,{style:c.Panel,collapsible:!1,order:3,minSize:f,maxSize:m,children:(0,o.jsx)("div",{style:c.PanelContent,children:a})})]]})})}},73174:function(e,t,n){n.d(t,{qp:function(){return a},rv:function(){return o}});var r=n(33741),o={mode:"GS_STUDIO_QUERY_MODE"},a=function(){return(0,r.qp)()}},16471:function(e,t,n){n.d(t,{Ek:function(){return r}});n(2268).Utils.storage;function r(e){return(e.match(/\r?\n/g)||[]).length+1}},70667:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(50959),o=n(2268),a=n(96066),i=(n(52871),n(26068)),c=n.n(i),u=n(15558),s=n.n(u),l={comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}]},p={defaultToken:"",tokenPostfix:".gremlin",ignoreCase:!0,brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["g","V","E","out","in","both","has","hasLabel","limit","order","by","select","count","filter","map","dedup","outE","inE","bothE"],builtinLiterals:["true","false","null"],builtinFunctions:["values","keys","id","label","property","outV","inV","bothV","sum","mean","min","max","coalesce","is","not","range","fold"],operators:["+","-","*","/","%","^","=","<>","<",">","<=",">="],escapes:/\\(?:[tbnrf\\"'`]|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+/,octaldigits:/[0-7]+/,hexdigits:/[0-9a-fA-F]+/,tokenizer:{root:[[/[{}[\]()]/,"@brackets"],{include:"common"}],common:[{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/:[a-zA-Z_][\w]*/,"type.identifier"],[/[a-zA-Z_][\w]*(?=\()/,{cases:{"@builtinFunctions":"predefined.function","@keywords":"keyword","@default":"identifier"}}],[/`/,"identifier.escape","@identifierBacktick"],[/[;,.:|]/,"delimiter"],[/[\+\-\*\/\^%]+/,"delimiter.operator"],[/[\!<>\?=\|&]/,"delimiter"]],numbers:[[/-?(@digits)[eE](-?(@digits))?/,"number.float"],[/-?(@digits)?\.(@digits)([eE]-?(@digits))?/,"number.float"],[/-?0x(@hexdigits)/,"number.hex"],[/-?0(@octaldigits)/,"number.octal"],[/-?(@digits)/,"number"]],strings:[[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@stringDouble"],[/'/,"string","@stringSingle"]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/\/\/.*/,"comment"],[/[^/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],stringDouble:[[/[^\\"]+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/"/,"string","@pop"]],stringSingle:[[/[^\\']+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/'/,"string","@pop"]],identifierBacktick:[[/[^\\`]+/,"identifier.escape"],[/@escapes/,"identifier.escape"],[/\\./,"identifier.escape.invalid"],[/`/,"identifier.escape","@pop"]]}};var d=[].concat(["count","fold","sum","min","max","mean","group","groupCount"],["hasId","hasLabel","has","hasNot","is","where","not","dedup","order","limit","coin","sample","union"],["id","label","constant","valueMap","values","elementMap","select"]),f=["outV","inV","otherV","bothV"],h=["outE","inE","bothE","out","in","both"],m={};[].concat(f,["out","in","both"]).forEach((function(e){m[e]=[].concat(h,s()(d))})),["outE","inE","bothE"].forEach((function(e){m[e]=[].concat(f,s()(d))}));var y=n(11527);function v(e){return(e.match(/\r?\n/g)||[]).length+1}a.Mj.register({id:"gremlin"}),a.Mj.setMonarchTokensProvider("gremlin",p),a.Mj.setLanguageConfiguration("gremlin",l),a.Mj.registerCompletionItemProvider("gremlin",{triggerCharacters:["."],provideCompletionItems:function(e,t){var n,r=e.getLineContent(t.lineNumber).slice(0,t.column-1).trim(),o=function(e){var t=c()({g:["V","E"],V:[].concat(h,["match"],s()(d)),E:[].concat(f,s()(d))},m)[e]||[];return t.map((function(e){return{label:e,kind:a.Mj.CompletionItemKind.Function,documentation:e,insertText:"".concat(e,"()")}}))}((n=r.replace(/\(.*?\)/g,"").split(/\s|\./).filter(Boolean)).length>0?n[n.length-1]:"");return{suggestions:o}}});var g={cypher:"cypherTheme",gremlin:"GremlinTheme"},b=(0,r.forwardRef)((function(e,t){(0,o.useDynamicStyle)("\n.monaco-editor .view-overlays .current-line {\n  background-color: transparent !important;\n}\n\n.monaco-editor .monaco-scrollable-element::-webkit-scrollbar {\n  display: none;\n}\n\n.decorationsOverviewRuler {\n  display: none !important;\n}\n\n.monaco-editor .view-overlays .current-line-exact {\n  border: none !important;\n}\n\n.monaco-editor .scroll-decoration {\n  box-shadow: none;\n}\n","cypher-editor-style");var n,i=e.value,c=e.language,u=void 0===c?"cypher":c,s=e.maxRows,l=void 0===s?10:s,p=e.minRows,d=void 0===p?1:p,f=e.onChangeContent,h=e.clear,m=e.onInit,b=f?0:v(i),x=(0,o.useStudioProvier)().isLight;return(0,r.useEffect)((function(){return t&&t.current&&(v(i)<=l&&(t.current.style.height=20*v(i)+"px"),n=a.j6.create(t.current,{language:"gremlin",value:i,theme:x?g[u]:"vs-dark",suggestLineHeight:20,automaticLayout:!0,minimap:{enabled:!1},fontSize:14,lineHeight:20,folding:!0,wordWrap:"on",scrollBeyondLastLine:!1,scrollBeyondLastColumn:0}),t.current.codeEditor=n,n.onDidChangeModelContent((function(){var e,r=n.getContentHeight(),o=null===(e=n.getModel())||void 0===e?void 0:e.getLineCount();r<=20*l&&(t.current.style.height=r+"px"),f&&f(o,n)})),m&&m(t.current)),function(){n.dispose()}}),[t,i,u,!x]),r.useEffect((function(){h&&t&&t.current&&t.current.codeEditor&&t.current.codeEditor.setValue("")}),[h]),(0,y.jsx)("div",{ref:t,style:{padding:"5px 0px",width:"100%",height:20*(d+b)+"px",border:x?"1px solid rgb(187, 190, 195)":"1px solid #434343",borderRadius:"6px"}})})),x=b},59506:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r=n(26068),o=n.n(r),a=n(48305),i=n.n(a),c=n(90228),u=n.n(c),s=n(87999),l=n.n(s),p=n(50959),d=n(53531),f=(n(73174),n(11527)),h=(d.Z.useToken,n(2268)),m=(d.Z.useToken,n(15558),n(54016));n(16483),m.Z.Text,m.Z.Title,d.Z.useToken;n(17069),n(25298),n(82092),"\n你的角色是一个 Cypher 查询助手，你可以根据 Schema 结构，给用户推荐你任务最重要的5条 Cypher 查询语句\n\n任务1: 根据 Schema 结构，自动推荐出关联性最大，最利于用户分析的 10 条Cypher查询语句\nSchema：\n".concat(JSON.stringify({nodes:[{label:"Paper",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"conference",type:"DT_STRING"},{name:"CCFRank",type:"DT_STRING"},{name:"CCFField",type:"DT_STRING"},{name:"year",type:"DT_SIGNED_INT32"},{name:"paper",type:"DT_STRING"}],primary:"id"},{label:"Challenge",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"challenge",type:"DT_STRING"}],primary:"id"},{label:"Topic",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"category",type:"DT_STRING"}],primary:"id"},{label:"Task",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"task",type:"DT_STRING"}],primary:"id"},{label:"Solution",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"solution",type:"DT_STRING"}],primary:"id"},{label:"CCFField",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"field",type:"DT_STRING"}],primary:"id"}],edges:[{label:"WorkOn",properties:[],primary:"WorkOn",constraints:[["Paper","Task"]]},{label:"Resolve",properties:[],primary:"Resolve",constraints:[["Paper","Challenge"]]},{label:"Target",properties:[{name:"number",type:"DT_SIGNED_INT32"}],primary:"Target",constraints:[["Task","Challenge"]]},{label:"Belong",properties:[],primary:"Belong",constraints:[["Task","Topic"]]},{label:"Use",properties:[],primary:"Use",constraints:[["Paper","Solution"]]},{label:"ApplyOn",properties:[],primary:"ApplyOn",constraints:[["Solution","Challenge"]]},{label:"HasField",properties:[],primary:"HasField",constraints:[["Paper","CCFField"]]},{label:"Citation",properties:[],primary:"Citation",constraints:[["Paper","Paper"]]}]},null,2),"\nAnswers:\n").concat(JSON.stringify([{cypher:"Match (n:Paper) return n limit 30",desc:"查询出 Paper 类型的节点"},{cypher:"MATCH (p:Paper)-[:WorkOn]->(a:Task),(a)-[:Belong]->(t: Topic) RETURN t.category,  COUNT(p)",desc:"找出每个主题下的论文数量"},{cypher:"MATCH (t: Topic)<-[:Belong]-(a:Task),\n      (a)<-[:WorkOn]-(p:Paper)-[:Use]->(s:Solution),\n      (s)-[:ApplyOn]->(ch:Challenge)\n  WHERE t.category = $topic_name\n  RETURN t.category, ch.challenge, COUNT(p)",desc:"检索特定主题下，每个挑战（Challenge）所应用的解决方案（Solution）中与论文（Paper）相关的数量"}],null,2),"\n\n任务2: 根据 Schema 结构和用户的输入，生成 Cypher 查询语句，用于图数据库查询\n").concat("\n注意要以JSON的格式返回结果：\nRight Cases:\nquerys1: 列举出鲁迅的一个别名可以吗？\nanswer1: \"match (:ENTITY{name:'鲁迅'})<--(h)-[:Relationship{name:'别名'}]->(q) return distinct q.name limit 1\"\n\nquerys2: 我们常用的301SH不锈钢带的硬度公差是多少，你知道吗？ \nanswers2: \"match(p:ENTITY{name:'301SH不锈钢带'})-[:Relationship{name:'硬度公差'}]-> (q) return q.name\"\nWrong Cases:\nquerys: 12344加油这首歌真好听，你知道歌曲原唱是谁吗？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '12345加油' RETURN a.name\nquerys: 七宗梦是什么时候上映的？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '七宗梦' RETURN a.name LIMIT 30\n","\n\nInstructions:\nNote: Do not include any explanations or apologies in your responses.\nDo not respond to any questions that might ask anything else than for you to construct a Cypher statement.\nDo not include any text except the generated Cypher statement.\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\n你必须使用Sechema中出现的关键词！！！\n\n当前会话中图的 Schema 结构如下：\n\n{graphSchema}\n\n你需要根据用户的提问，自动切换到上述两个任务中，并且给出正确返回，让我们开始吧！\n\n");n(335);d.Z.useToken,d.Z.useToken;n(53056),n(16835),m.Z.Title,d.Z.useToken,n(16471),n(37339),n(33741);var y={"en-US":{Recommended:"Recommended",History:"History",Copilot:"Copilot",Saved:"Saved","Stored Procedures":"Stored Procedures","You can write cypher or gremlin queries, and then click the {icon} button to query data":"You can write cypher or gremlin queries, and then click the {icon} button to query data","Vertex Labels":"Vertex Labels","Edge Labels":"Edge Labels","Property Keys":"Property Keys","No saved query statements {br} You can click {icon} to save.":"No saved query statements {br} You can click {icon} to save.","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"No stored procedures available. {br} Go to the <a>Extension</a> and create one now!","Privacy Security Notice":"Privacy Security Notice",Setting:"Setting","query.app.sidebar.gpt.setting.security":"To improve the quality of generated Cypher query statements, we'll utilize your graph data schema as the prompt for ChatGPT. Your data will be kept strictly confidential and solely used for this purpose.Furthermore, please note that your OpenAI API key is only stored locally in your browser for added security","OpenAI API key is only stored locally in your browser":"OpenAI API key is only stored locally in your browser","query.copilot.welcome":"Hello! I'm the GraphScope Query Assistant. Feel free to ask me any questions about Cypher or Gremlin queries.","recommend 5 interesting query statements":"recommend 5 interesting query statements","query any subgraph":"query any subgraph","insight the statistical distribution of vertex labels in the graph":"insight the statistical distribution of vertex labels in the graph",Save:"Save",Delete:"Delete",Query:"Query",Share:"Share","query submmited on {submitTime}. It's running ... ":"query submmited on {submitTime}. It's running ... ","query submmited on {submitTime}. Running {runningTime} ms":"query submmited on {submitTime}. Running {runningTime} ms","A total of {totalCount} records were retrieved":"A total of {totalCount} records were retrieved","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.",Color:"Color",Size:"Size",Caption:"Caption",LineWidth:"LineWidth","Node properties":"Node properties",Graph:"Graph",Table:"Table",Raw:"Raw","Style Setting":"Style Setting","You can click on each label to set the color, size, and display text for vertices and edges.":"You can click on each label to set the color, size, and display text for vertices and edges.","Export graph json":"Export graph json","Clustering layout":"Clustering layout","Vertex Properties":"Vertex Properties","Connect Endpoint":"Connect Endpoint","Connection URL":"Connection URL","Query language":"Query language","Query initiation method":"Query initiation method",Username:"Username",Password:"Password",Connect:"Connect",Close:"Close","Select nodes by box selection":"Select nodes by box selection","Switch graph view dimensions":"Switch graph view dimensions","Zoom to fitview":"Zoom to fitview",Fullscreen:"Fullscreen","Toggle Right Side":"Toggle Right Side","Caption Status":"Caption Status"},"zh-CN":{Recommended:"推荐查询",History:"历史查询",Copilot:"智能查询",Saved:"保存查询","Stored Procedures":"存储过程","You can write cypher or gremlin queries, and then click the {icon} button to query data":"您可以在这里编写 cypher 或 gremlin 语句，点击 {icon} 按钮查询数据","Vertex Labels":"节点类型","Edge Labels":"边类型","Property Keys":"属性字段","No saved query statements {br} You can click {icon} to save.":"暂无保存的查询语句 {br} 您可以点击 {icon} 保存","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"暂无存储过程 {br} 快去 <a>插件市场</a> 创建一个吧","Privacy Security Notice":"隐私安全说明",Setting:"设置","query.app.sidebar.gpt.setting.security":"为了提高生成Cypher查询语句的质量，我们将使用您的图数据模式作为ChatGPT的提示。您的数据将被严格保密，仅用于此目的。此外，请注意我们的OpenAI API密钥仅存在于您的浏览器本地，以增加安全性。","OpenAI API key is only stored locally in your browser":"OpenAI API key 仅保存在您浏览器本地","query.copilot.welcome":"您好！我是 GraphScope 查询助理，您有任何关于 Cypher 或者 Gremlin 查询的问题都可以随时问我","recommend 5 interesting query statements":"帮我推荐5个有意思的查询","query any subgraph":"查询任意一个子图","insight the statistical distribution of vertex labels in the graph":"帮我分析图中节点类型的分布情况",Save:"保存",Delete:"删除",Query:"查询",Share:"分享","query submmited on {submitTime}. It's running ... ":"查询提交于 {submitTime}. 正在运行中...","query submmited on {submitTime}. Running {runningTime} ms":"查询提交于 {submitTime}. 查询时长 {runningTime} ms","A total of {totalCount} records were retrieved":"一共检索到 {totalCount} 条记录","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"一共检索到 {totalCount} 条记录, 其中包含 {nodeCount} 个节点，{edgeCount} 条边",Color:"颜色",Size:"大小",Caption:"文本",LineWidth:"边宽","Node properties":"属性详情",Graph:"图展示",Table:"表格展示",Raw:"原始数据","Style Setting":"样式设置","You can click on each label to set the color, size, and display text for vertices and edges.":"您可以单击每个标签来设置顶点和边缘的颜色、大小和显示文本。","Export graph json":"导出 json","Clustering layout":"集群布局","Vertex Properties":"节点属性","Connect Endpoint":"连接查询服务","Connection URL":"连接 URL","Query language":"查询语言","Query initiation method":"查询发起方式",Username:"用户名",Password:"密码",Connect:"连接",Close:"关闭","Select nodes by box selection":"通过框选选择节点","Switch graph view dimensions":"切换图表视图维度","Zoom to fitview":"缩放适当视图",Fullscreen:"全屏","Toggle Right Side":"切换右侧","Caption Status":"是否展示标签"}},v=(h.Utils.getSearchParams,n(39462)),g=n(40434),b=n(57526),x=n(16889),w=n(7234),I=n(38943),E=n(84155),S=h.Utils.storage,k=m.Z.Title,j=(m.Z.Text,function(e){var t=g.Z.useForm(),n=i()(t,1)[0],r=e.onConnect,o=e.onClose;p.useEffect((function(){n.setFieldsValue({query_language:e.query_language||S.get("query_language")||"cypher",query_endpoint:e.query_endpoint||S.get("query_endpoint")||"neo4j://127.0.0.1:7687",query_initiation:e.query_initiation||S.get("query_initiation")||"Browser",query_username:e.query_username||S.get("query_username")||"admin",query_password:e.query_password||S.get("query_password")||"password",query_initiation_service:e.query_initiation_service||S.get("query_initiation_service")||""})}),[]);var a=g.Z.useWatch("query_initiation",n);return(0,f.jsxs)(b.Z,{vertical:!0,style:{padding:"12px 24px"},children:[(0,f.jsx)(k,{level:3,style:{marginBottom:"12px"},children:(0,f.jsx)(E.Z,{id:"Connect Endpoint"})}),(0,f.jsxs)(g.Z,{layout:"vertical",form:n,children:[(0,f.jsx)(g.Z.Item,{label:(0,f.jsx)(E.Z,{id:"Connection URL"}),name:"query_endpoint",children:(0,f.jsx)(x.Z,{})}),(0,f.jsx)(g.Z.Item,{label:(0,f.jsx)(E.Z,{id:"Query language"}),name:"query_language",children:(0,f.jsx)(w.default,{allowClear:!0,options:[{label:"Cypher",value:"cypher"},{label:"Gremlin",value:"gremlin"}]})}),(0,f.jsx)(g.Z.Item,{label:(0,f.jsx)(E.Z,{id:"Query initiation method"}),name:"query_initiation",children:(0,f.jsx)(w.default,{allowClear:!0,options:[{label:"Browser (client-side)",value:"Browser"},{label:"Server (server-side)",value:"Server"}]})}),"Server"===a&&(0,f.jsx)(g.Z.Item,{label:(0,f.jsx)(E.Z,{id:"Query initiation service"}),name:"query_initiation_service",children:(0,f.jsx)(x.Z,{allowClear:!0})}),(0,f.jsx)(g.Z.Item,{label:(0,f.jsx)(E.Z,{id:"Username"}),name:"query_username",children:(0,f.jsx)(x.Z,{})}),(0,f.jsx)(g.Z.Item,{label:(0,f.jsx)(E.Z,{id:"Password"}),name:"query_password",children:(0,f.jsx)(x.Z.Password,{})}),(0,f.jsx)(g.Z.Item,{style:{marginTop:"48px"},children:(0,f.jsxs)(b.Z,{justify:"start",children:[(0,f.jsx)(I.ZP,{type:"primary",htmlType:"submit",style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:function(){var e=n.getFieldsValue(!0);Object.keys(e).forEach((function(t){S.set(t,e[t])})),r&&r(n.getFieldsValue(!0))},children:(0,f.jsx)(E.Z,{id:"Connect"})}),o&&(0,f.jsx)(I.ZP,{style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:o,children:(0,f.jsx)(E.Z,{id:"Close"})})]})})]})]})}),O=n(5576),P={},T=function(){var e=l()(u()().mark((function e(){var t,n,r,o,a=arguments;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:"cypher",n=a.length>1?a[1]:void 0,r=P.gremlin_driver,o=P.cypher_driver,"cypher"!==t){e.next=6;break}return o||(P.cypher_driver=new O.Or(n)),e.abrupt("return",P.cypher_driver);case 6:if("gremlin"!==t){e.next=9;break}return r||(P.gremlin_driver=new O.VP(n)),e.abrupt("return",P.gremlin_driver);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){var t=e||{},n=t.enableImmediateQuery,r=void 0!==n&&n,a=t.mode,c=void 0===a?"flow":a,s=t.id,d=void 0===s?"":s,m=t.timestamp,g=void 0===m?Date.now():m,b=t.graphId,x=void 0===b?"":b,w=t.schemaData,I=void 0===w?{nodes:[],edges:[]}:w,E=t.script,S=void 0===E?"Match (n) return n limit 10":E,k=t.onQuery,O=(0,p.useState)({language:e.language||"cypher",endpoint:e.endpoint||"127.0.0.1:7687"}),P=i()(O,2),L=P[0],C=P[1],_=L.language,N=L.endpoint,A=function(){var e=l()(u()().mark((function e(t){var n,r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.language,e.next=3,T(n,N);case 3:return r=e.sent,e.abrupt("return",r.query(t.script));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=l()(u()().mark((function e(t){var n;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.language,e.next=3,T(n,N);case 3:e.sent.close();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return k||N&&_?(0,f.jsx)(h.StudioProvier,{locales:y,children:(0,f.jsx)(v.default,{language:_,enableImmediateQuery:r,mode:c,active:!0,id:d,timestamp:g,graphId:x,schemaData:I,script:S,onQuery:k||A,onCancel:D})}):(0,f.jsx)(h.StudioProvier,{locales:y,children:(0,f.jsx)(j,{onConnect:function(e){C((function(t){return o()(o()({},t),{},{endpoint:e.query_endpoint||"",language:e.query_language})}))}})})},C=n(10422),_={render_query_statement:function(e){var t=(e||{}).id,n=void 0===t?"root":t;C.render((0,f.jsx)(L,o()({},e)),document.getElementById(n))}}},39462:function(e,t,n){n.r(t),n.d(t,{default:function(){return he}});var r=n(90228),o=n.n(r),a=n(26068),i=n.n(a),c=n(87999),u=n.n(c),s=n(48305),l=n.n(s),p=n(50959),d=n(53531),f=n(16483),h=n.n(f),m=n(70667),y=n(57526),v=n(48722),g=n(54016),b=n(17905),x=n(38943),w=n(28541),I=n(42176),E=n(51558),S=n(45334),k=n(16889),j=n(15001),O=n(37528),P=n(11527),T=function(e){var t=e.onSave,n=(0,p.useRef)(null),r=(0,O.Z)();return(0,P.jsx)(b.Z,{title:r.formatMessage({id:"Save"}),children:(0,P.jsx)(S.Z,{title:"name your statement",description:(0,P.jsx)(k.Z,{width:"200px",ref:n}),onConfirm:function(){if(n.current){var e=n.current.input.value;console.log("InputRef.current",e),t&&t(e)}},onCancel:function(){},okText:"Save",cancelText:"Cancel",placement:"bottomRight",children:(0,P.jsx)(x.ZP,{type:"text",icon:(0,P.jsx)(j.Z,{})})})})},L=n(62950);var C=function(e){var t,n=e.onClose,r=e.onQuery,a=e.script,i=void 0===a?"Match (n) return n limit 10":a,c=e.onSave,s=e.id,l=e.isFetching,d=e.antdToken,f=(e.schemaData,e.timestamp,e.language),h=e.message,S=(0,p.useRef)(null),k=(0,O.Z)(),j=function(){var e=u()(o()().mark((function e(){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null==S||null===(t=S.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),r({id:s,script:n,language:f});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,P.jsxs)("div",{style:{},children:[(0,P.jsxs)(y.Z,{justify:"space-between",style:{paddingBottom:"8px"},children:[(0,P.jsx)(v.Z,{children:(0,P.jsxs)(g.Z.Text,{type:"secondary",style:{fontSize:"12px",textAlign:"center"},children:[(t=f,t.charAt(0).toUpperCase()+t.slice(1))," ",h]})}),(0,P.jsxs)(v.Z,{size:0,children:[(0,P.jsx)(b.Z,{title:k.formatMessage({id:"Query"}),children:(0,P.jsx)(x.ZP,{type:"text",icon:(0,P.jsx)(w.Z,{spin:l,style:{color:l?"#52c41a":d.green}}),onClick:j})}),c&&(0,P.jsx)(T,{onSave:function(e){var t,n=null==S||null===(t=S.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),r=(0,L.Z)();c&&c({id:r,script:n,name:e,language:f})}}),n&&(0,P.jsx)(b.Z,{title:k.formatMessage({id:"Share"}),children:(0,P.jsx)(x.ZP,{type:"text",icon:(0,P.jsx)(I.Z,{onClick:function(){var e,t=null==S||null===(e=S.current)||void 0===e||null===(e=e.codeEditor)||void 0===e?void 0:e.getValue();window.open("".concat(window.location.origin,"/querying?language=").concat(f,"&auto_run=true&global_script=").concat(encodeURIComponent(t)))}})})}),n&&(0,P.jsx)(b.Z,{title:k.formatMessage({id:"Delete"}),children:(0,P.jsx)(x.ZP,{type:"text",icon:(0,P.jsx)(E.Z,{onClick:function(){n&&n(s)}})})})]})]}),(0,P.jsx)(m.Z,{language:f,ref:S,value:i})]})},_=n(84723),N=n(15558),A=n.n(N),D=n(35215),F=n(65586),R=n(31192),Z=n(9069),G=n(57591),q=n(88766),M=n(31759),U=n.n(M),B=n(7234),z=n(86976),Y=function(e){var t=e.table,n=(0,p.useRef)(null),r=p.useState((function(){var e=function(e){var t=e[0],n={},r=[];Object.keys(t).forEach((function(e){var o=U()(t[e]);n[e]={key:e,type:o,enums:new Set},"number"===o&&r.push(e)})),e.forEach((function(e){Object.keys(e).forEach((function(t){n[t].enums.add(e[t])}))}));var o=Object.values(n).filter((function(e){return"string"===e.type})).sort((function(e,t){return e.enums.size<t.enums.size})).map((function(e){return e.key})),a=r[0],i=r[1],c=l()(o,2),u=c[0],s=c[1];return{type:r.length>1?"point":"interval",x:i||u,y:a,color:s,keys:Object.keys(n)}}(t);return{x:e.x,y:e.y,color:e.color,type:e.type,options:e.keys.map((function(e){return{label:e,value:e}}))}})),o=l()(r,2),a=o[0],c=o[1];console.log(a);var u=a.type,s=a.x,d=a.y,f=a.color,h=a.options;(0,p.useEffect)((function(){var e;return n.current&&((e=new z.kL({container:n.current,autoFit:!0})).options({type:u,data:t,encode:{x:s,y:d,color:f},transform:[{type:"dodgeX"}]}),e.render()),function(){n.current&&e.destroy()}}),[u,s,d,t,f,n]);return(0,P.jsxs)("div",{style:{padding:"16px",overflowX:"hidden"},children:[(0,P.jsxs)(v.Z,{style:{paddingBottom:"16px"},children:["Type:",(0,P.jsx)(B.default,{size:"small",defaultValue:u,style:{width:120},onChange:function(e){c((function(t){return i()(i()({},t),{},{type:e})}))},options:[{label:"interval",value:"interval"},{label:"point",value:"point"}]}),"X:",(0,P.jsx)(B.default,{size:"small",defaultValue:s,style:{width:120},onChange:function(e){c((function(t){return i()(i()({},t),{},{x:e})}))},options:h}),"Y:",(0,P.jsx)(B.default,{size:"small",defaultValue:d,style:{width:120},onChange:function(e){c((function(t){return i()(i()({},t),{},{y:e})}))},options:h}),"Color:",(0,P.jsx)(B.default,{size:"small",defaultValue:f,style:{width:120},onChange:function(e){c((function(t){return i()(i()({},t),{},{color:e})}))},options:h})]}),(0,P.jsx)("div",{ref:n,style:{width:"100%"}})]})},V=n(2268),H=n(35731),Q=n(36523),W=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"12px",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-8px";return(0,P.jsx)(P.Fragment,{children:Object.entries(t).map((function(t){var o=l()(t,2),a=o[0],i=o[1];return(0,P.jsxs)("div",{style:{paddingLeft:"16px",overflowWrap:"break-word",wordBreak:"break-all",whiteSpace:"pre-wrap"},children:[(0,P.jsxs)("span",{style:{color:"#F9822F",paddingLeft:n},children:['"',a,'" :']}),(0,P.jsx)("span",{style:{paddingLeft:"6px",textIndent:r},children:"object"===U()(i)&&null!==i?(0,P.jsxs)(P.Fragment,{children:["{",e(i,"24px","16px"),"}"]}):JSON.stringify(i,null,2)})]},a)}))})},J=function(e){var t=e.expandData,n=e.width;return(0,P.jsx)(y.Z,{children:Object.values(t).map((function(e){return e.key&&(0,P.jsxs)("div",{style:{marginLeft:"12px",width:"".concat(n,"%")},children:["{",W(e.data),"}"]},e.key)}))})},K=function(e){var t=e.data,n=t.map((function(e){var t=e.keys,n=e._fields;return t.reduce((function(e,t,r){var o=n[r];return e[t]={key:(0,L.Z)(),elementId:o.elementId,data:o,labels:o.labels?o.labels[0]:void 0,type:o.type,startNodeElementId:o.startNodeElementId,endNodeElementId:o.endNodeElementId},e.key=(0,L.Z)(),e}),{})})),r=t[0].keys,o=100/r.length,a=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,n){return n+1}}].concat(A()(r.map((function(e){return{title:e,width:"".concat(o,"%"),key:(0,L.Z)(),render:function(t){return n=t[e],r=n.startNodeElementId,o=n.endNodeElementId,a=n.type,i=n.elementId,c=n.labels,r&&o?(0,P.jsxs)("span",{children:["{",(0,P.jsx)(V.Icons.Arrow,{style:{color:"#F97108"}})," : ",a," } ID ",i]}):(0,P.jsxs)("span",{children:["{",(0,P.jsx)(V.Icons.Punctuation,{style:{color:"#B668B0"}})," : ",c," } ID ",i]});var n,r,o,a,i,c}}}))),[D.Z.EXPAND_COLUMN]);return(0,P.jsx)(D.Z,{size:"small",columns:a,dataSource:n,expandable:{expandedRowRender:function(e){return(0,P.jsx)(J,{expandData:e,width:o})},expandIcon:function(e){var t=e.expanded,n=e.onExpand,r=e.record;return t?(0,P.jsx)(H.Z,{style:{color:"#F97108"},onClick:function(e){return n(r,e)}}):(0,P.jsx)(Q.Z,{onClick:function(e){return n(r,e)}})},expandRowByClick:!0}})},$=function(e){var t=e.data,n=t[0],r="number"==typeof n?["value"]:Object.keys(n),o=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,n){return n+1}}].concat(A()(r.map((function(e){return{title:e,dataIndex:e,width:"".concat(100/r.length,"%"),key:e}})))),a=t.map((function(e,t){return"number"==typeof e?{value:e}:i()(i()({},e),{},{key:t})}));return(0,P.jsx)(D.Z,{size:"small",columns:o,dataSource:a})},X=function(e){var t=e.nodes,n=e.edges,r={},o=t.map((function(e){var t=e.id,n=e.label,o=e.properties;return r[t]=n,{key:t,id:t,label:n,properties:JSON.stringify(i()({},o),null,2)}})),a=n.map((function(e){var t=e.id,n=e.label,o=e.properties,a=e.source,i=e.target;return{key:t,id:t,label:"(".concat(r[a],")-[:").concat(n,"]-(").concat(r[i],")"),properties:JSON.stringify(o,null,2)}}));function c(e,t){if(e.length>t)return e.substring(0,t)+"..."}var u=[].concat(A()(o),A()(a)).map((function(e){var t=e.id,n=e.label,r=e.properties,o=r&&JSON.parse(r);return i()({id:t,label:n},o)})),s=u[0],l=Object.keys(s).map((function(e){return{title:e,dataIndex:e,key:e,width:180,render:function(e){return String(e).length>30?(0,P.jsx)(F.Z,{content:(0,P.jsx)("div",{style:{width:"500px",wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap"},children:e}),children:c(String(e),30)}):(0,P.jsx)(P.Fragment,{children:e})}}}));return(0,P.jsx)(D.Z,{columns:l,dataSource:u,scroll:{x:"max-content"},pagination:{simple:!0,pageSize:10,size:"small"}})},ee=function(e){var t,n=e.data,r=n.table,o=void 0===r?[]:r,a=n.nodes,c=void 0===a?[]:a,u=n.edges,s=void 0===u?[]:u,d=n.raw,f=c.length,h=s.length,m=o.length,w=(0,O.Z)();t=0===f&&0===h&&0!==m?w.formatMessage({id:"A total of {totalCount} records were retrieved"},{totalCount:m}):w.formatMessage({id:"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges."},{totalCount:f+h,nodeCount:f,edgeCount:h});var I,E=(0,p.useState)("table"),S=l()(E,2),k=S[0],j=S[1];return"table"===k&&(0!==c.length&&(I=(0,P.jsx)(X,{nodes:c,edges:s})),0!==o.length&&(I=(0,P.jsx)($,{data:o})),0===o.length&&"interactive"===window.GS_ENGINE_TYPE&&0!==d.records.length&&(I=(0,P.jsx)(K,{data:d.records}))),(0,P.jsxs)("div",{style:{overflowX:"scroll"},children:[(0,P.jsxs)(y.Z,{justify:"space-between",style:{padding:"0px 10px 10px 10px"},align:"center",children:[(0,P.jsx)(g.Z.Text,{children:t}),(0,P.jsxs)(v.Z,{children:[(0,P.jsx)(R.Z,{value:k,onChange:function(e){j(e)},options:[{value:"chart",icon:(0,P.jsx)(Z.Z,{}),label:"chart"},{value:"table",icon:(0,P.jsx)(G.Z,{})}]}),(0,P.jsx)(b.Z,{title:"download",children:(0,P.jsx)(x.ZP,{icon:(0,P.jsx)(q.Z,{}),type:"text",onClick:function(){var e=c.map((function(e){var t=e.id,n=e.label,r=e.properties,o=void 0===r?{}:r;return i()({id:t,label:n},o)})),t=s.map((function(e){var t=e.id,n=e.label,r=e.source,o=e.target,a=e.properties,c=void 0===a?{}:a;return i()({id:t,label:n,source:r,target:o},c)}));V.Utils.createDownload(JSON.stringify({nodes:e,edges:t},null,2),"result.json")}})})]})]}),I,"chart"===k&&0!==o.length&&(0,P.jsx)(Y,{table:o})]})},te=n(55874),ne=n(29643),re=n(24174),oe=n.n(re),ae=function(e){var t=e.data;return e.isFetching?(0,P.jsx)(te.ZP,{icon:(0,P.jsx)(ne.Z,{spin:!0}),status:"success",title:"Running"}):"error"===t.mode?(0,P.jsx)(te.ZP,{status:"error",title:t.raw&&t.raw.name,subTitle:t.raw&&t.raw.message}):(0,P.jsx)("div",{children:(0,P.jsx)(oe(),{src:t.raw})})},ie=n(53056),ce=n(13049),ue=n(31931),se=function(e){var t=e.data,n=e.isFetching,r=e.schemaData,o=e.graphId,a=(e.onQuery,p.useState(null)),i=l()(a,2),c=i[0],u=i[1],s=(0,O.Z)(),d=function(e,t,n){var r=e.nodes,o=void 0===r?[]:r,a=e.edges,i=void 0===a?[]:a,c=e.table,u=void 0===c?[]:c,s=(e.raw,o.length>0),l=i.length>0,p=u.length>0,d="raw",f=["raw"];return s&&(d="graph",f=["raw","table","graph"]),!s&&l&&(d="table",f=["raw","table"]),s||l||!p||(d="table",f=["raw","table"]),n&&(d=n),t&&(f=["raw"],d="raw"),{viewMode:d,options:f}}(t,n,c),f=d.viewMode,h=d.options,m=function(e){return-1!==h.indexOf(e)},y=[{label:s.formatMessage({id:"Graph"}),key:"graph",icon:(0,P.jsx)(ce.Z,{}),children:(0,P.jsx)(ie.Z,{data:t,schemaData:r,graphId:o}),disabled:!m("graph")},{label:s.formatMessage({id:"Table"}),key:"table",icon:(0,P.jsx)(G.Z,{}),children:(0,P.jsx)(ee,{data:t}),disabled:!m("table")},{label:s.formatMessage({id:"Raw"}),key:"raw",icon:(0,P.jsx)(ue.Z,{}),children:(0,P.jsx)(ae,{data:t,isFetching:n}),disabled:!m("raw")}];return(0,P.jsx)("div",{style:{padding:"16px 0px"},children:(0,P.jsx)(_.Z,{items:y,size:"small",type:"card",activeKey:f,onChange:function(e){u(e)}})})},le=(0,p.memo)(se),pe=V.Utils.debounce,de=d.Z.useToken,fe=function(e){var t=e.onQuery,n=e.onClose,r=e.onCancel,a=e.onSave,c=e.script,s=e.id,d=e.active,f=e.mode,m=e.schemaData,y=e.enableImmediateQuery,v=e.graphId,g=e.timestamp,b=e.language,x=de().token,w=(0,O.Z)(),I=d&&"flow"===f?{border:"1px solid ".concat(x.colorBorder)}:{border:"1px solid  ".concat(x.colorBorder)},E=(0,p.useRef)(null),S=(0,p.useState)({data:{},isFetching:!1,startTime:0,endTime:0,abort:!1}),k=l()(S,2),j=k[0],T=k[1],L=j.data,_=j.isFetching,N=j.startTime,A=j.endTime;(0,p.useEffect)((function(){E.current&&d&&"flow"===f&&E.current.scrollIntoView({behavior:"smooth"})}),[d]);var D=pe(function(){var e=u()(o()().mark((function e(n){var a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=4;break}return r&&r(n),T((function(e){return i()(i()({},e),{},{isFetching:!1,data:{}})})),e.abrupt("return");case 4:return T((function(e){return i()(i()({},e),{},{isFetching:!0,startTime:(new Date).getTime()})})),e.next=7,t(n);case 7:a=e.sent,T((function(e){return i()(i()({},e),{},{data:a,isFetching:!1,endTime:(new Date).getTime()})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),500);(0,p.useEffect)((function(){y&&(console.log("enableImmediateQuery script",y,c,b),D({id:s,script:c,language:b}))}),[y]);var F=A-N<0?w.formatMessage({id:"query submmited on {submitTime}. It's running ... "},{submitTime:h()(N).format("HH:mm:ss YYYY-MM-DD")}):w.formatMessage({id:"query submmited on {submitTime}. Running {runningTime} ms"},{submitTime:h()(N).format("HH:mm:ss YYYY-MM-DD"),runningTime:A-N});return(0,P.jsxs)("div",{ref:E,style:i()(i()({display:"flex",flexDirection:"column",flex:1,margin:"12px",padding:"8px 16px",borderRadius:"8px"},I),{},{background:x.colorBgContainer}),children:[(0,P.jsx)(C,{message:F,language:b,timestamp:g,schemaData:m,id:s,script:c,onClose:n,onQuery:D,onSave:a,isFetching:_,antdToken:x}),(0,P.jsx)(le,{data:L,isFetching:_,schemaData:m,graphId:v,onQuery:t})]})},he=(0,p.memo)(fe)},53056:function(e,t,n){n.d(t,{Z:function(){return F}});var r=n(26068),o=n.n(r),a=n(48305),i=n.n(a),c=n(67825),u=n.n(c),s=n(50959),l=n(17905),p=n(38943),d=n(53531),f=n(84155),h=n(2268),m=n(16835),y=n(24279),v=n(63806),g=n(90228),b=n.n(g),x=n(87999),w=n.n(x),I=n(5576),E=h.Utils.storage,S=function(){var e=w()(b()().mark((function e(t){var n,r,o,a,i,c,u;return b()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=E.get("query_language")||"cypher",r=E.get("query_endpoint")||"",o=E.get("query_initiation"),a=E.get("query_username"),i=E.get("query_password"),c=E.get("query_initiation_service"),e.prev=6,u={script:t,language:n,endpoint:r,username:a,password:i},"Server"!==o||!c){e.next=12;break}return e.next=11,fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){return e.success?e.data:{nodes:[],edges:[]}}));case 11:return e.abrupt("return",e.sent);case 12:return e.abrupt("return",(0,I.aq)(u));case 15:return e.prev=15,e.t0=e.catch(6),e.abrupt("return",{nodes:[],edges:[]});case 18:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=w()(b()().mark((function e(t){var n,r,o,a;return b()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,r=t.selectIds,o="\n    MATCH ".concat(n,"\n    WHERE  elementId(a) IN [").concat(r,"] \n    RETURN a,b,c\n    "),e.next=4,S(o);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=w()(b()().mark((function e(t){var n,r;return b()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.schema,r={all:[{key:"(a)-[b]-(c)",label:"One-Hop Neighbors"}]},n.nodes.forEach((function(e){r[e.label]=O(n,e.label)})),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function O(e,t){var n=[];return e.edges.forEach((function(e){var r=e.source,o=e.target,a=e.label;if((t===r||t===o)&&r===o)return"both",void n.push({key:"(a:".concat(r,")-[b:").concat(a,"]-(c:").concat(o,")"),label:"[".concat(a,"]-(").concat(o,")")});r===t&&("out",n.push({key:"(a:".concat(r,")-[b:").concat(a,"]->(c:").concat(o,")"),label:"[".concat(a,"]->(").concat(o,")")})),o===t&&("in",n.push({key:"(a:".concat(r,")<-[b:").concat(a,"]-(c:").concat(o,")"),label:"[".concat(a,"]<-(").concat(o,")")}))})),[{key:"(a)-[b]-(c)",label:"One-Hop Neighbors"}].concat(n)}var P={queryNeighborData:k,queryNeighborItems:j,queryStatement:S},T=function(){var e=w()(b()().mark((function e(t){var n,r,o,a;return b()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.selectIds,r=n.join(","),o="g.V().hasId(".concat(r,").both().dedup()"),e.next=5,S(o);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=w()(b()().mark((function e(t){return b()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{all:[{key:"(a)-[b]-(c)",label:"One-Hop Neighbors"}]});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C={queryStatement:S,queryNeighborData:T,queryNeighborItems:L},_=n(11527),N=function(){var e=(0,h.useSection)().toggleLeftSide;return(0,_.jsx)(l.Z,{title:(0,_.jsx)(f.Z,{id:"Style settings"}),placement:"left",children:(0,_.jsx)(p.ZP,{icon:(0,_.jsx)(v.Z,{}),onClick:function(){return e()},type:"text"})})};(0,m.registerIcons)();var A=function(e){var t=e.data,n=e.schema,r=e.graphId,o=e.id,a=(0,s.useRef)(null),i="gremlin"===h.Utils.storage.get("query_language")?C:P,c=d.Z.useToken().token;return(0,_.jsx)("div",{style:{borderRadius:"8px",height:"500px",background:c.colorBgContainer},ref:a,children:(0,_.jsx)(m.GraphProvider,{id:o,services:i,children:(0,_.jsxs)(h.Section,{splitBorder:!0,leftSide:(0,_.jsx)(m.StyleSetting,{}),autoResize:!1,rightSideStyle:{width:"300px",padding:"12px 0px 12px 18px"},defaultCollapsed:{leftSide:!0,rightSide:!0},children:[(0,_.jsx)(m.Prepare,{data:t,schema:n,graphId:r}),(0,_.jsx)(m.Canvas,{}),(0,_.jsx)(m.ZoomStatus,{style:{position:"absolute",bottom:0,left:0,zIndex:998,padding:"12px"}}),(0,_.jsx)(m.BasicInteraction,{}),(0,_.jsx)(m.ClearStatus,{}),(0,_.jsx)(m.PropertiesPanel,{}),(0,_.jsx)(m.Loading,{}),(0,_.jsxs)(m.ContextMenu,{children:[(0,_.jsx)(m.NeighborQuery,{}),(0,_.jsx)(m.DeleteLeafNodes,{}),(0,_.jsx)(m.DeleteNode,{})]}),(0,_.jsxs)(m.Toolbar,{style:{position:"absolute",top:"20px",left:"20px",right:"unset"},children:[(0,_.jsx)(N,{}),(0,_.jsx)(y.Z,{style:{margin:"0px"}}),(0,_.jsx)(h.FullScreen,{containerRef:a}),(0,_.jsx)(m.ZoomFit,{}),(0,_.jsx)(m.Brush,{}),(0,_.jsx)(m.FixedMode,{}),(0,_.jsx)(y.Z,{style:{margin:"0px"}}),(0,_.jsx)(m.SwitchEngine,{}),(0,_.jsx)(m.RunCluster,{}),(0,_.jsx)(m.Export,{})]})]})})})},D=["properties","constraints"];var F=function(e){var t,n=e.data,r=e.schemaData,a=e.graphId,c={nodes:(t=r).nodes,edges:t.edges.map((function(e){var t=e.properties,n=e.constraints,r=u()(e,D),a=i()(n[0],2),c=a[0],s=a[1];return o()(o()({},r),{},{source:c,target:s,properties:t})}))};return(0,_.jsx)("div",{style:{width:"100%"},children:(0,_.jsx)(A,{data:h.Utils.fakeSnapshot(n),schema:c,graphId:a})})}},15776:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(85430);const r=[{value:"update website",paraId:0,tocIndex:2},{value:"update website",paraId:1,tocIndex:4},{value:"update website",paraId:2,tocIndex:6},{value:"update website",paraId:3,tocIndex:8},{value:"update studio graph",paraId:4,tocIndex:10},{value:"update website",paraId:5,tocIndex:12},{value:"update studio graph",paraId:6,tocIndex:14},{value:"update site",paraId:7,tocIndex:16},{value:"update studio-graph",paraId:8,tocIndex:18},{value:"update studio",paraId:9,tocIndex:20},{value:"update site",paraId:10,tocIndex:22},{value:"update version",paraId:11,tocIndex:24},{value:"update",paraId:12,tocIndex:26},{value:"update version",paraId:13,tocIndex:28},{value:"update graph",paraId:14,tocIndex:30},{value:"First Release",paraId:15,tocIndex:32}]},70857:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(8646);const r=[]},12457:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(4480);const r=[]},2565:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(93238);const r=[]},74972:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(48741);const r=[]},27705:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(36666);const r=[{value:"open source : ",paraId:0,tocIndex:0},{value:"https://undraw.co/illustrations",paraId:0,tocIndex:0}]},54520:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(19895);const r=[]},57481:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(54581);const r=[]},28748:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(518);const r=[]},41895:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(3750);const r=[]},56309:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(43716);const r=[]},90389:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(43765);const r=[]},20391:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(44412);const r=[]},27388:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(85792);const r=[]},14872:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(44117);const r=[]},95081:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(4866);const r=[{value:"封装了安全访问 localStorage 的通用工具库，提供类型安全的存取方法。",paraId:0,tocIndex:1},{value:"API",paraId:1,tocIndex:1},{value:"安全获取存储值（需显式指定返回类型）",paraId:2,tocIndex:2},{value:"参数",paraId:3,tocIndex:2},{value:"类型",paraId:3,tocIndex:2},{value:"说明",paraId:3,tocIndex:2},{value:"key",paraId:3,tocIndex:2},{value:"string",paraId:3,tocIndex:2},{value:"要获取的存储键名",paraId:3,tocIndex:2},{value:"返回",paraId:3,tocIndex:2},{value:"T",paraId:3,tocIndex:2},{value:" | undefined",paraId:3,tocIndex:2},{value:"获取到存储的值",paraId:3,tocIndex:2},{value:"安全获取存储值（需显式指定返回类型）",paraId:4,tocIndex:3},{value:"参数",paraId:5,tocIndex:3},{value:"类型",paraId:5,tocIndex:3},{value:"说明",paraId:5,tocIndex:3},{value:"key",paraId:5,tocIndex:3},{value:"string",paraId:5,tocIndex:3},{value:"要存储的键名",paraId:5,tocIndex:3},{value:"value",paraId:5,tocIndex:3},{value:"any",paraId:5,tocIndex:3},{value:"要存储的值",paraId:5,tocIndex:3},{value:"import { Utils } from '@graphscope/studio-components';\nconst { storage } = Utils;\n\nstorage.set('user_settings', { \n      theme: 'dark',\n      fontSize: 14 \n});\ninterface UserSettings {\n  theme: string;\n  fontSize: number;\n};\nconst settings = storage.get<UserSettings>('user_settings'); // 返回{ theme: 'dark', fontSize: 14  }\n\n",paraId:6,tocIndex:4},{value:"判断当前是否为暗黑模式",paraId:7,tocIndex:5},{value:"参数",paraId:8,tocIndex:5},{value:"类型",paraId:8,tocIndex:5},{value:"说明",paraId:8,tocIndex:5},{value:"返回",paraId:8,tocIndex:5},{value:"boolean",paraId:8,tocIndex:5},{value:"是否为暗黑主题",paraId:8,tocIndex:5},{value:"import { Utils } from '@graphscope/studio-components';\nconst { isDarkTheme } = Utils;\n\nconst isDark = isDarkTheme(); // 返回 boolean\n",paraId:9,tocIndex:6},{value:"安全解析 JSON 字符串的工具函数，能够处理一些常见的解析错误。",paraId:10,tocIndex:7},{value:"参数",paraId:11,tocIndex:7},{value:"类型",paraId:11,tocIndex:7},{value:"说明",paraId:11,tocIndex:7},{value:"arg",paraId:11,tocIndex:7},{value:"string",paraId:11,tocIndex:7},{value:"要解析的字符串",paraId:11,tocIndex:7},{value:"返回",paraId:11,tocIndex:7},{value:"any",paraId:11,tocIndex:7},{value:"解析后的值或原始输入",paraId:11,tocIndex:7},{value:"import { Utils } from '@graphscope/studio-components';\nconst { safeParse } = Utils;\n// 正常的 JSON 字符串\nconst jsonString = '{\"name\": \"John\", \"age\": 30}';\nconst parsedData = safeParse(jsonString);\nconsole.log(parsedData); // 输出：{ name: \"John\", age: 30 }\n\n// 缺少双引号的字符串\nconst invalidJson = 'hello world';\nconst fixedData = safeParse(invalidJson);\nconsole.log(fixedData); // 输出：'hello world'\n\n// 非字符串输入\nconst nonStringInput = 12345;\nconst originalInput = safeParse(nonStringInput);\nconsole.log(originalInput); // 输出：12345\n",paraId:12,tocIndex:8},{value:"防抖函数，用于限制函数调用频率，避免短时间内多次调用,适用于需要限制调用频率的场景，如窗口调整、键盘事件等",paraId:13,tocIndex:9},{value:"参数",paraId:14,tocIndex:9},{value:"类型",paraId:14,tocIndex:9},{value:"说明",paraId:14,tocIndex:9},{value:"func",paraId:14,tocIndex:9},{value:"T",paraId:14,tocIndex:9},{value:"需要防抖处理的函数",paraId:14,tocIndex:9},{value:"wait",paraId:14,tocIndex:9},{value:"number",paraId:14,tocIndex:9},{value:"延迟执行的时间间隔（毫秒）",paraId:14,tocIndex:9},{value:"返回",paraId:14,tocIndex:9},{value:"any",paraId:14,tocIndex:9},{value:"防抖后的函数",paraId:14,tocIndex:9},{value:"import { Utils } from '@graphscope/studio-components';\nconst { debounce } = Utils;\n\n// 示例函数\nconst logMessage = (message: string) => console.log(message);\n// 创建防抖函数\nconst debouncedLog = debounce(logMessage, 500);\n\n// 测试防抖效果\ndebouncedLog('Hello');\ndebouncedLog('World');\n\n// 实际上只有最后一次调用会在延迟后执行\nsetTimeout(() => {\n  debouncedLog('Delayed Message');\n}, 600);\n",paraId:15,tocIndex:10},{value:"获取当前 URL 中的所有查询参数，并将其转换为对象形式。",paraId:16,tocIndex:11},{value:"参数",paraId:17,tocIndex:11},{value:"类型",paraId:17,tocIndex:11},{value:"说明",paraId:17,tocIndex:11},{value:"返回",paraId:17,tocIndex:11},{value:"{ [key: string]: string }",paraId:17,tocIndex:11},{value:"包含所有查询参数的对象",paraId:17,tocIndex:11},{value:'import { Utils } from \'@graphscope/studio-components\';\nconst { getAllSearchParams } = Utils;\n\n// 假设当前 URL 是：http://example.com/?name=John&age=30\nconst params = getAllSearchParams();\nconsole.log(params); // 输出：{ name: "John", age: "30" }\n',paraId:18,tocIndex:12},{value:"参数",paraId:19,tocIndex:13},{value:"类型",paraId:19,tocIndex:13},{value:"说明",paraId:19,tocIndex:13},{value:"key",paraId:19,tocIndex:13},{value:"string",paraId:19,tocIndex:13},{value:"要获取的查询参数名",paraId:19,tocIndex:13},{value:"返回",paraId:19,tocIndex:13},{value:"string",paraId:19,tocIndex:13},{value:"获取到的查询参数值或空字符串",paraId:19,tocIndex:13},{value:"import { Utils } from '@graphscope/studio-components';\nconst { getSearchParams } = Utils;\n\n// 假设当前 URL 是：http://example.com/?name=John&age=30\nconst name = getSearchParams('name');\nconsole.log(name); // 输出：'John'\n\nconst age = getSearchParams('age');\nconsole.log(age); // 输出：'30'\n\nconst nonExistentParam = getSearchParams('nonexistent');\nconsole.log(nonExistentParam); // 输出：''\n",paraId:20,tocIndex:14},{value:"参数",paraId:21,tocIndex:15},{value:"类型",paraId:21,tocIndex:15},{value:"说明",paraId:21,tocIndex:15},{value:"params",paraId:21,tocIndex:15},{value:"Record<string, string>",paraId:21,tocIndex:15},{value:"要设置的查询参数对象，键为参数名，值为参数值。",paraId:21,tocIndex:15},{value:"hashMode",paraId:21,tocIndex:15},{value:"boolean (可选)",paraId:21,tocIndex:15},{value:"是否使用 hash router 模式，默认为 false。",paraId:21,tocIndex:15},{value:"import { Utils } from '@graphscope/studio-components';\nconst { setSearchParams } = Utils;\n\n// 设置查询参数\nsetSearchParams({\n  name: 'John',\n  age: '30'\n});\n\n// 假设当前 URL 是：http://example.com/\n// 更新后 URL 将变为：http://example.com/?name=John&age=30\n\n// 如果需要使用 hash router 模式\nsetSearchParams({\n  name: 'Jane',\n  age: '25'\n}, true);\n\n// 假设当前 URL 是：http://example.com/#/\n// 更新后 URL 将变为：http://example.com/#/?name=Jane&age=25\n",paraId:22,tocIndex:16},{value:"移除当前 URL 中指定的查询参数。",paraId:23,tocIndex:17},{value:"参数",paraId:24,tocIndex:17},{value:"类型",paraId:24,tocIndex:17},{value:"说明",paraId:24,tocIndex:17},{value:"deleteKeys",paraId:24,tocIndex:17},{value:"string[]",paraId:24,tocIndex:17},{value:"要移除的查询参数名数组。",paraId:24,tocIndex:17},{value:"HashMode",paraId:24,tocIndex:17},{value:"boolean (可选)",paraId:24,tocIndex:17},{value:"是否使用 hash router 模式，默认为 false。",paraId:24,tocIndex:17},{value:"import { Utils } from '@graphscope/studio-components';\nconst { removeSearchParams } = Utils;\n\n// 移除查询参数\nremoveSearchParams(['name', 'age']);\n\n// 假设当前 URL 是：http://example.com/?name=John&age=30&city=NewYork\n// 更新后 URL 将变为：http://example.com/?city=NewYork\n\n// 如果需要使用 hash router 模式\nremoveSearchParams(['name', 'age'], true);\n\n// 假设当前 URL 是：http://example.com/#/?name=John&age=30&city=NewYork\n// 更新后 URL 将变为：http://example.com/#/?city=NewYork\n",paraId:25,tocIndex:18},{value:"获取当前页面的导航路径。",paraId:26,tocIndex:19},{value:"参数",paraId:27,tocIndex:19},{value:"类型",paraId:27,tocIndex:19},{value:"说明",paraId:27,tocIndex:19},{value:"返回",paraId:27,tocIndex:19},{value:"string",paraId:27,tocIndex:19},{value:"当前页面的导航路径",paraId:27,tocIndex:19},{value:"import { Utils } from '@graphscope/studio-components';\nconst { getCurrentNav } = Utils;\n\n// 假设当前 URL 是：http://example.com/path/to/page 或 http://example.com/#/path/to/page\nconst currentNav = getCurrentNav();\nconsole.log(currentNav); // 输出：'/to'\n",paraId:28,tocIndex:20},{value:"获取当前 URL 查询字符串中指定参数的值。",paraId:29,tocIndex:21},{value:"参数",paraId:30,tocIndex:21},{value:"类型",paraId:30,tocIndex:21},{value:"说明",paraId:30,tocIndex:21},{value:"key",paraId:30,tocIndex:21},{value:"string",paraId:30,tocIndex:21},{value:"要获取的查询参数名",paraId:30,tocIndex:21},{value:"返回",paraId:30,tocIndex:21},{value:"string",paraId:30,tocIndex:21},{value:"获取到的查询参数值或 null",paraId:30,tocIndex:21},{value:"import { Utils } from '@graphscope/studio-components';\nconst { searchParamOf } = Utils;\n\n// 假设当前 URL 是：http://example.com/?name=John&age=30\nconst name = searchParamOf('name');\nconsole.log(name); // 输出：'John'\n\nconst age = searchParamOf('age');\nconsole.log(age); // 输出：'30'\n\nconst nonExistentParam = searchParamOf('nonexistent');\nconsole.log(nonExistentParam); // 输出：null\n",paraId:31,tocIndex:22},{value:"获取当前 URL 中 hash 部分的所有查询参数，并将其转换为对象形式。",paraId:32,tocIndex:23},{value:"参数",paraId:33,tocIndex:23},{value:"类型",paraId:33,tocIndex:23},{value:"说明",paraId:33,tocIndex:23},{value:"返回",paraId:33,tocIndex:23},{value:"{ [key: string]: string }",paraId:33,tocIndex:23},{value:"包含所有查询参数的对象",paraId:33,tocIndex:23},{value:'import { Utils } from \'@graphscope/studio-components\';\nconst { getUrlParams } = Utils;\n\n// 假设当前 URL 是：http://example.com/#/?name=John&age=30\nconst params = getUrlParams();\nconsole.log(params); // 输出：{ name: "John", age: "30" }\n',paraId:34,tocIndex:24},{value:"创建对象的深拷贝。",paraId:35,tocIndex:25},{value:"参数",paraId:36,tocIndex:25},{value:"类型",paraId:36,tocIndex:25},{value:"说明",paraId:36,tocIndex:25},{value:"obj",paraId:36,tocIndex:25},{value:"any",paraId:36,tocIndex:25},{value:"要进行深拷贝的对象",paraId:36,tocIndex:25},{value:"返回",paraId:36,tocIndex:25},{value:"any",paraId:36,tocIndex:25},{value:"深拷贝后的新对象",paraId:36,tocIndex:25},{value:'import { Utils } from \'@graphscope/studio-components\';\nconst { fakeSnapshot } = Utils;\n\n// 示例对象\nconst originalObj = {\n  name: \'John\',\n  age: 30,\n  address: {\n    city: \'New York\'\n  }\n};\n// 创建深拷贝\nconst snapshot = fakeSnapshot(originalObj);\nconsole.log(snapshot); // 输出：{ name: "John", age: 30, address: { city: "New York" } }\n\n// 修改原始对象\noriginalObj.name = \'Jane\';\n\nconsole.log(originalObj); // 输出：{ name: "Jane", age: 30, address: { city: "New York" } }\nconsole.log(snapshot); // 输出：{ name: "John", age: 30, address: { city: "New York" } }\n',paraId:37,tocIndex:26},{value:"下载指定的数据内容。",paraId:38,tocIndex:27},{value:"参数",paraId:39,tocIndex:27},{value:"类型",paraId:39,tocIndex:27},{value:"说明",paraId:39,tocIndex:27},{value:"queryData",paraId:39,tocIndex:27},{value:"string",paraId:39,tocIndex:27},{value:"下载文件的名称",paraId:39,tocIndex:27},{value:"states",paraId:39,tocIndex:27},{value:"BlobPart",paraId:39,tocIndex:27},{value:"要下载的数据内容",paraId:39,tocIndex:27},{value:"import { Utils } from '@graphscope/studio-components';\nconst { download } = Utils;\n\n// 示例数据\nconst data = 'Hello, world!';\nconst blob = new Blob([data], { type: 'text/plain' });\n\n// 下载文件\ndownload('example.txt', blob);\n",paraId:40,tocIndex:28},{value:"下载指定的数据 URL 图像。",paraId:41,tocIndex:29},{value:"参数",paraId:42,tocIndex:29},{value:"类型",paraId:42,tocIndex:29},{value:"说明",paraId:42,tocIndex:29},{value:"dataUrl",paraId:42,tocIndex:29},{value:"string",paraId:42,tocIndex:29},{value:"数据 URL 字符串，通常为图像数据",paraId:42,tocIndex:29},{value:"name",paraId:42,tocIndex:29},{value:"string",paraId:42,tocIndex:29},{value:"下载文件的名称",paraId:42,tocIndex:29},{value:"import { Utils } from '@graphscope/studio-components';\nconst { downloadImage } = Utils;\n\n// 示例数据 URL 和文件名\nconst imageDataUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA...'; // 假设这是一个有效的 PNG 图像数据 URL\nconst imageName = 'example.png';\n\n// 下载图像文件\ndownloadImage(imageDataUrl, imageName);\n",paraId:43,tocIndex:30},{value:"创建并下载指定内容的文件。",paraId:44,tocIndex:31},{value:"参数",paraId:45,tocIndex:31},{value:"类型",paraId:45,tocIndex:31},{value:"说明",paraId:45,tocIndex:31},{value:"content",paraId:45,tocIndex:31},{value:"string | Blob",paraId:45,tocIndex:31},{value:"要下载的内容（支持字符串或二进制数据）",paraId:45,tocIndex:31},{value:"filename",paraId:45,tocIndex:31},{value:"string (可选)",paraId:45,tocIndex:31},{value:"下载文件的名称，默认为 'untitled.txt'",paraId:45,tocIndex:31},{value:"import { Utils } from '@graphscope/studio-components';\nconst { createDownload } = Utils;\n\n// 下载文本内容\ncreateDownload('Hello World', 'greeting.txt');\n\n// 下载二进制数据（如图片）\nconst imageBlob = new Blob([/* 二进制数据 */], { type: 'image/png' });\ncreateDownload(imageBlob, 'screenshot.png');\n",paraId:46,tocIndex:32},{value:"根据自定义分组函数对数组进行分组。",paraId:47,tocIndex:33},{value:"参数",paraId:48,tocIndex:33},{value:"类型",paraId:48,tocIndex:33},{value:"说明",paraId:48,tocIndex:33},{value:"array",paraId:48,tocIndex:33},{value:"any[]",paraId:48,tocIndex:33},{value:"需要分组的原始数组",paraId:48,tocIndex:33},{value:"fun",paraId:48,tocIndex:33},{value:"(item: any) => string",paraId:48,tocIndex:33},{value:"生成分组键值的函数",paraId:48,tocIndex:33},{value:"返回",paraId:48,tocIndex:33},{value:"{ [key: string]: any[] }",paraId:48,tocIndex:33},{value:"分组后的对象，键为分组依据，值为对应的元素数组",paraId:48,tocIndex:33},{value:"import { Utils } from '@graphscope/studio-components';\nconst { groupBy } = Utils;\n\nconst users = [\n  { name: 'Alice', age: 25 },\n  { name: 'Bob', age: 30 },\n  { name: 'Charlie', age: 25 }\n];\n\n// 按年龄分组\nconst groupedUsers = groupBy(users, user => `age_${user.age}`);\n\n/* 输出结果：\n{\n  \"age_25\": [\n    { name: 'Alice', age: 25 },\n    { name: 'Charlie', age: 25 }\n  ],\n  \"age_30\": [\n    { name: 'Bob', age: 30 }\n  ]\n}\n*/\n",paraId:49,tocIndex:34},{value:"根据图数据生成节点和边的模式定义。",paraId:50,tocIndex:35},{value:"参数",paraId:51,tocIndex:35},{value:"类型",paraId:51,tocIndex:35},{value:"说明",paraId:51,tocIndex:35},{value:"graphData",paraId:51,tocIndex:35},{value:"ISchema",paraId:51,tocIndex:35},{value:"包含节点和边的图数据",paraId:51,tocIndex:35},{value:"defaultOptions",paraId:51,tocIndex:35},{value:"object (可选)",paraId:51,tocIndex:35},{value:"配置选项，需包含：",paraId:51,tocIndex:35},{value:"- nodeLabelFromProperties: 节点标签来源字段",paraId:51,tocIndex:35},{value:"- edgeLabelFromProperties: 边标签来源字段",paraId:51,tocIndex:35},{value:"返回",paraId:51,tocIndex:35},{value:"ISchema",paraId:51,tocIndex:35},{value:"生成的模式对象，包含：",paraId:51,tocIndex:35},{value:"- nodes: 节点模式数组",paraId:51,tocIndex:35},{value:"- edges: 边模式数组",paraId:51,tocIndex:35},{value:"interface ISchema {\n  nodes: Array<{\n    label: string\n    properties: Array<{ name: string; type: string }>\n  }>;\n  edges: Array<{\n    label: string\n    source: string\n    target: string\n    properties: Array<{ name: string; type: string }>\n  }>;\n}\n",paraId:52,tocIndex:36},{value:"import { Utils } from '@graphscope/studio-components';\nconst { generatorSchemaByGraphData } = Utils;\n// 输入数据\nconst graphData = {\n  nodes: [\n    {\n      id: 'user_1',\n      label: 'Person',\n      data: { \n        name: 'Alice',\n        age: 28,\n        address: {\n          city: 'Beijing',\n          zipcode: 100000\n        }\n      }\n    },\n    {  // 新增目标节点\n      id: 'user_2',\n      label: 'Person',\n      data: {\n        name: 'Bob',\n        age: 30\n      }\n    }\n  ],\n  edges: [{\n    id: 'rel_1',\n    source: 'user_1',\n    target: 'user_2',\n    data: {\n      relationType: 'FRIEND',\n      since: '2020-03-15'\n    }\n  }]\n};\n\n// 生成 Schema\nconst schema = generatorSchemaByGraphData(graphData, {\n  edgeLabelFromProperties: 'relationType'\n});\n    console.log('schema::: ', schema);\n\n/* 输出结果：\n{\n  nodes: [{\n    label: \"Person\",\n    properties: [\n      { name: \"name\", type: \"string\" },\n      { name: \"age\", type: \"number\" },\n      { name: \"address.city\", type: \"string\" },\n      { name: \"address.zipcode\", type: \"number\" }\n    ]\n  }],\n  edges: [{\n    label: \"FRIEND\",\n    source: \"Person\",\n    target: \"Person\",\n    properties: [\n      { name: \"since\", type: \"date\" }\n    ]\n  }]\n}\n*/\n",paraId:53,tocIndex:37},{value:"将同步函数转换为基于 Web Worker 的异步函数，并返回执行耗时。",paraId:54,tocIndex:38},{value:"参数",paraId:55,tocIndex:38},{value:"类型",paraId:55,tocIndex:38},{value:"说明",paraId:55,tocIndex:38},{value:"fn",paraId:55,tocIndex:38},{value:"(data: T) => U;",paraId:55,tocIndex:38},{value:"需要异步执行的同步函数",paraId:55,tocIndex:38},{value:"返回",paraId:55,tocIndex:38},{value:"(arg:T)=>Promise<{ result: U; duration: number }>",paraId:55,tocIndex:38},{value:"该函数接受原始参数并返回 Promise 对象",paraId:55,tocIndex:38},{value:"import {Utils} from '@graphscope/studio-components';\nconst {asyncFunctionWithWorker} = Utils;\n// 定义一个计算密集型的同步函数\nconst fibonacci = (n: number): number => {\n  if (n <= 1) return n;\n  return fibonacci(n - 1) + fibonacci(n - 2);\n};\n\n// 创建异步版本\nconst asyncFibonacci = asyncFunctionWithWorker(fibonacci);\n\n// 在组件中使用\nconst calculate = async () => {\n  try {\n    const { result, duration } = await asyncFibonacci(40);\n    console.log(`结果：${result}, 耗时：${duration.toFixed(2)}ms`);\n    // 输出示例：结果：102334155, 耗时：1418.70ms\n  } catch (error) {\n    console.error('计算失败:', error);\n  }\n};\n",paraId:56,tocIndex:39},{value:"异步读取文件内容并返回文本数据。",paraId:57,tocIndex:40},{value:"参数",paraId:58,tocIndex:40},{value:"类型",paraId:58,tocIndex:40},{value:"说明",paraId:58,tocIndex:40},{value:"file",paraId:58,tocIndex:40},{value:"File",paraId:58,tocIndex:40},{value:"需要读取的文件对象",paraId:58,tocIndex:40},{value:"返回",paraId:58,tocIndex:40},{value:"Promise<string>",paraId:58,tocIndex:40},{value:"包含文件内容的 Promise 对象",paraId:58,tocIndex:40},{value:"import { Utils } from '@graphscope/studio-components';\nconst { parseFile } = Utils;\n\n// 从 input 元素获取文件\nconst fileInput = document.querySelector('input[type=\"file\"]');\nconst selectedFile = fileInput.files?.[0];\n\n// 读取文件内容\nif (selectedFile) {\n  parseFile(selectedFile)\n    .then(content => {\n      console.log('文件内容:', content); \n    })\n    .catch(error => {\n      console.error('读取失败:', error);\n    });\n}\n",paraId:59,tocIndex:41},{value:"从 CSV 文本中提取表头并检测分隔符。",paraId:60,tocIndex:42},{value:"参数",paraId:61,tocIndex:42},{value:"类型",paraId:61,tocIndex:42},{value:"说明",paraId:61,tocIndex:42},{value:"contents",paraId:61,tocIndex:42},{value:"string",paraId:61,tocIndex:42},{value:"CSV 格式的原始文本内容",paraId:61,tocIndex:42},{value:"返回",paraId:61,tocIndex:42},{value:"{ header: string[]; quoting: boolean; delimiter: string }",paraId:61,tocIndex:42},{value:"包含解析结果的对象",paraId:61,tocIndex:42},{value:'const csvContent = `"姓名","年龄","性别"\n"张三","25","男"\n"李四","30","女"`;\n\n// 解析 CSV 元数据\n  const res = extractHeaderAndDelimiter(csvContent);\n  /* 输出结果：\n    { header: [\'姓名\',\'年龄\',\'性别\'], quoting: true, delimiter: "," }\n  */\n',paraId:62,tocIndex:43},{value:"将字节数转换为易读的文件大小格式。",paraId:63,tocIndex:44},{value:"参数",paraId:64,tocIndex:44},{value:"类型",paraId:64,tocIndex:44},{value:"说明",paraId:64,tocIndex:44},{value:"size",paraId:64,tocIndex:44},{value:"number",paraId:64,tocIndex:44},{value:"文件大小（单位：字节）",paraId:64,tocIndex:44},{value:"返回",paraId:64,tocIndex:44},{value:"string",paraId:64,tocIndex:44},{value:"格式化后的文件大小字符串（包含单位）",paraId:64,tocIndex:44},{value:'import { Utils } from \'@graphscope/studio-components\';\nconst { getFileSize } = Utils;\n\n// 转换文件大小\nconsole.log(getFileSize(1024));       // 输出："1.00 KB"\nconsole.log(getFileSize(3145728));    // 输出："3.00 MB"\nconsole.log(getFileSize(1073741824)); // 输出："1.00 GB"\n',paraId:65,tocIndex:45},{value:"检测 CSV 数据列的数据类型。",paraId:66,tocIndex:46},{value:"参数",paraId:67,tocIndex:46},{value:"类型",paraId:67,tocIndex:46},{value:"说明",paraId:67,tocIndex:46},{value:"dataLines",paraId:67,tocIndex:46},{value:"any[][]",paraId:67,tocIndex:46},{value:"CSV 数据行（不含表头）",paraId:67,tocIndex:46},{value:"columnCount",paraId:67,tocIndex:46},{value:"number",paraId:67,tocIndex:46},{value:"数据列总数",paraId:67,tocIndex:46},{value:"返回",paraId:67,tocIndex:46},{value:"`('string'",paraId:67,tocIndex:46},{value:"'boolean'",paraId:67,tocIndex:46},{value:"import { Utils } from '@graphscope/studio-components';\nconst { detectDataTypes } = Utils;\n\n// 示例 CSV 数据\nconst dataLines = [\n  ['true', '25', '北京'],\n  ['false', '30.5', '上海'],\n  ['true', '18', '广州']\n];\n\n// 检测数据类型\nconst dataTypes = detectDataTypes(dataLines, 3);\n/* 输出结果：\n[\"boolean\", \"number\", \"string\"]\n*/\n",paraId:68,tocIndex:47},{value:"解析 CSV 文件并生成结构化数据。",paraId:69,tocIndex:48},{value:"参数",paraId:70,tocIndex:48},{value:"类型",paraId:70,tocIndex:48},{value:"说明",paraId:70,tocIndex:48},{value:"file",paraId:70,tocIndex:48},{value:"File",paraId:70,tocIndex:48},{value:"需要解析的 CSV 文件对象",paraId:70,tocIndex:48},{value:"返回",paraId:70,tocIndex:48},{value:"Promise<ParsedFile>",paraId:70,tocIndex:48},{value:"包含元数据、原始内容和唯一 ID 的解析结果",paraId:70,tocIndex:48},{value:'import { Utils } from \'@graphscope/studio-components\';\nconst { parseCSV } = Utils;\n\n// 解析上传的 CSV 文件\n\n  const fileInput = document.querySelector(\'input[type="file"]\');\n  const selectedFile = fileInput.files?.[0];\n  if (selectedFile) {\n    const parsed = await parseCSV(file);\n    /* 输出结构：\n    {\n      id: "550e8400-e29b-41d4-a716-446655440000",\n      contents: "header1,header2\\nvalue1,value2",\n      meta: {\n        type: "csv",\n        header: ["header1", "header2"],\n        delimiter: ",",\n        size: "2.00 KB",\n        name: "example.csv",\n        graphFields: {\n          // 推断的图结构字段\n        }\n      }\n    }\n    */\n  }\n',paraId:71,tocIndex:49},{value:"将 CSV 文本转换为 JSON 对象数组。",paraId:72,tocIndex:50},{value:"参数",paraId:73,tocIndex:50},{value:"类型",paraId:73,tocIndex:50},{value:"说明",paraId:73,tocIndex:50},{value:"contents",paraId:73,tocIndex:50},{value:"string",paraId:73,tocIndex:50},{value:"CSV 原始文本内容",paraId:73,tocIndex:50},{value:"header",paraId:73,tocIndex:50},{value:"string[]",paraId:73,tocIndex:50},{value:"CSV 表头字段数组",paraId:73,tocIndex:50},{value:"delimiter",paraId:73,tocIndex:50},{value:"string",paraId:73,tocIndex:50},{value:"检测到的分隔符",paraId:73,tocIndex:50},{value:"返回",paraId:73,tocIndex:50},{value:"Record<string, string>[]",paraId:73,tocIndex:50},{value:"转换后的 JSON 对象数组",paraId:73,tocIndex:50},{value:'import { Utils } from \'@graphscope/studio-components\';\nconst { covertCSV2JSON } = Utils;\n\n// 示例 CSV 内容\nconst csvContent = `name,age,city\nJohn,25,New York\nAlice,30,London`;\n\n// 转换 CSV 为 JSON\nconst jsonData = covertCSV2JSON(csvContent, [\'name\', \'age\', \'city\'], \',\');\n/* 输出结果：\n[\n  { name: "John", age: "25", city: "New York" },\n  { name: "Alice", age: "30", city: "London" }\n]\n*/\n',paraId:74,tocIndex:51},{value:"推断 CSV 表头中的图结构字段（顶点/边关系）。",paraId:75,tocIndex:52},{value:"参数",paraId:76,tocIndex:52},{value:"类型",paraId:76,tocIndex:52},{value:"说明",paraId:76,tocIndex:52},{value:"header",paraId:76,tocIndex:52},{value:"string[]",paraId:76,tocIndex:52},{value:"CSV 表头字段数组",paraId:76,tocIndex:52},{value:"返回",paraId:76,tocIndex:52},{value:"{ idField?: string; sourceField?: string; targetField?: string; type: 'Vertex' | 'Edge'; nodeLabelField: string; edgeLabelField: string }",paraId:76,tocIndex:52},{value:"图结构字段推断结果",paraId:76,tocIndex:52},{value:'import { Utils } from \'@graphscope/studio-components\';\nconst { inferredGraphFields } = Utils;\n\n// 示例表头数据\nconst headers = [\'user_id\', \'source_node\', \'target_node\', \'relation_type\'];\n\n// 执行推断\nconst graphFields = inferredGraphFields(headers);\n/* 输出结果：\n{\n  idField: "user_id",\n  sourceField: "source_node",\n  targetField: "target_node",\n  type: "Edge",\n  nodeLabelField: "label",\n  edgeLabelField: "label"\n}\n*/\n',paraId:77,tocIndex:53},{value:"解析 JSON 文件并生成结构化数据集合。",paraId:78,tocIndex:54},{value:"参数",paraId:79,tocIndex:54},{value:"类型",paraId:79,tocIndex:54},{value:"说明",paraId:79,tocIndex:54},{value:"file",paraId:79,tocIndex:54},{value:"File",paraId:79,tocIndex:54},{value:"需要解析的 JSON 文件对象",paraId:79,tocIndex:54},{value:"返回",paraId:79,tocIndex:54},{value:"Promise<ParsedFile[]>",paraId:79,tocIndex:54},{value:"包含多个数据集的结构化解析结果数组",paraId:79,tocIndex:54},{value:'import { Utils } from \'@graphscope/studio-components\';\nconst { parseJSON } = Utils;\n\n// 解析上传的 JSON 文件\ndocument.querySelector(\'input[type="file"]\').addEventListener(\'change\', async (e) => {\n  const file = e.target.files[0];\n  if (file?.name.endsWith(\'.json\')) {\n    const parsedResults = await parseJSON(file);\n    /* 输出结构示例：\n    [\n      {\n        id: "9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d",\n        contents: "[{...}]",\n        data: [...],\n        meta: {\n          name: "data.json_users",\n          header: ["id", "name"],\n          type: "json",\n          graphFields: {\n           // 推断的图结构字段 \n          },\n          size: "2.34 KB"\n        }\n      },\n      // 其他数据集...\n    ]\n    */\n  }\n});\n',paraId:80,tocIndex:55},{value:"递归提取对象属性（支持嵌套对象结构）。",paraId:81,tocIndex:56},{value:"参数",paraId:82,tocIndex:56},{value:"类型",paraId:82,tocIndex:56},{value:"说明",paraId:82,tocIndex:56},{value:"data",paraId:82,tocIndex:56},{value:"object",paraId:82,tocIndex:56},{value:"需要解析的原始对象",paraId:82,tocIndex:56},{value:"prefix",paraId:82,tocIndex:56},{value:"string",paraId:82,tocIndex:56},{value:" (可选)",paraId:82,tocIndex:56},{value:"嵌套属性的前缀标识，默认空字符串",paraId:82,tocIndex:56},{value:"返回",paraId:82,tocIndex:56},{value:"Array<{ name: string; type: string }>",paraId:82,tocIndex:56},{value:"包含属性名和类型的对象数组",paraId:82,tocIndex:56},{value:'import { Utils } from \'@graphscope/studio-components\';\nconst { extractProperties } = Utils;\n\n// 示例嵌套对象\nconst userData = {\n  id: 123,\n  profile: {\n    name: "Alice",\n    address: {\n      city: "Beijing"\n    }\n  }\n};\n\n// 提取属性\nconst props = extractProperties(userData);\n/* 输出结果：\n[\n  { name: "id", type: "number" },\n  { name: "profile.name", type: "string" },\n  { name: "profile.address.city", type: "string" }\n]\n*/\n',paraId:83,tocIndex:57},{value:"合并图数据并进行去重处理，支持节点和边的智能合并。",paraId:84,tocIndex:58},{value:"参数",paraId:85,tocIndex:58},{value:"类型",paraId:85,tocIndex:58},{value:"说明",paraId:85,tocIndex:58},{value:"data",paraId:85,tocIndex:58},{value:"{ nodes: any[]; edges: any[] }",paraId:85,tocIndex:58},{value:"原始图数据",paraId:85,tocIndex:58},{value:"responseData",paraId:85,tocIndex:58},{value:"{ nodes?: any[]; edges?: any[] }",paraId:85,tocIndex:58},{value:"新增的扩展图数据",paraId:85,tocIndex:58},{value:"返回",paraId:85,tocIndex:58},{value:"{ nodes: any[]; edges: any[] }",paraId:85,tocIndex:58},{value:"合并去重后的图数据",paraId:85,tocIndex:58},{value:"import { Utils } from '@graphscope/studio-components';\nconst { handleExpand } = Utils;\n\n// 原始数据\nconst originalData = {\n  nodes: [{ id: 'A' }, { id: 'B' }],\n  edges: [{ source: 'A', target: 'B' }]\n};\n\n// 新增数据\nconst newData = {\n  nodes: [{ id: 'B' }, { id: 'C' }],\n  edges: [{ source: 'A', target: 'C' }]\n};\n\n// 合并数据\nconst merged = handleExpand(originalData, newData);\n/* 输出结果：\n{\n  nodes: [{id:\"A\"}, {id:\"B\"}, {id:\"C\"}], // 自动去重 B 节点\n  edges: [\n    {source:\"A\", target:\"B\"},\n    {source:\"A\", target:\"C\"}\n  ]\n}\n*/\n",paraId:86,tocIndex:59},{value:"实现自定义条件的数据去重功能。",paraId:87,tocIndex:60},{value:"参数",paraId:88,tocIndex:60},{value:"类型",paraId:88,tocIndex:60},{value:"说明",paraId:88,tocIndex:60},{value:"arr",paraId:88,tocIndex:60},{value:"any[]",paraId:88,tocIndex:60},{value:"需要去重的原始数组",paraId:88,tocIndex:60},{value:"fn",paraId:88,tocIndex:60},{value:"(a: any, b: any) => boolean",paraId:88,tocIndex:60},{value:"自定义去重比较函数",paraId:88,tocIndex:60},{value:"返回",paraId:88,tocIndex:60},{value:"any[]",paraId:88,tocIndex:60},{value:"去重后的新数组",paraId:88,tocIndex:60},{value:"import { Utils } from '@graphscope/studio-components';\nconst { uniqueElementsBy } = Utils;\n\n// 自定义对象数组去重\nconst data = [\n  { id: 1, name: 'Alice' },\n  { id: 1, name: 'Bob' },\n  { id: 2, name: 'Charlie' }\n];\n\n// 根据id去重\nconst uniqueData = uniqueElementsBy(data, (a, b) => a.id === b.id);\n/* 输出结果：\n[\n  { id: 1, name: 'Alice' },\n  { id: 2, name: 'Charlie' }\n]\n*/\n",paraId:89,tocIndex:61},{value:"转换原始图模式数据为可视化所需的格式。",paraId:90,tocIndex:62},{value:"参数",paraId:91,tocIndex:62},{value:"类型",paraId:91,tocIndex:62},{value:"说明",paraId:91,tocIndex:62},{value:"originalSchema",paraId:91,tocIndex:62},{value:"{ vertex_types: any[]; edge_types: any[] }",paraId:91,tocIndex:62},{value:"原始图模式数据",paraId:91,tocIndex:62},{value:"返回",paraId:91,tocIndex:62},{value:"ISchemaOptions",paraId:91,tocIndex:62},{value:"转换后的可视化模式结构",paraId:91,tocIndex:62},{value:"interface ISchemaOptions {\n  nodes: Array<{\n    label: string\n    properties: Array<{\n      name: string\n      type: string\n      primaryKey?: boolean\n    }>\n  }>;\n  edges: Array<{\n    label: string\n    source: string\n    target: string\n    properties: Array<{\n      name: string\n      type: string\n    }>\n  }>;\n}\n",paraId:92,tocIndex:63},{value:"import { Utils } from '@graphscope/studio-components';\nconst { transSchema } = Utils;\n\n// 原始数据示例\nconst originalData = {\n  vertex_types: [\n    {\n      type_name: 'User',\n      primary_keys: ['user_id'],\n      properties: [\n        { property_name: 'user_id', property_type: { primitive_type: 'DT_INT64' } },\n        { property_name: 'name', property_type: { primitive_type: 'DT_STRING' } }\n      ]\n    }\n  ],\n  edge_types: [\n    {\n      type_name: 'FRIEND',\n      vertex_type_pair_relations: [\n        { source_vertex: 'User', destination_vertex: 'User' }\n      ],\n      properties: [\n        { property_name: 'since', property_type: { primitive_type: 'DT_DATE' } }\n      ]\n    }\n  ]\n};\n\n// 执行转换\nconst schema = transSchema(originalData);\n/* 输出结果：\n{\n  nodes: [{\n    label: \"User\",\n    properties: [\n      { name: \"user_id\", type: \"DT_INT64\", primaryKey: true },\n      { name: \"name\", type: \"DT_STRING\" }\n    ]\n  }],\n  edges: [{\n    label: \"FRIEND\",\n    source: \"User\",\n    target: \"User\",\n    properties: [\n      { name: \"since\", type: \"DT_DATE\" }\n    ]\n  }]\n}\n*/\n",paraId:93,tocIndex:64},{value:"生成符合 RFC 4122 标准的 UUID v4 字符串。",paraId:94,tocIndex:65},{value:"参数",paraId:95,tocIndex:65},{value:"类型",paraId:95,tocIndex:65},{value:"说明",paraId:95,tocIndex:65},{value:"返回",paraId:95,tocIndex:65},{value:"string",paraId:95,tocIndex:65},{value:"符合 UUID v4 规范的 36 位字符串",paraId:95,tocIndex:65},{value:"import { Utils } from '@graphscope/studio-components';\nconst { uuid } = Utils;\n\n// 生成唯一标识符\nconst id = uuid();\nconsole.log(id); // 输出示例：\"9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d\"\n",paraId:96,tocIndex:66},{value:"通过点分隔路径字符串访问对象的嵌套属性。",paraId:97,tocIndex:67},{value:"参数",paraId:98,tocIndex:67},{value:"类型",paraId:98,tocIndex:67},{value:"说明",paraId:98,tocIndex:67},{value:"obj",paraId:98,tocIndex:67},{value:"object",paraId:98,tocIndex:67},{value:"需要访问的原始对象",paraId:98,tocIndex:67},{value:"path",paraId:98,tocIndex:67},{value:"string",paraId:98,tocIndex:67},{value:'点分隔的属性路径（如："a.b.c"）',paraId:98,tocIndex:67},{value:"返回",paraId:98,tocIndex:67},{value:"any",paraId:98,tocIndex:67},{value:"路径对应的属性值，未找到时返回 undefined",paraId:98,tocIndex:67},{value:"import { Utils } from '@graphscope/studio-components';\nconst { getObjByPath } = Utils;\n\n// 示例对象\nconst data = {\n  user: {\n    profile: {\n      name: 'Alice',\n      address: {\n        city: 'Beijing'\n      }\n    }\n  }\n};\n\n// 获取嵌套属性\nconst city = getObjByPath(data, 'user.profile.address.city');\nconsole.log(city); // 输出：\"Beijing\"\n\n// 访问不存在的路径\nconst invalid = getObjByPath(data, 'user.contact.phone');\nconsole.log(invalid); // 输出：undefined\n",paraId:99,tocIndex:68}]},13588:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(93995);const r=[]},26103:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(26973);const r=[]},31404:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(67866);const r=[]},2500:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(37275);const r=[]},22211:function(e,t){t.Z="/** components 基础配置 */\nexport const components = {\n  Menu: {\n    itemBg: 'rgba(255, 255, 255, 0)',\n    subMenuItemBg: 'rgba(255, 255, 255, 0)',\n    iconMarginInlineEnd: 14,\n    itemMarginInline: 4,\n    iconSize: 14,\n    collapsedWidth: 50,\n    itemActiveBg: '#eaeaea',\n  },\n  Typography: {\n    titleMarginBottom: '0.2em',\n    titleMarginTop: '0.8em',\n  },\n  Table: {\n    cellPaddingBlock: 4, //\t单元格纵向内间距\n    cellPaddingInline: 8, //单元格横向内间距（默认大尺寸）\n  },\n  Pagination: {\n    itemSize: 20,\n  },\n  Result: {\n    iconFontSize: 62,\n    titleFontSize: 20,\n    colorError: '#00000073',\n  },\n};\n\n/** token 基础配置 */\nexport const token = {\n  colorBorder: 'red',\n  colorBgBase: '#fff',\n};\n"},20880:function(e,t){t.Z="import React, { useEffect, useState } from 'react';\nimport { ConfigProvider, theme } from 'antd';\nimport { IntlProvider } from 'react-intl';\nimport { ContainerProvider } from './useThemeConfigProvider';\nimport type { ThemeProviderType } from './useThemeConfigProvider';\nimport { storage } from '../Utils';\nimport { getThemeConfig } from './getThemeConfig';\nimport { useCustomToken } from './useCustomToken';\n\ntype IThemeProvider = {\n  locales: {\n    'zh-CN': Record<string, string>;\n    'en-US': Record<string, string>;\n  };\n  children: React.ReactNode;\n  locale?: 'zh-CN' | 'en-US';\n  algorithm?: 'defaultAlgorithm' | 'darkAlgorithm';\n};\n\nconst Provider: React.FC<IThemeProvider> = props => {\n  const { children, locales } = props;\n  const [state, setState] = useState<ThemeProviderType>(() => {\n    let { algorithm, locale } = props;\n    if (!locale) {\n      locale = storage.get('locale');\n      if (!locale) {\n        locale = 'en-US';\n        storage.set('locale', locale);\n      }\n    }\n    if (!algorithm) {\n      algorithm = storage.get('algorithm');\n      if (!algorithm) {\n        algorithm = 'defaultAlgorithm';\n        storage.set('algorithm', algorithm);\n      }\n    }\n    return {\n      components: storage.get('components'),\n      token: storage.get('token'),\n      algorithm,\n      locale,\n    };\n  });\n\n  const { components, token, algorithm, locale } = state;\n  const { componentsConfig, tokenConfig } = getThemeConfig(algorithm);\n  const colorConfig = useCustomToken();\n  const isLight = algorithm === 'defaultAlgorithm';\n\n  const handleThemeOrLocale = (themeConfig: Partial<ThemeProviderType>) => {\n    const { components, token } = themeConfig;\n    Object.keys(themeConfig).forEach(key => {\n      storage.set(key, themeConfig[key]);\n    });\n\n    setState(preState => {\n      // 特殊化处理,切token数据需初始化数据做基础\n      storage.set('token', { ...preState.token, ...token });\n      return {\n        ...preState,\n        components: { ...preState.components, ...components },\n        token: { ...preState.token, ...token },\n        algorithm: themeConfig.algorithm || preState.algorithm,\n        locale: themeConfig.locale ?? storage.get('locale'),\n      };\n    });\n  };\n\n  const messages = locales[locale || 'en-US'];\n\n  return (\n    <ContainerProvider\n      value={{\n        token: { ...tokenConfig, ...token },\n        components: { ...componentsConfig, ...components },\n        handleThemeOrLocale,\n        algorithm,\n        locale: locale,\n        isLight,\n        ...colorConfig,\n      }}\n    >\n      <IntlProvider messages={messages} locale={locale as 'zh-CN' | 'en-US'}>\n        <ConfigProvider\n          theme={{\n            // 1. 单独使用暗色算法\n            algorithm: isLight ? theme.defaultAlgorithm : theme.darkAlgorithm,\n            components: {\n              ...componentsConfig,\n              ...components,\n            },\n            token: {\n              ...tokenConfig,\n              ...token,\n            },\n          }}\n        >\n          {children}\n        </ConfigProvider>\n      </IntlProvider>\n    </ContainerProvider>\n  );\n};\n\nexport default Provider;\n"},88241:function(e,t){t.Z="import { createContext, useContext } from 'react';\nimport type { IColorStore } from './getThemeConfig';\nexport interface ThemeProviderType extends IColorStore {\n  algorithm?: 'defaultAlgorithm' | 'darkAlgorithm';\n  components?: { [key: string]: { [key: string]: string | number } };\n  token?: { [key: string]: string | number };\n  locale?: 'zh-CN' | 'en-US';\n  isLight?: boolean;\n}\nexport interface IContainerContext extends ThemeProviderType {\n  handleThemeOrLocale: (value: ThemeProviderType) => void;\n}\nexport const ContainerContext = createContext<IContainerContext>({\n  components: {},\n  token: {},\n  handleThemeOrLocale: ({}) => {},\n  locale: 'en-US',\n  algorithm: 'defaultAlgorithm',\n  isLight: false,\n});\n\nexport const ContainerProvider = ContainerContext.Provider;\n\nexport const useStudioProvier = () => {\n  const context = useContext(ContainerContext);\n\n  if (context === undefined || Object.keys(context).length === 0) {\n    throw new Error(`useContext must be used within a ContainerProvider`);\n  }\n  return context;\n};\n"},17239:function(e,t){t.Z="import React from 'react';\nimport { Panel, PanelGroup } from 'react-resizable-panels';\nimport ResizeHandle from './ResizeHandle';\n\ninterface IResizablePanelsProps {\n  leftSide?: React.ReactNode;\n  middleSide?: React.ReactNode;\n  rightSide?: React.ReactNode;\n  leftMinSize?: number;\n  leftMaxSize?: number;\n  rightMinSize?: number;\n  rightMaxSize?: number;\n}\n\nconst styles: Record<string, React.CSSProperties> = {\n  Container: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '1rem',\n  },\n  Panel: { display: 'flex', flexDirection: 'row' },\n  PanelContent: {\n    height: '100%',\n    width: '100%',\n    borderRadius: '0.5rem',\n  },\n};\n\nconst ResizablePanels: React.FC<IResizablePanelsProps> = ({\n  leftSide,\n  middleSide,\n  rightSide,\n  leftMinSize = 20,\n  leftMaxSize = 40,\n  rightMinSize = 20,\n  rightMaxSize = 40,\n}) => {\n  const renderLeftPanel = () => (\n    <Panel style={styles.Panel} collapsible={false} order={1} minSize={leftMinSize} maxSize={leftMaxSize}>\n      <div style={styles.PanelContent}>{leftSide}</div>\n    </Panel>\n  );\n\n  const renderRightPanel = () => (\n    <Panel style={styles.Panel} collapsible={false} order={3} minSize={rightMinSize} maxSize={rightMaxSize}>\n      <div style={styles.PanelContent}>{rightSide}</div>\n    </Panel>\n  );\n\n  return (\n    <div style={styles.Container}>\n      <PanelGroup autoSaveId=\"example\" direction=\"horizontal\">\n        {leftSide && [renderLeftPanel(), <ResizeHandle key=\"left-handle\" />]}\n        <Panel style={styles.Panel} collapsible={false} order={2}>\n          <div style={styles.PanelContent}>{middleSide}</div>\n        </Panel>\n        {rightSide && [<ResizeHandle key=\"right-handle\" />, renderRightPanel()]}\n      </PanelGroup>\n    </div>\n  );\n};\n\nexport default ResizablePanels;\n"},9534:function(e,t){t.Z="import StatementQuery from './query-statement';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nexport default {\n  render_query_statement: config => {\n    const { id = 'root' } = config || {};\n    ReactDOM.render(<StatementQuery {...config} />, document.getElementById(id));\n  },\n};\n"}}]);