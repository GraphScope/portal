"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8150],{16835:function(t,e,r){r.r(e),r.d(e,{BasicContainer:function(){return Vt},BasicInteraction:function(){return ho},Brush:function(){return Nn},Canvas:function(){return Qe},ClearCanvas:function(){return vo},ClearStatus:function(){return Ir},CommonNeighbor:function(){return En},ContextMenu:function(){return h},CurvatureLinks:function(){return xo},DagreMode:function(){return Po},DeleteLeafNodes:function(){return Bn},DeleteNode:function(){return jn},Export:function(){return qn},FixedMode:function(){return To},GraphProvider:function(){return oe},HoverMenu:function(){return $o},LayoutSetting:function(){return Kr},LayoutSwitch:function(){return Zo},LoadCSV:function(){return $t},Loading:function(){return Gn},NeighborQuery:function(){return mn},Prepare:function(){return kr},PropertiesPanel:function(){return Ft},PropertiesTable:function(){return bi},RunCluster:function(){return Br},SchemaView:function(){return fi},SliderFilter:function(){return Zr},StyleSetting:function(){return Pr},SwitchEngine:function(){return Bt},Toolbar:function(){return i},ZoomFit:function(){return Tr},ZoomStatus:function(){return Bo},getDataMap:function(){return le},getStyleConfig:function(){return pe},locales:function(){return n},processLinks:function(){return he},registerIcons:function(){return rt},useApis:function(){return wi},useContext:function(){return ne}});var n={"en-US":{"Select nodes by box selection":"Select nodes by box selection","Switch graph view dimensions":"Switch graph view dimensions","Zoom to fitview":"Zoom to fitview",Fullscreen:"Fullscreen","Toggle Right Side":"Toggle Right Side","Caption Status":"Caption Status","Clustering layout":"Clustering layout","Export graph json":"Export graph json","Edge Properties":"Edge Properties","Vertex Properties":"Vertex Properties","File type":"File type","Vertex Labels":"Vertex Labels","Edge Labels":"Edge Labels"},"zh-CN":{"Select nodes by box selection":"通过框选选择节点","Switch graph view dimensions":"切换图表视图维度","Zoom to fitview":"缩放适当视图",Fullscreen:"全屏","Toggle Right Side":"切换右侧","Caption Status":"是否展示标签","Clustering layout":"聚类布局","Export graph json":"导出 JSON 数据","Edge Properties":"边属性信息","Vertex Properties":"点属性信息","File type":"文件类型","Vertex Labels":"点类型","Edge Labels":"边类型"}},o=r(2268),i=o.Toolbar,a=r(50959),c=r(53531),u=r(57526);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e,r){var n;return n=function(t,e){if("object"!=l(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==l(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var h=function(t){var e=t.children,r=ne(),n=r.store,o=r.updateStore,i=c.Z.useToken().token,l=n.emitter,s=d(a.useState({visible:!1,x:0,y:0}),2),y=s[0],h=s[1],v=y.visible,m=y.x,g=y.y;return a.useEffect((function(){var t=function(t){var e=t.node,r=t.evt,n=r.offsetX,i=r.offsetY;h((function(t){return f(f({},t),{},{visible:!0,x:n,y:i})})),o((function(t){t.nodeStatus=f(f({},t.nodeStatus),{},p({},e.id,{selected:!0})),t.selectNodes.find((function(t){return t.id===e.id}))||(t.selectNodes=[e])}))},e=function(){h((function(t){return f(f({},t),{},{visible:!1,x:0,y:0})}))};return null==l||l.on("node:contextmenu",t),null==l||l.on("canvas:click",e),function(){null==l||l.off("node:contextmenu",t),null==l||l.off("canvas:click",e)}}),[l]),a.createElement("div",{style:{opacity:v?1:0,visibility:v?"visible":"hidden",position:"absolute",left:m,top:g,width:180,height:"auto",backgroundColor:i.colorBgContainer,boxShadow:i.boxShadow,zIndex:2e3,padding:"4px",borderRadius:"8px"}},a.createElement(u.Z,{vertical:!0,gap:8},e))},v=r(97585),m=r(54016),g=r(7234),b=r(24279),w=r(65586),O=r(48722),E=r(84155),x=r(75875),S=[x.blue[4],x.orange[4],x.purple[4],x.lime[4],x.magenta[4],x.cyan[4],x.gold[8],x.red[6],"#f0f0f0","#00000043","#5e5e5e","#000"],j=[0,.1,.5,1,2,3,4,6,8,10,20],P=[0,.1,.5,1,1.5,2,2.5,3,3.5,4,4.5,5],_=P[3],L=S[0],k=j[4],T=function(){if("darkAlgorithm"===o.Utils.storage.get("algorithm")||"dark"===o.Utils.storage.get("theme"))return{DEFAULT_EDGE_COLOR:S[10],SELECTED_NODE_COLOR:"#fff",HOVERING_NODE_COLOR:"rgba(255,255,255,0.8)",SELECTED_EDGE_COLOR:"#fff",SELECTED_EDGE_TEXT_COLOR:"#000",NODE_TEXT_BACKGROUND_COLOR:"rgba(0, 0, 0, 0.2)",COLOR_DISABLED:"#ddd"};return{SELECTED_NODE_COLOR:"#000",HOVERING_NODE_COLOR:"rgba(0,0,0,0.8)",DEFAULT_EDGE_COLOR:S[9],SELECTED_EDGE_COLOR:"#000",SELECTED_EDGE_TEXT_COLOR:"#fff",NODE_TEXT_BACKGROUND_COLOR:"rgba(255, 255, 255, 0.8)",COLOR_DISABLED:"#ddd"}}(),D=T.DEFAULT_EDGE_COLOR,I=T.SELECTED_EDGE_COLOR,A=(T.SELECTED_EDGE_TEXT_COLOR,T.SELECTED_NODE_COLOR),C=(T.HOVERING_NODE_COLOR,T.NODE_TEXT_BACKGROUND_COLOR),N=T.COLOR_DISABLED;var Z={color:L,size:k,caption:[],icon:""},G={selectColor:A,iconColor:"#fff",iconSize:void 0,textSize:void 0,textColor:void 0,textPosition:"bottom",textBackgroundColor:C,zoomLevel:[3,15]},F={color:D,size:_,caption:[],icon:""},M={selectColor:I,arrowLength:void 0,arrowPosition:1,textColor:void 0,textSize:void 0,textBackgroundColor:C,zoomLevel:[3,15]};function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function z(){z=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==R(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(R(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function U(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function B(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){U(i,n,o,a,c,"next",t)}function c(t){U(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Y(t){return J.apply(this,arguments)}function J(){return J=B(z().mark((function t(e){var r,n,o,i,a=arguments;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:"online",n=a.length>2?a[2]:void 0,"online"!==r){t.next=8;break}return o=n||"https://at.alicdn.com/t/a/".concat(e,".json"),t.next=6,fetch(o).then((function(t){return t.json()}));case 6:return i=t.sent,t.abrupt("return",i);case 8:return t.abrupt("return",{id:"",name:"",font_family:"",css_prefix_text:"",description:"",glyphs:[]});case 9:case"end":return t.stop()}}),t)}))),J.apply(this,arguments)}function q(t){return V.apply(this,arguments)}function V(){return V=B(z().mark((function t(e){var r,n,o=arguments;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("online"!==(o.length>1&&void 0!==o[1]?o[1]:"online")){t.next=8;break}return r=[{fontUrl:"//at.alicdn.com/t/a/".concat(e,".woff2"),format:"woff2"},{fontUrl:"//at.alicdn.com/t/a/".concat(e,".woff"),format:"woff"},{fontUrl:"//at.alicdn.com/t/a/".concat(e,".ttf"),format:"truetype"}],n=function(){var t=B(z().mark((function t(e,r){var n;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new FontFace(e,"url(".concat(r,")")),t.next=3,n.load();case 3:document.fonts.add(n);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),t.next=6,Promise.all(r.map((function(t){var e=t.fontUrl;return n("iconfont",e)})));case 6:t.next=8;break;case 8:case"end":return t.stop()}}),t)}))),V.apply(this,arguments)}function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function X(){X=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==H(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(H(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function $(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function W(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(Object(r),!0).forEach((function(e){K(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function K(t,e,r){var n;return n=function(t,e){if("object"!=H(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==H(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var tt="font_4775957_de91ktmrghn",et={},rt=function(){var t,e=(t=X().mark((function t(){var e,r,n,o=arguments;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:tt,t.next=3,Y(e);case 3:return r=t.sent,n=r.glyphs,t.next=7,q(tt);case 7:return et=n.reduce((function(t,e){return W(W({},t),{},K({},e.name,String.fromCodePoint(e.unicode_decimal)))}),{}),t.abrupt("return",et);case 9:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Q(i,n,o,a,c,"next",t)}function c(t){Q(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function ot(t){return function(t){if(Array.isArray(t))return it(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return it(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return it(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function at(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ct(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?at(Object(r),!0).forEach((function(e){ut(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ut(t,e,r){var n;return n=function(t,e){if("object"!=nt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==nt(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var lt=c.Z.useToken,st={width:"16px",height:"16px",display:"block",borderRadius:"50%",cursor:"pointer"},ft=function(t){var e,r=t.color,n=t.size,o=t.caption,i=t.properties,c=t.label,l=t.onChange,s=t.type,f=t.icon,p=lt().token,d=i;Array.isArray(i)&&(d=i.reduce((function(t,e){return ct(ct({},t),{},ut({},e.name,e[s]))}),{}));var y=function(t,e){l&&l(ut({type:s,label:c,color:r,size:n,caption:o,properties:i,icon:f},t,e))},h="2px solid ".concat(p.colorPrimary),v=Object.keys(et).map((function(t){return{label:a.createElement(O.Z,{size:12},a.createElement("span",{style:{fontFamily:"iconfont",fontSize:"16px"}},et[t]),t),value:t,icon:et[t]}}));return a.createElement("div",{style:{maxWidth:"220px",overflow:"hidden",padding:"12px"}},a.createElement(u.Z,{gap:12,style:{padding:"6px 0px"}},a.createElement(m.Z.Text,{style:{flexShrink:0}},a.createElement(E.Z,{id:"Color"})),a.createElement(O.Z,{wrap:!0},S.map((function(t){var e=r==t;return a.createElement("span",{key:t,onClick:function(){return y("color",t)},style:ct(ct({},st),{},{backgroundColor:t,boxSizing:"border-box",border:e?h:"none"})})})))),"node"===s&&a.createElement(u.Z,{gap:12,style:{padding:"6px 0px"}},a.createElement(m.Z.Text,{style:{flexShrink:0}},a.createElement(E.Z,{id:"Size"})),a.createElement(O.Z,{size:8,wrap:!0},j.map((function(t){var e=n==t,r=4*Math.sqrt(Math.max(0,t))+2;return a.createElement("span",{key:t,onClick:function(){return y("size",t)},style:ct(ct({},st),{},{width:"".concat(2*r,"px"),height:"".concat(2*r,"px"),background:"#ddd",boxSizing:"border-box",border:e?h:"none"})})})))),"edge"===s&&a.createElement(u.Z,{gap:12,style:{padding:"6px 0px"}},a.createElement(m.Z.Text,{style:{flexShrink:0}},a.createElement(E.Z,{id:"LineWidth"})),a.createElement(O.Z,{wrap:!0},P.map((function(t){var e=n==t;return a.createElement("span",{key:t,onClick:function(){return y("size",t)},style:{cursor:"pointer",width:"".concat(5*t,"px"),height:"16px",background:"#ddd",display:"block",boxSizing:"border-box",border:e?h:"none"}})})))),a.createElement(u.Z,{gap:12,style:{padding:"6px 0px"}},a.createElement(m.Z.Text,{style:{flexShrink:0}},a.createElement(E.Z,{id:"Caption"})),a.createElement(O.Z,{wrap:!0},null===(e=Object.keys(d))||void 0===e?void 0:e.map((function(t){var e=o.includes(t);return a.createElement("span",{key:t,style:{fontSize:"12px",color:p.colorTextSecondary,display:"block",borderRadius:"6px",padding:"0px 4px",boxSizing:"border-box",cursor:"pointer",background:p.colorBgBlur,border:e?h:"1px solid #ddd"},onClick:function(){var e=o.includes(t)?o.filter((function(e){return e!==t})):[].concat(ot(o),[t]);console.log("newCaption",e),y("caption",e)}},t)})))),a.createElement(u.Z,{gap:12,style:{padding:"6px 0px"},justify:"space-between"},a.createElement(m.Z.Text,{style:{flexShrink:0}},a.createElement(E.Z,{id:"Icon"})),a.createElement(g.default,{defaultValue:f,size:"small",style:{width:"80%"},onChange:function(t){y("icon",t)},options:v})))},pt=function(t){var e=t.label,r=t.color,n=t.count,o=n?"".concat(e," (").concat(n,")"):e,i=(0,a.useRef)(null);return a.createElement(w.Z,{getPopupContainer:function(t){return i.current?i.current:t},trigger:"click",placement:"left",content:a.createElement(ft,t)},a.createElement(v.Z,{style:{textAlign:"center",borderRadius:"8px",backgroundColor:r,cursor:"pointer",minWidth:"60px",minHeight:"22px",color:"#000"},bordered:!1},o))},dt=(0,a.memo)(pt);function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}var ht=["properties"];function vt(){return vt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vt.apply(this,arguments)}function mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(r),!0).forEach((function(e){bt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bt(t,e,r){var n;return n=function(t,e){if("object"!=yt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==yt(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wt(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var Ot=function(t){t.style;var e=t.noTitle,r=t.data,n=ne(),i=n.store,c=n.updateStore,l=i.nodeStyle,s=r,f=s.id,p=s.label,d=s.properties,y=void 0===d?{}:d,h=r.source&&r.source.id,v=r.target&&r.target.id,g=l[f]||l[String(p)],w=h&&v?"edge":"node",O="node"===w?"Vertex Properties":"Edge Properties";return a.createElement(u.Z,{vertical:!0,gap:12},!e&&a.createElement(m.Z.Title,{level:5,style:{margin:"0px"}},O),a.createElement(u.Z,{justify:"space-between"},a.createElement(m.Z.Text,{type:"secondary",italic:!0},"id"),a.createElement(m.Z.Text,{italic:!0},f)),a.createElement(u.Z,{justify:"space-between"},a.createElement(m.Z.Text,{type:"secondary",italic:!0},"label"),a.createElement(dt,vt({},g,{label:p,type:w,properties:y,onChange:function(t){t.properties;var e=wt(t,ht);c((function(t){var r=gt(gt({},t.nodeStyle),{},bt({},f,e));t.nodeStyle=r,o.Utils.storage.set("GRAPH_".concat(i.graphId,"_STYLE"),{nodeStyle:r,edgeStyle:gt({},t.edgeStyle)})}))}}))),h&&a.createElement(u.Z,{justify:"space-between"},a.createElement(m.Z.Text,{type:"secondary",italic:!0},"source"),a.createElement(m.Z.Text,{italic:!0},h.id)),v&&a.createElement(u.Z,{justify:"space-between"},a.createElement(m.Z.Text,{type:"secondary",italic:!0},"target"),a.createElement(m.Z.Text,{italic:!0},v)),a.createElement(b.Z,{style:{margin:"0px"}}),a.createElement(u.Z,{vertical:!0,gap:12},Object.keys(y).map((function(t){return a.createElement(u.Z,{key:t,vertical:!0,gap:6},a.createElement(m.Z.Text,{type:"secondary"},t),a.createElement(m.Z.Text,null,y[t]||"-"))}))))};function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}var xt=["options"],St=["options"];function jt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jt(Object(r),!0).forEach((function(e){_t(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _t(t,e,r){var n;return n=function(t,e){if("object"!=Et(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Et(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lt(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function kt(t,e){var r=e[t.id]||e[String(t.label)]||t.__style||{},n=r.options,o=void 0===n?{}:n,i=Lt(r,xt);return Pt(Pt(Pt({},Z),i),{},{options:Pt(Pt({},G),o)})}function Tt(t,e){var r=e[t.id]||e[String(t.label)]||t.__style||{},n=r.options,o=void 0===n?{}:n,i=Lt(r,St);return Pt(Pt(Pt({},F),i),{},{options:Pt(Pt({},M),o)})}function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function It(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function At(t,e,r){var n;return n=function(t,e){if("object"!=Dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Dt(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ct(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||Zt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(t){return function(t){if(Array.isArray(t))return Gt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Zt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(t,e){if(t){if("string"==typeof t)return Gt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gt(t,e):void 0}}function Gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ft=function(t){var e=t.style,r=void 0===e?{}:e,n=ne().store,o=wi().focusNodes,i=n.selectNodes,l=n.selectEdges,s=n.nodeStyle,f=n.edgeStyle,p=c.Z.useToken().token,d=a.useRef(null),y=[].concat(Nt(i),Nt(l)),h=y.map((function(t){return t.id})),b=Ct(a.useState(h[0]||""),2),w=b[0],O=b[1],E=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?It(Object(r),!0).forEach((function(e){At(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({display:"flex",position:"absolute",top:"12px",bottom:"12px",right:"12px",width:"240px",boxShadow:p.boxShadow,zIndex:1999,background:p.colorBgContainer,borderRadius:p.borderRadius,overflowY:"scroll",padding:p.padding},r);if(0===y.length)return null;var x=y.find((function(t){return t.id===w}))||y[0];if(!x)return null;var S=y.map((function(t){var e=t.id,r=t.properties,n=void 0===r?{}:r,o=(kt(t,s)||Tt(t,f)).caption,i=o.map((function(t){return n[t]})).join(",")||e;return{value:e,label:a.createElement(a.Fragment,null,a.createElement(v.Z,null,o.join(",")||"id")," ",i)}}));return a.createElement(u.Z,{style:E,vertical:!0,gap:12},y.length>1&&a.createElement(a.Fragment,null,a.createElement(m.Z.Text,{type:"secondary",italic:!0},"Total ",y.length," items selected"),a.createElement(g.default,{allowClear:!0,getPopupContainer:function(t){return d.current?d.current:t},defaultValue:w,placeholder:"please select and inspect data",options:S,value:w,onChange:function(t){O(t),o([t])}})),a.createElement(Ot,{data:x}))},Mt=r(17905),Rt=r(38943),zt=o.Icons.Graph3D,Ut=o.Icons.Graph2D,Bt=function(t){var e=ne(),r=e.updateStore,n=e.store.render,o=c.Z.useToken().token,i=t.title,u=void 0===i?"Switch graph view dimensions":i,l=(t.placement,"2D"===n?a.createElement(zt,{style:{color:o.colorTextBase}}):a.createElement(Ut,{style:{color:o.colorTextBase}}));return a.createElement(Mt.Z,{title:a.createElement(E.Z,{id:"".concat(u)}),placement:"left"},a.createElement(Rt.ZP,{onClick:function(){r((function(t){t.render="2D"===n?"3D":"2D"}))},icon:l,type:"text"}))};function Yt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Jt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var qt=function(){var t=(0,o.useSection)().toggleLeftSide;return a.createElement("div",{style:{position:"absolute",top:"12px",left:"12px"}},a.createElement(Rt.ZP,{icon:a.createElement(o.Icons.Sidebar,null),onClick:function(){return t()}}))},Vt=function(t){var e,r=ne(),n=r.store,i=(r.updateStore,n.graph),c=t.items,u=t.children,l=Yt(c,2),s=l[0],f=void 0===s?[]:s,p=l[1],d=void 0===p?[]:p,y=f.map((function(t){console.log("item",t);var e=t.id,r=t.render;t.meta;return{label:e,key:e,children:i&&a.createElement(r,null)}})),h=null===(e=d[0])||void 0===e?void 0:e.render,v=a.createElement(o.SegmentedTabs,{items:y});return console.log(y),a.createElement(o.Section,{leftSide:v,rightSide:i&&a.createElement(h,null),splitBorder:!0},u,a.createElement(qt,null))};function Ht(t){return function(t){if(Array.isArray(t))return Xt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Xt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var $t=function(t){var e=t.onCallback,r=ne(),n=r.updateStore,i=r.store.graphId;return a.createElement(o.ImportFiles,{upload:{accept:".json,.csv",title:"Upload your local csv files",description:"xxx"},type:"json"},(function(t){return a.createElement(a.Fragment,null,a.createElement(Rt.ZP,{type:"primary",onClick:function(){return function(t){var r=t.files,a=[],c=[],u=new Map,l=new Map,s=new Map;r.sort((function(t,e){return"Vertex"===t.meta.graphFields.type?-1:1})).forEach((function(t){var e=t.meta,r=t.contents,n=e.graphFields,i=(e.name,[]);"csv"===e.type&&(i=o.Utils.covertCSV2JSON(r,e.header,e.delimiter)),"json"===e.type&&(i=JSON.parse(r));var f=n.idField,p=n.sourceField,d=void 0===p?"source":p,y=n.targetField,h=void 0===y?"target":y,v=n.type,m=n.nodeLabelField,g=n.edgeLabelField;"Vertex"===v&&i.forEach((function(t){var e=t[f],r=t[m]||"unknow";if(e&&(s.set(e,r),a.push({id:e,label:r,properties:t})),!u.has(r)){var n={label:r,properties:o.Utils.extractProperties(t)};u.set(r,n)}})),"Edge"===v&&i.forEach((function(t){var e=t[d],r=t[h],n=t[g]||"unknow",i=s.get(e),a=s.get(r);if(i&&a){if(e&&r&&c.push({id:"".concat(t[d],"-").concat(t[h]),label:n,source:e,target:r,properties:t}),!l.has(n)){var u={label:n,source:i,target:a,properties:o.Utils.extractProperties(t)};l.set(n,u)}}else console.warn("数据不合法, 找不到 ".concat(i?"Target ID：".concat(r):"Source ID：".concat(e)))}))}));var f={nodes:Ht(u.values()),edges:Ht(l.values())},p=i||String(new Date),d=pe(f,p);n((function(t){t.data={nodes:a,edges:c},t.source={nodes:a,edges:c},t.graphId=p,t.schema=f,t.nodeStyle=d.nodeStyle,t.edgeStyle=d.edgeStyle,t.dataMap=le(o.Utils.fakeSnapshot({nodes:a,edges:c}))})),e&&e()}(t)},loading:t.loading},"Visualization"))}))},Wt=r(33741);function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function Qt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function te(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qt(Object(r),!0).forEach((function(e){ee(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ee(t,e,r){var n;return n=function(t,e){if("object"!=Kt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Kt(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var re={data:{nodes:[],edges:[]},layout:{type:"force",options:{}},source:{nodes:[],edges:[]},combos:[],enableCombo:void 0,combosByKey:"",width:200,height:500,dataMap:new Map,render:"2D",graph:void 0,isReady:!1,emitter:null,nodeStyle:{},edgeStyle:{},nodeStatus:{},edgeStatus:{},graphId:"",schema:{nodes:[],edges:[]},isLoading:!1,getService:function(){return function(){}},reheatSimulation:!1,focusNodes:[],selectNodes:[],selectEdges:[],tableViewIds:[]},ne=function(){return(0,Wt.qp)()},oe=function(t){var e=t.children,r=t.id,n=t.services;return a.createElement(Wt.ZP,{id:r,store:te(te({},re),{},{getService:function(t){var e=n[t];return e||(console.error("service not found: ".concat(t)),function(){})}})},e)};function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function ae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ce(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ae(Object(r),!0).forEach((function(e){ue(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ue(t,e,r){var n;return n=function(t,e){if("object"!=ie(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==ie(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function le(t){var e=new Map,r=new Map;return t.nodes.forEach((function(t){var n=t.id;r.set(n,ce(ce({},t),{},{neighbors:[],inNeighbors:[],outNeighbors:[],inEdges:[],outEdges:[]})),e.set(n,r.get(n))})),t.edges.forEach((function(t,n){var o=t.source.id||t.source,i=t.target.id||t.target,a=t.id;if(!a)throw new Error("edge id is required");var c=r.get(o),u=r.get(i);e.has(a)||e.set(a,t),c&&u?(c.outEdges.push(a),c.outNeighbors.push(i),u.inEdges.push(a),u.inNeighbors.push(o),c.neighbors.push(i),u.neighbors.push(o)):console.log("edge source or target node not found",o,i)})),e}var se=function(t,e){var r=t.id,n=t.label,o=t.__status;return e[r]||e[n]||o||{}},fe=o.Utils.storage;function pe(t,e){var r=fe.get("GRAPH_".concat(e,"_STYLE"));if(r&&Object.keys(r.nodeStyle).join("_")===t.nodes.map((function(t){return t.label})).join("_"))return r;var n={nodeStyle:{},edgeStyle:{}};return t.nodes.forEach((function(t,e){var r=t.label,o=[];t.properties.forEach((function(t){var e=t.name;"name"===e&&(o=["name"]),"title"===e&&(o=["title"])})),n.nodeStyle[r]={size:k,color:S[e],caption:o,icon:"",options:{}}})),t.edges.forEach((function(t,e){var r=t.label,o=[];t.properties.forEach((function(t){var e=t.name;"name"===e&&(o=["name"]),"title"===e&&(o=["title"])})),n.edgeStyle[r]={icon:"",size:_,color:D,caption:o,options:{}}})),n}var de=function(t){return"string"==typeof t?t:t.id},ye=function(t){return"string"==typeof t?t:t.id};function he(t){return t.map((function(t){return{id:t.id,label:t.label,source:"string"==typeof t.source?t.source:t.source.id,target:"string"==typeof t.target?t.target:t.target.id,properties:t.properties}}))}function ve(t,e){if(null!=t&&"string"==typeof e){for(var r=0,n="",o=e.length,i=t;r<o;){var a=e[r];if("."===a){if(null==(i=i[n]))return;n=""}else n+=a;r++}return i[n]}}function me(t){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}var ge=function(){var t=ne().store,e=t.graph,r=t.render,n=t.edgeStatus,o=t.edgeStyle;(0,a.useEffect)((function(){e&&("2D"===r&&e.linkCanvasObject&&e.linkCanvasObject((function(t,e,r){!function(t,e,r){return function(n,o){var i=Tt(t,n),a=se(t,o),c=a.selected,u=a.disabled,l=i.color,s=i.size,f=i.caption,p=void 0===f?[]:f,d=i.options,y=d.textColor,h=void 0===y?l:y,v=d.textSize,m=void 0===v?1.5*s:v,g=d.textBackgroundColor,b=d.selectColor,w=d.zoomLevel;if(!(r<w[0])){var O=p.map((function(e){return t.properties&&t.properties[e]})).join(" ");if(p&&0!==p.length&&O){var E=O.length*(m/2),x=t.source,S=t.target;if("object"===me(x)&&"object"===me(S)&&void 0!==x.x&&void 0!==x.y&&void 0!==S.x&&void 0!==S.y){var j={x:x.x+(S.x-x.x)/2,y:x.y+(S.y-x.y)/2},P={x:S.x-x.x,y:S.y-x.y},_=Math.atan2(P.y,P.x);_>Math.PI/2&&(_=-(Math.PI-_)),_<-Math.PI/2&&(_=-(-Math.PI-_)),e.save(),e.font="1px Sans-Serif",e.font="".concat(m,"px Sans-Serif");var L=[E+.8*m,m+.4*m];e.translate(j.x,j.y),e.rotate(_),e.fillStyle=g,e.fillRect.apply(e,[-L[0]/2,-L[1]/2].concat(L)),e.textAlign="center",e.textBaseline="middle",e.fillStyle=h,c&&(e.fillStyle=b),u&&(e.fillStyle=N),e.fillText(O,0,0),e.restore()}}}}}(t,e,r)(o,n)})).linkCanvasObjectMode((function(){return"after"})).linkDirectionalArrowLength((function(t){var e=Tt(t,o),r=e.options,n=void 0===r?{}:r,i=e.size;return void 0===n.arrowLength?3*i:n.arrowLength})).linkDirectionalArrowRelPos((function(t){return Tt(t,o).options.arrowPosition||1})).linkColor((function(t){var e=Tt(t,o),r=e.color,i=e.options,a=se(t,n),c=a.selected,u=a.disabled;return c?i.selectColor||I:u?N:r})).linkWidth((function(t){var e=Tt(t,o).size,r=n[t.id];return r&&r.selected?e+1:e})).linkDirectionalParticles(1).linkDirectionalParticleWidth((function(t){var e=n[t.id];return e&&e.selected?Tt(t,o).size+1:0})),"3D"===r&&e.linkColor((function(t){var e=Tt(t,o).color,r=n[t.id];return r&&r.selected?I:e})).linkLabel((function(t){return Tt(t,o).caption.map((function(e){var r=t&&t.properties&&t.properties[e];if(e&&r)return"".concat(e,": ").concat(r)})).join("")})).linkWidth((function(t){var e=Tt(t,o).size,r=n[t.id];return r&&r.selected?e+1:e})).linkDirectionalParticles(1).linkDirectionalParticleWidth((function(t){var e=n[t.id];return e&&e.selected?Tt(t,o).size+1:0})))}),[o,n,r,e])};function be(t){return function(t){if(Array.isArray(t))return we(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return we(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Oe=function(t,e,r){return function(n,o){if(void 0!==t.x&&void 0!==t.y){var i,a,c=kt(t,n),u=c.color,l=c.size,s=c.caption,f=c.icon,p=c.options,d=se(t,o),y=2*Math.sqrt(Math.max(0,l)),h=d.selected,v=d.hovering,m=d.disabled,g=p,b=g.zoomLevel,w=g.iconColor,O=g.iconSize,E=void 0===O?"".concat(y,"px"):O,x=g.textColor,S=void 0===x?u:x,j=g.textPosition,P=g.textBackgroundColor,_=g.textSize,L=void 0===_?.5*y:_,k=g.selectColor,T=s.map((function(e){return t.properties&&t.properties[e]}));if((h||v)&&(e.beginPath(),e.arc(t.x,t.y,1.2*y,0,2*Math.PI,!1),h&&(e.fillStyle=k,e.fill()),v&&(e.fillStyle=(a=.5,3===(i=(i=u).replace("#","")).length&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),6!==i.length?"transparent":"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+a+")"),e.fill())),e.beginPath(),e.arc(t.x,t.y,y,0,2*Math.PI,!1),e.fillStyle=m?N:u,e.fill(),f&&""!==f&&r>b[0]&&r<b[1]){var D=et[f]||"";e.font="".concat(E," iconfont"),e.textAlign="center",e.textBaseline="middle",e.fillStyle=m?N:w,e.fillText(D,t.x,t.y)}!function(t){var e=t.globalScale,r=t.ctx,n=t.node,o=t.R,i=t.texts,a=t.textColor,c=t.textPosition,u=t.zoomLevel,l=t.textBackgroundColor,s=t.textSize,f=t.status,p=t.selectColor;if(0===i.length||e<u[0])return;if(e>=u[1]){var d=16/e;r.font="".concat(d,"px Sans-Serif"),r.fillStyle="#fff",r.textAlign="center",r.textBaseline="middle",function(t,e){for(var r=e.text,n=void 0===r?"":r,o=e.x,i=e.y,a=e.maxWidth,c=e.lineHeight,u=String(n).split(" "),l="",s=[],f=0;f<u.length;f++){var p=l+u[f]+" ";t.measureText(p).width>a&&f>0?(s.push(l.trim()),l=u[f]+" "):l=p}s.push(l.trim());var d=i-s.length*c/2;s.forEach((function(e,r){t.fillText(e,o,d+r*c)}))}(r,{text:i.join(" "),x:n.x,y:n.y+d/2,maxWidth:2*o*.8,lineHeight:1.2*d})}if(e>=u[0]&&e<u[1]){var y=s,h=1.2*y,v=n.x,m=n.y;if("center"===c){v=n.x,m=n.y;var g=function(t){var e=t.texts,r=t.fontSize,n=t.textX,o=t.textY,i=t.ctx,a=t.textBackgroundColor,c=1.2*r,u=0,l=c*e.length;e.forEach((function(t,e){u=Math.max(i.measureText(t).width,u)}));var s=[u,l].map((function(t){return t+.2*r}));return i.fillStyle=a,i.fillRect.apply(i,[n-s[0]/2,o-s[1]/2].concat(be(s))),s}({ctx:r,texts:i,fontSize:y,textX:v,textY:m,textBackgroundColor:l});n.__bckgDimensions=g}else"top"===c?(v=n.x,m=n.y-o-h/2):"bottom"===c?(v=n.x,m=n.y+o+h/2):"left"===c?v=n.x-o-h/2:"right"===c&&(v=n.x+o+h/2);r.font="".concat(y,"px Sans-Serif"),r.textAlign="center",r.textBaseline="middle",r.fillStyle=a,f.selected&&(r.fillStyle=p),f.disabled&&(r.fillStyle=N),i.forEach((function(t,e){r.fillText(t,v,m+e*h)}))}}({globalScale:r,ctx:e,R:y,textSize:L,texts:T,node:t,textColor:S,selectColor:k,textPosition:j,zoomLevel:b,textBackgroundColor:P,status:d}),e.restore()}}};var Ee=function(){var t=ne().store,e=t.graph,r=t.render,n=t.nodeStyle,o=t.nodeStatus;(0,a.useEffect)((function(){e&&("2D"===r&&e.nodeCanvasObject&&e.nodeCanvasObject((function(t,e,r){Oe(t,e,r)(n,o)})).nodePointerAreaPaint((function(t,e,r,o){!function(t,e,r,n){return function(n){if(void 0!==t.x&&void 0!==t.y){r.fillStyle=e;var o=t.x,i=t.y,a=kt(t,n).size;r.beginPath();var c=2*Math.sqrt(Math.max(0,a));r.arc(o,i,c,0,2*Math.PI,!1),r.fill()}}}(t,e,r)(n)})).nodeVal((function(t){return kt(t,n).size})).nodeRelSize(2).nodeCanvasObjectMode((function(){return"replace"})),"3D"===r&&e.nodeVal((function(t){return kt(t,n).size})).nodeLabel((function(t){return kt(t,n).caption.join(" ")})).nodeRelSize(2).nodeColor((function(t){return kt(t,n).color})).nodeLabel((function(t){return t&&t.properties&&t.properties[kt(t,n).caption.join(" ")]})))}),[n,o,e,r])},xe=r(21896),Se=r(19363),je=r(92067);function Pe(t,e){t&&t.onRenderFramePost&&t.onRenderFramePost((function(t){e.forEach((function(e){var r=e.x,n=void 0===r?0:r,o=e.y,i=void 0===o?0:o,a=e.r,c=void 0===a?0:a,u=e.color,l=void 0===u?"#000":u,s=e.type,f=void 0===s?"circle":s,p=e.label;if("circle"===f){var d=p;t.beginPath(),t.setLineDash([5,5]),t.arc(n,i,c,0,2*Math.PI,!1),t.strokeStyle=l,t.lineWidth=1,t.stroke();var y=n,h=i-c-8;t.font="".concat(10,"px Arial"),t.fillStyle=l,t.textAlign="center",t.fillText(d,y,h)}}))}))}var _e=r(6724),Le=r.n(_e),ke=r(4081),Te=r(62432);function De(t){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(t)}function Ie(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ae(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(r),!0).forEach((function(e){Ce(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ce(t,e,r){var n;return n=function(t,e){if("object"!=De(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=De(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==De(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ne(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ze(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ze(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ge=function(t,e){for(var r=e.width,n=e.height,i=e.groupBy,a=e.nodeStyle,c=o.Utils.groupBy(t.nodes,(function(t){return ve(t,i)})),u={name:"root",children:[]},l=0,s=Object.entries(c);l<s.length;l++){var f=Ne(s[l],2),p=f[0],d=f[1];u.children.push({name:p,children:d})}var y=(0,ke.ZP)(u).sort((function(t,e){try{return Number(t.data.name)-Number(e.data.name)}catch(t){return 0}}));(0,Te.Z)().size([r,n]).padding(20).radius((function(t){var e=kt(t.data,a).size;return Math.round(4*Math.sqrt(Math.max(0,e))+2-10)}))(y);var h=[];y.descendants().forEach((function(t){var e=t.data,r=t.r,n=t.depth,o=t.x,i=t.y;n>1&&h.push(Ae(Ae({},e),{},{x:o,y:i,r:r}))}));var v=(y.children||[]).map((function(t){var e=t.x,r=t.y,n=kt({id:t.data.name,label:t.data.name},a).color;return{id:t.data.name,label:t.data.name,type:"circle",x:e,y:r,color:n,r:t.r,children:t.data.children.map((function(t){return t.id}))}}));return{nodes:h,edges:t.edges,combos:v}},Fe=r(56617);function Me(t){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Me(t)}function Re(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ze(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Re(Object(r),!0).forEach((function(e){Ue(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ue(t,e,r){var n;return n=function(t,e){if("object"!=Me(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Me(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Be=function(t){var e=t.render,r=t.nodeStyle,n=t.graph,o=t.layout,i=t.updateStore,a=t.data;if(n)if("3D"!==e){var c=o.type,u=o.options,l=u.groupBy;if("force-combo"===c&&""!==l){var s=a.nodes,f=a.edges;n.cooldownTicks(0);var p=ze({width:n.width(),height:n.height(),groupBy:"label",nodeStyle:r,reheatSimulation:!0},u),d=Ge({nodes:s,edges:he(f)},p),y=d.combos,h=new Map;y.forEach((function(t){h.set(t.id,ze({},t))})),n.d3Force("charge",null),n.d3Force("center",null),n.d3Force("link",null),n.d3Force("cluster",function(t,e){var r;function n(n){r.forEach((function(r){var o=t.get(ve(r,e)||"undefined");if(o){var i=r.x-o.x,a=r.y-o.y,c=Math.sqrt(i*i+a*a),u=o.r-(r.size||3);if(c>u){var l=(c-u)/c*n;r.x-=i*l,r.y-=a*l}}}))}return n.initialize=function(t){return r=t},n}(h,l)),n.d3Force("radial",function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.05;function o(o){r.forEach((function(r){var i=t.get(ve(r,e)||"undefined");if(i){var a=i.x-r.x,c=i.y-r.y;r.vx+=a*o*n,r.vy+=c*o*n}}))}return o.initialize=function(t){return r=t},o}(h,l)),n.d3Force("collide",Fe.Z().radius((function(t){var e=kt(t,r).size;return Math.round(4*Math.sqrt(Math.max(0,e))+2)}))),i((function(t){t.combos=y})),n.cooldownTicks(1/0),n.graphData({nodes:d.nodes,links:d.edges}),n.d3ReheatSimulation(),n.zoomToFit()}}else console.warn("3D not support combo")};var Ye=r(44200),Je=r(80621),qe=r(5271),Ve=r(68490);function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function Xe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $e(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(r),!0).forEach((function(e){We(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function We(t,e,r){var n;return n=function(t,e){if("object"!=He(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==He(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ke=function(){var t=ne(),e=t.store,r=t.updateStore,n=e.layout,o=void 0===n?{}:n,i=e.graph,c=e.nodeStyle,u=e.render,l=e.data,s=e.width,f=e.height,p=(0,a.useRef)(o.type);(0,a.useEffect)((function(){if(i){var t=o.type,e=void 0===t?"force":t,n=o.options,a=void 0===n?{}:n,d=l.nodes,y=l.edges;if("force"===e||"force-dagre"===e||"force-combo"===e){if("3D"===u)return void i.graphData({nodes:d,links:y});!function(t){t.cooldownTicks(1/0),t.dagMode(null),t.d3Force("cluster",null),t.d3Force("radial",null),t.onRenderFramePost&&t.onRenderFramePost((function(){}))}(i);var h=function(t){if(0===t)return 0;var e=1.2+.5*Math.floor((t-1)/500);return 1e3*Math.min(e,15)}(l.nodes.length);i.cooldownTime(h),console.log("force options",a),"force"===e&&(i.d3Force("center",(0,Ye.Z)().strength(a.centerStrength||1)).d3Force("charge",(0,Je.Z)().strength(a.chargeStrength||-30)).d3Force("link",(0,qe.Z)().distance(a.linkDistance||35)).d3Force("collide",(0,Ve.Z)().radius((function(t){var e=kt(t,c).size;return 2*Math.sqrt(Math.max(0,e))+2}))),i.graphData({nodes:d,links:y}),i.d3ReheatSimulation()),"force-dagre"===e&&(i.dagMode(a.direction||"radialin"),i.graphData({nodes:d,links:y})),"force-combo"===e&&Be({data:l,layout:o,graph:i,nodeStyle:c,render:u,updateStore:r})}if("preset"===e&&(i.cooldownTicks(0),i.graphData({nodes:d,links:y})),"circle-pack"===e){i.cooldownTicks(0);var v=$e({width:s,height:f,groupBy:"label",nodeStyle:c},a),m=Ge({nodes:d,edges:he(y)},v);i.graphData({nodes:m.nodes,links:m.edges}),r((function(t){t.combos=m.combos})),i.zoomToFit()}if("dagre"===e){i.cooldownTicks(0);var g=4*i.nodeRelSize(),b=$e($e({},a),{},{nodeWidth:g,nodeHeight:g,height:i.height(),width:i.width(),bbox:i.getGraphBbox()}),w=function(t,e){var r=t.nodes,n=t.edges,o=e.nodeId,i=void 0===o?"id":o,a=e.rankDir,c=void 0===a?"LR":a,u=e.ranker,l=void 0===u?"longest-path":u,s=e.linkSource,f=void 0===s?"source":s,p=e.linkTarget,d=void 0===p?"target":p,y=e.nodeWidth,h=void 0===y?40:y,v=e.nodeHeight,m=void 0===v?40:v,g=new(Le().graphlib.Graph);return g.setGraph({acyclicer:"greedy",nodesep:5,edgesep:1,ranksep:20,rankDir:c,ranker:l}),r.forEach((function(t){return g.setNode(t[i],Object.assign({},t,{width:h,height:m}))})),n.forEach((function(t){g.setEdge(t[f],t[d],Object.assign({},t))})),Le().layout(g),{nodes:g.nodes().map((function(t){var e=g.node(t);return e&&(delete e.width,delete e.height,delete e.fx,delete e.fy),e})),links:g.edges().map((function(t){return g.edge(t)}))}}({nodes:d,edges:he(y)},b);i.graphData({nodes:w.nodes,links:w.links}),i.zoomToFit()}p.current!==e&&(p.current=e,i.zoomToFit(400,10))}}),[l,u,i,o,s,f])},Qe=function(t){var e=function(){var t=ne(),e=t.store,r=t.updateStore,n=t.id,i=e.render,c=(0,a.useRef)(null),u=(0,a.useRef)(null),l=(0,a.useRef)(!1);return(0,a.useEffect)((function(){if(u.current){c.current=(0,je.Z)();var t=u.current.offsetWidth,e=u.current.offsetHeight,n=null;l.current=!1,"2D"===i&&(n=(0,xe.Z)()(u.current)).width(t).height(e).onNodeHover((function(t,e){var r;null===(r=c.current)||void 0===r||r.emit("node:hover",{node:t,prevNode:e})})).onNodeClick((function(t){var e;null===(e=c.current)||void 0===e||e.emit("node:click",t)})).onNodeRightClick((function(t,e){var r;null===(r=c.current)||void 0===r||r.emit("node:contextmenu",{node:t,evt:e})})).onBackgroundClick((function(t){var e;null===(e=c.current)||void 0===e||e.emit("canvas:click",t)})).onLinkClick((function(t){var e;null===(e=c.current)||void 0===e||e.emit("edge:click",t)})).onLinkHover((function(t){var e;null===(e=c.current)||void 0===e||e.emit("edge:hover",t)})),"3D"===i&&(n=(0,Se.Z)()(u.current).width(t).height(e).enableNodeDrag(!1).onNodeClick((function(t){var e;null===(e=c.current)||void 0===e||e.emit("node:click",t)})).onNodeHover((function(t,e){var r;null===(r=c.current)||void 0===r||r.emit("node:hover",{node:t,prevNode:e})})).onNodeRightClick((function(t,e){var r;null===(r=c.current)||void 0===r||r.emit("node:contextmenu",{node:t,evt:e})})).onBackgroundClick((function(t){var e;null===(e=c.current)||void 0===e||e.emit("canvas:click",t)})).onLinkClick((function(t){var e;null===(e=c.current)||void 0===e||e.emit("edge:click",t)})).onLinkHover((function(t,e){var r;null===(r=c.current)||void 0===r||r.emit("edge:hover",{edge:t,prevEdge:e})})));var a=o.Utils.debounce((function(){if(u.current){var t=u.current.offsetWidth,e=u.current.offsetHeight;n&&n.width(t).height(e)}}),200),s=new ResizeObserver(a);return s.observe(u.current),r((function(r){r.graph=n,r.emitter=c.current,r.width=t,r.height=e})),function(){n&&n._destructor(),u.current&&s.unobserve(u.current)}}}),[i]),{containerRef:u,id:n}}(),r=e.containerRef,n=e.id;Ee(),ge(),Ke(),function(){var t=ne().store,e=t.graph,r=t.combos;(0,a.useEffect)((function(){e&&(0===r.length?e.onRenderFramePost&&e.onRenderFramePost((function(){})):Pe(e,r))}),[r,e])}();var i={position:"relative",height:"100%",width:"100%",background:c.Z.useToken().token.colorBgBase};return a.createElement("div",{id:"GRAPH_".concat(n),ref:r,style:i})},tr=r(31105),er=r(7706),rr=r(78620);function nr(t){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nr(t)}function or(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ir(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0).forEach((function(e){ar(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):or(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ar(t,e,r){var n;return n=function(t,e){if("object"!=nr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==nr(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||lr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ur(t){return function(t){if(Array.isArray(t))return sr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||lr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(t,e){if(t){if("string"==typeof t)return sr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sr(t,e):void 0}}function sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var fr=function(t){return Object.prototype.toString.call(t)},pr=function(t){var e=new Set;return t.forEach((function(t){var r=t.properties;r&&"[object Array]"===fr(r)&&r.forEach((function(t){"number"!==t.type&&"DT_SIGNED_INT64"!==t.type||e.add(t.name)})),r&&function(t){return"[object Object]"===fr(t)}(r)&&Object.keys(r).forEach((function(t){"number"===r[t]&&e.add(t)}))})),ur(e.values()).map((function(t){return{label:t,value:t}}))},dr=function(){var t=ne(),e=t.store,r=t.updateStore,n=e.schema,o=e.data,i=n.nodes,c=cr((0,a.useState)({scaleType:"linear",property:""}),2),l=c[0],s=c[1],f=l.scaleType,p=l.property,d=pr(i),y=function(t,e){var r=t.nodes,n={};return e.map((function(t){var e=t.value;return n[e]={min:1/0,max:-1/0},e})),r.forEach((function(t){var e=t.properties;t.id,e&&Object.keys(e).forEach((function(t){var r=n[t];if(r){var o=e[t];r.min=Math.min(r.min,o),r.max=Math.max(r.max,o)}}))})),n}(o,d),h=function(){var t=o.nodes,e=y[p],n=e.min,i=e.max,a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"log",e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(t){case"linear":return(0,tr.Z)().domain(e).range(r);case"log":return 0===e[0]&&(e[0]=e[0]+1e-5),0===r[0]&&(r[0]=r[0]+1e-5),(0,er.Z)(e,r);case"pow":return(0,rr.ZP)().exponent(n).domain(e).range(r);default:throw new Error("Unknown scale type: ".concat(t))}}(f,[n,i],[.5,10]),c={};t.forEach((function(t){var e=t.properties,r=t.id,o=t.label;if(e){var i=Number(e[p]),u=a(i);c[r]={label:o,size:isNaN(u)?n:u}}})),r((function(t){Object.keys(c).forEach((function(e){var r=c[e],n=r.size,o=r.label;t.nodeStyle[e]=ir(ir(ir({},t.nodeStyle[o]),t.nodeStyle[e]),{},{size:n})}))}))};return a.createElement(u.Z,{vertical:!0,gap:12},a.createElement(m.Z.Text,null,"Choose Scaler:"),a.createElement(g.default,{defaultValue:"linear",style:{flex:1},options:[{label:"Linear",value:"linear"},{label:"Log",value:"log"},{label:"Pow",value:"pow"}],onChange:function(t){s((function(e){return ir(ir({},e),{},{scaleType:t})}))}}),a.createElement(m.Z.Text,null,"Choose Property:"),a.createElement(g.default,{defaultValue:"",style:{flex:1},options:d,onChange:function(t){s((function(e){return ir(ir({},e),{},{property:t})}))}}),a.createElement(Rt.ZP,{onClick:function(){h()}},"Apply"))},yr=function(t){return a.createElement(o.CollapseCard,{title:"Advanced Setting",tooltip:"The size of nodes or width of edges is linearly scaled based on the range of values in the selected property field.",defaultCollapse:!0},a.createElement(dr,null))},hr=["properties","style"],vr=["properties","style"];function mr(t){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mr(t)}function gr(){return gr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gr.apply(this,arguments)}function br(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function wr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Or(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wr(Object(r),!0).forEach((function(e){Er(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Er(t,e,r){var n;return n=function(t,e){if("object"!=mr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==mr(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var xr=m.Z.Title,Sr=m.Z.Text,jr=function(t){var e=ne(),r=e.updateStore,n=e.store,i=n.schema,c=n.nodeStyle,l=n.edgeStyle,s=n.graphId,f=(t.showHeader,function(t){console.log("value",t);var e=t.caption,n=t.color,i=t.label,a=t.size,c=t.type,u=t.icon;r((function(t){if("node"===c){var r=Or(Or({},t.nodeStyle),{},Er({},i,{color:n,size:a,caption:e,icon:u}));t.nodeStyle=r,o.Utils.storage.set("GRAPH_".concat(s,"_STYLE"),{nodeStyle:r,edgeStyle:Or({},t.edgeStyle)})}if("edge"===c){var l=Or(Or({},t.edgeStyle),{},Er({},i,{color:n,size:a,caption:e,icon:u}));t.edgeStyle=l,o.Utils.storage.set("GRAPH_".concat(s,"_STYLE"),{nodeStyle:Or({},t.nodeStyle),edgeStyle:l})}}))}),p=i.nodes.map((function(t){return Or(Or({},t),{},{style:c[t.label]})})),d=i.edges.map((function(t){return Or(Or({},t),{},{style:l[t.label]})}));return a.createElement(u.Z,{vertical:!0,gap:16},a.createElement(Sr,{type:"secondary",italic:!0},"You can click on each label to set the color, size, and display text for vertices and edges."),a.createElement(xr,{level:5,style:{margin:"0px"}},a.createElement(E.Z,{id:"Vertex Labels"})),a.createElement(O.Z,{wrap:!0,size:[0,6]},p.map((function(t,e){var r=t.properties,n=t.style,o=br(t,hr);return a.createElement(dt,gr({key:e,properties:r},o,n,{type:"node",onChange:f}))}))),a.createElement(xr,{level:5,style:{margin:"0px"}},a.createElement(E.Z,{id:"Edge Labels"})),a.createElement(O.Z,{wrap:!0,size:[0,6]},d.map((function(t,e){var r=t.properties,n=t.style,o=br(t,vr);return a.createElement(dt,gr({key:e,properties:r},o,n,{type:"edge",onChange:f}))}))),a.createElement(yr,null))},Pr=a.memo(jr),_r=function(t){return t},Lr=function(t){var e=t.data,r=t.schema,n=t.graphId,o=t.setNodeStyle,i=void 0===o?_r:o,c=t.setEdgeStyle,u=void 0===c?_r:c,l=ne().updateStore;return a.useEffect((function(){if(e){var t=pe(r,n),o=i(t.nodeStyle),a=u(t.edgeStyle);l((function(t){t.data=e,t.source=e,t.schema=r,t.graphId=n,t.nodeStyle=o,t.edgeStyle=a,t.dataMap=le(e)}))}}),[e,r,n]),null},kr=(0,a.memo)(Lr),Tr=function(t){var e=t.title,r=void 0===e?"Zoom to fitview":e,n=t.placement,i=void 0===n?"left":n,c=ne().store.graph;return a.createElement(Mt.Z,{title:a.createElement(E.Z,{id:"".concat(r)}),placement:i},a.createElement(Rt.ZP,{onClick:function(){c&&(1===c.graphData().nodes.length?(c.centerAt(0,0),c.zoom(6,600)):c.zoomToFit(600))},icon:a.createElement(o.Icons.ZoomFit,null),type:"text"}))},Dr=r(25046),Ir=function(t){var e=t.trigger,r=ne(),n=r.store,o=r.updateStore,i=n.emitter,c=function(t){o((function(t){0===Object.keys(t.nodeStatus).length&&0===Object.keys(t.edgeStatus).length&&0===t.selectNodes.length&&0===t.selectEdges.length||(t.nodeStatus={},t.edgeStatus={},t.selectNodes=[],t.selectEdges=[])}))};return(0,a.useEffect)((function(){var t=!("button"===e);return t&&(null==i||i.on("canvas:click",c)),function(){t&&(null==i||i.off("canvas:click",c))}}),[i,e]),"button"===e?a.createElement(Mt.Z,{title:"Clear Selected Status",placement:"left"},a.createElement(Rt.ZP,{type:"text",onClick:c,icon:a.createElement(Dr.Z,null)})):null},Ar=r(42512);function Cr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Nr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Zr=function(t){var e=ne().updateStore;return a.createElement("div",null,a.createElement(Ar.Z,{range:!0,defaultValue:[.5,1],max:1,min:.5,step:.01,onChangeComplete:function(t){e((function(e){console.log("onChangeComplete",t,e.source);var r,n,o,i,a,c,u,l,s=(r=e.source,a=(n={id:"slider-filter",prop:"weight",elementType:"edge",range:t}).prop,c=n.range,u=n.elementType,l=new Set,"edge"===u&&(o=r.edges.filter((function(t){t.id,t.label;var e=t.properties,r=t.source,n=t.target;if(c&&e&&a){var o=Cr(c,2),i=o[0],u=o[1],s=e[a]>=i&&e[a]<=u;return s&&(l.add(de(r)),l.add(ye(n))),s}})),i=r.nodes.filter((function(t){return l.has(t.id)}))),{nodes:i,edges:o});e.data=s}))}}),a.createElement(Rt.ZP,{block:!0,onClick:function(){e((function(t){t.data=t.source}))}},"reset"))};function Gr(t){return Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gr(t)}function Fr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Mr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Fr(Object(r),!0).forEach((function(e){Rr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Rr(t,e,r){var n;return n=function(t,e){if("object"!=Gr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Gr(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ur(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ur(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ur(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Br=function(t){var e=zr(a.useState({cluster:!1}),2),r=e[0],n=e[1],i=wi(),c=i.runCombos,u=i.clearCombos,l=r.cluster;return a.createElement(Mt.Z,{title:a.createElement(E.Z,{id:"Clustering layout"}),placement:"left"},a.createElement(Rt.ZP,{onClick:function(){n((function(t){return Mr(Mr({},t),{},{cluster:!t.cluster})})),l?u():c("label")},icon:a.createElement(o.Icons.Cluster,null),type:"text"}))},Yr=r(16889),Jr=r(1316);function qr(t){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qr(t)}function Vr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Hr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vr(Object(r),!0).forEach((function(e){Xr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xr(t,e,r){var n;return n=function(t,e){if("object"!=qr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==qr(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var $r=function(t){var e=ne(),r=e.store,n=e.updateStore,o=r.layout,i=o.type,c=o.options,l=function(t,e){n((function(r){r.layout.options[t]!==e&&(r.layout.options=Hr(Hr({},r.layout.options),{},Xr({},t,e)))}))};if("force"===i){var s=c.linkDistance,f=void 0===s?35:s,p=c.centerStrength,d=void 0===p?1:p,y=c.chargeStrength,h=void 0===y?-30:y;return a.createElement(u.Z,{vertical:!0,gap:12},a.createElement(m.Z.Text,{strong:!0},"Link distance"),a.createElement(Yr.Z,{defaultValue:f,onBlur:function(t){console.log(t.target.value),l("linkDistance",t.target.value)}}),a.createElement(m.Z.Text,{strong:!0},"Center Strength"),a.createElement(Jr.Z,{style:{width:"100%"},min:0,max:1,defaultValue:d,onBlur:function(t){console.log(t.target.value),l("centerStrength",t.target.value)}}),a.createElement(m.Z.Text,{strong:!0},"Charge Strength"),a.createElement(Yr.Z,{defaultValue:h,onBlur:function(t){console.log(t.target.value),l("chargeStrength",t.target.value)}}))}if("force-dagre"===i){var v=c.direction,b=void 0===v?"radialin":v;return a.createElement(u.Z,{vertical:!0,gap:12},a.createElement(m.Z.Text,{strong:!0},"Direction"),a.createElement(g.default,{options:[{label:"top-down",value:"td"},{label:"left-right",value:"lr"},{label:"bottom-up",value:"bu"},{label:"right-left",value:"rl"},{label:"inwards-radially",value:"radialin"},{label:"outwards-radially",value:"radialout"}],value:b,onChange:function(t){l("direction",t)}}))}return a.createElement("div",null)},Wr=[{type:"force",options:{}},{type:"force-dagre",options:{}},{type:"force-combo",options:{}},{type:"dagre",options:{}},{type:"circle-pack",options:{}},{type:"preset",options:{}}].map((function(t){return{label:t.type,value:t.type}})),Kr=function(t){var e=ne(),r=e.store,n=e.updateStore,o=r.layout,i=(r.graph,o.type);return a.createElement(u.Z,{vertical:!0,gap:12},a.createElement(m.Z.Text,{type:"secondary",italic:!0},"you can fine-tune the layout parameters here to optimize the graph display."),a.createElement(m.Z.Text,{strong:!0},"Layout Algorithm"),a.createElement(g.default,{options:Wr,value:i,onChange:function(t){n((function(e){e.layout={type:t,options:{}}}))}}),a.createElement($r,null))},Qr=r(83388);function tn(t){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tn(t)}function en(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function rn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?en(Object(r),!0).forEach((function(e){nn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):en(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function nn(t,e,r){var n;return n=function(t,e){if("object"!=tn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==tn(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var on=function(t){var e=t.nodes,r=void 0===e?[]:e,n=t.edges,o=void 0===n?[]:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return{selected:!0}},a=r.reduce((function(t,e){return rn(rn({},t),{},nn({},e.id,i(e)))}),{}),c=o.reduce((function(t,e){return rn(rn({},t),{},nn({},e.id,i(e)))}),{});return{nodeStatus:a,edgeStatus:c}},an=function(t,e,r){var n=t.graphData(),i=n.nodes,a=n.links.map((function(t){return rn(rn({},t),{},{source:t.source.id,target:t.target.id})})),c=i.filter((function(t){return-1!==r.indexOf(t.id)})),u=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=2*Math.PI/t.length;return t.map((function(t,o){var i=o*n;return rn(rn({},t),{},{x:e.x+r*Math.cos(i),y:e.y+r*Math.sin(i),z:0})}))}(e.nodes,c);return o.Utils.handleExpand({nodes:i,edges:a},{nodes:u,edges:e.edges})},cn=r(42176);function un(t){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},un(t)}function ln(){ln=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==un(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(un(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function sn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sn(Object(r),!0).forEach((function(e){pn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pn(t,e,r){var n;return n=function(t,e){if("object"!=un(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==un(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function yn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){dn(i,n,o,a,c,"next",t)}function c(t){dn(i,n,o,a,c,"throw",t)}a(void 0)}))}}function hn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return vn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var mn=function(t){var e=ne(),r=e.store,n=e.updateStore,i=r.schema,c=r.selectNodes,u=r.emitter,l=r.graph,s=r.getService;(0,o.useDynamicStyle)("\n    .studio-graph-neighbor-query .ant-menu-vertical .ant-menu-submenu-title{\n        padding-inline:12px !important;\n    }\n    .studio-graph-neighbor-query .ant-menu .ant-menu-submenu-title .anticon span {\n        margin-inline-start:8px !important;\n    }\n  ","studio-neighbor-query");var f=(0,a.useRef)(null),p=hn((0,a.useState)({itemMap:{},isLoading:!1}),2),d=p[0],y=p[1],h=d.itemMap,v=function(){var t=yn(ln().mark((function t(){var e;return ln().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s("queryNeighborItems")({schema:i});case 2:e=t.sent,y((function(t){return fn(fn({},t),{},{itemMap:e})}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if((0,a.useEffect)((function(){v()}),[i]),0===c.length)return null;var m=function(){var t=yn(ln().mark((function t(e){var r,o,i,a,f,p,d;return ln().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.key,null==u||u.emit("canvas:click"),n((function(t){t.isLoading=!0})),o=c.map((function(t){return t.id})),t.next=6,s("queryNeighborData")({selectIds:o,key:r});case 6:(i=t.sent).nodes.length>0&&l?(a=on(i,(function(t){return{selected:!0}})),f=a.nodeStatus,p=a.edgeStatus,d=an(l,i,o),n((function(t){t.data=d,t.source=d,t.nodeStatus=f,t.edgeStatus=p,t.isLoading=!1,t.selectNodes=i.nodes}))):n((function(t){t.isLoading=!1}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=h.all,b=[{icon:a.createElement(cn.Z,null),key:"NeighborQuery",label:"NeighborQuery",children:h[c[0].label]||g}];return a.createElement("div",{ref:f,className:"studio-graph-neighbor-query"},a.createElement(Qr.Z,{getPopupContainer:function(t){return f.current?f.current:t},onClick:m,style:{margin:"0px",padding:"0px",width:"103%"},mode:"vertical",items:b}))},gn=r(9541);function bn(t){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bn(t)}function wn(){wn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==bn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(bn(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function On(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var En=function(){var t=ne(),e=t.store,r=t.updateStore,n=e.selectNodes,o=e.emitter,i=e.graph,c=e.getService,u=function(){var t,e=(t=wn().mark((function t(){var e,a,u,l,s,f;return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r((function(t){t.isLoading=!0})),null==o||o.emit("canvas:click"),e=n.map((function(t){return t.id})),t.next=5,c("queryCommonNeighbor")(e);case 5:(a=t.sent).nodes.length>0?(u=on(a,(function(t){return{selected:!0}})),l=u.nodeStatus,s=u.edgeStatus,f=an(i,a,e),r((function(t){t.data=f,t.isLoading=!1,t.nodeStatus=l,t.edgeStatus=s}))):r((function(t){t.isLoading=!1}));case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){On(i,n,o,a,c,"next",t)}function c(t){On(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return a.createElement(Rt.ZP,{onClick:u,icon:a.createElement(gn.Z,null),type:"text",style:{width:"100%",justifyContent:"left"}},"CommonNeighbor")},xn=r(86132);function Sn(t){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sn(t)}var jn=function(t){var e=ne(),r=e.store,n=e.updateStore,o=r.nodeStatus,i=r.emitter;return a.createElement(Rt.ZP,{onClick:function(){null==i||i.emit("canvas:click");var t=Object.keys(o).filter((function(t,e){return o[t].selected}));n((function(e){var r={nodes:e.data.nodes.filter((function(e){return!t.includes(e.id)})),edges:e.data.edges.filter((function(e){return!t.includes("object"===Sn(e.source)?e.source.id:e.source)&&!t.includes("object"===Sn(e.target)?e.target.id:e.target)}))};e.data=r,e.dataMap=le(r)}))},icon:a.createElement(xn.Z,null),type:"text",style:{width:"100%",justifyContent:"left"}},"Delete Vertex")},Pn=r(10422),_n=r(2941),Ln=r(41468);function kn(t){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kn(t)}function Tn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Dn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tn(Object(r),!0).forEach((function(e){In(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function In(t,e,r){var n;return n=function(t,e){if("object"!=kn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==kn(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function An(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Cn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Nn=function(t){var e=t.onSelect,r=t.title,n=void 0===r?"Select nodes by box selection":r,i=t.placement,c=void 0===i?"left":i,u=ne(),l=u.store,s=u.updateStore,f=u.id,p=l.graph,d=l.data,y=(0,a.useRef)(null),h=An((0,a.useState)(!1),2),v=h[0],m=h[1];(0,a.useEffect)((function(){var t=function(t){"Escape"!==t.key&&"Enter"!==t.key||m(!1)};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[]);(0,a.useEffect)((function(){var t=(0,Ln.Z)(y.current);if(v&&p){var r=(p.graphData()||{}).nodes,n=void 0===r?[]:r,o=(0,_n.Dm)().extent([[0,0],[t.node().clientWidth,t.node().clientHeight]]).on("end",(function(t){if(t.selection){var r=An(t.selection,2),o=An(r[0],2),i=o[0],a=o[1],c=An(r[1],2),u=c[0],l=c[1],f=p.screen2GraphCoords(i,a,0),y=p.screen2GraphCoords(u,l,0);!function(t){var r=d.nodes.reduce((function(t,e){return Dn(Dn({},t),{},In({},e.id,{disabled:!0}))}),{});t.forEach((function(t){r[t.id]={disabled:!1,selected:!0}})),s((function(e){e.nodeStatus=r,e.selectNodes=t})),e&&e(t)}(n.filter((function(t){return t.x>=f.x&&t.x<=y.x&&t.y>=f.y&&t.y<=y.y})))}}));t.append("g").attr("class","brush").call(o)}return function(){t.select(".brush").remove()}}),[v,e,p]);var g=v?{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"block",background:"rgba(0, 0, 0, 0.05)"}:{display:"none"},b=document.getElementById("GRAPH_".concat(f));return b?a.createElement(a.Fragment,null,a.createElement(Mt.Z,{placement:c,title:a.createElement(E.Z,{id:"".concat(n)})},a.createElement(Rt.ZP,{icon:a.createElement(o.Icons.Lasso,null),type:"text",onClick:function(){m((function(t){return!t}))}})),Pn.createPortal(a.createElement("svg",{ref:y,style:g}),b)):null},Zn=r(71433),Gn=function(t){return ne().store.isLoading?a.createElement("div",{style:{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(0,0,0,0.1)"}},a.createElement(Zn.Z,null)):null},Fn=r(56977);function Mn(t){return Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mn(t)}function Rn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function zn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rn(Object(r),!0).forEach((function(e){Un(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Un(t,e,r){var n;return n=function(t,e){if("object"!=Mn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Mn(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Bn=function(t){var e=ne(),r=e.store,n=e.updateStore,o=r.nodeStatus,i=r.graph,c=(r.dataMap,r.emitter);return a.createElement(Rt.ZP,{onClick:function(){null==c||c.emit("canvas:click");var t=Object.keys(o).filter((function(t,e){return o[t].selected}))[0];if(i&&t){var e=Yn(i.graphData(),t);n((function(t){t.data=e,t.dataMap=le(e)}))}},icon:a.createElement(Fn.Z,null),type:"text",style:{width:"100%",justifyContent:"left"}},"Delete LeafNodes")},Yn=function(t,e){var r=t.nodes,n=t.links,o=new Map;n.forEach((function(t){o.has(t.source.id)||o.set(t.source.id,[]),o.has(t.target.id)||o.set(t.target.id,[]),o.get(t.source.id).push(t),o.get(t.target.id).push(t)}));var i=new Set,a=new Set;(o.get(e)||[]).forEach((function(t){var r=t.source.id===e?t.target:t.source,n=o.get(r.id)||[],c=t.source.id===t.target.id;1!==n.length||c||(i.add(r.id),a.add(t))}));var c=n.filter((function(t){return!(a.has(t)&&t.source.id!==t.target.id)})).map((function(t){return zn(zn({},t),{},{source:t.source.id,target:t.target.id})}));return{nodes:r.filter((function(t){return!i.has(t.id)})),edges:c}},Jn=r(41794),qn=function(t){var e=t.title,r=void 0===e?a.createElement(E.Z,{id:"Export graph json"}):e,n=t.placement,i=void 0===n?"left":n,c=ne().store.data;return a.createElement(Mt.Z,{title:r,placement:i},a.createElement(Rt.ZP,{onClick:function(){o.Utils.createDownload(JSON.stringify({nodes:c.nodes,edges:c.edges},null,2),"graph.json")},icon:a.createElement(Jn.Z,null),type:"text"}))};function Vn(t){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(t)}function Hn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Xn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Hn(Object(r),!0).forEach((function(e){$n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $n(t,e,r){var n;return n=function(t,e){if("object"!=Vn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Vn(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wn(t){return function(t){if(Array.isArray(t))return Kn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Kn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Qn=!1,to=function(){var t=ne(),e=t.store,r=t.updateStore,n=e.emitter,o=e.data,i=e.graph;(0,a.useEffect)((function(){var t=le(o),e=function(t){"Shift"===t.key&&(Qn=!0)},i=function(t){"Shift"===t.key&&(Qn=!1)};document.addEventListener("keydown",e),document.addEventListener("keyup",i);var a=function(e){if(e){var n=e.id;if(Qn)r((function(t){t.data.nodes.forEach((function(e){t.nodeStatus[e.id]={disabled:!0}})),t.data.edges.forEach((function(e){t.edgeStatus[e.id]={disabled:!0}}));var r=t.selectNodes.map((function(t){return t.id})).includes(n)?t.selectNodes.filter((function(t){return t.id!==n})):[].concat(Wn(t.selectNodes),[e]);t.selectNodes=r,r.forEach((function(e){t.nodeStatus[e.id]={selected:!0,disabled:!1}}))}));else{var o=t.get(n)||{},i=o.outEdges,a=void 0===i?[]:i,c=o.neighbors,u=void 0===c?[]:c,l=o.inEdges,s=void 0===l?[]:l,f=u.reduce((function(t,e){return Xn(Xn({},t),{},$n({},e,{hovering:!0}))}),$n({},n,{selected:!0})),p=Wn(new Set([].concat(Wn(a),Wn(s)))).reduce((function(t,e){return Xn(Xn({},t),{},$n({},e,{selected:!0}))}),{});r((function(t){t.data.nodes.forEach((function(e){t.nodeStatus[e.id]={disabled:!0}})),t.data.edges.forEach((function(e){t.edgeStatus[e.id]={disabled:!0}})),t.nodeStatus=Xn(Xn({},t.nodeStatus),f),t.edgeStatus=Xn(Xn({},t.edgeStatus),p),t.selectNodes=[e]}))}}};return null==n||n.on("node:click",a),function(){null==n||n.off("node:click",a),document.removeEventListener("keydown",e),document.removeEventListener("keyup",i)}}),[n,o,i])};function eo(t){return eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eo(t)}function ro(t,e,r){var n;return n=function(t,e){if("object"!=eo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==eo(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var no=function(){var t=ne(),e=t.store,r=t.updateStore,n=e.emitter,o=e.data,i=e.graph;(0,a.useEffect)((function(){var t=function(t){var e=t.id,n=t.source,o=t.target;t&&n&&o&&r((function(r){r.nodeStatus=ro(ro({},n.id,{hovering:!0}),o.id,{hovering:!0}),r.edgeStatus=ro({},e,{selected:!0}),r.selectEdges=[t]}))};return null==n||n.on("edge:click",t),function(){null==n||n.off("edge:click",t)}}),[n,o,i])};function oo(t){return oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oo(t)}function io(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ao(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?io(Object(r),!0).forEach((function(e){co(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):io(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function co(t,e,r){var n;return n=function(t,e){if("object"!=oo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=oo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==oo(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var uo=function(){var t=ne(),e=t.store,r=t.updateStore,n=e.emitter,o=e.data,i=e.graph;(0,a.useEffect)((function(){var t=function(t){var e=t.node,n=t.prevNode;if(n){var o=n.id;r((function(t){var e=t.nodeStatus[o]||{};t.nodeStatus[o]=ao(ao({},e),{},{hovering:!1})}))}if(e){var i=e.id;r((function(t){var e=t.nodeStatus[i]||{};t.nodeStatus[i]=ao(ao({},e),{},{hovering:!0})}))}};return n&&i&&n.on("node:hover",t),function(){null==n||n.off("node:hover",t)}}),[n,o,i])};function lo(t){return lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lo(t)}function so(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?so(Object(r),!0).forEach((function(e){po(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):so(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function po(t,e,r){var n;return n=function(t,e){if("object"!=lo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==lo(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var yo=function(){var t=ne(),e=t.store,r=t.updateStore,n=e.emitter,i=e.graph,c=e.combos;(0,a.useEffect)((function(){var t,e,a,u=document.querySelector(".force-graph-container canvas"),l=!1,s=!1;function f(t){if(u){var e=(l=u.getBoundingClientRect(),s=window.pageXOffset||document.documentElement.scrollLeft,f=window.pageYOffset||document.documentElement.scrollTop,{top:l.top+f,left:l.left+s}),r=t.pageX-e.left,n=t.pageY-e.top,o=null==i?void 0:i.screen2GraphCoords(r,n,0);if(o){var a=c.find((function(t){var e=function(t){var e=t.x,r=t.y,n=t.r,o=t.cluster,i=e,a=r-n-8,c=Math.max(10*String(o).length*.6,50);return{x:i-c/2,y:a-5,w:c,h:10}}(t);return function(t,e){var r=t.x,n=t.y,o=e.x,i=e.y,a=e.w,c=e.h;return r>=o&&r<=o+a&&n>=i&&n<=i+c}(o,e)}));if(a)return a}}var l,s,f;return!1}function p(t,e){i&&i.graphData().nodes.forEach((function(r){"object"===lo(l)&&-1!==l.children.indexOf(r.id)&&(r.x=r.x+t,r.y=r.y+e)}))}var d=o.Utils.fakeSnapshot(c);function y(t,e){var r=d.map((function(r){return"object"===lo(l)&&r.id===l.id?fo(fo({},r),{},{x:r.x+t,y:r.y+e}):r}));d=r,Pe(i,r)}function h(r){if(a=Date.now(),i.autoPauseRedraw&&i.autoPauseRedraw(!1),u&&(l=f(r))){i.enablePanInteraction(!1),u.classList.add("grabbable");var n=(null==i?void 0:i.screen2GraphCoords(r.clientX,r.clientY,0))||{x:0,y:0},o=n.x,c=n.y;t=o,e=c,s=!0}}function v(r){if(s&&u){var n=(null==i?void 0:i.screen2GraphCoords(r.clientX,r.clientY,0))||{x:0,y:0},o=n.x,a=n.y,c=o-t,l=a-e;t=o,e=a,p(c,l),y(c,l)}}function m(o){if(i.autoPauseRedraw&&i.autoPauseRedraw(!0),s&&u)if(s=!1,u.classList.remove("grabbable"),Date.now()-a<200)!function(t){var e=f(t);e&&(null==n||n.emit("combo:click",fo(fo({},t),{},{item:e})))}(o);else{var c=(null==i?void 0:i.screen2GraphCoords(o.clientX,o.clientY,0))||{x:0,y:0},l=c.x,h=c.y,v=l-t,m=h-e;p(v,m),y(v,m),r((function(t){t.combos=d}))}i.enablePanInteraction(!0)}function g(){}return u&&(u.addEventListener("pointerdown",h),u.addEventListener("pointermove",v),u.addEventListener("pointerup",m),u.addEventListener("pointerout",g)),function(){u&&(u.removeEventListener("pointerdown",h),u.removeEventListener("pointermove",v),u.removeEventListener("pointerup",m),u.removeEventListener("pointerout",g))}}),[c,i,n])},ho=function(t){return to(),uo(),no(),yo(),function(){var t=ne().store,e=t.graph,r=t.focusNodes,n=t.width,o=(0,a.useRef)(0);(0,a.useEffect)((function(){return o.current=setTimeout((function(){if(r.length,e){var t=e.getGraphBbox((function(t){return r.includes(t.id)}));if(t){var n={x:(t.x[0]+t.x[1])/2,y:(t.y[0]+t.y[1])/2};e&&e.centerAt&&e.centerAt(n.x,n.y,400)}}}),200),function(){clearTimeout(o.current)}}),[e,r,n])}(),null},vo=function(t){var e=ne(),r=e.updateStore,n=e.store.graph;return a.createElement(Mt.Z,{title:"Clear Canvas Data",placement:"left"},a.createElement(Rt.ZP,{onClick:function(){r((function(t){t.data={nodes:[],edges:[]},t.source={nodes:[],edges:[]},t.combos=[],t.selectNodes=[],t.selectEdges=[],t.nodeStatus={},t.edgeStatus={}})),n&&(n.zoomToFit(),n.zoom(6))},icon:a.createElement(xn.Z,null),type:"text"}))},mo=r(73873),go=["__controlPoints","__style_curvature","__nodePairId","__indexColor"];function bo(t){return bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bo(t)}function wo(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Oo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Eo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Eo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var xo=function(t){var e=ne().store,r=e.graph,n=e.data,o=Oo(a.useState(!1),2),i=o[0],c=o[1],u=i?"Merge Edges":"UnMerge Edges";return a.createElement(Mt.Z,{title:u,placement:"left"},a.createElement(Rt.ZP,{onClick:function(){if(r){var t=n.nodes,e=n.edges;if(i){var o=e.map((function(t){t.__controlPoints,t.__style_curvature,t.__nodePairId,t.__indexColor;return wo(t,go)}));r.graphData({nodes:t,links:o})}else{var a=function(t){var e={},r={},n=.3;return t.forEach((function(t){var n="object"===bo(t.source)?t.source.id:t.source,o="object"===bo(t.target)?t.target.id:t.target,i="".concat(n,"_").concat(o);t.__nodePairId=i,delete t.__controlPoints;var a=n===o?e:r;a[i]||(a[i]=[]),a[i].push(t)})),Object.keys(e).forEach((function(t){var r=e[t],o=r.length-1;r[o].__style_curvature=1;for(var i=(1-n)/o,a=0;a<o;a++)r[a].__style_curvature=n+a*i})),Object.keys(r).filter((function(t){return r[t].length>1})).forEach((function(t){var e=r[t],o=e.length-1,i=e[o];i.__style_curvature=n;for(var a=2*n/o,c=0;c<o;c++)e[c].__style_curvature=c*a-n,i.source!==e[c].source&&(e[c].__style_curvature*=-1)})),t}(e);r.linkCurvature("__style_curvature"),r.graphData({links:a,nodes:t})}}c(!i)},icon:a.createElement(mo.Z,null),type:"text"}))};function So(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return jo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Po=function(t){var e=ne().store.graph,r=So(a.useState(!1),2),n=r[0],o=r[1],i=n?"Force Mode":"Dagre Mode";return a.createElement(Mt.Z,{title:i,placement:"left"},a.createElement(Rt.ZP,{onClick:function(){e&&(n?e.dagMode(null):e.dagMode("lr")),o(!n)},icon:a.createElement(gn.Z,null),type:"text"}))},_o=r(84254);function Lo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ko(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ko(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ko(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var To=function(t){var e=ne().store.graph,r=Lo(a.useState(!1),2),n=r[0],o=r[1],i=n?"unFixed nodes when dragging":"Fixed nodes when dragging";return a.createElement(Mt.Z,{title:i,placement:"left"},a.createElement(Rt.ZP,{onClick:function(){e&&(n?e.onNodeDragEnd((function(t){t.fx=void 0,t.fy=void 0})):e.onNodeDragEnd((function(t){t.fx=t.x,t.fy=t.y}))),o(!n)},icon:a.createElement(_o.Z,{rotate:n?0:90}),type:"text"}))},Do=r(54666),Io=r(91702),Ao=function(t,e){return{label:a.createElement(u.Z,{justify:"center",align:"center",vertical:!0,gap:12},a.createElement(o.Illustration.Welcome,{style:{width:"100px",height:"100px"}}),a.createElement(m.Z.Text,null,e)),value:t,style:{height:"150px"}}},Co=[Ao("force","Force Layout"),Ao("force-combo","Force Combo"),Ao("force-dagre","Force Dagre"),Ao("dagre","Dagre Layout"),Ao("circle-pack","Circle Pack")],No=function(){var t=ne(),e=t.store,r=t.updateStore,n=e.layout;e.graph;return a.createElement(Io.ZP.Group,{block:!0,options:Co,defaultValue:n.type,optionType:"button",onChange:function(t){r((function(e){e.layout={type:t.target.value,options:{}}}))}})},Zo=function(t){return a.createElement(w.Z,{content:a.createElement(No,null),title:"Switch Layout",placement:"right"},a.createElement(Rt.ZP,{type:"text",icon:a.createElement(Do.Z,null)}))};function Go(t){return Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Go(t)}function Fo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Mo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Fo(Object(r),!0).forEach((function(e){Ro(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ro(t,e,r){var n;return n=function(t,e){if("object"!=Go(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Go(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Go(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Uo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Bo=function(t){var e=t.style,r=void 0===e?{}:e,n=ne().store,o=n.graph,i=n.data,c=zo(a.useState({zoom:"1"}),2),u=c[0],l=c[1];return a.useEffect((function(){o&&o.onZoom&&o.onZoom((function(t){l((function(e){return Mo(Mo({},e),{},{zoom:t.k.toFixed(2)})}))}))}),[o,i]),a.createElement("div",{style:Mo({position:"absolute",bottom:0,left:0,zIndex:998,padding:"12px"},r)},a.createElement(O.Z,{size:"large"},a.createElement(m.Z.Text,{type:"secondary"},"Node Counts: ",i.nodes.length),a.createElement(m.Z.Text,{type:"secondary"},"Edge Counts: ",i.edges.length),a.createElement(m.Z.Text,{type:"secondary"},"Zoom Ratio: ",u.zoom)))};function Yo(t){return Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yo(t)}function Jo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jo(Object(r),!0).forEach((function(e){Vo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Vo(t,e,r){var n;return n=function(t,e){if("object"!=Yo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Yo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Yo(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ho(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Xo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var $o=function(t){var e=t.children,r=ne(),n=r.store,o=r.updateStore,i=c.Z.useToken().token,l=n.graph,s=n.emitter,f=Ho(a.useState({visible:!1,x:0,y:0}),2),p=f[0],d=f[1],y=p.visible,h=p.x,v=p.y;return a.useEffect((function(){var t=function(t){if(l){var e=t.node,r=t.prevNode;if(e&&l.graph2ScreenCoords){var n=l.graph2ScreenCoords(e.x,e.y,0),i=n.x,a=n.y;d((function(t){return qo(qo({},t),{},{visible:!0,x:i,y:a})})),o((function(t){t.nodeStatus=Vo({},e.id,{selected:!0}),t.selectNodes=[e]}))}else d((function(t){return qo(qo({},t),{},{visible:!1})})),r&&o((function(t){t.nodeStatus={},t.selectNodes=[]}))}};return null==s||s.on("node:hover",t),function(){null==s||s.off("node:hover",t)}}),[s]),a.createElement("div",{style:{opacity:y?1:0,visibility:y?"visible":"hidden",position:"absolute",left:h,top:v,width:180,height:"auto",backgroundColor:i.colorBgContainer,boxShadow:i.boxShadow,zIndex:2e3,padding:"4px",borderRadius:"8px"}},a.createElement(u.Z,{vertical:!0,gap:8},e))};function Wo(t){return Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wo(t)}function Ko(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Qo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ko(Object(r),!0).forEach((function(e){ti(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ko(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ti(t,e,r){var n;return n=function(t,e){if("object"!=Wo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Wo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Wo(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ei=function(t){var e={};return Object.keys(t).forEach((function(r){e[r]=Qo(Qo({},t[r]),{},{caption:["label","counts"],size:3,options:{textSize:3,zoomLevel:[.1,20]}})})),e},ri=function(t){var e={};return Object.keys(t).forEach((function(r){e[r]=Qo(Qo({},t[r]),{},{size:1,color:"#000",caption:["label","counts"],options:{textSize:1.8,textColor:"#fff",textBackgroundColor:"#000",zoomLevel:[.1,20]}})})),e};function ni(t){return ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ni(t)}function oi(){oi=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==ni(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ni(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function ii(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ai(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ii(Object(r),!0).forEach((function(e){ci(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ii(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ci(t,e,r){var n;return n=function(t,e){if("object"!=ni(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ni(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==ni(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ui(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function li(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return si(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return si(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function si(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var fi=function(t){var e=t.style,r=void 0===e?{}:e,n=t.id,o=ne().store,i=o.schema,c=o.getService,u=li((0,a.useState)({schemaData:{nodes:[],edges:[]}}),2),l=u[0],s=u[1],f=function(){var t,e=(t=oi().mark((function t(){var e,r,n,o,a,u,l;return oi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.nodes,r=i.edges,0!==e.length){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,n="MATCH (a)-[r]-(b)\n    WITH r, type(r) as label\n    return label, COUNT(*) as counts\n    ORDER BY counts DESC",t.next=8,c("queryStatement")("MATCH (n) \n      WITH n, labels(n) as label\n      return label, COUNT(*) as counts\n      ORDER BY counts DESC");case 8:return o=t.sent,t.next=11,c("queryStatement")(n);case 11:a=t.sent,u=e.map((function(t){var e=t.label,r=o.table.find((function(t){return t.label===e}));return ai(ai({},t),{},{id:e,properties:{counts:r.counts,label:e}})})),l=r.map((function(t){var e=t.label,r=a.table.find((function(t){return t.label===e}));return ai(ai({},t),{},{id:e,properties:{counts:r.counts,label:e}})})),console.log({nodes:u,edges:l}),s((function(t){return ai(ai({},t),{},{schemaData:{nodes:u,edges:l}})})),t.next=20;break;case 18:t.prev=18,t.t0=t.catch(3);case 20:case"end":return t.stop()}}),t,null,[[3,18]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ui(i,n,o,a,c,"next",t)}function c(t){ui(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){f()}),[i]),a.createElement("div",{style:ai({width:"100%",height:"200px"},r)},a.createElement(oe,{id:n},a.createElement(kr,{data:l.schemaData,schema:i,graphId:n,setNodeStyle:ei,setEdgeStyle:ri}),a.createElement(Qe,null)))},pi=r(35215);function di(t){return di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},di(t)}function yi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function hi(t,e,r){var n;return n=function(t,e){if("object"!=di(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=di(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==di(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var vi=function(t){var e=new Map;e.set("id",{title:"id",dataIndex:"id",key:"id"}),e.set("label",{title:"label",dataIndex:"label",key:"label"});var r=t.map((function(t){var r=t.id,n=t.properties,o=void 0===n?{}:n,i=t.label;return Object.keys(o).forEach((function(t){e.set(t,{title:t,dataIndex:t,key:t})})),function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yi(Object(r),!0).forEach((function(e){hi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({key:r,id:r,label:i},o)}));return{dataSource:r,columns:Array.from(e.values())}};function mi(t){return function(t){if(Array.isArray(t))return gi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return gi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gi(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var bi=function(t){var e=ne().store,r=e.selectEdges,n=e.selectNodes,o=vi([].concat(mi(n),mi(r))),i=o.dataSource,c=o.columns;return a.createElement(pi.Z,{size:"large",dataSource:i,columns:c,bordered:!0,scroll:{x:"max-content"},pagination:{simple:!0,size:"small"}})},wi=function(){var t=ne(),e=t.store,r=t.updateStore,n=e.graph,o=e.width,i=e.height;return{runCombos:function(t){r((function(e){e.layout={type:"force-combo",options:{groupBy:t,reheatSimulation:!0}}}))},clearCombos:function(){r((function(t){t.combos=[],t.layout={type:"force",options:{}}}))},focusNodes:function(t){if(n){var e=n.getGraphBbox((function(e){return t.includes(e.id)})),r=1===t.length,a=r?i/2.5:10;if(e){var c={x:(e.x[0]+e.x[1])/2,y:(e.y[0]+e.y[1])/2},u=Math.max(1e-5,Math.min(1e5,(o-2*a)/(e.x[1]-e.x[0]),(i-2*a)/(e.y[1]-e.y[0])));n.centerAt(c.x,c.y,400),n.zoom(r?14:u,400)}}}}}},43221:function(t,e,r){r.r(e),r.d(e,{default:function(){return Vi},layout:function(){return Zt},parseSchemaByFiles:function(){return Xo},sdk:function(){return qi},transEdge2Entity:function(){return Rt},transMappingSchemaToOptions:function(){return ln},transOptionsToSchema:function(){return tn},transSchemaToOptions:function(){return Kr},transformDataToReactFlow:function(){return Mt},transformEdges:function(){return Ft},transformGraphNodes:function(){return Gt},transformImportOptionsToSchemaMapping:function(){return sn},transformNodes:function(){return zt},useContext:function(){return p.qp},validateProperties:function(){return Ue}});var n=r(50959),o=r(77320),i=r(10866),a=r(11029),c=r(2268),u=function(t){t.id;var e=t.data,r=(e||{})._fromEdge,i=r?{top:"30px",backgroundColor:"transparent",border:"none"}:{top:"60px",backgroundColor:"transparent",border:"none"};return n.createElement("div",null,n.createElement(o.HH,{type:"target",position:o.Ly.Left,id:"left",style:i}),n.createElement(o.HH,{type:"target",position:o.Ly.Right,id:"left-revert",style:i}),n.createElement(o.HH,{type:"source",position:o.Ly.Right,id:"right",style:i}),n.createElement(o.HH,{type:"source",position:o.Ly.Left,id:"right-revert",style:i}),n.createElement(c.TableCard,{data:e,_fromEdge:r}))},l=(0,n.memo)(u),s=r(53531),f=r(10705),p=r(33741);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){var n;return n=function(t,e){if("object"!=d(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==d(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var b=s.Z.useToken,w="100px",O="116px",E={handler:{width:O,height:O,zIndex:0,top:"50%",left:"50%",transform:"translate(-50%, -50%)",transition:"all 0.3s ease"}},x=function(t){var e=t.data,r=void 0===e?{}:e,i=t.id,a=r.label,u=r.filelocation,l=r.disabled,s=(0,p.qp)(),d=s.store,y=s.updateStore,v=d.currentId,g=d.theme,O=d.elementOptions,x=(0,c.useStudioProvier)().isLight,S=(0,c.useSection)(),j=S.toggleRightSide,P=S.toggleLeftSide,_=b().token,L=i===v,k=!O.isConnectable,T=m((0,n.useState)({isHover:!1,contentEditable:!1}),2),D=T[0],I=T[1],A=k?{cursor:"not-allow",background:"transparent",border:"none"}:h(h({},E.handler),{},{border:D.isHover?"2px dashed ".concat(g.primaryColor):"none",background:D.isHover?"#fafafa":"transparent",cursor:"copy"});return n.createElement("div",{"data-nodeid":i,style:{boxSizing:"border-box",width:"100px",height:"100px"},onMouseEnter:function(){k||I((function(t){return h(h({},t),{},{isHover:!0})}))},onMouseLeave:function(){k||I((function(t){return h(h({},t),{},{isHover:!1})}))},onClick:function(){y((function(t){t.currentType="nodes",t.currentId=i})),j(!1),P(!0)}},n.createElement(o.HH,{type:"target",position:o.Ly.Left,id:"left",style:{background:"transparent",position:"relative",border:"none"}}),n.createElement(o.HH,{type:"source",position:o.Ly.Right,id:"right",style:A}),n.createElement("div",{style:{position:"absolute",top:0,left:0,border:x?L?"4px solid ".concat(g.primaryColor):"2px solid #000":L?"4px solid ".concat(g.primaryColor):"2px solid #d7d7d7",backgroundColor:x?"#fafafa":"#161616",borderRadius:"50%",height:w,width:w,boxSizing:"border-box",zIndex:0,display:"flex",justifyContent:"center",alignItems:"center",fontSize:"20px"},"data-nodeid":i},u&&n.createElement("div",{style:{position:"absolute",top:"0px",right:"-16px"}},n.createElement(f.Z,{style:{color:_.colorSuccessActive,fontSize:20}})),n.createElement(c.EditableText,{id:i,text:a,onTextChange:function(t){y((function(e){var r=e.nodes.find((function(t){return t.id===i}));r&&(r.data.label=t)}))},disabled:l,style:{color:x?"#000":"#D7D7D7"}})))},S={"table-node":l,"graph-node":(0,n.memo)(x)};function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){L(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function L(t,e,r){var n;return n=function(t,e){if("object"!=j(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==j(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k(t,e){var r=t.width,n=t.height,o=t.positionAbsolute,i=e.positionAbsolute,a=r/2,c=n/2,u=o.x+a,l=o.y+c,s=i.x+e.width/2,f=i.y+e.height/2,p=(s-u)/(2*a)-(f-l)/(2*c),d=(s-u)/(2*a)+(f-l)/(2*c),y=1/(Math.abs(p)+Math.abs(d)),h=y*p,v=y*d;return{x:a*(h+v)+u,y:c*(-h+v)+l}}function T(t,e){var r=_(_({},t.positionAbsolute),t),n=Math.round(r.x),i=Math.round(r.y),a=Math.round(e.x),c=Math.round(e.y);return a<=n+1?o.Ly.Left:a>=n+r.width-1?o.Ly.Right:c<=i+1?o.Ly.Top:c>=r.y+r.height-1?o.Ly.Bottom:o.Ly.Top}var D=function(t){var e=t.sourceX,r=t.sourceY,n=t.targetX,o=t.targetY,i=t.offset,a=n-e,c=o-r,u=Math.sqrt(a*a+c*c);return{x:e+a/2+-(c/u)*i,y:r+c/2+a/u*i}};function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(Object(r),!0).forEach((function(e){N(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function N(t,e,r){var n;return n=function(t,e){if("object"!=I(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==I(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Z=s.Z.useToken,G=function(t){var e=t.id,r=t.label,i=t.style,a=t.filelocation,u=t.disabled,l=(0,p.qp)(),s=l.store,d=l.updateStore,y=(0,c.useSection)().toggleRightSide,h=Z().token,v=s.currentId,m=s.theme,g=e===v,b=(0,c.useStudioProvier)().isLight;return n.createElement(o.XQ,null,n.createElement("div",{style:C({cursor:"pointer",position:"absolute",fontSize:12,pointerEvents:"all"},i),className:"nodrag nopan"},a&&n.createElement("div",{style:{position:"absolute",right:"-16px",top:"-6px"}},n.createElement(f.Z,{style:{color:h.colorSuccessActive,fontSize:12}})),n.createElement("div",{className:"edgebutton",onClick:function(){d((function(t){t.currentId=e,t.currentType="edges"})),y(!1)},style:{borderRadius:"4px",background:b?g?"".concat(m.primaryColor):"#fff":g?"".concat(m.primaryColor):"#161616",border:b?g?"2px solid ".concat(m.primaryColor):"1px solid #000":g?"2px solid ".concat(m.primaryColor):"1px solid #d7d7d7"}},n.createElement(c.EditableText,{disabled:u,id:e,text:r||e,onTextChange:function(t){d((function(r){var n=r.edges.find((function(t){return t.id===e}));n&&(n.data.label=t)}))},style:{color:b?g?"#fff":"#000":g?"#fff":"#D7D7D7",fontSize:"10px",lineHeight:"14px",minHeight:"14px"}}))))};function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function M(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(Object(r),!0).forEach((function(e){z(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function z(t,e,r){var n;return n=function(t,e){if("object"!=F(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==F(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var U=function(t){var e=t.id,r=t.style,o=t.data,i=t.sourceX,a=t.sourceY,u=o||{},l=u._extra,s=u.label,f=u.filelocation,d=(l||{}).index,y=void 0===d?0:d,h=function(t){var e=(0,p.qp)().store,r=e.currentId,n=e.theme,o=t===r,i=(0,c.useStudioProvier)().isLight;return{isSelected:o,markerEnd:o?"url(#arrow-selected)":"url(#arrow)",style:{stroke:i?o?n.primaryColor:"#000":o?n.primaryColor:"#d7d7d7",strokeWidth:o?"2px":"1px"}}}(e),v=h.markerEnd,m=h.style,g=function(t,e,r){var n=r.index,o=t-33,i=e-40,a=60+40*n,c=o,u=i,l=o-60,s=i;return"\n        M ".concat(c," ").concat(u," \n        C ").concat(c+a," ").concat(u-a,", \n          ").concat(l-a," ").concat(s-a,", \n          ").concat(l," ").concat(s)}(i,a,{index:y}),b=function(t,e,r){var n=r.index,o=30*n;return{x:t-63,y:e-o-80}}(i,a,{index:y});return n.createElement(n.Fragment,null,n.createElement("path",{id:e,className:"react-flow__edge-path",d:g,markerEnd:v,style:R(R({},r),m)}),n.createElement(G,{filelocation:f,label:s,id:e,style:{transform:"translate(-50%, -50%) translate(".concat(b.x,"px,").concat(b.y,"px)")}}))};function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function Y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function J(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(r),!0).forEach((function(e){q(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function q(t,e,r){var n;return n=function(t,e){if("object"!=B(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==B(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var X=function(t){var e=t.id,r=t.source,i=t.target,a=t.style,u=t.data||{},l=u._extra,s=u.label,f=u.filelocation,d=u.disabled,y=(l||{}).offset,h=void 0===y?0:y,v=(0,o.oR)((0,n.useCallback)((function(t){return t.nodeInternals.get(r)}),[r])),m=(0,o.oR)((0,n.useCallback)((function(t){return t.nodeInternals.get(i)}),[i])),g=(0,p.qp)().store,b=g.currentId,w=g.theme,O=(0,c.useStudioProvier)().isLight;if(!v||!m)return null;if(r===i)return n.createElement(U,t);var E=e===b,x=function(t,e){var r=k(t,e),n=k(e,t),o=T(t,r),i=T(e,n);return{sx:r.x,sy:r.y,tx:n.x,ty:n.y,sourcePos:o,targetPos:i}}(v,m),S=x.sx,j=x.sy,P=x.tx,_=x.ty,L=D({sourceX:S,sourceY:j,targetX:P,targetY:_,offset:h}),I=function(t){var e=t.sourceX,r=t.sourceY,n=t.targetX,o=t.targetY,i=t.offset,a=t.R1,c=void 0===a?20:a,u=t.R2,l=void 0===u?20:u,s=D({sourceX:e,sourceY:r,targetX:n,targetY:o,offset:i}),f=n-e,p=o-r,d=Math.sqrt(f*f+p*p),y=f/d,h=p/d;return{P1:{x:e+y*c+i*-h,y:r+h*c+i*y},P2:{x:n+-y*l+i*-h,y:o+-h*l+i*y},controlPoint:s}}({sourceX:S,sourceY:j,targetX:P,targetY:_,offset:h}),A=V(function(t){var e=t.source,r=t.P1,n=t.P2,o=t.P3,i=t.target,a={x:r.x+(e.x-r.x)/3,y:r.y+(e.y-r.y)/3},c={x:r.x+(n.x-r.x)/3,y:r.y+(n.y-r.y)/3},u={x:o.x+(n.x-o.x)/3,y:o.y+(n.y-o.y)/3},l={x:o.x+(i.x-o.x)/3,y:o.y+(i.y-o.y)/3};return[["M ".concat(e.x,",").concat(e.y),"L ".concat(a.x,",").concat(a.y),"Q ".concat(r.x,",").concat(r.y," ").concat(c.x,",").concat(c.y),"L ".concat(n.x,",").concat(n.y),"L ".concat(u.x,",").concat(u.y),"Q ".concat(o.x,",").concat(o.y," ").concat(l.x,",").concat(l.y),"L ".concat(i.x,",").concat(i.y)].join(" ")]}({source:{x:S,y:j},target:{x:P,y:_},P1:I.P1,P2:L,P3:I.P2}),1)[0],C=function(t,e){var r=e.x-t.x,n=e.y-t.y,o=Math.atan2(n,r)*(180/Math.PI);return o>90?o-=180:o<-90&&(o+=180),o}({x:S,y:j},{x:P,y:_});return n.createElement(n.Fragment,null,n.createElement("path",{id:e,className:"react-flow__edge-path",d:A,markerEnd:E?"url(#arrow-selected)":"url(#arrow)",style:J(J({},a),{},{stroke:O?E?w.primaryColor:"#000":E?w.primaryColor:"#d7d7d7",strokeWidth:E?"2px":"1px"})}),n.createElement(G,{id:e,label:s,filelocation:f,disabled:d,style:{transform:"translate(-50%, -50%) translate(".concat(L.x,"px,").concat(L.y,"px) rotate(").concat(C,"deg)")}}))},$={"table-edge":function(t){t.source,t.target;var e=t.sourceX,r=t.sourceY,i=t.targetX,a=t.targetY,c=t.sourcePosition,u=t.targetPosition,l=t.markerEnd,s=(t.data,t.style||{}),f=(s._isLoop,s._isPoly,s._isRevert,s._offset),p=function(t,e){var r=t.sourceX,n=t.sourceY,o=t.targetX,i=t.targetY,a=(r+o)/2,c=(n+i)/2;return"M ".concat(r," ").concat(n," Q ").concat(a," ").concat(c+e," ").concat(o," ").concat(i)}({sourceX:e,sourceY:r,sourcePosition:c,targetX:i,targetY:a,targetPosition:u},void 0===f?0:f);return n.createElement(n.Fragment,null,n.createElement(o.u5,{path:p,markerEnd:l}))},"graph-edge":X},W=function(t){var e=t.fromX,r=t.fromY,o=t.toX,i=t.toY;return n.createElement("g",{style:{zIndex:-1,position:"absolute"}},n.createElement("path",{fill:"none",stroke:"#000",strokeWidth:1,className:"animated",d:"M".concat(e,",").concat(r," L ").concat(o,",").concat(i),markerEnd:"url(#arrow-dragging)"}),n.createElement("circle",{cx:o,cy:i,fill:"#fff",r:50,className:"animated",stroke:"#000",strokeWidth:1,strokeDasharray:"10, 5"}))},K=function(t){var e=s.Z.useToken().token,r=t.selectedColor,o=void 0===r?e.colorPrimary:r,i=t.color,a=void 0===i?e.colorText:i;return n.createElement("svg",{id:"arrow-marker-svg",width:"200",height:"200",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:0,left:0,zIndex:-1}},n.createElement("defs",null,n.createElement("marker",{id:"arrow",markerWidth:"10",markerHeight:"10",refX:"8",refY:"3",orient:"auto",markerUnits:"strokeWidth"},n.createElement("path",{d:"M0,0 L0,6 L9,3 z",fill:a})),n.createElement("marker",{id:"arrow-selected",markerWidth:"10",markerHeight:"10",refX:"8",refY:"3",orient:"auto",markerUnits:"strokeWidth"},n.createElement("path",{d:"M0,0 L0,6 L9,3 z",fill:o})),n.createElement("marker",{id:"arrow-dragging",markerWidth:"10",markerHeight:"10",refX:"60",refY:"3",orient:"auto",markerUnits:"strokeWidth"},n.createElement("path",{d:"M0,0 L0,6 L9,3 z",fill:a,className:"animated",strokeDasharray:"10, 5"}))))},Q=r(28541),tt=r(62950),et=r(42655),rt=r(44575),nt=r(64681),ot=r(4507),it=r(2881);var at=o.RX,ct=1,ut=1,lt=function(){return"Vertex_".concat(ct++)},st=function(){return"Edge_".concat(ut++)},ft=function(t){return JSON.parse(JSON.stringify(t))};function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return yt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ht(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mt(t,e,r){var n;return n=function(t,e){if("object"!=pt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==pt(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gt(t){return t%2==0}function bt(t){return!gt(t)}var wt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{poly:30,loop:10,loopLabelPosition:1},r=e.poly,n=void 0===r?30:r,o=e.loop,i=void 0===o?10:o,a=(e.loopLabelPosition,{});t.forEach((function(t,e){var r=vt({},t),n=r.source,o=r.target,i="".concat(n,"-").concat(o),c="".concat(o,"-").concat(n);a[i]?a[i].push(r):a[c]?a[c].push(r):a[i]=[r]}));var c=Object.values(a),u=[];return c.forEach((function(t){if(t.length>1){var e=gt(t.length);t.forEach((function(r,o){var c,l=r.source,s=r.target,f=r.data,p="".concat(s,"-").concat(l),d=l===s,y=!!a[p],h=o;if(e){var v=Math.ceil((h+1)/2);c=n*v}else{var m=bt(h)?h+1:h,g=Math.ceil(m/2);c=n*g}var b=gt(h)?c:-c,w="poly";y&&(b=-b),d&&(w="loop",b=h*i),u.push(vt(vt({},r),{},{data:vt(vt({},f),{},{_extra:{count:t.length,index:h,type:w,isPoly:!0,isLoop:d,offset:b,isRevert:y}})}))}))}else{var r=dt(t,1)[0],o=r.source,c=r.target,l=r.data;u.push(vt(vt({},r),{},{data:vt(vt({},l),{},{_extra:{count:1,index:0,isLoop:o===c}})}))}})),u},Ot=r(6724),Et=r.n(Ot);function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}var St=["position","key","id","_fromEdge","data"],jt=["source","target","id","data"],Pt=["position","key","id","_fromEdge"];function _t(t){return function(t){if(Array.isArray(t))return Lt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Lt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Tt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(r),!0).forEach((function(e){Dt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Dt(t,e,r){var n;return n=function(t,e){if("object"!=xt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==xt(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function It(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var At=new(Et().graphlib.Graph);At.setDefaultEdgeLabel((function(){return{}}));var Ct=!1,Nt={};function Zt(t,e){var r=t.nodes,n=t.edges;return At.setGraph({rankdir:e}),r.forEach((function(t){var e=t._fromEdge;At.setNode(t.id,{width:270,height:e?100:200})})),n.forEach((function(t){At.setEdge(t.source,t.target)})),Et().layout(At),At}function Gt(t,e){return t.map((function(t){var r=t.position,n=t.key,i=t.id,a=t._fromEdge,c=t.data,u=void 0===c?{}:c,l=It(t,St);r&&(Nt[i]=r);var s=Nt[i]||At.node(t.id)||{x:500*Math.random(),y:500*Math.random()};return{id:i||n,data:Tt(Tt({},u),l),type:"table"===e?"table-node":"graph-node",_fromEdge:a,targetPosition:o.Ly.Left,sourcePosition:o.Ly.Right,position:r||{x:s.x,y:s.y}}}))}function Ft(t,e){return wt(t).map((function(t,r){var n=t.id,o=t.source,i=t.target,a=t.data;return{id:n||"".concat(o,"-").concat(i,"-").concat(r),source:o,target:i,type:"table"===e?"smoothstep":"graph-edge",data:a}}))}function Mt(t,e,r){var n=r.displayMode;if("table"===n){var o=Rt({nodes:t,edges:e});return Zt(o,"LR"),{nodes:zt(o.nodes,n),edges:Ft(o.edges,n)}}return"graph"===n?(Ct||(Zt({nodes:t,edges:e},"LR"),Ct=!0),{nodes:Gt(t,n),edges:Ft(e,n)}):{nodes:[],edges:[]}}function Rt(t){var e=t.nodes,r=t.edges,n=[],o=r.map((function(t){var e=t.source,r=t.target,o=t.id,i=t.data,a=It(t,jt);return n.push({id:(0,tt.Z)(),source:e,target:o,type:"smoothstep",data:Tt(Tt({},a),{},{label:""})}),n.push({id:(0,tt.Z)(),source:o,target:r,type:"smoothstep",data:{label:""}}),Tt(Tt({},t),{},{_fromEdge:!0,id:t.id,data:i,position:{x:0,y:0}})}));return{nodes:[].concat(_t(e.map((function(t){return Tt(Tt({},t),{},{position:{x:0,y:0}})}))),_t(o.map((function(t){return Tt({},t)})))),edges:n}}function zt(t,e){return t.map((function(t){var r=t.position,n=t.key,i=t.id,a=t._fromEdge,c=It(t,Pt),u=At.node(t.id)||{x:500*Math.random(),y:500*Math.random()};return Nt[i]=r,Tt(Tt({},t),{},{id:i||n,type:"table"===e?"table-node":"graph-node",_fromEdge:a,targetPosition:o.Ly.Left,sourcePosition:o.Ly.Right,position:r||{x:u.x,y:u.y},data:Tt(Tt({_fromEdge:a},c),{},{label:i})})}))}function Ut(t){return function(t){if(Array.isArray(t))return Bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Bt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Yt=function(t){return JSON.parse(JSON.stringify(t))},Jt=function(){var t=(0,p.qp)(),e=t.store,r=t.updateStore,i=(0,o._K)(),a=i.screenToFlowPosition,c=i.fitBounds,u=(i.fitView,e.displayMode),l=e.nodes,s=e.edges,f=e.hasLayouted,d=e.elementOptions,y=(0,n.useRef)(null),h=(0,n.useRef)(null),v=(0,n.useRef)([]),m=(0,n.useCallback)((function(t,e){var r=e.nodeId;y.current=r,d.isConnectable}),[]),g=(0,n.useCallback)((function(t){if(y.current&&d.isConnectable)if(t.target.classList.contains("react-flow__pane")){var e=(0,tt.Z)(),n=(0,tt.Z)(),o=a({x:t.clientX,y:t.clientY}),i={id:e,position:{x:o.x-50,y:o.y-50},type:"graph-node",data:{label:lt()}};r((function(t){t.nodes=[].concat(Ut(t.nodes),[i]),t.edges=[].concat(Ut(t.edges),[{id:n,source:y.current,target:e,type:"graph-edge",data:{label:st()}}])}))}else{var c=t.target.dataset.nodeid,l=(0,tt.Z)(),s=st();r((function(t){t.edges=Ft([].concat(Ut(t.edges),[{id:l,data:{label:s},source:y.current||"",target:c}]),u)}))}}),[a]);(0,n.useEffect)((function(){if(l.length>0&&!f){var t=function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.iterations,o=void 0===n?1e3:n,i=r.center,a=void 0===i?{x:window.innerWidth/2,y:window.innerHeight/2}:i,c=250,u=c*(0===e.length?.5:8)*-1,l=(0,et.Z)(t).force("link",(0,rt.Z)(e).id((function(t){return t.id})).distance(c)).force("charge",(0,nt.Z)().strength(u)).force("center",(0,ot.Z)(a.x,a.y)).force("radial",(0,it.Z)(0,a.x,a.y).strength(.01)).stop(),s=0;s<o;s++)l.tick();return t.forEach((function(t){delete t.index,delete t.vx,delete t.vy,t.position={x:t.x,y:t.y},delete t.x,delete t.y})),e.forEach((function(t){delete t.index,t.source=t.source.id,t.target=t.target.id})),{nodes:t,edges:e,simulation:l}}(ft(l),ft(s));h.current&&clearTimeout(h.current);var e=setTimeout((function(){var e=at(t.nodes);c(e,{duration:300})}),300);h.current=e,r((function(e){e.hasLayouted=!0,e.nodes=t.nodes,e.edges=t.edges}))}}),[l,s,f]),(0,n.useEffect)((function(){var t=document.getElementById("arrow-marker-svg"),e=document.querySelector(".react-flow__viewport");t&&e&&e.appendChild(t)}),[]);return{store:e,updateStore:r,onDoubleClick:function(){var t=at(l);c(t,{duration:600})},onEdgesChange:function(t){d.isConnectable&&r((function(e){e.edges=(0,o.yn)(t,Yt(e.edges))}))},onNodesChange:function(t){var e=t[0].type;d.isConnectable&&"position"!==e&&r((function(e){e.nodes=(0,o.Fb)(t,Yt(e.nodes))})),"position"===e&&(t[0].dragging?(v.current=t,r((function(e){e.nodePositionChange=t}))):r((function(t){t.nodes=(0,o.Fb)(v.current,t.nodes)})))},onConnectStart:m,onConnectEnd:g,onReactFlowInit:function(t){if(t){var e=t.toObject().nodes,r=(0,o.RX)(e);c(r,{duration:600})}}}},qt=r(84155);function Vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ht(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ht(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Xt=function(t){var e=Jt(),r=e.store,u=e.onDoubleClick,l=e.onEdgesChange,f=e.onNodesChange,p=e.onConnectStart,d=e.onConnectEnd,y=e.onReactFlowInit,h=r.nodes,v=r.edges,m=(r.collapsed,r.appMode),g=r.nodePositionChange,b=Vt((0,n.useState)({isLocked:!1}),2),w=(b[0],b[1],s.Z.useToken().token),O=0===h.length,E=n.createElement(qt.Z,{id:"Start sketching a model, a vertex label is a named grouping or categorization of nodes within the graph dataset",values:{icon:n.createElement(Q.Z,null)}}),x="PURE"===m,j=0===g.length?h:(0,o.Fb)(g,h);return n.createElement("div",{style:{height:"100%",width:"100%"}},n.createElement("div",{style:{height:"100%",width:"100%",position:"absolute",background:w.colorBgContainer}},n.createElement(o.x$,{nodes:j,edges:v,onNodesChange:f,onEdgesChange:l,nodeTypes:S,edgeTypes:$,connectionLineComponent:W,onConnectStart:p,onConnectEnd:d,zoomOnDoubleClick:!1,nodesDraggable:!0,proOptions:{hideAttribution:!0},onDoubleClick:u,minZoom:.01,onInit:y},n.createElement(K,null),!x&&n.createElement(i.A,{style:{background:w.colorBgBase}}),O&&n.createElement(c.EmptyCanvas,{description:E}),!x&&n.createElement(a.a,{style:{backgroundColor:w.colorBgBase}}))))},$t=r(48722),Wt=r(96149),Kt=r(57526),Qt=r(54016),te=r(16889);function ee(t){var e=t.type,r=t.id,n=(0,p.qp)().updateStore;return{handleChangeLabel:function(t){var o=t.target.value;n((function(t){t.displayMode="table","edges"===e&&(t.edges=t.edges.map((function(t){return t.id===r&&(t.data.label=o),t}))),"nodes"===e&&(t.nodes=t.nodes.map((function(t){return t.id===r&&(t.data.label=o),t})))}))},handleDataFieldsChange:function(t,e,o){n((function(n){n.edges=n.edges.map((function(n){if(n.id===r){var i=t.index,a=t.token;n.data[e]={key:r,index:i,name:o,token:a}}return n}))}))},handleProperty:function(t){n((function(n){"edges"===e&&(n.edges=n.edges.map((function(e){return e.id===r&&(e.data.properties=t),e}))),"nodes"===e&&(n.nodes=n.nodes.map((function(e){return e.id===r&&(e.data.properties=t),e})))}))}}}var re=r(17905),ne=r(9739),oe=r(38943),ie=r(86132),ae=r(37528),ce=r(62299),ue=r(89543),le=r(93681);function se(t){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},se(t)}function fe(){fe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==se(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(se(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function pe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function de(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(r),!0).forEach((function(e){ye(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ye(t,e,r){var n;return n=function(t,e){if("object"!=se(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==se(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function he(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ve(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return me(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return me(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ge=function(t){return new Promise((function(e){return setTimeout(e,t)}))},be=function(t){var e=t.file,r=ve(n.useState({progress:0}),2),o=r[0],i=r[1],a=o.progress,c=function(){var t,r=(t=fe().mark((function t(){var r,n,o,a,c,u;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.size,n=navigator.connection.downlink/2*1024*1024,o=50,a=Math.round(r/n*1e3),console.log(a/o),c=fe().mark((function t(){var e;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ge(a/o);case 2:e=Math.round((u+1)/o*99),i((function(t){return de(de({},t),{},{progress:e})}));case 4:case"end":return t.stop()}}),t)})),u=0;case 7:if(!(u<o)){t.next=12;break}return t.delegateYield(c(),"t0",9);case 9:u++,t.next=7;break;case 12:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){he(i,n,o,a,c,"next",t)}function c(t){he(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return n.useEffect((function(){c()}),[]),n.createElement(le.Z,{percent:a,size:"small",status:"active",style:{margin:"2px 4px 0px 6px"}})};function we(t){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(t)}function Oe(){Oe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==we(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(we(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Ee(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(r),!0).forEach((function(e){Se(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Se(t,e,r){var n;return n=function(t,e){if("object"!=we(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==we(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function je(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Pe(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){je(i,n,o,a,c,"next",t)}function c(t){je(i,n,o,a,c,"throw",t)}a(void 0)}))}}function _e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Le(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ke=Qt.Z.Text,Te=(0,n.forwardRef)((function(t,e){var r=t.schema,o=t.type,i=t.handleUploadFile,a=r.id,u=r.data,l=u.filelocation,s=(u.isBind,(0,ae.Z)()),f=function(t){var e=t.type,r=t.id,n=(0,p.qp)().updateStore;return{handleChangeUpload:function(t,o){var i=o||{},a=i.dataFields,u=void 0===a?[]:a,l=i.delimiter,s=void 0===l?"":l;n((function(n){n[e].forEach((function(n){var o;if(n.id===r&&(n.data.filelocation=t,n.data.dataFields=u,n.data.delimiter=s,null===(o=n.data.properties)||void 0===o||o.forEach((function(t){t.token=t.name,t.index=u.findIndex((function(e){return e===t.name}))})),"edges"===e)){var i=c.Utils.inferredGraphFields(u),a=i.sourceField,l=i.targetField;console.log(u,i),n.data.source_vertex_fields={index:null==u?void 0:u.findIndex((function(t){return t===a})),token:a||""},n.data.target_vertex_fields={index:null==u?void 0:u.findIndex((function(t){return t===l})),token:l||""}}}))}))},handleChangeInput:function(t){n((function(n){n[e].forEach((function(e){var n;e.id===r&&(e.data.dataFields=[],e.data.filelocation=t.target.value,null===(n=e.data.properties)||void 0===n||n.forEach((function(t,e){t.token="",t.index=e})))}))}))},handleDeleteLocation:function(){n((function(t){t[e].forEach((function(t){var n;t.id===r&&(t.data.filelocation="",t.data.dataFields=[],t.data.delimiter="",null===(n=t.data.properties)||void 0===n||n.forEach((function(t,e){t.token="",t.index=e})),"edges"===e&&(t.data.source_vertex_fields={index:0,token:""},t.data.target_vertex_fields={index:0,token:""}))}))}))}}}({id:a,type:o}),d=f.handleChangeInput,y=f.handleChangeUpload,h=f.handleDeleteLocation,v=_e((0,n.useState)({isLoading:!1,file:new File([],""),size:""}),2),m=v[0],g=v[1],b=m.isLoading,w=m.size,O=m.file;(0,n.useImperativeHandle)(e,(function(){return{upload:E}}));var E=function(){var t=Pe(Oe().mark((function t(e){var r,n,o,a,u,l,s,f;return Oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g((function(t){return xe(xe({},t),{},{isLoading:!0,file:e,size:c.Utils.getFileSize(e.size)})})),t.next=3,i(e);case 3:if(t.t0=t.sent,t.t0){t.next=6;break}t.t0={};case 6:return r=t.t0,n=r.file_path,o=void 0===n?"":n,t.next=11,c.Utils.parseFile(e);case 11:a=t.sent,u=c.Utils.extractHeaderAndDelimiter(a),l=u.header,s=u.quoting,f=u.delimiter,g((function(t){return xe(xe({},t),{},{isLoading:!1})})),y(o,{dataFields:l,quoting:s,delimiter:f});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Pe(Oe().mark((function t(e){var r;return Oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.file,E(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=b?n.createElement(ce.Z,null):n.createElement(ue.Z,null),j=b?"Uploading...":"Upload",P=b?"The file size is ".concat(w,", so this may take a bit of time to process. Please be patient..."):"Upload";return n.createElement("div",{style:{borderRadius:"0px 0px 8px 8px"}},n.createElement(Kt.Z,{vertical:!0,gap:8},n.createElement(ke,null,"Location"),n.createElement(Kt.Z,{justify:"space-between",align:"center"},n.createElement($t.Z.Compact,{size:"small",style:{width:"100%"}},n.createElement(n.Fragment,null,n.createElement(re.Z,{title:P},n.createElement(ne.Z,{showUploadList:!1,customRequest:x},n.createElement(oe.ZP,{icon:S},n.createElement("span",{style:{fontSize:"12px"}},n.createElement(qt.Z,{id:j}))))),b?n.createElement(be,{file:O}):l?n.createElement(te.Z,{style:{width:"100%"},disabled:!0,value:l}):n.createElement(te.Z,{style:{width:"100%"},defaultValue:l,placeholder:s.formatMessage({id:"Please manually input the odps file location"}),onBlur:d}))),n.createElement($t.Z,{size:0},l&&n.createElement(re.Z,{title:"delete and re-upload"},n.createElement(oe.ZP,{type:"text",size:"small",icon:n.createElement(ie.Z,{onClick:h})}))))))})),De=Te,Ie=Qt.Z.Text,Ae=(0,n.forwardRef)((function(t,e){var r=t.schema,o=t.type,i=(0,n.useRef)(null),a=r.id,c=r.data,u=c.filelocation,l=c.isBind,s=(0,ae.Z)(),f=function(t){var e=t.type,r=t.id,n=(0,p.qp)().updateStore;return{handleChangeInput:function(t){n((function(n){n[e].forEach((function(e){e.id===r&&(e.data.dataFields=[],e.data.filelocation=t.target.value)}))}))}}}({id:a,type:o}),d=f.handleChangeInput;return n.createElement(Kt.Z,{vertical:!0,gap:8},n.createElement(Ie,null,"Location"),n.createElement(Kt.Z,{align:"center",justify:"flex-end",gap:6},l?n.createElement(te.Z,{style:{width:"100%"},disabled:!0,value:u}):n.createElement(te.Z,{key:u,ref:i,style:{width:"100%"},defaultValue:u,placeholder:s.formatMessage({id:"Please manually input the odps file location"}),onBlur:d})))})),Ce=Ae,Ne=function(t){var e=t.id,r=t.source,o=t.target,i=t.mappingColumn,a=t.source_vertex_fields,u=t.target_vertex_fields,l=t.disabled,s=(0,p.qp)().store.nodes,f=ee({type:"edges",id:e}).handleDataFieldsChange,d=function(t,e,r){var n,o,i,a,c,u;return t.forEach((function(t){var n=t.id,o=t.data,l=o.properties,s=void 0===l?[]:l,f=o.label;n===e&&(i=f,c=s.find((function(t){return t.primaryKey}))),n===r&&(a=f,u=s.find((function(t){return t.primaryKey})))})),{source_label:i,target_label:a,target_primary_key:null===(n=u)||void 0===n?void 0:n.name,source_primary_key:null===(o=c)||void 0===o?void 0:o.name}}(s,r,o),y=d.source_label,h=d.target_label,v=d.target_primary_key,m=d.source_primary_key;return n.createElement(n.Fragment,null,n.createElement(Kt.Z,{justify:"space-between",gap:"12px",align:"center"},n.createElement(Kt.Z,{vertical:!0,gap:"small",flex:"1"},n.createElement(Qt.Z.Text,null,n.createElement(qt.Z,{id:"Source"})),n.createElement(te.Z,{value:y,disabled:!0,size:"small"})),i&&n.createElement(Kt.Z,{vertical:!0,gap:"small"},n.createElement(Qt.Z.Text,null,n.createElement(qt.Z,{id:"Data Fields"})),n.createElement(c.MappingFields,{disabled:l,value:a,onChange:function(t){return f(t,"source_vertex_fields",m)},componentType:(null==i?void 0:i.type)||"Select",options:(null==i?void 0:i.options)||[]}))),n.createElement(Kt.Z,{justify:"space-between",gap:"12px",style:{marginTop:"4px"}},n.createElement(Kt.Z,{vertical:!0,gap:"small",flex:"1"},n.createElement(Qt.Z.Text,null,n.createElement(qt.Z,{id:"Target"})),n.createElement(te.Z,{value:h,disabled:!0,size:"small"})),i&&n.createElement(Kt.Z,{vertical:!0,gap:"small"},n.createElement(Qt.Z.Text,null,n.createElement(qt.Z,{id:"Data Fields"})),n.createElement(c.MappingFields,{disabled:l,value:u,onChange:function(t){return f(t,"target_vertex_fields",v)},componentType:(null==i?void 0:i.type)||"Select",options:(null==i?void 0:i.options)||[]}))))},Ze=(0,n.forwardRef)((function(t,e){var r=t.schema,o=t.type,i=t.appMode,a=t.queryPrimitiveTypes,u=t.handleUploadFile,l=r.id,s=r.source,f=r.target,p=r.data||{},d=p.dataFields,y=p.properties,h=void 0===y?[]:y,v=p.label,m=p.source_vertex_fields,g=p.target_vertex_fields,b=p.disabled,w=void 0!==b&&b,O=p.isBind,E=ee({type:o,id:l}),x=E.handleChangeLabel,S=E.handleProperty,j="DATA_IMPORTING"===i?{options:(null==d?void 0:d.map((function(t){return{label:t,value:t}})))||[]}:null;return n.createElement("div",null,n.createElement(Kt.Z,{vertical:!0,gap:12,style:{margin:"0px 12px"}},"DATA_IMPORTING"===i?n.createElement(n.Fragment,null,n.createElement(c.EngineFeature,{match:"LOAD_CSV_DATA"},n.createElement(De,{ref:e,schema:r,type:o,handleUploadFile:u})),n.createElement(c.EngineFeature,{match:"DOWNLOAD_DATA_TASK_CONFIG"},n.createElement(Ce,{ref:e,schema:r,type:o,handleUploadFile:u}))):n.createElement(n.Fragment,null,n.createElement(Qt.Z.Text,null,n.createElement(qt.Z,{id:"Label"})),n.createElement(te.Z,{value:v,onChange:x,disabled:w})),"edges"===o&&n.createElement(Ne,{id:l,disabled:"groot"===window.GS_ENGINE_TYPE&&O,source:s,target:f,source_vertex_fields:m,target_vertex_fields:g,mappingColumn:j}),n.createElement(c.PropertiesList,{properties:h,onChange:S,typeColumn:{options:a()},disabled:w,mappingDisabled:"groot"===window.GS_ENGINE_TYPE&&O,mappingColumn:j})))})),Ge=Ze,Fe=r(77469),Me=r(75377),Re=s.Z.useToken,ze=window.GS_ENGINE_TYPE;function Ue(t){var e=t.appMode,r=t.type,n=t.properties,o=void 0===n?[]:n,i=t.filelocation;if("DATA_IMPORTING"===e){if(!i){if("nodes"===r)return"This type of vertex has not been bound to a data source yet";if("edges"===r)return"This type of edges has not been bound to a data source yet"}return null}if("DATA_MODELING"===e){if("nodes"===r){if(!o.length)return"A vertex must have at least one property.";if(!o.some((function(t){return t.primaryKey})))return"A vertex must have a primary key.";if(!o.every((function(t){return t.type})))return"Please select a primate type."}if("edges"===r){if("interactive"===ze&&o.length>1)return"A edge can only have one property.";if(!o.every((function(t){return t.type})))return"Please select a primate type."}return null}return null}var Be=function(t){var e=t.appMode,r=Ue({appMode:void 0===e?"DATA_IMPORTING":e,type:t.type,properties:t.properties,filelocation:t.filelocation}),o=Re().token;return r?n.createElement(re.Z,{title:n.createElement(qt.Z,{id:"".concat(r)})},n.createElement(oe.ZP,{type:"text",size:"small",icon:n.createElement(Me.Z,{style:{color:o.colorErrorActive}})})):null},Ye=r(67492);function Je(t){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(t)}function qe(){qe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Je(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Je(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Ve(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function He(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ve(Object(r),!0).forEach((function(e){Xe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xe(t,e,r){var n;return n=function(t,e){if("object"!=Je(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Je(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $e(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var We=function(t){var e=t.onCreateLabel,r=void 0===e?function(){return!1}:e,o=t.schema,i=t.type,a=t.nodesMap,c=o.data,u=o.id,l=c.saved,s=c.properties,f=void 0===s?[]:s,d=c.filelocation,y=(0,p.qp)(),h=y.updateStore,v=y.store,m=v.nodes,g=v.appMode,b=function(){var t,e=(t=qe().mark((function t(e){return qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.stopPropagation(),"nodes"!==i){t.next=6;break}return t.next=4,r(i,o);case 4:t.sent&&h((function(t){t.nodes=t.nodes.map((function(t){return t.id===u?He(He({},t),{},{data:He(He({},t.data),{},{disabled:!0,saved:!0})}):t}))}));case 6:if("edges"!==i){t.next=11;break}return t.next=9,r(i,o,m);case 9:t.sent&&h((function(t){t.edges=t.edges.map((function(t){return t.id===u?He(He({},t),{},{data:He(He({},t.data),{},{disabled:!0,saved:!0})}):t}))}));case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){$e(i,n,o,a,c,"next",t)}function c(t){$e(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();if("groot"===window.GS_ENGINE_TYPE&&!l){var w=Ue({appMode:g,type:i,properties:f,filelocation:d}),O=w||"Save label",E=!!w;if("edges"===i&&a){var x=o,S=x.source,j=x.target,P=a[S],_=a[j];P&&_&&P.data.saved&&_.data.saved||(E=!0,O="Please save the related vertex first")}return n.createElement(re.Z,{title:O},n.createElement(oe.ZP,{size:"small",type:"text",onClick:b,icon:n.createElement(Ye.Z,null),disabled:E}))}return null};function Ke(t){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ke(t)}function Qe(){Qe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Ke(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ke(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function tr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function er(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0).forEach((function(e){rr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rr(t,e,r){var n;return n=function(t,e){if("object"!=Ke(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Ke(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function or(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ir(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ir(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ar=function(t){var e=t.onDeleteLabel,r=void 0===e?function(){return!0}:e,o=t.schema,i=t.type,a=t.nodesMap,u=o.data,l=o.id,s=u.saved,f=u.label,d=(0,p.qp)(),y=d.updateStore,h=d.store.appMode,v=or(n.useState({loading:!1}),2),m=v[0],g=v[1],b=function(){var t,e=(t=Qe().mark((function t(e){var n,c,u,p,d,h;return Qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.stopPropagation(),g((function(t){return er(er({},t),{},{loading:!0})})),n=!0,"nodes"!==i){t.next=9;break}if(!s){t.next=8;break}return t.next=7,r(i,f);case 7:n=t.sent;case 8:n&&y((function(t){t.nodes=t.nodes.filter((function(t){return t.id!==l})),t.edges=t.edges.filter((function(t){return t.source!==l&&t.target!==l}))}));case 9:if("edges"!==i||!a){t.next=18;break}if(u=(c=o).source,p=c.target,d=a[u],h=a[p],!s){t.next=17;break}return t.next=16,r(i,f,d.data.label,h.data.label);case 16:n=t.sent;case 17:n&&y((function(t){t.edges=t.edges.filter((function(t){return t.id!==l}))}));case 18:g((function(t){return er(er({},t),{},{loading:!1})}));case 19:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){nr(i,n,o,a,c,"next",t)}function c(t){nr(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();return"DATA_MODELING"===h?n.createElement(re.Z,{title:n.createElement(qt.Z,{id:"Delete this label"})},n.createElement(oe.ZP,{size:"small",type:"text",loading:m.loading,onClick:b,icon:n.createElement(c.Icons.Trash,null)})):null},cr=r(33074),ur=r(51029);function lr(t){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lr(t)}function sr(t,e){if(e&&("object"===lr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function fr(t){var e="function"==typeof Map?new Map:void 0;return fr=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return pr(t,arguments,hr(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),yr(r,t)},fr(t)}function pr(t,e,r){return pr=dr()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&yr(o,r.prototype),o},pr.apply(null,arguments)}function dr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function yr(t,e){return yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yr(t,e)}function hr(t){return hr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hr(t)}function vr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,br(n.key),n)}}function mr(t,e,r){return e&&vr(t.prototype,e),r&&vr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function br(t){var e=function(t,e){if("object"!=lr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lr(e)?e:String(e)}var wr="https://virtserver.swaggerhub.com/GRAPHSCOPE/flex-api/1.0.0".replace(/\/+$/,""),Or=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yr(t,e)}(o,t);var e,r,n=(e=o,r=dr(),function(){var t,n=hr(e);if(r){var o=hr(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return sr(this,t)});function o(t,e){var r;return gr(this,o),(r=n.call(this,e)).field=t,r.name="RequiredError",r}return mr(o)}(fr(Error)),Er={};function xr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Sr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xr(Object(r),!0).forEach((function(e){jr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jr(t,e,r){var n;return n=function(t,e){if("object"!=Pr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Pr(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pr(t){return Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pr(t)}var _r="https://example.com",Lr=function(t,e,r){if(null==r)throw new Or(e,"Required parameter ".concat(e," was null or undefined when calling ").concat(t,"."))};function kr(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";null!=e&&("object"===Pr(e)?Array.isArray(e)?e.forEach((function(e){return kr(t,e,r)})):Object.keys(e).forEach((function(n){return kr(t,e[n],"".concat(r).concat(""!==r?".":"").concat(n))})):t.has(r)?t.append(r,e):t.set(r,e))}var Tr=function(t){for(var e=new URLSearchParams(t.search),r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];kr(e,n),t.search=e.toString()},Dr=function(t,e,r){var n="string"!=typeof t;return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(void 0!==t?t:{}):t||""},Ir=function(t){return t.pathname+t.search+t.hash},Ar=function(t,e,r,n){return function(){var o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,c=Sr(Sr({},t.options),{},{url:(i.defaults.baseURL?"":null!==(o=null==n?void 0:n.basePath)&&void 0!==o?o:a)+t.url});return i.request(c)}};function Cr(t){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cr(t)}function Nr(){Nr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Cr(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Cr(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Zr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Gr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zr(Object(r),!0).forEach((function(e){Fr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Fr(t,e,r){return(e=Mr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mr(t){var e=function(t,e){if("object"!=Cr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Cr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cr(e)?e:String(e)}function Rr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function zr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Rr(i,n,o,a,c,"next",t)}function c(t){Rr(i,n,o,a,c,"throw",t)}a(void 0)}))}}var Ur=function(t){var e=function(t){return{bindDatasourceInBatch:(o=zr(Nr().mark((function e(r,n){var o,i,a,c,u,l,s,f,p=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.length>2&&void 0!==p[2]?p[2]:{},Lr("bindDatasourceInBatch","graphId",r),Lr("bindDatasourceInBatch","schemaMapping",n),i="/api/v1/graph/{graph_id}/datasource".replace("{".concat("graph_id","}"),encodeURIComponent(String(r))),a=new URL(i,_r),t&&(c=t.baseOptions),u=Gr(Gr({method:"POST"},c),o),s={},(l={})["Content-Type"]="application/json",Tr(a,s),f=c&&c.headers?c.headers:{},u.headers=Gr(Gr(Gr({},l),f),o.headers),u.data=Dr(n,u,t),e.abrupt("return",{url:Ir(a),options:u});case 15:case"end":return e.stop()}}),e)}))),function(t,e){return o.apply(this,arguments)}),getDatasourceById:(n=zr(Nr().mark((function e(r){var n,o,i,a,c,u,l,s=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},Lr("getDatasourceById","graphId",r),o="/api/v1/graph/{graph_id}/datasource".replace("{".concat("graph_id","}"),encodeURIComponent(String(r))),i=new URL(o,_r),t&&(a=t.baseOptions),c=Gr(Gr({method:"GET"},a),n),u={},Tr(i,{}),l=a&&a.headers?a.headers:{},c.headers=Gr(Gr(Gr({},u),l),n.headers),e.abrupt("return",{url:Ir(i),options:c});case 12:case"end":return e.stop()}}),e)}))),function(t){return n.apply(this,arguments)}),unbindEdgeDatasource:(r=zr(Nr().mark((function e(r,n,o,i){var a,c,u,l,s,f,p,d,y=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=y.length>4&&void 0!==y[4]?y[4]:{},Lr("unbindEdgeDatasource","graphId",r),Lr("unbindEdgeDatasource","typeName",n),Lr("unbindEdgeDatasource","sourceVertexType",o),Lr("unbindEdgeDatasource","destinationVertexType",i),c="/api/v1/graph/{graph_id}/datasource/edge/{type_name}".replace("{".concat("graph_id","}"),encodeURIComponent(String(r))).replace("{".concat("type_name","}"),encodeURIComponent(String(n))),u=new URL(c,_r),t&&(l=t.baseOptions),s=Gr(Gr({method:"DELETE"},l),a),f={},p={},void 0!==o&&(p.source_vertex_type=o),void 0!==i&&(p.destination_vertex_type=i),Tr(u,p),d=l&&l.headers?l.headers:{},s.headers=Gr(Gr(Gr({},f),d),a.headers),e.abrupt("return",{url:Ir(u),options:s});case 17:case"end":return e.stop()}}),e)}))),function(t,e,n,o){return r.apply(this,arguments)}),unbindVertexDatasource:(e=zr(Nr().mark((function e(r,n){var o,i,a,c,u,l,s,f=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=f.length>2&&void 0!==f[2]?f[2]:{},Lr("unbindVertexDatasource","graphId",r),Lr("unbindVertexDatasource","typeName",n),i="/api/v1/graph/{graph_id}/datasource/vertex/{type_name}".replace("{".concat("graph_id","}"),encodeURIComponent(String(r))).replace("{".concat("type_name","}"),encodeURIComponent(String(n))),a=new URL(i,_r),t&&(c=t.baseOptions),u=Gr(Gr({method:"DELETE"},c),o),l={},Tr(a,{}),s=c&&c.headers?c.headers:{},u.headers=Gr(Gr(Gr({},l),s),o.headers),e.abrupt("return",{url:Ir(a),options:u});case 13:case"end":return e.stop()}}),e)}))),function(t,r){return e.apply(this,arguments)})};var e,r,n,o}(t);return{bindDatasourceInBatch:function(r,n,o){return zr(Nr().mark((function i(){var a,c,u,l,s;return Nr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.bindDatasourceInBatch(r,n,o);case 2:return u=i.sent,l=null!==(a=null==t?void 0:t.serverIndex)&&void 0!==a?a:0,s=null===(c=Er["DataSourceApi.bindDatasourceInBatch"])||void 0===c||null===(c=c[l])||void 0===c?void 0:c.url,i.abrupt("return",(function(e,r){return Ar(u,ur.Z,wr,t)(e,s||r)}));case 6:case"end":return i.stop()}}),i)})))()},getDatasourceById:function(r,n){return zr(Nr().mark((function o(){var i,a,c,u,l;return Nr().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.getDatasourceById(r,n);case 2:return c=o.sent,u=null!==(i=null==t?void 0:t.serverIndex)&&void 0!==i?i:0,l=null===(a=Er["DataSourceApi.getDatasourceById"])||void 0===a||null===(a=a[u])||void 0===a?void 0:a.url,o.abrupt("return",(function(e,r){return Ar(c,ur.Z,wr,t)(e,l||r)}));case 6:case"end":return o.stop()}}),o)})))()},unbindEdgeDatasource:function(r,n,o,i,a){return zr(Nr().mark((function c(){var u,l,s,f,p;return Nr().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,e.unbindEdgeDatasource(r,n,o,i,a);case 2:return s=c.sent,f=null!==(u=null==t?void 0:t.serverIndex)&&void 0!==u?u:0,p=null===(l=Er["DataSourceApi.unbindEdgeDatasource"])||void 0===l||null===(l=l[f])||void 0===l?void 0:l.url,c.abrupt("return",(function(e,r){return Ar(s,ur.Z,wr,t)(e,p||r)}));case 6:case"end":return c.stop()}}),c)})))()},unbindVertexDatasource:function(r,n,o){return zr(Nr().mark((function i(){var a,c,u,l,s;return Nr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.unbindVertexDatasource(r,n,o);case 2:return u=i.sent,l=null!==(a=null==t?void 0:t.serverIndex)&&void 0!==a?a:0,s=null===(c=Er["DataSourceApi.unbindVertexDatasource"])||void 0===c||null===(c=c[l])||void 0===c?void 0:c.url,i.abrupt("return",(function(e,r){return Ar(u,ur.Z,wr,t)(e,s||r)}));case 6:case"end":return i.stop()}}),i)})))()}}},Br=function(t,e,r){var n=Ur(t);return{bindDatasourceInBatch:function(t,o,i){return n.bindDatasourceInBatch(t,o,i).then((function(t){return t(r,e)}))},getDatasourceById:function(t,o){return n.getDatasourceById(t,o).then((function(t){return t(r,e)}))},unbindEdgeDatasource:function(t,o,i,a,c){return n.unbindEdgeDatasource(t,o,i,a,c).then((function(t){return t(r,e)}))},unbindVertexDatasource:function(t,o,i){return n.unbindVertexDatasource(t,o,i).then((function(t){return t(r,e)}))}}},Yr=function(t){var e=function(t){return{deleteJobById:(i=zr(Nr().mark((function e(r,n){var o,i,a,c,u,l,s,f,p=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.length>2&&void 0!==p[2]?p[2]:{},Lr("deleteJobById","jobId",r),i="/api/v1/job/{job_id}".replace("{".concat("job_id","}"),encodeURIComponent(String(r))),a=new URL(i,_r),t&&(c=t.baseOptions),u=Gr(Gr({method:"DELETE"},c),o),l={},s={},void 0!==n&&(s.delete_scheduler=n),Tr(a,s),f=c&&c.headers?c.headers:{},u.headers=Gr(Gr(Gr({},l),f),o.headers),e.abrupt("return",{url:Ir(a),options:u});case 13:case"end":return e.stop()}}),e)}))),function(t,e){return i.apply(this,arguments)}),getDataloadingJobConfig:(o=zr(Nr().mark((function e(r,n){var o,i,a,c,u,l,s,f,p=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.length>2&&void 0!==p[2]?p[2]:{},Lr("getDataloadingJobConfig","graphId",r),Lr("getDataloadingJobConfig","dataloadingJobConfig",n),i="/api/v1/graph/{graph_id}/dataloading/config".replace("{".concat("graph_id","}"),encodeURIComponent(String(r))),a=new URL(i,_r),t&&(c=t.baseOptions),u=Gr(Gr({method:"POST"},c),o),s={},(l={})["Content-Type"]="application/json",Tr(a,s),f=c&&c.headers?c.headers:{},u.headers=Gr(Gr(Gr({},l),f),o.headers),u.data=Dr(n,u,t),e.abrupt("return",{url:Ir(a),options:u});case 15:case"end":return e.stop()}}),e)}))),function(t,e){return o.apply(this,arguments)}),getJobById:(n=zr(Nr().mark((function e(r){var n,o,i,a,c,u,l,s=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},Lr("getJobById","jobId",r),o="/api/v1/job/{job_id}".replace("{".concat("job_id","}"),encodeURIComponent(String(r))),i=new URL(o,_r),t&&(a=t.baseOptions),c=Gr(Gr({method:"GET"},a),n),u={},Tr(i,{}),l=a&&a.headers?a.headers:{},c.headers=Gr(Gr(Gr({},u),l),n.headers),e.abrupt("return",{url:Ir(i),options:c});case 12:case"end":return e.stop()}}),e)}))),function(t){return n.apply(this,arguments)}),listJobs:(r=zr(Nr().mark((function e(){var r,n,o,i,a,c,u=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>0&&void 0!==u[0]?u[0]:{},n=new URL("/api/v1/job",_r),t&&(o=t.baseOptions),i=Gr(Gr({method:"GET"},o),r),a={},Tr(n,{}),c=o&&o.headers?o.headers:{},i.headers=Gr(Gr(Gr({},a),c),r.headers),e.abrupt("return",{url:Ir(n),options:i});case 11:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),submitDataloadingJob:(e=zr(Nr().mark((function e(r,n){var o,i,a,c,u,l,s,f,p=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.length>2&&void 0!==p[2]?p[2]:{},Lr("submitDataloadingJob","graphId",r),Lr("submitDataloadingJob","dataloadingJobConfig",n),i="/api/v1/graph/{graph_id}/dataloading".replace("{".concat("graph_id","}"),encodeURIComponent(String(r))),a=new URL(i,_r),t&&(c=t.baseOptions),u=Gr(Gr({method:"POST"},c),o),s={},(l={})["Content-Type"]="application/json",Tr(a,s),f=c&&c.headers?c.headers:{},u.headers=Gr(Gr(Gr({},l),f),o.headers),u.data=Dr(n,u,t),e.abrupt("return",{url:Ir(a),options:u});case 15:case"end":return e.stop()}}),e)}))),function(t,r){return e.apply(this,arguments)})};var e,r,n,o,i}(t);return{deleteJobById:function(r,n,o){return zr(Nr().mark((function i(){var a,c,u,l,s;return Nr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.deleteJobById(r,n,o);case 2:return u=i.sent,l=null!==(a=null==t?void 0:t.serverIndex)&&void 0!==a?a:0,s=null===(c=Er["JobApi.deleteJobById"])||void 0===c||null===(c=c[l])||void 0===c?void 0:c.url,i.abrupt("return",(function(e,r){return Ar(u,ur.Z,wr,t)(e,s||r)}));case 6:case"end":return i.stop()}}),i)})))()},getDataloadingJobConfig:function(r,n,o){return zr(Nr().mark((function i(){var a,c,u,l,s;return Nr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.getDataloadingJobConfig(r,n,o);case 2:return u=i.sent,l=null!==(a=null==t?void 0:t.serverIndex)&&void 0!==a?a:0,s=null===(c=Er["JobApi.getDataloadingJobConfig"])||void 0===c||null===(c=c[l])||void 0===c?void 0:c.url,i.abrupt("return",(function(e,r){return Ar(u,ur.Z,wr,t)(e,s||r)}));case 6:case"end":return i.stop()}}),i)})))()},getJobById:function(r,n){return zr(Nr().mark((function o(){var i,a,c,u,l;return Nr().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.getJobById(r,n);case 2:return c=o.sent,u=null!==(i=null==t?void 0:t.serverIndex)&&void 0!==i?i:0,l=null===(a=Er["JobApi.getJobById"])||void 0===a||null===(a=a[u])||void 0===a?void 0:a.url,o.abrupt("return",(function(e,r){return Ar(c,ur.Z,wr,t)(e,l||r)}));case 6:case"end":return o.stop()}}),o)})))()},listJobs:function(r){return zr(Nr().mark((function n(){var o,i,a,c,u;return Nr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.listJobs(r);case 2:return a=n.sent,c=null!==(o=null==t?void 0:t.serverIndex)&&void 0!==o?o:0,u=null===(i=Er["JobApi.listJobs"])||void 0===i||null===(i=i[c])||void 0===i?void 0:i.url,n.abrupt("return",(function(e,r){return Ar(a,ur.Z,wr,t)(e,u||r)}));case 6:case"end":return n.stop()}}),n)})))()},submitDataloadingJob:function(r,n,o){return zr(Nr().mark((function i(){var a,c,u,l,s;return Nr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.submitDataloadingJob(r,n,o);case 2:return u=i.sent,l=null!==(a=null==t?void 0:t.serverIndex)&&void 0!==a?a:0,s=null===(c=Er["JobApi.submitDataloadingJob"])||void 0===c||null===(c=c[l])||void 0===c?void 0:c.url,i.abrupt("return",(function(e,r){return Ar(u,ur.Z,wr,t)(e,s||r)}));case 6:case"end":return i.stop()}}),i)})))()}}},Jr=function(t,e,r){var n=Yr(t);return{deleteJobById:function(t,o,i){return n.deleteJobById(t,o,i).then((function(t){return t(r,e)}))},getDataloadingJobConfig:function(t,o,i){return n.getDataloadingJobConfig(t,o,i).then((function(t){return t(r,e)}))},getJobById:function(t,o){return n.getJobById(t,o).then((function(t){return t(r,e)}))},listJobs:function(t){return n.listJobs(t).then((function(t){return t(r,e)}))},submitDataloadingJob:function(t,o,i){return n.submitDataloadingJob(t,o,i).then((function(t){return t(r,e)}))}}};function qr(t){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qr(t)}function Vr(t){return function(t){if(Array.isArray(t))return Hr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Hr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xr(Object(r),!0).forEach((function(e){Wr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wr(t,e,r){var n;return n=function(t,e){if("object"!=qr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==qr(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return{}},r=t||{vertex_types:[],edge_types:[]},n=r.vertex_types,o=r.edge_types,i={},a=n.map((function(t){var r=t.primary_keys,n=void 0===r?[]:r,o=t.properties,a=void 0===o?[]:o,c=t.type_name,u=(0,tt.Z)();i[c]=u;var l=e(t);return{id:u,data:$r($r({label:c,primary:n[0]},l),{},{properties:a.map((function(t,e){var r=t.property_name,o=t.property_type;return{key:(0,tt.Z)(),index:e,token:"",name:r,type:"primitive_type"in o?o.primitive_type:"DT_STRING",primaryKey:n[0]===r}}))}),position:{x:0,y:0}}})),c=[];return o&&o.forEach((function(t){var r=t.type_name,n=t.properties,o=void 0===n?[]:n,a=t.vertex_type_pair_relations,u=e(t);a.forEach((function(t){var e=t.destination_vertex,n=t.source_vertex,a=(t.relation,i[n]),l=i[e];c.push({source:a,target:l,id:(0,tt.Z)(),data:$r($r({label:r},u),{},{properties:o.map((function(t){return{key:(0,tt.Z)(),name:t.property_name,type:"primitive_type"in t.property_type?t.property_type.primitive_type:"DT_STRING",primaryKey:!1,disable:!1,token:""}}))})})}))})),{nodes:a,edges:c}}var Qr=function(t){return"DT_STRING"===t?{string:{long_text:""}}:{primitive_type:t}};function tn(t){var e={},r=t.nodes.map((function(t,r){var n=t.id,o=t.data,i=o.label,a=o.properties,c=void 0===a?[]:a,u=o.primary;e[n]=i;var l=u;return{type_id:r,type_name:i,properties:c.map((function(t,e){return t.primaryKey&&(l=t.name),{property_id:e,property_name:t.name,property_type:Qr(t.type)}}))||[],primary_keys:[l]}})),n=new Map;return t.edges.forEach((function(t,r){var o=t.source,i=t.target,a=t.data,c=a.properties,u=void 0===c?[]:c,l=a.label,s=e[o],f={destination_vertex:e[i],relation:"MANY_TO_MANY",source_vertex:s},p=n.get(l);if(p){var d=(p.properties||{}).vertex_type_pair_relations;(void 0===d?[]:d).push(f),n.set(l,p)}else n.set(l,{type_id:r,type_name:l,properties:(u||[]).map((function(t,e){return{property_id:e,property_name:t.name,property_type:Qr(t.type)}}))||[],vertex_type_pair_relations:[f]})})),{vertex_types:r,edge_types:Vr(n.values())}}function en(t){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},en(t)}function rn(t){return function(t){if(Array.isArray(t))return nn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return nn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function on(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function an(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?on(Object(r),!0).forEach((function(e){cn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):on(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function cn(t,e,r){var n;return n=function(t,e){if("object"!=en(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=en(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==en(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var un=function(t,e){return e.map((function(t){return t.name}))};function ln(t,e,r,n){var o=r||Kr(t,(function(){return{disabled:!0,saved:!0}})),i=o.nodes,a=o.edges,c={};return"vertex_mappings"in e&&e.vertex_mappings.forEach((function(t){var e=t.type_name,r=t.column_mappings,n=void 0===r?[]:r;c[e]=an(an({},t),{},{properties_mappings:n.reduce((function(t,e){return an(an({},t),{},cn({},e.property,{index:e.column.index,token:e.column.name}))}),{})})})),"edge_mappings"in e&&e.edge_mappings.forEach((function(t){var e=t.type_triplet,r=t.column_mappings,n=void 0===r?[]:r;c[e.edge]=an(an({},t),{},{properties_mappings:n.reduce((function(t,e){return an(an({},t),{},cn({},e.property,{index:e.column.index,token:e.column.name}))}),{})})})),{nodes:i.map((function(t){var e=t.data,r=e.label,o=e.properties,i=void 0===o?[]:o,a=c[r]||{inputs:[""],properties_mappings:{}},u=a.inputs[0];return an(an({},t),{},{data:an(an({},t.data),{},{filelocation:u,isBind:void 0===n?!!u:n,isEidtProperty:!0,dataFields:un(0,i),properties:i.map((function(t,e){var r=t.name,n=a&&a.properties_mappings&&a.properties_mappings[r]||{index:0,token:""};return an(an({},t),{},{index:n.index,token:n.token})}))})})})),edges:a.map((function(t){var e=t.data;if(e){var r=e.label,o=e.properties,i=void 0===o?[]:o,a=c[r]||{source_vertex_mappings:[{column:{index:0,name:""}}],destination_vertex_mappings:[{column:{index:0,name:""}}],properties_mappings:{},inputs:[""]};if("destination_vertex_mappings"in a){var u=a.source_vertex_mappings,l=void 0===u?[]:u,s=a.destination_vertex_mappings,f=void 0===s?[]:s,p=a.properties_mappings,d=a.inputs[0],y=[l[0].column,f[0].column].concat(rn(i));return an(an({},t),{},{data:an(an({},t.data),{},{filelocation:d,isBind:void 0===n?!!d:n,isEidtProperty:!0,dataFields:un(0,y),properties:i.map((function(t){var e=t.name,r=p[e]||{index:0,token:""};return an(an({},t),{},{index:r.index,token:r.token,name:e})})),source_vertex_fields:{index:l[0].column.index,token:l[0].column.name,name:l[0].property},target_vertex_fields:{index:f[0].column.index,token:f[0].column.name,name:f[0].property}})})}}})).filter((function(t){return t}))}}function sn(t){var e=[],r=[],n={},o={};return t.nodes.forEach((function(t){var r=t.id,i=t.data,a=i.properties,c=void 0===a?[]:a,u=i.filelocation,l=void 0===u?"":u,s=i.label;i.primary;n[r]=s,e.push({type_name:s,inputs:[l],column_mappings:c.map((function(t){var e=t.index,n=t.token,i=t.name;return t.primaryKey&&(o[r]=i),{column:{index:e,name:n},property:i}}))})})),t.edges.forEach((function(t){var e=t.data,i=t.source,a=t.target,c=e.properties,u=void 0===c?[]:c,l=e.filelocation,s=void 0===l?"":l,f=e.source_vertex_fields,p=void 0===f?{index:0,token:"",name:"id"}:f,d=e.target_vertex_fields,y=void 0===d?{index:0,token:"",name:"id"}:d,h=e.label,v=[],m=[],g=[];u.forEach((function(t){var e=t.index,r=t.token,n=t.name;v.push({column:{index:e,name:r},property:n})})),m.push({column:{index:p.index,name:p.token},property:o[i]}),g.push({column:{index:y.index,name:y.token},property:o[a]}),r.push({type_triplet:{edge:h,source_vertex:n[i],destination_vertex:n[a]},inputs:[s],column_mappings:v,source_vertex_mappings:m,destination_vertex_mappings:g})})),{vertex_mappings:e,edge_mappings:r}}var fn=r(56280);function pn(t){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pn(t)}function dn(){dn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==pn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(pn(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function yn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function hn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){yn(i,n,o,a,c,"next",t)}function c(t){yn(i,n,o,a,c,"throw",t)}a(void 0)}))}}var vn=function(){var t=hn(dn().mark((function t(e){var r,n,o;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.Utils.getSearchParams("graph_id"),n=sn(e),t.next=4,Br(void 0,window.COORDINATOR_URL).bindDatasourceInBatch(r,n);case 4:if("Bind data source mapping successfully"!==(o=t.sent).data){t.next=8;break}return fn.ZP.success({message:o.data}),t.abrupt("return",!0);case 8:return fn.ZP.error({message:o.data}),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),mn=function(){var t=hn(dn().mark((function t(e,r){var n,o;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.Utils.getSearchParams("graph_id"),t.next=3,Br(void 0,window.COORDINATOR_URL).unbindVertexDatasource(n,e,r);case 3:if("Unbind vertex data source successfully"!==(o=t.sent).data){t.next=7;break}return fn.ZP.success({message:o.data}),t.abrupt("return",!0);case 7:return fn.ZP.error({message:o.data}),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),gn=function(){var t=hn(dn().mark((function t(e,r,n,o){var i,a;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.Utils.getSearchParams("graph_id"),t.next=3,Br(void 0,window.COORDINATOR_URL).unbindEdgeDatasource(i,e,r,n,o);case 3:if("Unbind edge data source successfully"!==(a=t.sent).data){t.next=7;break}return fn.ZP.success({message:a.data}),t.abrupt("return",!0);case 7:return fn.ZP.error({message:a.data}),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e,r,n,o){return t.apply(this,arguments)}}();function bn(t){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bn(t)}function wn(){wn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==bn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(bn(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function On(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function En(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?On(Object(r),!0).forEach((function(e){xn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xn(t,e,r){var n;return n=function(t,e){if("object"!=bn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==bn(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function jn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Sn(i,n,o,a,c,"next",t)}function c(t){Sn(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Pn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _n(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ln=function(t){var e=t.schema,r=t.type,o=t.nodesMap,i=e.data,a=e.id,c=i.label,u=i.isBind,l=(0,p.qp)(),s=l.updateStore,d=l.store,y=d.appMode,h=d.nodes,v=Pn(n.useState({loading:!1}),2),m=v[0],g=v[1],b=function(){var t=jn(wn().mark((function t(n){var i,u,l,f,p;return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),g((function(t){return En(En({},t),{},{loading:!0})})),"nodes"!==r){t.next=7;break}return t.next=5,mn(c,e);case 5:t.sent&&s((function(t){t.nodes=t.nodes.map((function(t){return t.id===a&&(t.data.isBind=!1),t}))}));case 7:if("edges"!==r||!o){t.next=15;break}return u=(i=e).source,l=i.target,f=o[u],p=o[l],t.next=13,gn(c,f.data.label,p.data.label,e);case 13:t.sent&&s((function(t){t.edges=t.edges.map((function(t){return t.id===a&&(t.data.isBind=!1),t}))}));case 15:g((function(t){return En(En({},t),{},{loading:!1})}));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=jn(wn().mark((function t(n){return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),g((function(t){return En(En({},t),{},{loading:!0})})),"nodes"!==r){t.next=7;break}return t.next=5,vn({nodes:[e],edges:[]});case 5:t.sent&&s((function(t){t.nodes=t.nodes.map((function(t){return t.id===a&&(t.data.isBind=!0),t}))}));case 7:if("edges"!==r){t.next=12;break}return t.next=10,vn({nodes:h,edges:[e]});case 10:t.sent&&s((function(t){t.edges=t.edges.map((function(t){return t.id===a&&(t.data.isBind=!0),t}))}));case 12:g((function(t){return En(En({},t),{},{loading:!1})}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return"DATA_IMPORTING"===y&&"groot"===window.GS_ENGINE_TYPE?u?n.createElement(re.Z,{title:n.createElement(qt.Z,{id:"Click to rebind datasource"})},n.createElement(oe.ZP,{size:"small",type:"text",loading:m.loading,onClick:b,icon:n.createElement(f.Z,{style:{color:"green"}})})):n.createElement(re.Z,{title:n.createElement(qt.Z,{id:"Click to bind datasource"})},n.createElement(oe.ZP,{size:"small",type:"text",loading:m.loading,onClick:w,icon:n.createElement(cr.Z,{style:u?{color:"green"}:{color:"red"}})})):null},kn=r(59635);function Tn(t){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tn(t)}function Dn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function In(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dn(Object(r),!0).forEach((function(e){An(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function An(t,e,r){var n;return n=function(t,e){if("object"!=Tn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Tn(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cn(){Cn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Tn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Tn(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Nn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Zn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Nn(i,n,o,a,c,"next",t)}function c(t){Nn(i,n,o,a,c,"throw",t)}a(void 0)}))}}var Gn=function(){var t=Zn(Cn().mark((function t(e,r){var n,o,i,a,u,l;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.Utils.getSearchParams("graph_id"),o={},i={vertices:e.nodes.map((function(t){var e=t.id,r=t.data;return o[e]=r.label,{type_name:r.label}})),edges:e.edges.map((function(t){t.id;var e=t.source,r=t.data,n=t.target;return{type_name:r.label,source_vertex:o[e],destination_vertex:o[n]}}))},l={vertices:a=i.vertices,edges:u=i.edges},"nodes"===r&&(l={vertices:a,edges:[]}),"edges"===r&&(l={vertices:[],edges:u}),t.abrupt("return",Jr(void 0,window.COORDINATOR_URL).submitDataloadingJob(n,In(In({},l),{},{loading_config:{import_option:"overwrite",format:{type:"csv",metadata:{delimiter:"|",header_row:!0,quoting:!1}}},repeat:"once",schedule:null})).then((function(t){return 200===t.status?{jobId:t.data&&t.data.job_id,status:"success",message:"The data loading task has been successfully created. You can view detailed logs in the job center."}:{jobId:t.data&&t.data.job_id,status:"error",message:t.message}})).catch((function(t){return{jobId:t.response.data&&t.response.data.job_id,status:"error",message:"interactive"===window.GS_ENGINE_TYPE?t.response.data:t.response.data.detail}})));case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();function Fn(t){return Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fn(t)}function Mn(){Mn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Fn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Fn(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Rn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function zn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rn(Object(r),!0).forEach((function(e){Un(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Un(t,e,r){var n;return n=function(t,e){if("object"!=Fn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Fn(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Yn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Jn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var qn=function(t){var e=t.schema,r=t.type,o=(t.nodesMap,e.data),i=(e.id,o.saved,o.label,o.isBind),a=(0,p.qp)(),u=(a.updateStore,a.store),l=u.appMode,s=u.nodes,f=(u.edges,Yn(n.useState({loading:!1}),2)),d=f[0],y=f[1],h=(0,c.useHistory)(),v=function(t){var e=c.Utils.getSearchParams("graph_id");t.startsWith("SCHEDULER")?h.push("/job"):h.push("/job/detail?graph_id=".concat(e,"&jobId=").concat(t))},m=function(){var t,o=(t=Mn().mark((function t(o){var i,a,c,u,l,f,p,d,h,m;return Mn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.stopPropagation(),y((function(t){return zn(zn({},t),{},{loading:!0})})),"nodes"!==r){t.next=6;break}return t.next=5,Gn({nodes:[e],edges:[]},r);case 5:i=t.sent;case 6:if("edges"!==r){t.next=12;break}return c=(a=e).source,u=a.target,l=s.filter((function(t){return t.id===c||t.id===u})),t.next=11,Gn({nodes:l,edges:[e]},r);case 11:i=t.sent;case 12:i&&(p=(f=i).jobId,d=f.status,h=f.message,m=n.createElement(oe.ZP,{style:{width:"128px"},type:"primary",onClick:function(){return v(p)}},"Goto Jobs"),fn.ZP[d]({message:"load data ".concat(d),description:h,btn:"success"===d?m:null})),y((function(t){return zn(zn({},t),{},{loading:!1})}));case 14:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Bn(i,n,o,a,c,"next",t)}function c(t){Bn(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return o.apply(this,arguments)}}();if("DATA_IMPORTING"===l&&"groot"===window.GS_ENGINE_TYPE){var g=i?"Load data right now":"Please bind datasource first";return n.createElement(re.Z,{title:n.createElement(qt.Z,{id:g})},n.createElement(oe.ZP,{size:"small",type:"text",loading:d.loading,onClick:m,icon:n.createElement(kn.Z,null),disabled:!i}))}return null},Vn=r(96118);function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}function Xn(){Xn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Hn(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Hn(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function $n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Wn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$n(Object(r),!0).forEach((function(e){Kn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Kn(t,e,r){var n;return n=function(t,e){if("object"!=Hn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Hn(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var to=function(){var t,e=(t=Xn().mark((function t(e,r){var n,o,i,a,u,l,s;return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.Utils.getSearchParams("graph_id"),o={},i={vertices:e.nodes.map((function(t){var e=t.id,r=t.data;return o[e]=r.label,{type_name:r.label}})),edges:e.edges.map((function(t){t.id;var e=t.source,r=t.data,n=t.target;return{type_name:r.label,source_vertex:o[e],destination_vertex:o[n]}}))},l={vertices:a=i.vertices,edges:u=i.edges},"nodes"===r&&(l={vertices:a,edges:[]}),"edges"===r&&(l={vertices:[],edges:u}),t.next=9,Jr(void 0,window.COORDINATOR_URL).getDataloadingJobConfig(n,Wn(Wn({},l),{},{loading_config:{},repeat:"once",schedule:""}));case 9:if(!(s=t.sent).data||!s.data.config){t.next=12;break}return t.abrupt("return",s.data.config);case 12:return t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Qn(i,n,o,a,c,"next",t)}function c(t){Qn(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}();function eo(t){return eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eo(t)}function ro(){ro=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==eo(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(eo(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function no(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function oo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return io(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return io(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function io(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ao=function(t){var e=t.schema,r=t.type,o=(t.nodesMap,t.updateScheduleDrawer),i=e.data,a=(e.id,i.saved,i.label),c=i.isBind,u=(0,p.qp)(),l=(u.updateStore,u.store),s=l.appMode,f=l.nodes,d=oo(n.useState({loading:!1}),2),y=d[0],h=(d[1],function(){var t,n=(t=ro().mark((function t(n){var i,c,u,l,s;return ro().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),i="","nodes"!==r){t.next=6;break}return t.next=5,to({nodes:[e],edges:[]},r);case 5:i=t.sent;case 6:if("edges"!==r){t.next=12;break}return u=(c=e).source,l=c.target,s=f.filter((function(t){return t.id===u||t.id===l})),t.next=11,to({nodes:s,edges:[e]},r);case 11:i=t.sent;case 12:i&&o({open:!0,content:i,label:a});case 13:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){no(i,n,o,a,c,"next",t)}function c(t){no(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}());if("DATA_IMPORTING"===s&&"groot"===window.GS_ENGINE_TYPE){var v=c?"Preview dataloading configuration":"Please bind datasource first";return n.createElement(re.Z,{title:n.createElement(qt.Z,{id:v})},n.createElement(oe.ZP,{size:"small",type:"text",loading:y.loading,onClick:h,icon:n.createElement(Vn.Z,null),disabled:!c}))}return null},co=!0,uo=function(t){var e=t.children,r=t.currentId,o=t.items,i=(0,n.useRef)(null);return(0,n.useEffect)((function(){if(co){var t=i.current,e=o[r];if(t&&e){var n=47*e.index;t.scrollTo({top:n,behavior:"smooth"})}}co=!0}),[r]),n.createElement("div",{ref:i,style:{position:"absolute",top:"65px",bottom:"0px",left:0,right:0,overflow:"scroll",padding:"0px 10px 0px 10px"}},e)},lo=r(89817),so=r(41037);function fo(t){return fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fo(t)}function po(){po=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==fo(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(fo(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function yo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ho(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ho(Object(r),!0).forEach((function(e){mo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ho(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mo(t,e,r){var n;return n=function(t,e){if("object"!=fo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==fo(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function go(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return bo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var wo=(0,n.forwardRef)((function(t,e){var r=go((0,n.useState)({open:!1,content:"",label:""}),2),o=r[0],i=r[1],a=o.open,u=o.content,l=o.label,f=function(t){i((function(e){return vo(vo({},e),t)}))};(0,n.useImperativeHandle)(e,(function(){return{update:f}}));var p=s.Z.useToken().token,d=function(){var t,e=(t=po().mark((function t(){return po().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.Utils.createDownload(u,"load_config_".concat(l,".txt"));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){yo(i,n,o,a,c,"next",t)}function c(t){yo(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return n.createElement(lo.Z,{width:400,title:n.createElement(Kt.Z,{justify:"space-between",align:"center"},n.createElement(Qt.Z.Text,null,l),n.createElement(re.Z,{title:"Download configuration"},n.createElement(oe.ZP,{type:"text",icon:n.createElement(so.Z,null),onClick:d}))),open:a,closable:!0,onClose:function(){f({open:!1})},getContainer:!1},n.createElement("pre",{style:{fontFamily:'Consolas, Monaco, "Courier New", Courier, monospace',fontSize:14,color:p.colorTextSecondary,lineHeight:1.5,backgroundColor:p.colorBorderBg,padding:20,border:"1px solid #ddd",borderRadius:p.borderRadius,whiteSpace:"pre-wrap",maxHeight:"100%",overflowY:"auto",overflowWrap:"break-word",wordBreak:"break-all",wordWrap:"break-word"}},u))})),Oo=wo;function Eo(t){return Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eo(t)}function xo(){xo=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Eo(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Eo(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function So(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?So(Object(r),!0).forEach((function(e){Po(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):So(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Po(t,e,r){var n;return n=function(t,e){if("object"!=Eo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Eo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Eo(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _o(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Lo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||To(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ko(t){return function(t){if(Array.isArray(t))return Do(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||To(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function To(t,e){if(t){if("string"==typeof t)return Do(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Do(t,e):void 0}}function Do(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Io=function(t){var e=(0,n.useRef)(),r=(0,ae.Z)(),o=(0,p.qp)(),i=o.store,a=o.updateStore,u=i.nodes,l=i.edges,s=i.currentType,f=i.currentId,d=(i.elementOptions,t.appMode),y=t.handleUploadFile,h=t.queryPrimitiveTypes,v=t.batchUploadFiles,m=t.onCreateLabel,g=t.onDeleteLabel,b=new Set,w=[].concat(ko(u),ko(l)).reduce((function(t,e){return t[e.id]={ref:n.createRef(),file:e.data.label+".csv"},b.add(e.id),t}),{});window.ITEM_REFS=w;var O=Lo(n.useState((function(){return{autoUpload:!1}})),2),E=O[0],x=O[1],S=E.autoUpload,j=S?ko(b.values()):[f],P=!S,_={},L={},k={},T=function(t){e.current&&(console.log(e.current),e.current.update(t))},D=u.map((function(t,e){var r=t.id,o=t.data||{label:r},i=o.label,a=o.properties,c=void 0===a?[]:a,u=o.filelocation;return _[r]={index:e},k[r]=t,{key:r,label:i,extra:n.createElement($t.Z,{onClick:function(t){t.stopPropagation()}},n.createElement(We,{schema:t,type:"nodes",onCreateLabel:m}),n.createElement(ar,{schema:t,type:"nodes",onDeleteLabel:g}),n.createElement(Ln,{schema:t,type:"nodes"}),n.createElement(qn,{schema:t,type:"nodes"}),n.createElement(ao,{schema:t,type:"nodes",updateScheduleDrawer:T}),n.createElement(Be,{type:"nodes",filelocation:u,appMode:d,properties:JSON.parse(JSON.stringify(c))})),children:n.createElement(Ge,{ref:w[r].ref,schema:JSON.parse(JSON.stringify(t)),type:"nodes",queryPrimitiveTypes:h,handleUploadFile:y,appMode:d})}})),I=l.map((function(t,e){var r=t.id,o=t.data||{label:r},i=o.label,a=o.properties,c=void 0===a?[]:a,u=o.filelocation;return L[r]={index:e},{key:r,label:i,extra:n.createElement($t.Z,null,n.createElement(We,{nodesMap:k,schema:t,type:"edges",onCreateLabel:m}),n.createElement(ar,{nodesMap:k,schema:t,type:"edges",onDeleteLabel:g}),n.createElement(Ln,{nodesMap:k,schema:t,type:"edges"}),n.createElement(qn,{nodesMap:k,schema:t,type:"edges"}),n.createElement(ao,{nodesMap:k,schema:t,type:"edges",updateScheduleDrawer:T}),n.createElement(Be,{type:"edges",filelocation:u,appMode:d,properties:JSON.parse(JSON.stringify(c))})),children:n.createElement(Ge,{ref:w[r].ref,schema:JSON.parse(JSON.stringify(t)),type:"edges",queryPrimitiveTypes:h,handleUploadFile:y,appMode:d})}})),A=function(t){a((function(e){e.currentId=t[0]})),co=!1},C=function(){var t,e=(t=xo().mark((function t(){return xo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("DATA_IMPORTING"===d){t.next=2;break}return t.abrupt("return");case 2:v&&(a((function(t){t.currentType="edges"})),x((function(t){return jo(jo({},t),{},{autoUpload:!0})})),v().then((function(t){if(t){var e=Object.values(window.ITEM_REFS).reduce((function(t,e){return console.log("acc",t,e),jo(jo({},t),{},Po({},e.file,e.ref))}),{});t.forEach((function(t){var r=e[t.name];r&&r.current&&r.current.upload(t)}))}else x((function(t){return jo(jo({},t),{},{autoUpload:!1})})),a((function(t){t.currentType="nodes"}))})));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_o(i,n,o,a,c,"next",t)}function c(t){_o(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){var t=setTimeout((function(){C()}),200);return function(){clearTimeout(t)}}),[]),n.createElement("div",null,n.createElement(Oo,{ref:e}),n.createElement(c.SegmentedTabs,{block:!0,queryKey:"element",value:s,onChange:function(t){return a((function(e){e.currentType=t}))},items:[{key:"nodes",label:r.formatMessage({id:"Vertex"}),children:n.createElement(uo,{currentId:f,items:_},n.createElement(Wt.Z,{expandIcon:function(t){var e=t.isActive;return n.createElement(Fe.Z,{rotate:e?90:0})},accordion:P,items:D,activeKey:j,onChange:A}))},{key:"edges",label:r.formatMessage({id:"Edges"}),children:n.createElement(uo,{currentId:f,items:L},n.createElement(Wt.Z,{expandIcon:function(t){var e=t.isActive;return n.createElement(Fe.Z,{rotate:e?90:0})},accordion:P,items:I,activeKey:j,onChange:A}))}]}))},Ao=r(24279),Co=function(t){var e=(0,c.useSection)().toggleRightSide;return n.createElement(oe.ZP,{type:"text",icon:n.createElement(c.Icons.Sidebar,{revert:!0}),onClick:function(){e()}})},No=function(t){var e=t.style,r=(0,p.qp)(),o=r.updateStore,i=r.store.elementOptions,a=(0,c.useStudioProvier)().isLight,u=i.isEditable?n.createElement(qt.Z,{id:"The current mode is preview only, and does not support clearing the model"}):n.createElement(qt.Z,{id:"Clear graph model"});return n.createElement(re.Z,{title:u,placement:"right"},n.createElement(oe.ZP,{disabled:i.isEditable,onClick:function(){ct=1,ut=1,o((function(t){t.nodes=[],t.edges=[]}))},style:e,type:"text",icon:n.createElement(c.Icons.Trash,{style:{color:a?i.isEditable?"#ddd":"#000":i.isEditable?"#585858":"#fff"}})}))};function Zo(t){return function(t){if(Array.isArray(t))return Go(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Go(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Go(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Go(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Fo=c.Icons.AddNode,Mo=0,Ro=function(t){var e=t.style,r=(0,o._K)().setCenter,i=(0,p.qp)(),a=i.updateStore,c=!i.store.elementOptions.isConnectable,u=c?n.createElement(qt.Z,{id:"The current mode is preview only, and does not support creating new vertex"}):n.createElement(qt.Z,{id:"Create new vertex"});return n.createElement(re.Z,{title:u,placement:"right"},n.createElement(oe.ZP,{disabled:c,onClick:function(){a((function(t){var e=lt(),n=200*Mo,o=100*Mo;Mo++,t.nodes=[].concat(Zo(t.nodes),[{id:(0,tt.Z)(),position:{x:n,y:o},type:"graph-node",data:{label:e}}]),r(n+50,o+50,{duration:600,zoom:1})}))},style:e,type:"text",icon:n.createElement(Fo,null)}))},zo=r(61448),Uo=r(5490);function Bo(t){return Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bo(t)}function Yo(){Yo=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Bo(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Bo(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Jo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var qo=function(t){var e=function(){var t,e=(t=Yo().mark((function t(){var e,r;return Yo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=document.querySelector(".react-flow__viewport"))){t.next=6;break}return t.next=4,(0,Uo.KT)(e,{});case 4:r=t.sent,c.Utils.downloadImage(r,"model.svg");case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Jo(i,n,o,a,c,"next",t)}function c(t){Jo(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return n.createElement(re.Z,{title:n.createElement(qt.Z,{id:"Save graph model to svg image"}),placement:"right"},n.createElement(oe.ZP,{type:"text",icon:n.createElement(zo.Z,null),onClick:e}))},Vo=r(52018),Ho=r(31097),Xo=function(t){var e="label";var r=function(t){var e=[],r=[];return t.forEach((function(t){var n=t.meta,o=t.contents,i=n.graphFields,a=n.name,c=n.header,u=n.delimiter,l=i.idField,s=i.sourceField,f=void 0===s?"source":s,p=i.targetField,d=void 0===p?"target":p,y=i.type,h=a.split(".csv")[0],v=function(t,e,r){var n=function(t){return t.replace(/\r\n/g,"\n").replace(/\r/g,"\n")}(t).split("\n");return n.slice(1).map((function(t){for(var n=t.split(r),o={},i=0;i<e.length;i++)o[e[i]]=n[i];return o}))}(o,c,u);"Vertex"===y&&v.forEach((function(t){e.push({id:t[l],label:h,data:t,meta:n})})),"Edge"===y&&v.forEach((function(t){r.push({id:"".concat(t[f],"-").concat(t[d]),label:h,source:t[f],target:t[d],data:t,meta:n})}))})),{nodes:e,edges:r}}(t),n=function(t,r){var n=t.nodes,o=t.edges,i=new Map,a=new Map,c=r||{},u=c.nodeLabelFromProperties,l=c.edgeLabelFromProperties,s=function t(e,r){void 0===r&&(r="");var n=[];for(var o in e)if(e.hasOwnProperty(o)){var i=e[o],a=r?"".concat(r,".").concat(o):o;i&&"[object Object]"===Object.prototype.toString.call(i)&&!Array.isArray(i)?n.push.apply(n,t(i,a)):n.push({name:a,type:f(i)})}return n},f=function(t){return null===t?"null":Array.isArray(t)?"array":t instanceof Date?"date":"[object Number]"!==Object.prototype.toString.call(t)||isNaN(t)?"[object Boolean]"===Object.prototype.toString.call(t)?"boolean":"[object Object]"===Object.prototype.toString.call(t)?"object":Object.prototype.toString.call(t).slice(8,-1).toLowerCase():"number"},p=function(t,e,r){return r&&t.data[r]?t.data[r]:e?t[e]:"undefined"},d=new Map(n.map((function(t){return[t.id,t]})));return n.forEach((function(t){var r=p(t,e,u);if(!i.has(r)){var n={label:r,meta:t.meta,properties:s(t.data)};i.set(r,n)}})),console.log("nodes.edges",n,o),o.forEach((function(t){var r=p(t,e,l),n=d.get(t.source),o=d.get(t.target);if(n&&o){if(!a.has(r)){var i={label:r,source:p(n,e,u),target:p(o,e,u),properties:s(t.data),meta:t.meta};a.set(r,i)}}else console.warn("数据不合法, 找不到 ".concat(n?"Target ID：".concat(t.target):"Source ID：".concat(t.source)))})),{nodes:Array.from(i.values()),edges:Array.from(a.values())}}(r);return n},$o={number:"DT_DOUBLE",string:"DT_STRING"},Wo=function(t){var e=t.nodes.map((function(t){var e=t.label,r=t.properties,n=t.meta,o=n.graphFields.idField;return{id:e,position:{x:0,y:0},data:{label:e,dataFields:n.header,delimiter:n.delimiter,datatype:"csv",csv_location:n.name,graphFields:n.graphFields,properties:r.map((function(t){var e=t.name,r=t.type,n=o===e,i=$o[r];return{name:e,type:"DT_DOUBLE"===i&&n?"DT_SIGNED_INT64":i,key:(0,tt.Z)(),disable:!1,primaryKey:n}}))}}})),r=t.edges.map((function(t){var e=t.label,r=t.properties,n=t.source,o=t.target,i=t.meta,a=i.graphFields,c=a.sourceField,u=a.targetField;return{id:e,source:n,target:o,data:{label:e,dataFields:i.header,delimiter:i.delimiter,datatype:"csv",csv_location:i.name,graphFields:i.graphFields,properties:r.map((function(t){var e=t.name,r=t.type,n=c===e||u===e;return n?null:{name:e,type:n?"DT_SIGNED_INT32":$o[r],key:(0,tt.Z)(),disable:!1,primaryKey:!1}})).filter((function(t){return null!==t}))}}}));return{nodes:Gt(e,"graph"),edges:Ft(r,"graph")}},Ko=r(95170),Qo=r.n(Ko);function ti(t){return ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ti(t)}function ei(){ei=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==ti(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ti(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function ri(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ni(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ri(Object(r),!0).forEach((function(e){oi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ri(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oi(t,e,r){var n;return n=function(t,e){if("object"!=ti(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ti(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==ti(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ii(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var ai=function(t){var e=(0,p.qp)(),r=e.updateStore,o=e.store.isSaveFiles,i=function(){var e,n=(e=ei().mark((function e(n,i){var a,u,l,s,f,p,d;return ei().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.files,u=n.csvFiles,i((function(t){return ni(ni({},t),{},{loading:!0})})),e.next=4,c.Utils.asyncFunctionWithWorker(Xo)(a);case 4:l=e.sent,s=l.result,l.duration,f=Wo(s),p=f.nodes,d=f.edges,o&&Qo().setItem("DRAFT_GRAPH_FILES",u),r((function(t){t.hasLayouted=!1,t.nodes=p,t.edges=d,t.csvFiles=u})),i((function(t){return ni(ni({},t),{},{loading:!1})})),t.onCallback&&t.onCallback();case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){ii(i,n,o,a,c,"next",t)}function c(t){ii(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,e){return n.apply(this,arguments)}}();return n.createElement(c.ImportFiles,{isSaveFiles:o,upload:{accept:".csv",title:n.createElement(qt.Z,{id:"Click or drag file to this area to parse it"}),description:n.createElement(qt.Z,{id:"If you already have CSV data, feel free to parse it here, and the system will automatically infer possible graph models for you."})}},(function(t,e){return n.createElement(oe.ZP,{type:"primary",onClick:function(){return i(t,e)},loading:t.loading},n.createElement(qt.Z,{id:"Generate graph model"}))}))};function ci(t){return ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ci(t)}function ui(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function li(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ui(Object(r),!0).forEach((function(e){si(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ui(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function si(t,e,r){var n;return n=function(t,e){if("object"!=ci(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ci(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==ci(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return pi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pi(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var di=function(t){var e=t.style,r=fi((0,n.useState)({visible:!1}),2),o=r[0],i=r[1],a=o.visible,u=(0,p.qp)().store.elementOptions,l=(0,c.useStudioProvier)().isLight,s=function(){i(li(li({},o),{},{visible:!1}))};return n.createElement($t.Z,null,n.createElement(re.Z,{title:n.createElement(qt.Z,{id:"Shortcut: parse files into a graph model"}),placement:"left"},n.createElement(oe.ZP,{type:"text",disabled:u.isEditable,onClick:function(){i(li(li({},o),{},{visible:!a}))},style:e,icon:n.createElement(Ho.Z,{style:{color:l?u.isEditable?"#ddd":"#000":u.isEditable?"#585858":"#fff"}})})),n.createElement(Vo.Z,{title:n.createElement(qt.Z,{id:"Parse files into a graph model"}),open:a,onOk:s,onCancel:s,footer:null},n.createElement("div",{style:{height:"60vh"}},n.createElement(ai,{onCallback:s}))))},yi=r(65586),hi=r(80487),vi=r(27841);function mi(t){return mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mi(t)}function gi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function bi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gi(Object(r),!0).forEach((function(e){wi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wi(t,e,r){var n;return n=function(t,e){if("object"!=mi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==mi(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oi(){Oi=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==mi(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(mi(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Ei(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var xi=ne.Z.Dragger,Si=function(t){return"schema"in t?t.schema:"vertex_types"in t&&"edge_types"in t?t:"vertex_mappings"in t&&"edge_mappings"in t?{vertex_mappings:t.vertex_mappings,edge_mappings:t.edge_mappings}:{}},ji=function(t){var e=t.style,r=void 0===e?{}:e,o=t.icon,i=void 0===o?n.createElement(c.Icons.File,{text:"YAML"}):o,a=t.disabled,u=(0,p.qp)(),l=u.updateStore,s=u.store,f=s.appMode,d=s.nodes,y=s.edges,h=function(){var t,e=(t=Oi().mark((function t(e){var r,n,o,i,a;return Oi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.file,n=r.type,t.prev=2,t.next=5,c.Utils.parseFile(r);case 5:o=t.sent,"application/x-yaml"===n&&(i=Si(hi.ZP.load(o))),"application/json"===n&&(i=Si(JSON.parse(o))),"DATA_MODELING"===f&&(a=Kr(i,(function(){return{disabled:!1,saved:!1}}))),"DATA_IMPORTING"===f&&(a=ln({},i,{nodes:d,edges:y},!1)),l((function(t){t.hasLayouted=!1,t.nodes=Gt(a.nodes,"graph"),t.edges=Ft(a.edges,"graph")})),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.error("解析文件失败:",t.t0),vi.ZP.error("解析文件失败");case 17:case"end":return t.stop()}}),t,null,[[2,13]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ei(i,n,o,a,c,"next",t)}function c(t){Ei(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();return n.createElement("div",{style:{height:"100%",width:"100%"}},n.createElement(xi,{disabled:"DATA_MODELING"===f&&a,accept:".yaml,.json",customRequest:h,showUploadList:!1,multiple:!0,style:bi({height:"100px",width:"100%"},r)},n.createElement(Kt.Z,{justify:"center",align:"center",vertical:!0,gap:24},i,n.createElement(Qt.Z.Text,{type:"secondary"},n.createElement(qt.Z,{id:"For the definition and description of the schema model, please refer to the "}),n.createElement("a",{href:"https://graphscope.io/docs/flex/interactive/data_model",target:"_blank"},n.createElement(qt.Z,{id:"document"}))))))},Pi=s.Z.useToken,_i={DATA_MODELING:{importText:"Import YAML or JSON file to generate graph model",exportText:"Save graph model to local YAML or JSON file"},DATA_IMPORTING:{importText:"Import YAML or JSON file to generate graph loading config",exportText:"Save graph loading config to local YAML or JSON file"},PURE:{importText:"Import YAML or JSON file to generate graph loading config",exportText:"Save graph loading config to local YAML or JSON file"}},Li=function(){var t=Pi().token,e=(0,p.qp)().store,r=e.nodes,o=e.edges,i=e.appMode,a=_i[i],u=a.importText,l=a.exportText,s=function(t){var e;if("DATA_MODELING"===i){var n=tn(c.Utils.fakeSnapshot({nodes:r,edges:o}));return"yaml"===t&&(e=hi.ZP.dump(n)),"json"===t&&(e=JSON.stringify(n)),void c.Utils.download("create-model.".concat(t),e)}if("DATA_IMPORTING"===i){var a=sn(c.Utils.fakeSnapshot({nodes:r,edges:o}));return"yaml"===t&&(e=hi.ZP.dump(a)),"json"===t&&(e=JSON.stringify(a)),void c.Utils.download("loading-config.".concat(t),e)}};return n.createElement(Kt.Z,{justify:"center",vertical:!0,style:{padding:"20px",width:"350px"},gap:10},n.createElement(Qt.Z.Text,{type:"secondary"},u),n.createElement(ji,{disabled:0!==r.length,style:{height:"160px"},icon:n.createElement($t.Z,{split:"or"},n.createElement(c.Icons.File,{text:"YAML",style:{fontSize:"30px",color:t.colorTextSecondary}}),n.createElement(c.Icons.File,{text:"JSON",style:{fontSize:"30px",color:t.colorTextSecondary}}))}),n.createElement(Ao.Z,{style:{margin:"12px  0px"}}),n.createElement(Qt.Z.Text,{type:"secondary"},l),n.createElement(Kt.Z,{gap:10},n.createElement(oe.ZP,{style:{width:"50%"},onClick:function(){return s("yaml")}},"EXPORT YAML"),n.createElement(oe.ZP,{style:{width:"50%"},onClick:function(){return s("json")}},"EXPORT JSON")))},ki=function(t){return n.createElement(yi.Z,{placement:"leftBottom",content:n.createElement(Li,null)},n.createElement(oe.ZP,{type:"text",icon:n.createElement(c.Icons.FileYaml,null)}))},Ti=function(t){var e=(0,p.qp)().store.appMode;return"DATA_MODELING"===e?n.createElement(n.Fragment,null,n.createElement(c.Toolbar,{style:{top:"12px",right:"24px",left:"unset"},direction:"vertical"},n.createElement(Co,null),n.createElement(Ao.Z,{style:{margin:"0px"}}),n.createElement(di,null),n.createElement(Ao.Z,{style:{margin:"0px"}}),n.createElement(ki,null),n.createElement(Ao.Z,{style:{margin:"0px"}}),n.createElement(Ro,null),n.createElement(No,null),n.createElement(qo,null))):"DATA_IMPORTING"===e?n.createElement(n.Fragment,null,n.createElement(c.Toolbar,{style:{top:"12px",right:"24px",left:"unset"},direction:"vertical"},n.createElement(Co,null),n.createElement(Ao.Z,{style:{margin:"0px"}}),n.createElement(ki,null))):null},Di={appMode:"DATA_MODELING",disabled:!1,nodes:[],edges:[],source:{nodes:[],edges:[]},nodePositionChange:[],isReady:!1,displayMode:"graph",graphPosition:{},tablePosition:{},currentType:"nodes",currentId:"",theme:{primaryColor:"#1978FF"},collapsed:{left:!0,right:!0},hasLayouted:!1,elementOptions:{isEditable:!0,isConnectable:!0},csvFiles:[],isSaveFiles:!0},Ii={"en-US":{"Start sketching a model, a vertex label is a named grouping or categorization of nodes within the graph dataset":"Start sketching a model, a vertex label is a named grouping or categorization of nodes within the graph dataset","Please manually input the odps file location":"Please manually input the odps file location",Upload:"Upload","Load data":"Load data","Start importing":"Start importing",Close:"Close","Goto Modeling":"Goto Modeling","Save Modeling":"Save Modeling","Goto Graphs":"Goto Graphs","Goto Importing":"Goto Importing","Go back to modify the graph model.":"Go back to modify the graph model.","View Schema":"View Schema","Successfully saved the graph model":"Successfully saved the graph model","Failed to save the graph model":"Failed to save the graph model","Please create the graph model first":"Please create the graph model first","Sorry, the system detected that there is no available graph model. Please create a graph model before importing data":"Sorry, the system detected that there is no available graph model. Please create a graph model before importing data","Bulk Import":"Bulk Import","Bulk Import Data":"Bulk Import Data","The system has detected that you have previously uploaded CSV files. You can quickly bulk import data into graphscope":"The system has detected that you have previously uploaded CSV files. You can quickly bulk import data into graphscope","Click or drag file to this area to upload":"Click or drag file to this area to upload","Clear all files":"Clear all files","Generate graph model":"Generate graph model","If you already have CSV data, feel free to upload it here, and the system will automatically infer possible graph models for you.":"If you already have CSV data, feel free to upload it here, and the system will automatically infer possible graph models for you.","If you already have SQLDDL file, feel free to upload it here, and the system will automatically infer possible graph models for you.":"If you already have SQLDDL file, feel free to upload it here, and the system will automatically infer possible graph models for you.","A vertex must have a primary key.":"A vertex must have a primary key.","A vertex must have at least one property.":"A vertex must have at least one property.","A edge can only have one property.":"A edge can only have one property.","The current mode is preview only, and does not support clearing the model":"The current mode is preview only, and does not support clearing the model","Clear graph model":"Clear graph model","The current mode is preview only, and does not support creating new vertex":"The current mode is preview only, and does not support creating new vertex","Create new vertex":"Create new vertex","The current mode is preview only, and does not support opening multi-source modeling":"The current mode is preview only, and does not support opening multi-source modeling","Expand or collapse multi-source modeling":"Expand or collapse multi-source modeling",Configuration:"Configuration","You have successfully bound the data source. Please complete the configuration to start importing data.":"You have successfully bound the data source. Please complete the configuration to start importing data.","The data loading task has been successfully created. You can view detailed logs in the job center.":"The data loading task has been successfully created. You can view detailed logs in the job center.","Goto Jobs":"Goto Jobs","Please select a primate type.":"Please select a primate type.","Click or drag file to this area to parse it":"Click or drag file to this area to parse it","If you already have CSV data, feel free to parse it here, and the system will automatically infer possible graph models for you.":"If you already have CSV data, feel free to parse it here, and the system will automatically infer possible graph models for you.","Data source binding":"Data source binding","Shortcut: parse files into a graph model":"Shortcut: parse files into a graph model","Save graph model to svg image":"Save graph model to svg image","Save graph model to JSON config":"Save graph model to JSON config","Parse files into a graph model":"Parse files into a graph model","For the definition and description of the schema model, please refer to the ":"For the definition and description of the schema model, please refer to the ",document:"document",Vertex:"Vertex",Edges:"Edges","File type":"File type","ID field":"ID field","Label field":"Label field","Target field":"Target field","Source field":"Source field","Delete this label":"Delete this label",Label:"Label","Data Fields":"Data Fields","Add Property":"Add Property",Properties:"Properties","Uploading...":"Uploading...",Delimiter:"Delimiter",Type:"Type","Header Row":"Header Row","Import Option":"Import Option",Quoting:"Quoting","Quote char":"Quote char",Source:"Source",Target:"Target","Load data right now":"Load data right now","Click to rebind datasource":"Click to rebind datasource","Click to bind datasource":"Click to bind datasource","Preview dataloading configuration":"Preview dataloading configuration","Please bind datasource first":"Please bind datasource first","Click to load all label's data":"Click to load all label's data","Binding all datasource in batch":"Binding all datasource in batch","Bind all the datasource, but first, please check if the location for each label is filled in correctly.":"Bind all the datasource, but first, please check if the location for each label is filled in correctly."},"zh-CN":{"Start sketching a model, a vertex label is a named grouping or categorization of nodes within the graph dataset":"开始绘制模型吧，顶点标签是图数据集中节点的命名分组或分类","Please manually input the odps file location":"请手动填写 odps 文件位置",Upload:"上传","Load data":"加载数据","Start importing":"开始导入",Close:"关闭","Goto Modeling":"跳转到建模","Save Modeling":"保存建模","Goto Graphs":"跳转到图实例列表","Goto Importing":"跳转到数据导入","Go back to modify the graph model.":"返回修改图实例。","View Schema":"查看 Schema","Successfully saved the graph model":"已成功保存图模型","Failed to save the graph model":"无法保存图模型","Please create the graph model first":"请先创建图模型","Sorry, the system detected that there is no available graph model. Please create a graph model before importing data":"对不起，系统检测到没有可用的图模型。导入数据前请先创建图模型.","Bulk Import":"批量导入","Bulk Import Data":"批量导入数据","The system has detected that you have previously uploaded CSV files. You can quickly bulk import data into graphscope":"系统检测到您之前上传过 CSV 文件。您可以快速将数据批量导入 graphscope","Click or drag file to this area to upload":"单击或拖动文件到此区域进行上传","Clear all files":"清除所有文件","Generate graph model":"生成图模型","If you already have CSV data, feel free to upload it here, and the system will automatically infer possible graph models for you.":"如果您已经有 CSV 数据，请随时将其上传到此处，系统将自动为您推断可能的图模型。","If you already have SQLDDL file, feel free to upload it here, and the system will automatically infer possible graph models for you.":"如果您已经有 SQLDDL 文件，请随时在此处上传，系统将自动为您推断可能的图模型。","A vertex must have a primary key.":"节点必须具有一个主键。","A vertex must have at least one property.":"节点必须至少具有一个属性。","A edge can only have one property.":"一条边只能有一个属性。","The current mode is preview only, and does not support clearing the model":"当前模式仅为预览模式，不支持清除模型","Clear graph model":"清除模型","The current mode is preview only, and does not support creating new vertex":"当前模式仅为预览模式，不支持创建新顶点","Create new vertex":"创建节点","The current mode is preview only, and does not support opening multi-source modeling":"当前模式仅为预览模式，不支持打开多源建模","Expand or collapse multi-source modeling":"展开或折叠多源建模",Configuration:"配置","You have successfully bound the data source. Please complete the configuration to start importing data.":"您已成功绑定数据源。请完成配置以开始导入数据。","The data loading task has been successfully created. You can view detailed logs in the job center.":"数据加载任务已成功创建。您可以在作业中心查看详细日志。","Goto Jobs":"跳转到日志","Please select a primate type.":"请补充完数据类型","Click or drag file to this area to parse it":"单击或拖动文件到此区域进行解析","If you already have CSV data, feel free to parse it here, and the system will automatically infer possible graph models for you.":"如果您已经有 CSV 数据，请随时将其放置到此处，系统将自动为您推断可能的图模型。","Data source binding":"数据绑定","Shortcut: parse files into a graph model":"快捷方式：将文件解析为图模型","Save graph model to svg image":"将图模型保存到 svg 图像","Save graph model to JSON config":"将图模型保存到 JSON 配置","Parse files into a graph model":"将文件解析为图模型","For the definition and description of the schema model, please refer to the ":"关于模式模型的定义和描述，请参阅 ",document:"文档",Vertex:"节点",Edges:"边","File type":"文件类型","ID field":"ID 字段","Label field":"label 字段","Target field":"终止点字段","Source field":"起始点字段","Delete this label":"删除该类型",Label:"类型",Source:"起始点",Target:"目标点","Data Fields":"Data Fields","Add Property":"添加属性",Properties:"属性","Uploading...":"上传中...",Delimiter:"定界符",Type:"类型","Header Row":"标题行","Import Option":"导入选项",Quoting:"引用","Quote char":"分隔符","Load data right now":"立即载入数据","Click to rebind datasource":"点击解绑，可重新绑定数据源","Click to bind datasource":"点击绑定数据源","Preview dataloading configuration":"预览周期载入配置","Please bind datasource first":"请先绑定数据源","Click to load all label's data":"点击载入所有 label 的数据","Binding all datasource in batch":"批量绑定所有 label 数据源","Bind all the datasource, but first, please check if the location for each label is filled in correctly.":"绑定数据源之前，请先检查每个 label 的 location 是否填写正确"}};function Ai(t){return Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ai(t)}function Ci(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ni(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ci(Object(r),!0).forEach((function(e){Zi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ci(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Zi(t,e,r){var n;return n=function(t,e){if("object"!=Ai(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ai(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==Ai(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gi(){Gi=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Ai(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ai(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Fi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var Mi=function(t){var e=t.appMode,r=t.GS_ENGINE_TYPE,i=t.queryGraphSchema,a=t.queryBoundSchema,u=(t.id,t.theme,t.defaultCollapsed),l=void 0===u?{rightSide:!1,leftSide:!0}:u,s=t.leftSideStyle,f=void 0===s?{width:"350px",padding:"0px 12px"}:s,d=t.rightSideStyle,y=void 0===d?{width:"450px",padding:"0px 12px"}:d,h=t.children,v=t.queryPrimitiveTypes,m=t.handleUploadFile,g=t.isSaveFiles,b=t.batchUploadFiles,w=t.onCreateLabel,O=t.onDeleteLabel,E=t.style,x=(t.leftSide,t.rightSide),S=t.refreshIndex,j=void 0===S?1:S,P=(0,p.qp)(),_=P.store,L=P.updateStore,k=_.isReady,T=_.displayMode;(0,c.useDynamicStyle)("\n/* this gets exported as style.css and can be used for the default theming */\n/* these are the necessary styles for React Flow, they get used by base.css and style.css */\n.react-flow {\n  direction: ltr;\n}\n.react-flow__container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n.react-flow__pane {\n  z-index: 1;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.react-flow__pane.selection {\n    cursor: pointer;\n  }\n.react-flow__pane.dragging {\n    cursor: -webkit-grabbing;\n    cursor: grabbing;\n  }\n.react-flow__viewport {\n  transform-origin: 0 0;\n  z-index: 2;\n  pointer-events: none;\n}\n.react-flow__renderer {\n  z-index: 4;\n}\n.react-flow__selection {\n  z-index: 6;\n}\n.react-flow__nodesselection-rect:focus,\n.react-flow__nodesselection-rect:focus-visible {\n  outline: none;\n}\n.react-flow .react-flow__edges {\n  pointer-events: none;\n  overflow: visible;\n}\n.react-flow__edge-path,\n.react-flow__connection-path {\n  stroke: #b1b1b7;\n  stroke-width: 1;\n  fill: none;\n}\n.react-flow__edge {\n  pointer-events: visibleStroke;\n  cursor: pointer;\n}\n.react-flow__edge.animated path {\n    stroke-dasharray: 5;\n    -webkit-animation: dashdraw 0.5s linear infinite;\n            animation: dashdraw 0.5s linear infinite;\n  }\n.react-flow__edge.animated path.react-flow__edge-interaction {\n    stroke-dasharray: none;\n    -webkit-animation: none;\n            animation: none;\n  }\n.react-flow__edge.inactive {\n    pointer-events: none;\n  }\n.react-flow__edge.selected,\n  .react-flow__edge:focus,\n  .react-flow__edge:focus-visible {\n    outline: none;\n  }\n.react-flow__edge.selected .react-flow__edge-path,\n  .react-flow__edge:focus .react-flow__edge-path,\n  .react-flow__edge:focus-visible .react-flow__edge-path {\n    stroke: #555;\n  }\n.react-flow__edge-textwrapper {\n    pointer-events: all;\n  }\n.react-flow__edge-textbg {\n    fill: white;\n  }\n.react-flow__edge .react-flow__edge-text {\n    pointer-events: none;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n  }\n.react-flow__connection {\n  pointer-events: none;\n}\n.react-flow__connection .animated {\n    stroke-dasharray: 5;\n    -webkit-animation: dashdraw 0.5s linear infinite;\n            animation: dashdraw 0.5s linear infinite;\n  }\n.react-flow__connectionline {\n  z-index: 1001;\n}\n.react-flow__nodes {\n  pointer-events: none;\n  transform-origin: 0 0;\n}\n.react-flow__node {\n  position: absolute;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  pointer-events: all;\n  transform-origin: 0 0;\n  box-sizing: border-box;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.react-flow__node.dragging {\n    cursor: -webkit-grabbing;\n    cursor: grabbing;\n  }\n.react-flow__nodesselection {\n  z-index: 3;\n  transform-origin: left top;\n  pointer-events: none;\n}\n.react-flow__nodesselection-rect {\n    position: absolute;\n    pointer-events: all;\n    cursor: -webkit-grab;\n    cursor: grab;\n  }\n.react-flow__handle {\n  position: absolute;\n  pointer-events: none;\n  min-width: 5px;\n  min-height: 5px;\n  width: 6px;\n  height: 6px;\n  background: #1a192b;\n  border: 1px solid white;\n  border-radius: 100%;\n}\n.react-flow__handle.connectionindicator {\n    pointer-events: all;\n    cursor: crosshair;\n  }\n.react-flow__handle-bottom {\n    top: auto;\n    left: 50%;\n    bottom: -4px;\n    transform: translate(-50%, 0);\n  }\n.react-flow__handle-top {\n    left: 50%;\n    top: -4px;\n    transform: translate(-50%, 0);\n  }\n.react-flow__handle-left {\n    top: 50%;\n    left: -4px;\n    transform: translate(0, -50%);\n  }\n.react-flow__handle-right {\n    right: -4px;\n    top: 50%;\n    transform: translate(0, -50%);\n  }\n.react-flow__edgeupdater {\n  cursor: move;\n  pointer-events: all;\n}\n.react-flow__panel {\n  position: absolute;\n  z-index: 5;\n  margin: 15px;\n}\n.react-flow__panel.top {\n    top: 0;\n  }\n.react-flow__panel.bottom {\n    bottom: 0;\n  }\n.react-flow__panel.left {\n    left: 0;\n  }\n.react-flow__panel.right {\n    right: 0;\n  }\n.react-flow__panel.center {\n    left: 50%;\n    transform: translateX(-50%);\n  }\n.react-flow__attribution {\n  font-size: 10px;\n  background: rgba(255, 255, 255, 0.5);\n  padding: 2px 3px;\n  margin: 0;\n}\n.react-flow__attribution a {\n    text-decoration: none;\n    color: #999;\n  }\n@-webkit-keyframes dashdraw {\n  from {\n    stroke-dashoffset: 10;\n  }\n}\n@keyframes dashdraw {\n  from {\n    stroke-dashoffset: 10;\n  }\n}\n.react-flow__edgelabel-renderer {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n}\n.react-flow__edge.updating .react-flow__edge-path {\n      stroke: #777;\n    }\n.react-flow__edge-text {\n    font-size: 10px;\n  }\n.react-flow__node.selectable:focus,\n  .react-flow__node.selectable:focus-visible {\n    outline: none;\n  }\n.react-flow__node-default,\n.react-flow__node-input,\n.react-flow__node-output,\n.react-flow__node-group {\n  padding: 10px;\n  border-radius: 3px;\n  width: 150px;\n  font-size: 12px;\n  color: #222;\n  text-align: center;\n  border-width: 1px;\n  border-style: solid;\n  border-color: #1a192b;\n  background-color: white;\n}\n.react-flow__node-default.selectable:hover, .react-flow__node-input.selectable:hover, .react-flow__node-output.selectable:hover, .react-flow__node-group.selectable:hover {\n      box-shadow: 0 1px 4px 1px rgba(0, 0, 0, 0.08);\n    }\n.react-flow__node-default.selectable.selected,\n    .react-flow__node-default.selectable:focus,\n    .react-flow__node-default.selectable:focus-visible,\n    .react-flow__node-input.selectable.selected,\n    .react-flow__node-input.selectable:focus,\n    .react-flow__node-input.selectable:focus-visible,\n    .react-flow__node-output.selectable.selected,\n    .react-flow__node-output.selectable:focus,\n    .react-flow__node-output.selectable:focus-visible,\n    .react-flow__node-group.selectable.selected,\n    .react-flow__node-group.selectable:focus,\n    .react-flow__node-group.selectable:focus-visible {\n      box-shadow: 0 0 0 0.5px #1a192b;\n    }\n.react-flow__node-group {\n  background-color: rgba(240, 240, 240, 0.25);\n}\n.react-flow__nodesselection-rect,\n.react-flow__selection {\n  background: rgba(0, 89, 220, 0.08);\n  border: 1px dotted rgba(0, 89, 220, 0.8);\n}\n.react-flow__nodesselection-rect:focus,\n  .react-flow__nodesselection-rect:focus-visible,\n  .react-flow__selection:focus,\n  .react-flow__selection:focus-visible {\n    outline: none;\n  }\n.react-flow__controls {\n  box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.08);\n}\n.react-flow__controls-button {\n    border: none;\n    background: #fefefe;\n    border-bottom: 1px solid #eee;\n    box-sizing: content-box;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 16px;\n    height: 16px;\n    cursor: pointer;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n    padding: 5px;\n  }\n.react-flow__controls-button:hover {\n      background: #f4f4f4;\n    }\n.react-flow__controls-button svg {\n      width: 100%;\n      max-width: 12px;\n      max-height: 12px;\n    }\n.react-flow__controls-button:disabled {\n      pointer-events: none;\n    }\n.react-flow__controls-button:disabled svg {\n        fill-opacity: 0.4;\n      }\n.react-flow__minimap {\n  background-color: #fff;\n}\n.react-flow__minimap svg {\n  display: block;\n}\n.react-flow__resize-control {\n  position: absolute;\n}\n.react-flow__resize-control.left,\n.react-flow__resize-control.right {\n  cursor: ew-resize;\n}\n.react-flow__resize-control.top,\n.react-flow__resize-control.bottom {\n  cursor: ns-resize;\n}\n.react-flow__resize-control.top.left,\n.react-flow__resize-control.bottom.right {\n  cursor: nwse-resize;\n}\n.react-flow__resize-control.bottom.left,\n.react-flow__resize-control.top.right {\n  cursor: nesw-resize;\n}\n/* handle styles */\n.react-flow__resize-control.handle {\n  width: 4px;\n  height: 4px;\n  border: 1px solid #fff;\n  border-radius: 1px;\n  background-color: #3367d9;\n  transform: translate(-50%, -50%);\n}\n.react-flow__resize-control.handle.left {\n  left: 0;\n  top: 50%;\n}\n.react-flow__resize-control.handle.right {\n  left: 100%;\n  top: 50%;\n}\n.react-flow__resize-control.handle.top {\n  left: 50%;\n  top: 0;\n}\n.react-flow__resize-control.handle.bottom {\n  left: 50%;\n  top: 100%;\n}\n.react-flow__resize-control.handle.top.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.bottom.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.top.right {\n  left: 100%;\n}\n.react-flow__resize-control.handle.bottom.right {\n  left: 100%;\n}\n/* line styles */\n.react-flow__resize-control.line {\n  border-color: #3367d9;\n  border-width: 0;\n  border-style: solid;\n}\n.react-flow__resize-control.line.left,\n.react-flow__resize-control.line.right {\n  width: 1px;\n  transform: translate(-50%, 0);\n  top: 0;\n  height: 100%;\n}\n.react-flow__resize-control.line.left {\n  left: 0;\n  border-left-width: 1px;\n}\n.react-flow__resize-control.line.right {\n  left: 100%;\n  border-right-width: 1px;\n}\n.react-flow__resize-control.line.top,\n.react-flow__resize-control.line.bottom {\n  height: 1px;\n  transform: translate(0, -50%);\n  left: 0;\n  width: 100%;\n}\n.react-flow__resize-control.line.top {\n  top: 0;\n  border-top-width: 1px;\n}\n.react-flow__resize-control.line.bottom {\n  border-bottom-width: 1px;\n  top: 100%;\n}\n","graphscope-importor"),(0,n.useEffect)((function(){var t;(t=Gi().mark((function t(){var n,o,c,u,l,s;return Gi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={nodes:[],edges:[]},"DATA_MODELING"!==e||!i){t.next=5;break}return t.next=4,i();case 4:n=t.sent;case 5:if("DATA_IMPORTING"!==e||!a){t.next=9;break}return t.next=8,a();case 8:n=t.sent;case 9:o={nodes:Gt(n.nodes,T),edges:Ft(n.edges,T)},l=(c=o||{nodes:[],edges:[]}).edges,s=0===(u=c.nodes).length,L((function(t){t.isReady=!0,t.nodes=u,t.edges=l,t.appMode=e,t.elementOptions={isEditable:!s,isConnectable:"groot"===r&&"DATA_MODELING"===e||s},t.currentId=s?"":u[0].id,t.currentType="nodes",t.isSaveFiles=g,t.hasLayouted=!1}));case 13:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Fi(i,n,o,a,c,"next",t)}function c(t){Fi(i,n,o,a,c,"throw",t)}a(void 0)}))})()}),[j]);var D="PURE"===e;return n.createElement(c.StudioProvier,{locales:Ii},n.createElement(c.Section,{rightSide:x||n.createElement(Io,{appMode:e,queryPrimitiveTypes:v,handleUploadFile:m,batchUploadFiles:b,onCreateLabel:w,onDeleteLabel:O}),leftSideStyle:f,rightSideStyle:y,defaultCollapsed:l,style:Ni({height:"calc(100vh - 50px)"},E),splitBorder:!0},k?n.createElement(o.tV,null,!D&&n.createElement(Ti,null),n.createElement(Xt,null),h):n.createElement(c.GlobalSpin,null)))},Ri=function(t){return n.createElement(p.ZP,{id:t.id,store:Di},n.createElement(Mi,t))},zi=r(10422);function Ui(t){return Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ui(t)}function Bi(){Bi=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function v(){}function m(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var E=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Ui(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ui(e)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function Yi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var Ji={render_modeling:function(t){var e=(t||{}).id,r=void 0===e?"root":e,o=function(){var t,e=(t=Bi().mark((function t(){return Bi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{nodes:[],edges:[]});case 1:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Yi(i,n,o,a,c,"next",t)}function c(t){Yi(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),i=t.queryPrimitiveTypes,a=void 0===i?function(){return["DT_DOUBLE","DT_STRING","DT_SIGNED_INT32","DT_SIGNED_INT64"].map((function(t){return{label:t,value:t}}))}:i,c=t.queryGraphSchema,u=void 0===c?o:c,l=t.appMode,s=void 0===l?"DATA_MODELING":l;zi.render(n.createElement(Ri,{queryPrimitiveTypes:a,queryGraphSchema:u,appMode:s}),document.getElementById(r))}},qi=Ji,Vi=Ri},33741:function(t,e,r){r.d(e,{qp:function(){return y}});var n=r(53874),o=r(50959),i=r(55227);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){var n;return n=function(t,e){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==a(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}(0,n.Fl)(!1);var s=o.createContext({id:""}),f=new Map,p=new Map;function d(t,e){var r;f.has(t)||(f.set(t,e),p.set(t,(r=e,(0,i.U)((function(t,e){return u(u({},r),{},{updateStore:function(r){t((0,n.Uy)(e(),(function(t){try{r(t)}catch(t){console.error("Error updating store:",t)}})))}})})))))}function y(t){var e=(0,o.useContext)(s).id;t&&(e=t);var r=p.get(e),n=f.get(e);return{store:new Proxy(u({},n),{get:function(t,e){return e in t?r((function(t){return t[e]})):void console.error("prop ".concat(e.toString()," not exist"))}}),updateStore:r((function(t){return t.updateStore})),id:e}}window.GLOBAL_USE_STORE_MAP=p,window.GLOBAL_INITIAL_STORE_MAP=f,e.ZP=function(t){var e=t.children,r=t.store,n=t.id,i=(0,o.useMemo)((function(){return n||"".concat(Math.random().toString(36).substr(2))}),[]);return d(i,r),o.createElement(s.Provider,{value:{id:i}},e)}}}]);