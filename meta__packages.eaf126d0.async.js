"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[56],{55736:function(e,t,n){n.d(t,{C1:function(){return i},qp:function(){return a},rv:function(){return o}});var r=n(33741),o={mode:"GS_STUDIO_QUERY_MODE"},i={isReady:!1,graphId:"",activeNavbar:"recommended",collapse:!0,activeId:"query-1",globalScript:"Match (n) return n limit 10",autoRun:!1,absolutePosition:!1,schemaData:{nodes:[],edges:[]},statements:[],historyStatements:[],savedStatements:[],storeProcedures:[],mode:"flow",enableImmediateQuery:!1,language:"gremlin",defaultCollapsed:!0,welcome:void 0},a=function(){return(0,r.qp)()}},84158:function(e,t,n){n.d(t,{Ek:function(){return o},Id:function(){return r}});n(58002).Utils.storage;function r(e){for(var t=0,n=["MATCH","WHERE","RETURN","CREATE","DELETE"];t<n.length;t++){var r=n[t];e=e.replace(new RegExp("(".concat(r,")(?![^\\(]*\\))"),"g"),"\n$1")}return(e=(e=e.replace(/, /g,",\n")).replace(/\n+/g,"\n")).trim()}function o(e){return(e.match(/\r?\n/g)||[]).length+1}},63904:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(50959),o=n(58002),i=n(96066);n(52871);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){var r;return r=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==a(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p={comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}]},d={defaultToken:"",tokenPostfix:".gremlin",ignoreCase:!0,brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["g","V","E","out","in","both","has","hasLabel","limit","order","by","select","count","filter","map","dedup","outE","inE","bothE"],builtinLiterals:["true","false","null"],builtinFunctions:["values","keys","id","label","property","outV","inV","bothV","sum","mean","min","max","coalesce","is","not","range","fold"],operators:["+","-","*","/","%","^","=","<>","<",">","<=",">="],escapes:/\\(?:[tbnrf\\"'`]|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+/,octaldigits:/[0-7]+/,hexdigits:/[0-9a-fA-F]+/,tokenizer:{root:[[/[{}[\]()]/,"@brackets"],{include:"common"}],common:[{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/:[a-zA-Z_][\w]*/,"type.identifier"],[/[a-zA-Z_][\w]*(?=\()/,{cases:{"@builtinFunctions":"predefined.function","@keywords":"keyword","@default":"identifier"}}],[/`/,"identifier.escape","@identifierBacktick"],[/[;,.:|]/,"delimiter"],[/[\+\-\*\/\^%]+/,"delimiter.operator"],[/[\!<>\?=\|&]/,"delimiter"]],numbers:[[/-?(@digits)[eE](-?(@digits))?/,"number.float"],[/-?(@digits)?\.(@digits)([eE]-?(@digits))?/,"number.float"],[/-?0x(@hexdigits)/,"number.hex"],[/-?0(@octaldigits)/,"number.octal"],[/-?(@digits)/,"number"]],strings:[[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@stringDouble"],[/'/,"string","@stringSingle"]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/\/\/.*/,"comment"],[/[^/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],stringDouble:[[/[^\\"]+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/"/,"string","@pop"]],stringSingle:[[/[^\\']+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/'/,"string","@pop"]],identifierBacktick:[[/[^\\`]+/,"identifier.escape"],[/@escapes/,"identifier.escape"],[/\\./,"identifier.escape.invalid"],[/`/,"identifier.escape","@pop"]]}};var f=[].concat(["count","fold","sum","min","max","mean","group","groupCount"],["hasId","hasLabel","has","hasNot","is","where","not","dedup","order","limit","coin","sample","union"],["id","label","constant","valueMap","values","elementMap","select"]),m=["outV","inV","otherV","bothV"],h=["outE","inE","bothE","out","in","both"],y={};function g(e){return(e.match(/\r?\n/g)||[]).length+1}[].concat(m,["out","in","both"]).forEach((function(e){y[e]=[].concat(h,u(f))})),["outE","inE","bothE"].forEach((function(e){y[e]=[].concat(m,u(f))})),i.Mj.register({id:"gremlin"}),i.Mj.setMonarchTokensProvider("gremlin",d),i.Mj.setLanguageConfiguration("gremlin",p),i.Mj.registerCompletionItemProvider("gremlin",{triggerCharacters:["."],provideCompletionItems:function(e,t){var n,r=e.getLineContent(t.lineNumber).slice(0,t.column-1).trim(),o=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({g:["V","E"],V:[].concat(h,["match"],u(f)),E:[].concat(m,u(f))},y)[e]||[];return t.map((function(e){return{label:e,kind:i.Mj.CompletionItemKind.Function,documentation:e,insertText:"".concat(e,"()")}}))}((n=r.replace(/\(.*?\)/g,"").split(/\s|\./).filter(Boolean)).length>0?n[n.length-1]:"");return{suggestions:o}}});var v={cypher:"cypherTheme",gremlin:"GremlinTheme"},b=(0,r.forwardRef)((function(e,t){(0,o.useDynamicStyle)("\n.monaco-editor .view-overlays .current-line {\n  background-color: transparent !important;\n}\n\n.monaco-editor .monaco-scrollable-element::-webkit-scrollbar {\n  display: none;\n}\n\n.decorationsOverviewRuler {\n  display: none !important;\n}\n\n.monaco-editor .view-overlays .current-line-exact {\n  border: none !important;\n}\n\n.monaco-editor .scroll-decoration {\n  box-shadow: none;\n}\n","cypher-editor-style");var n,a=e.value,c=e.language,l=void 0===c?"cypher":c,u=e.maxRows,s=void 0===u?10:u,p=e.minRows,d=void 0===p?1:p,f=e.onChangeContent,m=e.clear,h=e.onInit,y=f?0:g(a),b=(0,o.useStudioProvier)().isLight;return(0,r.useEffect)((function(){return t&&t.current&&(g(a)<=s&&(t.current.style.height=20*g(a)+"px"),n=i.j6.create(t.current,{language:"gremlin",value:a,theme:b?v[l]:"vs-dark",suggestLineHeight:20,automaticLayout:!0,minimap:{enabled:!1},fontSize:14,lineHeight:20,folding:!0,wordWrap:"on",scrollBeyondLastLine:!1,scrollBeyondLastColumn:0}),t.current.codeEditor=n,n.onDidChangeModelContent((function(){var e,r=n.getContentHeight(),o=null===(e=n.getModel())||void 0===e?void 0:e.getLineCount();r<=20*s&&(t.current.style.height=r+"px"),f&&f(o,n)})),h&&h(t.current)),function(){n.dispose()}}),[t,a,l,!b]),r.useEffect((function(){m&&t&&t.current&&t.current.codeEditor&&t.current.codeEditor.setValue("")}),[m]),r.createElement("div",{ref:t,style:{padding:"5px 0px",width:"100%",height:20*(d+y)+"px",border:b?"1px solid rgb(187, 190, 195)":"1px solid #434343",borderRadius:"6px"}})})),x=b},21050:function(e,t,n){n.r(t),n.d(t,{ConnectEndpoint:function(){return Ot},QueryStatement:function(){return Gt},Statement:function(){return wt.default},default:function(){return Ut},sdk:function(){return Bt}});var r=n(50959),o=n(53531),i=n(31192),a=n(55736),c=n(56331),l=o.Z.useToken,u=function(e){var t=l().token,n=(0,a.qp)().store.welcome;if(n){var o=n.title,i=n.description;return r.createElement("div",{style:{margin:"12px",borderRadius:"8px",background:t.colorBgBase}},r.createElement(c.Z,{message:o,description:i,type:"info",closable:!0}))}return null},s=n(54016),p=n(84155),d=n(28541),f=function(e){var t=e.isDark,n=t?"#272727":"#E6E9EE";return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 915 866",fill:"none"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M552.085 623.067C491.189 655.842 482.589 745.72 418.484 770.756C352.941 796.353 259.359 798.915 226.164 750.352C189.108 696.141 291.287 607.551 265.559 547.035C237.793 481.726 101.961 496.952 88.3682 426.238C76.2288 363.085 150.831 297.41 208.118 248.21C263.376 200.753 332.496 162.372 402.856 156.147C468.399 150.348 511.091 201.87 571.612 216.049C633.101 230.454 738.7 185.557 759.412 239.679C782.973 301.247 654.143 363.856 654.328 432.195C654.506 498.496 794.484 523.038 760.348 586.766C727.485 648.115 617.062 588.097 552.085 623.067Z",fill:t?"#272727":"#EEF1F6"}),r.createElement("circle",{cx:"595.876",cy:"255.218",r:"12.5406",transform:"rotate(30 595.876 255.218)",fill:n}),r.createElement("circle",{cx:"724.312",cy:"289.146",r:"12.5406",transform:"rotate(30 724.312 289.146)",fill:n}),r.createElement("circle",{cx:"735.006",cy:"235.789",r:"12.5406",transform:"rotate(30 735.006 235.789)",fill:n}),r.createElement("circle",{cx:"800.535",cy:"288.103",r:"12.5406",transform:"rotate(30 800.535 288.103)",fill:n}),r.createElement("circle",{cx:"613.406",cy:"199.774",r:"12.5406",transform:"rotate(30 613.406 199.774)",fill:n}),r.createElement("circle",{cx:"662.947",cy:"242.856",r:"12.5406",transform:"rotate(30 662.947 242.856)",fill:n}),r.createElement("circle",{cx:"722.216",cy:"420.273",r:"12.5406",transform:"rotate(30 722.216 420.273)",fill:n}),r.createElement("circle",{cx:"788.851",cy:"389.157",r:"12.5406",transform:"rotate(30 788.851 389.157)",fill:n}),r.createElement("line",{x1:"594.446",y1:"254.765",x2:"611.976",y2:"199.321",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"661.962",y1:"243.988",x2:"612.422",y2:"200.905",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"663.219",y1:"244.332",x2:"596.148",y2:"256.693",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"663.85",y1:"241.659",x2:"725.215",y2:"287.949",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"736.476",y1:"236.083",x2:"725.782",y2:"289.441",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"735.152",y1:"237.281",x2:"663.093",y2:"244.349",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"735.941",y1:"234.616",x2:"801.471",y2:"286.93",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"787.591",y1:"389.971",x2:"723.052",y2:"289.96",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"787.361",y1:"388.985",x2:"799.046",y2:"287.931",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"800.556",y1:"289.603",x2:"724.333",y2:"290.646",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"789.486",y1:"390.517",x2:"722.851",y2:"421.632",stroke:n,strokeWidth:"3"}),r.createElement("circle",{cx:"165.557",cy:"381.703",r:"16.9036",transform:"rotate(165 165.557 381.703)",fill:n}),r.createElement("circle",{cx:"131.703",cy:"474.871",r:"16.9036",transform:"rotate(165 131.703 474.871)",fill:n}),r.createElement("circle",{cx:"216.702",cy:"581.703",r:"16.9036",transform:"rotate(165 216.702 581.703)",fill:n}),r.createElement("line",{x1:"132.878",y1:"473.939",x2:"218.059",y2:"581.392",stroke:n,strokeWidth:"3"}),r.createElement("line",{x1:"130.293",y1:"474.359",x2:"164.148",y2:"381.191",stroke:n,strokeWidth:"3"}),r.createElement("circle",{cx:"334",cy:"204",r:"7",fill:n}),r.createElement("circle",{cx:"361",cy:"152",r:"7",fill:n}),r.createElement("circle",{cx:"283",cy:"229",r:"7",fill:n}),r.createElement("circle",{cx:"385",cy:"219",r:"7",fill:n}),r.createElement("circle",{cx:"414",cy:"190",r:"7",fill:n}),r.createElement("line",{x1:"282.78",y1:"228.551",x2:"333.78",y2:"203.551",stroke:n}),r.createElement("line",{x1:"384.859",y1:"219.48",x2:"333.859",y2:"204.48",stroke:n}),r.createElement("line",{x1:"384.647",y1:"218.646",x2:"413.647",y2:"189.646",stroke:n}),r.createElement("line",{x1:"384.53",y1:"219.169",x2:"360.53",y2:"152.169",stroke:n}),r.createElement("line",{x1:"333.556",y1:"203.77",x2:"360.556",y2:"151.77",stroke:n}),r.createElement("ellipse",{cx:"553",cy:"673.5",rx:"25",ry:"24.5",fill:n}),r.createElement("circle",{cx:"786",cy:"553",r:"25",fill:n}),r.createElement("line",{x1:"551.872",y1:"671.669",x2:"785.082",y2:"551.223",stroke:n,strokeWidth:"4"}))},m=n(58002),h=function(e){var t=(0,m.useStudioProvier)().isLight;return r.createElement("div",{style:{fontSize:"14px",height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},r.createElement(f,{isDark:!t}),r.createElement(s.Z.Text,{type:"secondary",style:{position:"absolute"}},r.createElement(p.Z,{id:"You can write cypher or gremlin queries, and then click the {icon} button to query data",values:{icon:r.createElement(d.Z,null)}})))};function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){var r;return r=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==y(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,613))})),w=(0,r.lazy)((function(){return Promise.all([n.e(3155),n.e(2548),n.e(3322)]).then(n.bind(n,93322))})),E=o.Z.useToken,S=function(e){var t=e.createStatements,n=e.queryGraphData,o=e.enableImmediateQuery,c=e.handleCancelQuery,l=e.connectComponent,s=e.displaySidebarPosition,p=(0,a.qp)(),d=p.store,f=p.updateStore,m=d.activeId,y=d.mode,g=d.statements,b=d.savedStatements,S=d.schemaData,k=d.graphId,C=(d.language,b.map((function(e){return e.id})),E().token),T="tabs"===y?{position:"absolute",width:"100%"}:{},j=g.map((function(e,t){return{label:"query-".concat(t+1),value:e.id}})),P=function(e){var n=e.id,r=e.script,o=e.name,i=e.language;f((function(e){-1!==e.savedStatements.map((function(e){return e.id})).indexOf(n)?e.savedStatements.forEach((function(e){e.id===n&&(e.script=r)})):(e.savedStatements.push({id:n,script:r,name:o,language:i}),t&&t("saved",{id:n,script:r,name:o,language:i}))}))},O=function(e){f((function(t){t.statements=t.statements.filter((function(t){return t.id!==e})),t.activeId=t.statements[0]&&t.statements[0].id}))},I=0===g.length;return(0,r.useEffect)((function(){var e;m&&(null===(e=document.getElementById("statements-layout"))||void 0===e||e.scrollTo({top:0,behavior:"smooth"}))}),[m]),r.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},r.createElement("div",{style:{minHeight:"50px",background:C.colorBgBase,padding:"0px 12px",borderBottom:"1px solid ".concat(C.colorBorder)}},r.createElement(r.Suspense,null,r.createElement(w,{connectComponent:l,displaySidebarPosition:s})),"tabs"===y&&0!==j.length&&r.createElement("div",{style:{overflowX:"scroll",padding:"8px 0px"}},r.createElement(i.Z,{options:j,onChange:function(e){f((function(t){t.activeId=e}))},value:m}))),r.createElement("div",{id:"statements-layout",style:{overflowY:"scroll",flex:"1",position:"relative"}},I&&r.createElement(h,null),r.createElement(u,null),g.map((function(e){var t=e.id,i=e.script,a=e.timestamp,l=e.language;return r.createElement("div",{key:t,style:v(v({},T),{},{visibility:t===m||"flow"===y?"visible":"hidden",flex:1})},r.createElement(r.Suspense,null,r.createElement(x,{language:l,enableImmediateQuery:o,mode:y,active:t===m,id:t,timestamp:a,graphId:k,schemaData:S,script:i,onQuery:n,onCancel:c,onClose:O,onSave:P})))}))))},k=(0,r.memo)(S),C=n(791),T=n(17905),j=n(88648),P=n(57526),O=n(38943),I=n(86132),L=n(15098),_=n(41473),N=n(16483),A=n.n(N);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function R(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||F(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||F(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){var r;return r=function(e,t){if("object"!=Z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Z(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}s.Z.Text;var B=s.Z.Title,U=o.Z.useToken,Y={container:{position:"relative",flex:1,height:"100%"},list:{flex:1,height:"100%",overflow:"scroll"},ul:{paddingInlineStart:"0px",boxSizing:"border-box",margin:"0px"},li:{cursor:"pointer",listStyle:"none",boxSizing:"border-box",display:"flex",alignItems:"start",padding:"6px 12px",gap:"4px"}};function H(e){return e.sort((function(e,t){return t.timestamp-e.timestamp})).reduce((function(e,t){var n=A()(t.timestamp),r=n.format("YYYY-MM-DD"),o=n.format("HH:mm"),i=e.find((function(e){return e.day===r}));return i?i.items.push(G(G({},t),{},{hours:o})):e.push({day:r,items:[G(G({},t),{},{hours:o})]}),e}),[])}var V=function(e){var t=e.items,n=e.checkedSet,o=e.batch,i=e.onChange,a=e.onClick,c=U().token;return r.createElement("ul",{style:Y.ul},t.map((function(e){var t=e.hours,l=e.id,u=e.name,s=e.timestamp,p=e.description,d=(e.query,n.has(l)),f=u||t||A()(s).format("YYYY-MM-DD HH:mm");return r.createElement("li",{key:e.id,style:Y.li,className:"gs-query-list-item"},o&&r.createElement(C.Z,{checked:d,onChange:function(t){return i(e.id,t.target.checked)}}),r.createElement(T.Z,{title:"Click to start the query",placement:"right"},r.createElement("pre",{style:{background:c.colorBgLayout,overflow:"hidden",textWrap:"pretty",padding:"6px 14px",fontSize:"12px",border:"1px solid transparent",borderRadius:"6px",flex:1,margin:"0px"},className:"statement-list-item-pre",onClick:function(){a&&a(e)}},r.createElement("div",{style:{fontSize:"11px",padding:"4px 0px 12px 0px",color:c.colorTextDescription,fontStyle:"italic"}},f),p&&r.createElement("div",{style:{fontSize:"11px",padding:"4px 0px 12px 0px",color:c.colorTextDescription,fontStyle:"italic"}},p),r.createElement("code",{style:{fontSize:"12px",color:c.colorTextHeading}},e.script),e.query&&r.createElement(r.Fragment,null,r.createElement("br",null),r.createElement("br",null),r.createElement("code",{style:{fontSize:"12px",color:c.colorTextDescription}},e.query)))))})))},Q=function(e){var t=e.items,n=e.batch,o=e.checkedSet,i=e.onChange,a=e.onClick,c=H(t);return r.createElement("div",{style:Y.list},c.map((function(e){var t=e.day,c=e.items;return r.createElement("div",{key:t},r.createElement(B,{level:5,style:{padding:"12px 12px",margin:"0px",position:"sticky",top:0,backgroundColor:"white",zIndex:100}},t),r.createElement(V,{items:c,batch:n,checkedSet:o,onChange:i,onClick:a}))})))},W=function(e){var t=e.items,n=e.onClick,o=e.onDelete,i=e.actionStyle,a=e.group,c=e.placeholder,l=D((0,r.useState)({checkedSet:new Set,batch:!1}),2),u=l[0],p=l[1],d=u.checkedSet,f=u.batch,m=(H(t),d.size>0&&d.size<t.length),h=t.length>0&&t.length===d.size,y=function(e){p((function(t){return G(G({},t),{},{checkedSet:e})}))},g=function(e,t){t?d.add(e):d.delete(e),y(d)};return 0==t.length&&c?r.createElement("div",{style:{padding:"120px 0px"}},r.createElement(j.Z,{imageStyle:{height:"80px"},description:r.createElement(s.Z.Text,{style:{fontSize:"12px"}},c)})):r.createElement(r.Fragment,null,r.createElement(P.Z,{vertical:!0,flex:1,style:{position:"relative",height:"100%"}},r.createElement("div",{style:G({position:"absolute",top:"-34px",right:"0px",zIndex:99},i)},f&&r.createElement(C.Z,{indeterminate:m,onChange:function(e){var n=e.target.checked?new Set(t.map((function(e){return e.id}))):new Set;y(n)},checked:h},r.createElement(O.ZP,{icon:r.createElement(I.Z,null),size:"small",type:"text",onClick:function(){o(R(d))}})),r.createElement(O.ZP,{icon:f?r.createElement(L.Z,null):r.createElement(_.Z,null),size:"small",type:"text",onClick:function(){p((function(e){return G(G({},e),{},{batch:!e.batch})}))}})),a?r.createElement(Q,{items:t,batch:f,checkedSet:d,onChange:g,onClick:n}):r.createElement("div",{style:Y.list},r.createElement(V,{items:t,batch:f,checkedSet:d,onChange:g,onClick:n}))))},K=n(15001),$=function(e){var t=e.children,n=e.title,i=o.Z.useToken().token;return r.createElement(P.Z,{vertical:!0,style:{height:"100%",overflow:"hidden",borderTop:"1px solid ".concat(i.colorBorder),marginTop:"-2px",marginLeft:"-4px",marginRight:"-8px"}},r.createElement(s.Z.Title,{level:5,style:{margin:"0px",flexBasis:"30px",padding:"12px"}},r.createElement(p.Z,{id:n})),r.createElement("div",{style:{height:"100%",overflow:"hidden",marginBottom:"8px"}},t))};function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function X(){X=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new O(r||[]);return o(a,"_invoke",{value:C(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",f="executing",m="completed",h={};function y(){}function g(){}function v(){}var b={};u(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(I([])));w&&w!==n&&r.call(w,a)&&(b=w);var E=v.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,i,a,c){var l=p(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==J(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,n,r){var o=d;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var l=T(c,r);if(l){if(l===h)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?m:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(J(t)+" is not iterable")}return g.prototype=v,o(E,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:g,configurable:!0}),g.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function ee(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}var te=function(e){var t=(0,a.qp)(),n=t.store,o=t.updateStore,i=n.savedStatements,c=e.deleteStatements,l=i.map((function(e){return e})),u=function(){var e,t=(e=X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t),o((function(e){e.savedStatements=e.savedStatements.filter((function(e){return-1===t.indexOf(e.id)}))}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ee(i,r,o,a,c,"next",e)}function c(e){ee(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return r.createElement($,{title:"Saved"},r.createElement(W,{items:l,onClick:function(e){e.id;var t=e.script;o((function(e){e.globalScript=t,e.autoRun=!0}))},onDelete:u,placeholder:r.createElement(r.Fragment,null,r.createElement(p.Z,{id:"No saved query statements {br} You can click {icon} to save.",values:{icon:r.createElement(K.Z,null),br:r.createElement("br",null)}}))}))};function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ae(r.key),r)}}function oe(e,t,n){return t&&re(e.prototype,t),n&&re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ie(e,t,n){return(t=ae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ne(t)?t:String(t)}var ce=oe((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ie(this,"status",void 0),ie(this,"role",void 0),ie(this,"content",void 0),ie(this,"timestamp",void 0),ie(this,"reserved",void 0),this.status=t.status||"pending",this.role=t.role||"user",this.content=t.content||"",this.timestamp=t.timestamp||Date.now(),this.reserved=t.reserved||!1}));"\n你的角色是一个 Cypher 查询助手，你可以根据 Schema 结构，给用户推荐你任务最重要的5条 Cypher 查询语句\n\n任务1: 根据 Schema 结构，自动推荐出关联性最大，最利于用户分析的 10 条Cypher查询语句\nSchema：\n".concat(JSON.stringify({nodes:[{label:"Paper",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"conference",type:"DT_STRING"},{name:"CCFRank",type:"DT_STRING"},{name:"CCFField",type:"DT_STRING"},{name:"year",type:"DT_SIGNED_INT32"},{name:"paper",type:"DT_STRING"}],primary:"id"},{label:"Challenge",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"challenge",type:"DT_STRING"}],primary:"id"},{label:"Topic",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"category",type:"DT_STRING"}],primary:"id"},{label:"Task",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"task",type:"DT_STRING"}],primary:"id"},{label:"Solution",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"solution",type:"DT_STRING"}],primary:"id"},{label:"CCFField",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"field",type:"DT_STRING"}],primary:"id"}],edges:[{label:"WorkOn",properties:[],primary:"WorkOn",constraints:[["Paper","Task"]]},{label:"Resolve",properties:[],primary:"Resolve",constraints:[["Paper","Challenge"]]},{label:"Target",properties:[{name:"number",type:"DT_SIGNED_INT32"}],primary:"Target",constraints:[["Task","Challenge"]]},{label:"Belong",properties:[],primary:"Belong",constraints:[["Task","Topic"]]},{label:"Use",properties:[],primary:"Use",constraints:[["Paper","Solution"]]},{label:"ApplyOn",properties:[],primary:"ApplyOn",constraints:[["Solution","Challenge"]]},{label:"HasField",properties:[],primary:"HasField",constraints:[["Paper","CCFField"]]},{label:"Citation",properties:[],primary:"Citation",constraints:[["Paper","Paper"]]}]},null,2),"\nAnswers:\n").concat(JSON.stringify([{cypher:"Match (n:Paper) return n limit 30",desc:"查询出 Paper 类型的节点"},{cypher:"MATCH (p:Paper)-[:WorkOn]->(a:Task),(a)-[:Belong]->(t: Topic) RETURN t.category,  COUNT(p)",desc:"找出每个主题下的论文数量"},{cypher:"MATCH (t: Topic)<-[:Belong]-(a:Task),\n      (a)<-[:WorkOn]-(p:Paper)-[:Use]->(s:Solution),\n      (s)-[:ApplyOn]->(ch:Challenge)\n  WHERE t.category = $topic_name\n  RETURN t.category, ch.challenge, COUNT(p)",desc:"检索特定主题下，每个挑战（Challenge）所应用的解决方案（Solution）中与论文（Paper）相关的数量"}],null,2),"\n\n任务2: 根据 Schema 结构和用户的输入，生成 Cypher 查询语句，用于图数据库查询\n").concat("\n注意要以JSON的格式返回结果：\nRight Cases:\nquerys1: 列举出鲁迅的一个别名可以吗？\nanswer1: \"match (:ENTITY{name:'鲁迅'})<--(h)-[:Relationship{name:'别名'}]->(q) return distinct q.name limit 1\"\n\nquerys2: 我们常用的301SH不锈钢带的硬度公差是多少，你知道吗？ \nanswers2: \"match(p:ENTITY{name:'301SH不锈钢带'})-[:Relationship{name:'硬度公差'}]-> (q) return q.name\"\nWrong Cases:\nquerys: 12344加油这首歌真好听，你知道歌曲原唱是谁吗？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '12345加油' RETURN a.name\nquerys: 七宗梦是什么时候上映的？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '七宗梦' RETURN a.name LIMIT 30\n","\n\nInstructions:\nNote: Do not include any explanations or apologies in your responses.\nDo not respond to any questions that might ask anything else than for you to construct a Cypher statement.\nDo not include any text except the generated Cypher statement.\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\n你必须使用Sechema中出现的关键词！！！\n\n当前会话中图的 Schema 结构如下：\n\n{graphSchema}\n\n你需要根据用户的提问，自动切换到上述两个任务中，并且给出正确返回，让我们开始吧！\n\n");function le(e,t){var n=function(e){return JSON.stringify(e,null,2)}(t);return e.replace(/\{graphSchema\}/g,n)}function ue(e,t,n){return[t&&new ce({status:"success",role:"system",content:le(t,n),timestamp:Date.now(),reserved:!0}),e&&new ce({status:"success",role:"assistant",content:e,timestamp:Date.now(),reserved:!0})].filter(Boolean)}var se=n(55216),pe=n(48722),de=n(16889),fe=n(31097),me=n(12423),he=n(25046);function ye(e){return function(e){if(Array.isArray(e))return ve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){if(e){if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(e,t):void 0}}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function be(e){var t,n=[],r=0,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ge(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(ye(e.matchAll(/```cypher\s*([\s\S]*?)\s*```/g)));try{for(o.s();!(t=o.n()).done;){var i=t.value,a=e.substring(r,i.index).trim();a&&n.push({type:"text",content:a});var c=i[1].trim();n.push({type:"cypher",content:c}),r=i.index+i[0].length}}catch(e){o.e(e)}finally{o.f()}var l=e.substring(r).trim();return l&&n.push({type:"text",content:l}),n}var xe=function(e){var t=e.style;return r.createElement("svg",{width:"41px",height:"62px",viewBox:"0 0 41 62",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:t},r.createElement("title",null,"logo image"),r.createElement("g",{id:"页面-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"Medium",transform:"translate(-332, -376)",fillRule:"nonzero"},r.createElement("g",{id:"编组",transform:"translate(332, 376)"},r.createElement("path",{d:"M20.9765256,25 L20.9743827,19.8935471 L22.5478011,18.78271 L26,16.3451158 L25.9983928,13 L18.4270199,18.1683792 C16.9071738,19.2057816 15.8019773,20.29689 15,21.3704617 L15,21.4778737 L20.9765256,25 Z",id:"路径",fill:"#2281F2"}),r.createElement("path",{d:"M6.93795336,20.7840634 C8.51291573,17.334308 13.2733365,13.6674352 13.2733365,13.6674352 L29,3.26992071 L22.9018725,0 L10.9685669,7.75591857 C10.9685669,7.75591857 -0.854857679,14.9756228 0.049338003,26.8260698 C0.761651772,36.1593797 12.3046335,39 12.3046335,39 C5.52316592,36.2295591 4.72994467,25.6215065 6.93795336,20.7840634 Z",id:"路径",fill:"#2281F2"}),r.createElement("path",{d:"M29.2439473,3 L13.4603304,13.6082752 C13.4603304,13.6082752 8.68266998,17.3489173 7.10200396,20.8691596 C4.7340225,26.1425307 5.81651263,38.201864 13.9672848,39.9124792 C13.9672848,39.9124792 17.3656344,40.7454111 23.3969644,37.2721576 C26.5517126,35.4552583 30.7231127,39.070597 30.7231127,39.070597 C35.4705973,35.3685528 31.9076521,31.827613 28.0846459,30.5007395 C24.3395483,29.2007168 21.5847673,31.781743 17.5346192,32.8378717 C13.4844711,33.8940003 12.4480677,29.1934447 12.4480677,29.1934447 C12.4480677,29.1934447 10.5497323,23.0871416 17.786999,18.1633893 L25.5410959,12.8877806 L25.5427418,16.3022982 L20.3958387,19.9243496 L20.3980333,25.1367472 L29.4222592,19.0125436 L29.2439473,3 Z",id:"路径",fill:"#1FB2FD"}),r.createElement("path",{d:"M36.7904047,27.0251597 C32.1878283,23.2677091 25.8158521,23.5156909 20.7707852,25.0562844 C18.0303799,25.8934309 12.0176813,28.5163788 12.0176813,28.5163788 C12.0176813,28.5163788 12.0918982,28.8392544 12.2746294,29.2936102 C12.3094889,29.3801542 12.3471596,29.4705815 12.3904528,29.565447 C12.4309348,29.6547648 12.476477,29.747966 12.5248305,29.8422768 C12.5928627,29.9759761 12.6687665,30.1130041 12.7536662,30.2516963 C12.8082044,30.3415689 12.8649916,30.4314415 12.9268391,30.5207593 C13.016799,30.6516848 13.1146305,30.7815007 13.2208957,30.9079881 C13.3007352,31.0034083 13.3873216,31.0960548 13.4767193,31.1864821 C13.8635471,31.5770395 14.3408972,31.9132295 14.9284481,32.1068439 C15.0189704,32.1368014 15.1117416,32.1628756 15.2078863,32.1856211 C15.7825055,32.3220943 16.4521449,32.3265324 17.2302986,32.1301442 C17.2404191,32.1279251 17.2494151,32.1245965 17.2595356,32.1218227 C19.9341576,31.4411211 21.9492606,30.1523927 23.9930384,29.7130156 C25.2822771,29.3890305 26.5895077,29.3241225 28.042361,29.8123192 C31.9601172,31.1282314 35.611367,34.640474 30.74622,38.3113806 L30.74622,38.3113806 L30.74622,38.3113806 L17.8768858,46.5019905 L17.877448,46.5014357 L14.3510177,44.4709811 L22.2523132,39.6783315 L17.0768044,37.0060091 L4,44.7372702 L4.00056225,44.737825 L13.0353533,49.5842871 L13.0342288,49.5848419 L19.4039561,53 L37.3717709,41.2716281 C37.3706464,41.2732924 45.9106577,34.4712695 36.7904047,27.0251597 Z",id:"路径",fill:"#37EDD7"}),r.createElement("path",{d:"M40.9961107,35 C40.9955641,35 40.994471,35.0005545 40.9939244,35.0011089 C40.9928312,35.0238418 40.9884586,35.0454657 40.9873655,35.0676442 C40.8900752,39.0492238 37.4668795,41.8592287 37.4668795,41.8592287 L20,53.5810744 L20.0032794,62 L38.0440621,49.2618285 C41.053501,47.4803475 41,43.5348078 41,43.5348078 L40.9961107,35 Z",id:"路径",fill:"#1FB2FD"}),r.createElement("polygon",{id:"路径",fill:"#2281F2",points:"22.9982925 41 22.9982925 41 22.9982925 41 15 45.9410083 18.498008 47.9919928 18.6237906 48 23 45.1631669"}),r.createElement("polygon",{id:"路径",fill:"#2281F2",points:"18.9961684 53.4177665 4 45 4.00328419 53.0147944 19 62"})))))},we=o.Z.useToken,Ee=function(e){var t=e.content,n=e.onQuery;return r.createElement("div",{style:{position:"relative"}},r.createElement("pre",{style:{border:"1px solid #ddd",padding:"6px",borderRadius:"4px"}},r.createElement("code",{style:{whiteSpace:"pre-wrap"}},t)),r.createElement(T.Z,{title:"开始查询"},r.createElement(O.ZP,{style:{position:"absolute",bottom:"2px",right:"2px"},onClick:function(){n&&n(t)},size:"small",icon:r.createElement(d.Z,{style:{color:"#52c41a"}}),type:"text"})))},Se=function(e){var t=e.content,n=e.role,o=we().token,i="user"===n?"rgba(221,221,221,0.3)":o.colorPrimaryBg;return r.createElement("div",{style:{background:i,borderRadius:"6px",padding:"6px"}},r.createElement(s.Z.Text,{style:{fontSize:"12px"}}," ",t))},ke=function(e){var t=e.role,n=e.content,o=(e.timestamp,e.onQuery),i="user"===t&&!n.includes("`"),a=be(n);return i?r.createElement(P.Z,{align:"start",justify:"flex-end",gap:4,style:{margin:"6px 0px"}},r.createElement(Se,{content:n,role:t})):r.createElement("div",null,r.createElement(pe.Z,{align:"start",size:2},r.createElement(xe,{style:{fontSize:"12px",height:"14px",width:"14px",border:"1px solid #ddd",borderRadius:"50%",padding:"4px"}}),r.createElement("div",null,a.map((function(e,n){return"cypher"===e.type?r.createElement(Ee,{key:n,content:e.content,onQuery:o}):r.createElement(Se,{key:n,content:e.content,role:t})})))))},Ce=n(52018),Te=n(63432),je=n(37528);function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ie=function(e){var t=e.onChange,n=e.style,o=Pe((0,r.useState)((function(){var e="copilot"===m.Utils.getSearchParams("tab");return!localStorage.getItem("OPENAI_KEY_FOR_GS")&&e})),2),i=o[0],a=o[1],c=(0,r.useRef)(null),l=(0,je.Z)(),u=localStorage.getItem("OPENAI_KEY_FOR_GS")||"";return r.createElement(r.Fragment,null,r.createElement(O.ZP,{icon:r.createElement(Te.Z,null),type:"text",onClick:function(){a(!0)},style:n}),r.createElement(Ce.Z,{title:r.createElement(p.Z,{id:"Setting"}),open:i,onOk:function(){if(c.current){var e=c.current.input.value,n=String(e).trim();localStorage.setItem("OPENAI_KEY_FOR_GS",n),t&&t(n)}a(!1)},onCancel:function(){a(!1)}},r.createElement(P.Z,{vertical:!0,gap:12},r.createElement(s.Z.Text,{strong:!0},r.createElement(p.Z,{id:"Privacy Security Notice"})),r.createElement(s.Z.Text,null,r.createElement(p.Z,{id:"query.app.sidebar.gpt.setting.security"})),r.createElement(s.Z.Text,{strong:!0},"OpenAI API key"),r.createElement(de.Z,{ref:c,placeholder:l.formatMessage({id:"OpenAI API key is only stored locally in your browser"}),defaultValue:u}))))};function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}function Ne(){Ne=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new O(r||[]);return o(a,"_invoke",{value:C(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",f="executing",m="completed",h={};function y(){}function g(){}function v(){}var b={};u(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(I([])));w&&w!==n&&r.call(w,a)&&(b=w);var E=v.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,i,a,c){var l=p(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Le(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,n,r){var o=d;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var l=T(c,r);if(l){if(l===h)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?m:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Le(t)+" is not iterable")}return g.prototype=v,o(E,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:g,configurable:!0}),g.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function Ae(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function Ze(e){return function(e){if(Array.isArray(e))return Ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){Fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e,t,n){var r;return r=function(e,t){if("object"!=Le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Le(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||qe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){if(e){if("string"==typeof e)return Ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ge(e,t):void 0}}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ze=o.Z.useToken,Be=function(e){var t=e.schemaData,n=e.prompt,o=void 0===n?'\n你的角色是一个 Cypher 查询助手，你可以根据用户的自然语言提问，再结合图数据库的 Schema 结构，给生成标准的 Cypher 查询语句。\n为了查询的准确性，请务必充分理解 Schema，并使用 Schema 中明确的字段，不要自己随意生成字段！\n为了查询的准确性，请务必充分理解 Schema，并使用 Schema 中明确的字段，不要自己随意生成字段！\n为了查询的准确性，请务必充分理解 Schema，并使用 Schema 中明确的字段，不要自己随意生成字段！\n\n你不要着急马上给出答案，你可以多生成几个语句，然后找出一个你觉得最准确的语句告诉我，推理的过程可以不用告诉我，我只需要最准确的那一个。\n你不要着急马上给出答案，你可以多生成几个语句，然后找出一个你觉得最准确的语句告诉我，推理的过程可以不用告诉我，我只需要最准确的那一个。\n你不要着急马上给出答案，你可以多生成几个语句，然后找出一个你觉得最准确的语句告诉我，推理的过程可以不用告诉我，我只需要最准确的那一个。\n\n其他注意事项:\n不支持 "MATCH p=()-[]-() RETURN p" 的写法，请都替换成 "MATCH (a)-[b]-(c) RETURN a,b,c"\n注意返回格式需要 markdown cypher 格式\n\n下面是数据库中的 Schema：\n{graphSchema}\n让我们开始吧～\n':n,i=Me((0,r.useState)({messages:[],isLoading:!1,OPENAI_KEY_FOR_GS:localStorage.getItem("OPENAI_KEY_FOR_GS")}),2),c=i[0],l=i[1],u=c.messages,p=c.isLoading,d=c.OPENAI_KEY_FOR_GS,f=(0,r.useRef)(null),h=ze().token,y=function(){var e=(0,r.useRef)(new AbortController);return e.current.signal.aborted&&(e.current=new AbortController),e.current}(),g=(0,a.qp)().updateStore,v=(0,je.Z)(),b=[v.formatMessage({id:"recommend 5 interesting query statements"}),v.formatMessage({id:"query any subgraph"}),v.formatMessage({id:"insight the statistical distribution of vertex labels in the graph"})],x=v.formatMessage({id:"query.copilot.welcome"});(0,r.useEffect)((function(){t&&l((function(e){return De(De({},e),{},{messages:Ze(ue(x,o,t))})}))}),[]);var w=function(){var e,t=(e=Ne().mark((function e(t){var n,r,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.current){e.next=12;break}return n=f.current.input.value,r=new ce({role:"user",content:t||n}),l((function(e){return De(De({},e),{},{messages:[].concat(Ze(e.messages),[r]),isLoading:!0})})),console.log("OPENAI_KEY_FOR_GS",d),e.next=7,Ue([].concat(Ze(u),[r]),d,y.signal);case 7:if(o=e.sent){e.next=11;break}return l((function(e){return De(De({},e),{},{isLoading:!1})})),e.abrupt("return",!1);case 11:l((function(e){return De(De({},e),{},{messages:[].concat(Ze(e.messages),[new ce({role:o.message.role,content:o.message.content,status:"success"})]),isLoading:!1})}));case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ae(i,r,o,a,c,"next",e)}function c(e){Ae(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),E=function(e){g((function(t){t.autoRun=!0,t.globalScript=e}))};m.Utils.getSearchParams("tab");return r.createElement(P.Z,{vertical:!0,style:{height:"100%",overflow:"hidden",padding:"0px 12px"},justify:"space-between"},r.createElement("div",{style:{overflowY:"scroll",position:"relative"}},r.createElement(s.Z.Title,{level:5,style:{margin:"0px",flexBasis:"30px",padding:"12px 0px"}},"Copilot"),r.createElement(Ie,{onChange:function(e){l((function(t){return De(De({},t),{},{OPENAI_KEY_FOR_GS:e})}))},style:{position:"absolute",right:"0px",top:"8px"}}),r.createElement("div",null,u.filter((function(e){return"system"!==e.role})).map((function(e){return r.createElement(ke,_e({key:e.timestamp},e,{onQuery:E}))})),p&&r.createElement(se.Z,{style:{padding:"0px 6px"}}))),r.createElement("div",null,b.map((function(e,t){return r.createElement("div",{key:t,style:{cursor:"pointer",background:h.colorBgLayout,padding:"4px",borderRadius:"6px",margin:"6px 0px"}},r.createElement(fe.Z,{style:{fontSize:"12px",marginRight:"4px"}}),r.createElement(s.Z.Text,{key:t,onClick:function(){w(e)},style:{fontSize:"12px"}},e))})),r.createElement(pe.Z,null,r.createElement(de.Z,{ref:f}),r.createElement(O.ZP,{onClick:function(){return w()},icon:r.createElement(me.Z,null)}),r.createElement(O.ZP,{onClick:function(){l((function(e){return De(De({},e),{},{messages:Ze(ue(x,o,t))})}))},icon:r.createElement(he.Z,null)}))))};function Ue(e,t,n){return fetch("https://api.openai.com/v1/chat/completions",{signal:n,method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"gpt-3.5-turbo",messages:e.map((function(e){return{role:e.role,content:e.content}}))})}).then((function(e){return e.json()})).then((function(e){return{status:"success",message:e.choices[0].message}})).catch((function(e){return"AbortError"===e.name?{status:"cancel",message:null}:{status:"failed",message:e.message}}))}var Ye=n(97585),He=n(30548),Ve=n(50318);function Qe(e){return function(e){if(Array.isArray(e))return We(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ke=s.Z.Title,$e={title:{marginTop:"12px",fontSize:"14px",fontWeight:400}},Je=function(e){var t=e.schemaData,n=e.schemaId,o=(0,a.qp)(),i=o.updateStore,c=o.store.language,l=(0,He.h)(t),u=(0,Ve.getStyleConfig)(t,n),s=t.nodes,d=t.edges,f=function(e){var t=new Set;return e.nodes.forEach((function(e){Object.keys(e.properties||{}).forEach((function(e){t.add(e)}))})),e.edges.forEach((function(e){Object.keys(e.properties||{}).forEach((function(e){t.add(e)}))})),Qe(t.values())}(l),h=(0,m.useStudioProvier)().isLight,y=function(e,t){var n="";"cypher"===c&&("nodes"===t&&(n="MATCH (n:".concat(e,") RETURN n LIMIT 25")),"edges"===t&&(n="MATCH (a)-[b:".concat(e,"]->(c) RETURN a,b,c LIMIT 25;")),"property"===t&&(n="MATCH(a) where a.".concat(e," IS NOT NULL AND a.").concat(e,' <> ""\n      WITH a.').concat(e," as ").concat(e,"\n      RETURN ").concat(e," , COUNT(").concat(e,") as ").concat(e,"_COUNT\n      ORDER BY ").concat(e,"_COUNT DESC\n      "))),"gremlin"===c&&("nodes"===t&&(n="g.V().hasLabel('".concat(e,"').limit(25)")),"edges"===t&&(n="g.V().outE('".concat(e,"').limit(25)")),"property"===t&&(n="g.V().has('".concat(e,"').groupCount().by('").concat(e,"').order().by(select(values), desc)"))),i((function(e){e.globalScript=n,e.autoRun=!0}))};return r.createElement($,{title:"Recommended"},r.createElement("div",{style:{padding:"0px 12px"}},r.createElement(Ke,{level:5,style:$e.title},r.createElement(p.Z,{id:"Vertex Labels"})),s.map((function(e){var t,n=e.label,o=(null!==(t=u.nodeStyle[n])&&void 0!==t?t:{color:"#000"}).color;return r.createElement(Ye.Z,{key:n,style:{borderRadius:"8px",backgroundColor:o,cursor:"pointer",margin:"4px"},bordered:!1,onClick:function(){y(n,"nodes")}},n)})),r.createElement(Ke,{level:5,style:$e.title},r.createElement(p.Z,{id:"Edge Labels"})),d.map((function(e){var t,n=e.label,o=(null!==(t=u.edgeStyle[n])&&void 0!==t?t:{color:"#000"}).color;return r.createElement(Ye.Z,{key:n,style:{borderRadius:"8px",backgroundColor:o,cursor:"pointer",margin:"4px",color:"#000"},bordered:!1,onClick:function(){y(n,"edges")}},n)})),r.createElement(Ke,{style:$e.title},r.createElement(p.Z,{id:"Property Keys"})),f.map((function(e){return r.createElement(Ye.Z,{key:e,style:{borderRadius:"8px",backgroundColor:h?"#000":"#fff",cursor:"pointer",margin:"4px",color:h?"#fff":"#000"},bordered:!1,onClick:function(){y(e,"property")}},e)}))))};function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function et(){et=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new O(r||[]);return o(a,"_invoke",{value:C(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",f="executing",m="completed",h={};function y(){}function g(){}function v(){}var b={};u(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(I([])));w&&w!==n&&r.call(w,a)&&(b=w);var E=v.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,i,a,c){var l=p(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Xe(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,n,r){var o=d;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var l=T(c,r);if(l){if(l===h)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?m:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Xe(t)+" is not iterable")}return g.prototype=v,o(E,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:g,configurable:!0}),g.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function tt(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}var nt=function(e){var t=e.deleteStatements,n=(0,a.qp)(),o=n.store,i=n.updateStore,c=o.storeProcedures.map((function(e){return e})),l=function(){var e,n=(e=et().mark((function e(n){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n),i((function(e){e.storeProcedures=e.savedStatements.filter((function(e){return-1===n.indexOf(e.id)}))}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){tt(i,r,o,a,c,"next",e)}function c(e){tt(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}();return r.createElement($,{title:"Stored Procedures"},r.createElement(W,{items:c,onClick:function(e){e.id;var t=e.script;e.name;i((function(e){e.globalScript=t,e.autoRun=!0}))},onDelete:l,placeholder:r.createElement(r.Fragment,null,r.createElement(p.Z,{id:"No stored procedures available. {br} Go to the <a>Extension</a> and create one now!",values:{a:function(e){return r.createElement(s.Z.Link,{style:{fontSize:"12px"},href:"/extension/create",target:"_blank"},e)},br:r.createElement("br",null)}}))}))};function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function ot(){ot=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new O(r||[]);return o(a,"_invoke",{value:C(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",f="executing",m="completed",h={};function y(){}function g(){}function v(){}var b={};u(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(I([])));w&&w!==n&&r.call(w,a)&&(b=w);var E=v.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,i,a,c){var l=p(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==rt(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,n,r){var o=d;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var l=T(c,r);if(l){if(l===h)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?m:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(rt(t)+" is not iterable")}return g.prototype=v,o(E,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:g,configurable:!0}),g.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function it(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}var at=function(e){var t=e.deleteHistoryStatements,n=(0,a.qp)(),o=n.store,i=n.updateStore,c=o.historyStatements,l=function(){var e,n=(e=ot().mark((function e(n){return ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n),i((function(e){e.historyStatements=e.historyStatements.filter((function(e){return-1===n.indexOf(e.id)}))}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){it(i,r,o,a,c,"next",e)}function c(e){it(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}(),u=c.map((function(e){return e}));return r.createElement($,{title:"History"},r.createElement(W,{items:u,onClick:function(e){e.id;var t=e.script;i((function(e){e.globalScript=t,e.autoRun=!1}))},onDelete:l,placeholder:r.createElement(p.Z,{id:"No query history available"})}))},ct=function(e){var t=e.items;return"Segmented"===e.type?r.createElement(m.SegmentedTabs,{items:t,block:!0,rootStyle:{padding:"8px 8px 8px 4px"}}):r.createElement(m.SideTabs,{items:t,width:320})},lt=(0,r.memo)(ct),ut=n(62950),st=n(84158),pt=n(37339),dt=n(91104),ft=n(33741),mt={"en-US":{Recommended:"Recommended",History:"History",Copilot:"Copilot",Saved:"Saved","Stored Procedures":"Stored Procedures","You can write cypher or gremlin queries, and then click the {icon} button to query data":"You can write cypher or gremlin queries, and then click the {icon} button to query data","Vertex Labels":"Vertex Labels","Edge Labels":"Edge Labels","Property Keys":"Property Keys","No saved query statements {br} You can click {icon} to save.":"No saved query statements {br} You can click {icon} to save.","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"No stored procedures available. {br} Go to the <a>Extension</a> and create one now!","Privacy Security Notice":"Privacy Security Notice",Setting:"Setting","query.app.sidebar.gpt.setting.security":"To improve the quality of generated Cypher query statements, we'll utilize your graph data schema as the prompt for ChatGPT. Your data will be kept strictly confidential and solely used for this purpose.Furthermore, please note that your OpenAI API key is only stored locally in your browser for added security","OpenAI API key is only stored locally in your browser":"OpenAI API key is only stored locally in your browser","query.copilot.welcome":"Hello! I'm the GraphScope Query Assistant. Feel free to ask me any questions about Cypher or Gremlin queries.","recommend 5 interesting query statements":"recommend 5 interesting query statements","query any subgraph":"query any subgraph","insight the statistical distribution of vertex labels in the graph":"insight the statistical distribution of vertex labels in the graph",Save:"Save",Delete:"Delete",Query:"Query",Share:"Share","query submmited on {submitTime}. It's running ... ":"query submmited on {submitTime}. It's running ... ","query submmited on {submitTime}. Running {runningTime} ms":"query submmited on {submitTime}. Running {runningTime} ms","A total of {totalCount} records were retrieved":"A total of {totalCount} records were retrieved","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.",Color:"Color",Size:"Size",Caption:"Caption",LineWidth:"LineWidth","Node properties":"Node properties",Graph:"Graph",Table:"Table",Raw:"Raw","Style Setting":"Style Setting","You can click on each label to set the color, size, and display text for vertices and edges.":"You can click on each label to set the color, size, and display text for vertices and edges.","Export graph json":"Export graph json","Clustering layout":"Clustering layout","Vertex Properties":"Vertex Properties","Connect Endpoint":"Connect Endpoint","Connection URL":"Connection URL","Query language":"Query language","Query initiation method":"Query initiation method",Username:"Username",Password:"Password",Connect:"Connect",Close:"Close","Select nodes by box selection":"Select nodes by box selection","Switch graph view dimensions":"Switch graph view dimensions","Zoom to fitview":"Zoom to fitview",Fullscreen:"Fullscreen","Toggle Right Side":"Toggle Right Side","Caption Status":"Caption Status"},"zh-CN":{Recommended:"推荐查询",History:"历史查询",Copilot:"智能查询",Saved:"保存查询","Stored Procedures":"存储过程","You can write cypher or gremlin queries, and then click the {icon} button to query data":"您可以在这里编写 cypher 或 gremlin 语句，点击 {icon} 按钮查询数据","Vertex Labels":"节点类型","Edge Labels":"边类型","Property Keys":"属性字段","No saved query statements {br} You can click {icon} to save.":"暂无保存的查询语句 {br} 您可以点击 {icon} 保存","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"暂无存储过程 {br} 快去 <a>插件市场</a> 创建一个吧","Privacy Security Notice":"隐私安全说明",Setting:"设置","query.app.sidebar.gpt.setting.security":"为了提高生成Cypher查询语句的质量，我们将使用您的图数据模式作为ChatGPT的提示。您的数据将被严格保密，仅用于此目的。此外，请注意我们的OpenAI API密钥仅存在于您的浏览器本地，以增加安全性。","OpenAI API key is only stored locally in your browser":"OpenAI API key 仅保存在您浏览器本地","query.copilot.welcome":"您好！我是 GraphScope 查询助理，您有任何关于 Cypher 或者 Gremlin 查询的问题都可以随时问我","recommend 5 interesting query statements":"帮我推荐5个有意思的查询","query any subgraph":"查询任意一个子图","insight the statistical distribution of vertex labels in the graph":"帮我分析图中节点类型的分布情况",Save:"保存",Delete:"删除",Query:"查询",Share:"分享","query submmited on {submitTime}. It's running ... ":"查询提交于 {submitTime}. 正在运行中...","query submmited on {submitTime}. Running {runningTime} ms":"查询提交于 {submitTime}. 查询时长 {runningTime} ms","A total of {totalCount} records were retrieved":"一共检索到 {totalCount} 条记录","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"一共检索到 {totalCount} 条记录, 其中包含 {nodeCount} 个节点，{edgeCount} 条边",Color:"颜色",Size:"大小",Caption:"文本",LineWidth:"边宽","Node properties":"属性详情",Graph:"图展示",Table:"表格展示",Raw:"原始数据","Style Setting":"样式设置","You can click on each label to set the color, size, and display text for vertices and edges.":"您可以单击每个标签来设置顶点和边缘的颜色、大小和显示文本。","Export graph json":"导出 json","Clustering layout":"集群布局","Vertex Properties":"节点属性","Connect Endpoint":"连接查询服务","Connection URL":"连接 URL","Query language":"查询语言","Query initiation method":"查询发起方式",Username:"用户名",Password:"密码",Connect:"连接",Close:"关闭","Select nodes by box selection":"通过框选选择节点","Switch graph view dimensions":"切换图表视图维度","Zoom to fitview":"缩放适当视图",Fullscreen:"全屏","Toggle Right Side":"切换右侧","Caption Status":"是否展示标签"}};function ht(e){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(e)}function yt(){return yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yt.apply(this,arguments)}function gt(){gt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new O(r||[]);return o(a,"_invoke",{value:C(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",f="executing",m="completed",h={};function y(){}function g(){}function v(){}var b={};u(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(I([])));w&&w!==n&&r.call(w,a)&&(b=w);var E=v.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,i,a,c){var l=p(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==ht(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,n,r){var o=d;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var l=T(c,r);if(l){if(l===h)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?m:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ht(t)+" is not iterable")}return g.prototype=v,o(E,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:g,configurable:!0}),g.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function vt(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}var bt=m.Utils.getSearchParams,xt=function(e){var t=e.queryGraphData,n=e.handleCancelQuery,o=e.queryGraphSchema,i=e.displaySidebarPosition,c=void 0===i?"left":i,l=e.displaySidebarType,u=void 0===l?"Sidebar":l,s=(e.enableAbsolutePosition,e.queryStatements),d=e.deleteStatements,f=e.createStatements,h=e.enableImmediateQuery,y=e.connectComponent,g=e.sidebarCollapsed,v=e.sidebarStyle,b=e.welcome,x=(0,a.qp)(),w=x.store,E=x.updateStore,S=w.graphId,C=w.isReady,T=w.schemaData,j=[{key:"recommended",title:r.createElement(p.Z,{id:"Recommended"}),icon:r.createElement(pt.G,{icon:dt.X8G}),children:r.createElement(Je,{schemaData:T,schemaId:S})},{key:"saved",title:r.createElement(p.Z,{id:"Saved"}),icon:r.createElement(pt.G,{icon:dt.xVw}),children:r.createElement(te,{deleteStatements:function(e){return d("saved",e)}})},{key:"history",title:r.createElement(p.Z,{id:"History"}),icon:r.createElement(pt.G,{icon:dt.uF7}),children:r.createElement(at,{deleteHistoryStatements:function(e){return d("history",e)}})},{key:"store-procedure",title:r.createElement(p.Z,{id:"Stored Procedures"}),icon:r.createElement(pt.G,{icon:dt.xf3}),children:r.createElement(nt,{deleteStatements:function(e){return d("store-procedure",e)}})},{key:"copilot",title:r.createElement(p.Z,{id:"Copilot"}),icon:r.createElement(pt.G,{icon:dt.VE0}),children:r.createElement(Be,{schemaData:T})}];(0,r.useEffect)((function(){var t;(t=gt().mark((function t(){var n,r,i,c,l,u,p,d,f,m;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=bt("graph_id")||"",r=bt("language")||e.language,i=bt("global_script")||e.globalScript,c=bt("display_mode")||localStorage.getItem(a.rv.mode)||"flow",l=bt("auto_run"),u=l?"true"===l:e.autoRun,p={nodes:[],edges:[]},d=[],f=[],m=[],t.prev=10,t.next=13,o(n);case 13:return p=t.sent,t.next=16,s("history");case 16:return d=t.sent,t.next=19,s("saved");case 19:return f=t.sent,t.next=22,s("store-procedure");case 22:m=t.sent,t.next=27;break;case 25:t.prev=25,t.t0=t.catch(10);case 27:E((function(e){e.isReady=!0,e.graphId=n,e.schemaData=p,e.historyStatements=d,e.savedStatements=f,e.storeProcedures=m,e.autoRun=u,e.globalScript=(0,st.Id)(i),e.mode=c,e.language=r,e.welcome=b}));case 28:case"end":return t.stop()}}),t,null,[[10,25]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){vt(i,r,o,a,c,"next",e)}function c(e){vt(i,r,o,a,c,"throw",e)}a(void 0)}))})()}),[]);if(C){var P="left"===c?{leftSide:r.createElement(lt,{items:j,type:u})}:{rightSide:r.createElement(lt,{items:j,type:u})};return r.createElement(m.StudioProvier,{locales:mt},r.createElement(m.Section,yt({style:{height:"calc(100vh - 50px)"}},P,{defaultCollapsed:{leftSide:g,rightSide:g},leftSideStyle:v,rightSideStyle:v,splitBorder:!0}),r.createElement(k,{displaySidebarPosition:c,connectComponent:y,handleCancelQuery:n,createStatements:f,queryGraphData:function(e){var n=e.script,r=e.language,o={id:(0,ut.Z)(),timestamp:(new Date).getTime(),script:n,language:r};return E((function(e){e.historyStatements.push(o)})),t(o)},enableImmediateQuery:h})))}return null},wt=n(613),Et=n(31477),St=n(40434),kt=n(7234);function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jt=m.Utils.storage,Pt=s.Z.Title,Ot=(s.Z.Text,function(e){var t=Ct(St.Z.useForm(),1)[0],n=e.onConnect,o=e.onClose;r.useEffect((function(){t.setFieldsValue({query_language:e.query_language||jt.get("query_language")||"cypher",query_endpoint:e.query_endpoint||jt.get("query_endpoint")||"neo4j://127.0.0.1:7687",query_initiation:e.query_initiation||jt.get("query_initiation")||"Browser",query_username:e.query_username||jt.get("query_username")||"admin",query_password:e.query_password||jt.get("query_password")||"password"})}),[]);return r.createElement(P.Z,{vertical:!0,style:{padding:"12px 24px"}},r.createElement(Pt,{level:3,style:{marginBottom:"12px"}},r.createElement(p.Z,{id:"Connect Endpoint"})),r.createElement(St.Z,{layout:"vertical",form:t},r.createElement(St.Z.Item,{label:r.createElement(p.Z,{id:"Connection URL"}),name:"query_endpoint"},r.createElement(de.Z,null)),r.createElement(St.Z.Item,{label:r.createElement(p.Z,{id:"Query language"}),name:"query_language"},r.createElement(kt.default,{allowClear:!0,options:[{label:"Cypher",value:"cypher"},{label:"Gremlin",value:"gremlin"}]})),r.createElement(St.Z.Item,{label:r.createElement(p.Z,{id:"Query initiation method"}),name:"query_initiation"},r.createElement(kt.default,{allowClear:!0,options:[{label:"Browser (client-side)",value:"Browser"},{label:'Server (Ensure that your "'.concat(location.origin,'/query" endpoint is available)'),value:"Server"}]})),r.createElement(St.Z.Item,{label:r.createElement(p.Z,{id:"Username"}),name:"query_username"},r.createElement(de.Z,null)),r.createElement(St.Z.Item,{label:r.createElement(p.Z,{id:"Password"}),name:"query_password"},r.createElement(de.Z.Password,null)),r.createElement(St.Z.Item,{style:{marginTop:"48px"}},r.createElement(P.Z,{justify:"start"},r.createElement(O.ZP,{type:"primary",htmlType:"submit",style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:function(){var e=t.getFieldsValue(!0);Object.keys(e).forEach((function(t){jt.set(t,e[t])})),n&&n(t.getFieldsValue(!0))}},r.createElement(p.Z,{id:"Connect"})),o&&r.createElement(O.ZP,{style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:o},r.createElement(p.Z,{id:"Close"}))))))});function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){Nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nt(e,t,n){var r;return r=function(e,t){if("object"!=It(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==It(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rt(){Rt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new O(r||[]);return o(a,"_invoke",{value:C(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",f="executing",m="completed",h={};function y(){}function g(){}function v(){}var b={};u(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(I([])));w&&w!==n&&r.call(w,a)&&(b=w);var E=v.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,i,a,c){var l=p(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==It(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,n,r){var o=d;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var l=T(c,r);if(l){if(l===h)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?m:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(It(t)+" is not iterable")}return g.prototype=v,o(E,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:g,configurable:!0}),g.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function Dt(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function Ft(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Dt(i,r,o,a,c,"next",e)}function c(e){Dt(i,r,o,a,c,"throw",e)}a(void 0)}))}}var Mt={},qt=function(){var e=Ft(Rt().mark((function e(){var t,n,r,o,i=arguments;return Rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:"cypher",n=i.length>1?i[1]:void 0,r=Mt.gremlin_driver,o=Mt.cypher_driver,"cypher"!==t){e.next=6;break}return o||(Mt.cypher_driver=new Et.Or(n)),e.abrupt("return",Mt.cypher_driver);case 6:if("gremlin"!==t){e.next=9;break}return r||(Mt.gremlin_driver=new Et.VP(n)),e.abrupt("return",Mt.gremlin_driver);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Gt=function(e){var t=e||{},n=t.enableImmediateQuery,o=void 0!==n&&n,i=t.mode,a=void 0===i?"flow":i,c=t.id,l=void 0===c?"":c,u=t.timestamp,s=void 0===u?Date.now():u,p=t.graphId,d=void 0===p?"":p,f=t.schemaData,h=void 0===f?{nodes:[],edges:[]}:f,y=t.script,g=void 0===y?"Match (n) return n limit 10":y,v=t.onQuery,b=At((0,r.useState)({language:e.language||"cypher",endpoint:e.endpoint||"127.0.0.1:7687"}),2),x=b[0],w=b[1],E=x.language,S=x.endpoint,k=function(){var e=Ft(Rt().mark((function e(t){var n,r;return Rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.language,e.next=3,qt(n,S);case 3:return r=e.sent,e.abrupt("return",r.query(t.script));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Ft(Rt().mark((function e(t){var n;return Rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.language,e.next=3,qt(n,S);case 3:e.sent.close();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return v||S&&E?r.createElement(m.StudioProvier,{locales:mt},r.createElement(wt.default,{language:E,enableImmediateQuery:o,mode:a,active:!0,id:l,timestamp:s,graphId:d,schemaData:h,script:g,onQuery:v||k,onCancel:C})):r.createElement(m.StudioProvier,{locales:mt},r.createElement(Ot,{onConnect:function(e){w((function(t){return _t(_t({},t),{},{endpoint:e.query_endpoint||"",language:e.query_language})}))}}))},zt=n(10422),Bt={render_query_statement:function(e){var t=(e||{}).id,n=void 0===t?"root":t;zt.render(r.createElement(Gt,e),document.getElementById(n))}},Ut=function(e){return r.createElement(ft.ZP,{store:a.C1},r.createElement(xt,e))}},613:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ie}});var r=n(50959),o=n(53531),i=n(16483),a=n.n(i),c=n(63904),l=n(57526),u=n(48722),s=n(54016),p=n(17905),d=n(38943),f=n(28541),m=n(42176),h=n(51558),y=n(45334),g=n(16889),v=n(15001),b=n(37528),x=function(e){var t=e.onSave,n=(0,r.useRef)(null),o=(0,b.Z)();return r.createElement(p.Z,{title:o.formatMessage({id:"Save"})},r.createElement(y.Z,{title:"name your statement",description:r.createElement(g.Z,{width:"200px",ref:n}),onConfirm:function(){if(n.current){var e=n.current.input.value;console.log("InputRef.current",e),t&&t(e)}},onCancel:function(){},okText:"Save",cancelText:"Cancel",placement:"bottomRight"},r.createElement(d.ZP,{type:"text",icon:r.createElement(v.Z,null)})))},w=n(62950);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function S(){S=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new L(r||[]);return o(a,"_invoke",{value:j(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",f="executing",m="completed",h={};function y(){}function g(){}function v(){}var b={};u(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(_([])));w&&w!==n&&r.call(w,a)&&(b=w);var k=v.prototype=y.prototype=Object.create(b);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(o,i,a,c){var l=p(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==E(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=d;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var l=P(c,r);if(l){if(l===h)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?m:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(E(t)+" is not iterable")}return g.prototype=v,o(k,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:g,configurable:!0}),g.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},C(T.prototype),u(T.prototype,c,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new T(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(k),u(k,l,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function k(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}var C=function(e){var t,n=e.onClose,o=e.onQuery,i=e.script,a=void 0===i?"Match (n) return n limit 10":i,y=e.onSave,g=e.id,v=e.isFetching,E=e.antdToken,C=(e.schemaData,e.timestamp,e.language),T=e.message,j=(0,r.useRef)(null),P=(0,b.Z)(),O=function(){var e,t=(e=S().mark((function e(){var t,n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null==j||null===(t=j.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),o({id:g,script:n,language:C});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){k(i,r,o,a,c,"next",e)}function c(e){k(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return r.createElement("div",{style:{}},r.createElement(l.Z,{justify:"space-between",style:{paddingBottom:"8px"}},r.createElement(u.Z,null,r.createElement(s.Z.Text,{type:"secondary",style:{fontSize:"12px",textAlign:"center"}},(t=C).charAt(0).toUpperCase()+t.slice(1)," ",T)),r.createElement(u.Z,{size:0},r.createElement(p.Z,{title:P.formatMessage({id:"Query"})},r.createElement(d.ZP,{type:"text",icon:r.createElement(f.Z,{spin:v,style:{color:v?"#52c41a":E.green}}),onClick:O})),y&&r.createElement(x,{onSave:function(e){var t,n=null==j||null===(t=j.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),r=(0,w.Z)();y&&y({id:r,script:n,name:e,language:C})}}),n&&r.createElement(p.Z,{title:P.formatMessage({id:"Share"})},r.createElement(d.ZP,{type:"text",icon:r.createElement(m.Z,{onClick:function(){var e,t=null==j||null===(e=j.current)||void 0===e||null===(e=e.codeEditor)||void 0===e?void 0:e.getValue();window.open("".concat(window.location.origin,"/querying?language=").concat(C,"&auto_run=true&global_script=").concat(encodeURIComponent(t)))}})})),n&&r.createElement(p.Z,{title:P.formatMessage({id:"Delete"})},r.createElement(d.ZP,{type:"text",icon:r.createElement(h.Z,{onClick:function(){n&&n(g)}})})))),r.createElement(c.Z,{language:C,ref:j,value:a}))},T=n(84723),j=n(35215),P=n(31192),O=n(9069),I=n(57591),L=n(88766),_=n(7234),N=n(86976);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){var r;return r=function(e,t){if("object"!=M(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==M(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}var q=function(e){var t=e.table,n=(0,r.useRef)(null),o=r.useState((function(){var e=function(e){var t=e[0],n={},r=[];Object.keys(t).forEach((function(e){var o=M(t[e]);n[e]={key:e,type:o,enums:new Set},"number"===o&&r.push(e)})),e.forEach((function(e){Object.keys(e).forEach((function(t){n[t].enums.add(e[t])}))}));var o=Object.values(n).filter((function(e){return"string"===e.type})).sort((function(e,t){return e.enums.size<t.enums.size})).map((function(e){return e.key})),i=r[0],a=r[1],c=D(o,2),l=c[0],u=c[1];return{type:r.length>1?"point":"interval",x:a||l,y:i,color:u,keys:Object.keys(n)}}(t);return{x:e.x,y:e.y,color:e.color,type:e.type,options:e.keys.map((function(e){return{label:e,value:e}}))}})),i=D(o,2),a=i[0],c=i[1];console.log(a);var l=a.type,s=a.x,p=a.y,d=a.color,f=a.options;(0,r.useEffect)((function(){var e;return n.current&&((e=new N.kL({container:n.current,autoFit:!0})).options({type:l,data:t,encode:{x:s,y:p,color:d},transform:[{type:"dodgeX"}]}),e.render()),function(){n.current&&e.destroy()}}),[l,s,p,t,d,n]);return r.createElement("div",{style:{padding:"16px",overflowX:"hidden"}},r.createElement(u.Z,{style:{paddingBottom:"16px"}},"Type:",r.createElement(_.default,{size:"small",defaultValue:l,style:{width:120},onChange:function(e){c((function(t){return Z(Z({},t),{},{type:e})}))},options:[{label:"interval",value:"interval"},{label:"point",value:"point"}]}),"X:",r.createElement(_.default,{size:"small",defaultValue:s,style:{width:120},onChange:function(e){c((function(t){return Z(Z({},t),{},{x:e})}))},options:f}),"Y:",r.createElement(_.default,{size:"small",defaultValue:p,style:{width:120},onChange:function(e){c((function(t){return Z(Z({},t),{},{y:e})}))},options:f}),"Color:",r.createElement(_.default,{size:"small",defaultValue:d,style:{width:120},onChange:function(e){c((function(t){return Z(Z({},t),{},{color:e})}))},options:f})),r.createElement("div",{ref:n,style:{width:"100%"}}))},G=n(58002),z=n(35731),B=n(36523);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"12px",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-8px";return r.createElement(r.Fragment,null,Object.entries(t).map((function(t){var i=Y(t,2),a=i[0],c=i[1];return r.createElement("div",{style:{paddingLeft:"16px",overflowWrap:"break-word",wordBreak:"break-all",whiteSpace:"pre-wrap"},key:a},r.createElement("span",{style:{color:"#F9822F",paddingLeft:n}},'"',a,'" :'),r.createElement("span",{style:{paddingLeft:"6px",textIndent:o}},"object"===U(c)&&null!==c?r.createElement(r.Fragment,null,"{",e(c,"24px","16px"),"}"):JSON.stringify(c,null,2)))})))},Q=function(e){var t=e.expandData,n=e.width;return r.createElement(l.Z,null,Object.values(t).map((function(e){return e.key&&r.createElement("div",{style:{marginLeft:"12px",width:"".concat(n,"%")},key:e.key},"{",V(e.data),"}")})))};function W(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=e.data,n=t.map((function(e){var t=e.keys,n=e._fields;return t.reduce((function(e,t,r){var o=n[r];return e[t]={key:(0,w.Z)(),elementId:o.elementId,data:o,labels:o.labels?o.labels[0]:void 0,type:o.type,startNodeElementId:o.startNodeElementId,endNodeElementId:o.endNodeElementId},e.key=(0,w.Z)(),e}),{})})),o=t[0].keys,i=100/o.length,a=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,n){return n+1}}].concat(W(o.map((function(e){return{title:e,width:"".concat(i,"%"),key:(0,w.Z)(),render:function(t){return n=t[e],o=n.startNodeElementId,i=n.endNodeElementId,a=n.type,c=n.elementId,l=n.labels,o&&i?r.createElement("span",null,"{",r.createElement(G.Icons.Arrow,{style:{color:"#F97108"}})," : ",a," } ID ",c):r.createElement("span",null,"{",r.createElement(G.Icons.Punctuation,{style:{color:"#B668B0"}})," : ",l," } ID ",c);var n,o,i,a,c,l}}}))),[j.Z.EXPAND_COLUMN]);return r.createElement(j.Z,{size:"small",columns:a,dataSource:n,expandable:{expandedRowRender:function(e){return r.createElement(Q,{expandData:e,width:i})},expandIcon:function(e){var t=e.expanded,n=e.onExpand,o=e.record;return t?r.createElement(z.Z,{style:{color:"#F97108"},onClick:function(e){return n(o,e)}}):r.createElement(B.Z,{onClick:function(e){return n(o,e)}})},expandRowByClick:!0}})};function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t,n){var r;return r=function(e,t){if("object"!=J(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==J(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){if(e){if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=function(e){var t=e.data,n=t[0],o=Object.keys(n),i=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,n){return n+1}}].concat(re(o.map((function(e){return{title:e,dataIndex:e,width:"".concat(100/o.length,"%"),key:e}})))),a=t.map((function(e){return te(te({},e),{},{key:e.id})}));return r.createElement(j.Z,{size:"small",columns:i,dataSource:a})},ce=function(e){var t,n=e.data,o=n.table,i=void 0===o?[]:o,a=n.nodes,c=void 0===a?[]:a,f=n.edges,m=void 0===f?[]:f,h=n.raw,y=c.length,g=m.length,v=i.length,x=(0,b.Z)();t=0===y&&0===g&&0!==v?x.formatMessage({id:"A total of {totalCount} records were retrieved"},{totalCount:v}):x.formatMessage({id:"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges."},{totalCount:y+g,nodeCount:y,edgeCount:g});var w,E=X((0,r.useState)("table"),2),S=E[0],k=E[1];return"table"===S&&0!==i.length&&(w=r.createElement(ae,{data:i})),"table"===S&&0===i.length&&0!==h.records.length&&(w=r.createElement($,{data:h.records})),r.createElement("div",{style:{overflowX:"scroll"}},r.createElement(l.Z,{justify:"space-between",style:{padding:"0px 10px 10px 10px"},align:"center"},r.createElement(s.Z.Text,null,t),r.createElement(u.Z,null,r.createElement(P.Z,{value:S,onChange:function(e){k(e)},options:[{value:"chart",icon:r.createElement(O.Z,null),label:"chart"},{value:"table",icon:r.createElement(I.Z,null)}]}),r.createElement(p.Z,{title:"download"},r.createElement(d.ZP,{icon:r.createElement(L.Z,null),type:"text",onClick:function(){var e=c.map((function(e){var t=e.id,n=e.label,r=e.properties;return te({id:t,label:n},void 0===r?{}:r)})),t=m.map((function(e){var t=e.id,n=e.label,r=e.source,o=e.target,i=e.properties;return te({id:t,label:n,source:r,target:o},void 0===i?{}:i)}));G.Utils.createDownload(JSON.stringify({nodes:e,edges:t},null,2),"result.json")}}," ")))),w,"chart"===S&&0!==i.length&&r.createElement(q,{table:i}))},le=n(55874),ue=n(29643),se=n(24174),pe=n.n(se),de=function(e){var t=e.data;return e.isFetching?r.createElement(le.ZP,{icon:r.createElement(ue.Z,{spin:!0}),status:"error",title:"Running"}):"error"===t.mode?r.createElement(le.ZP,{status:"error",title:t.raw&&t.raw.name,subTitle:t.raw&&t.raw.message}):r.createElement("div",null,r.createElement(pe(),{src:t.raw}))},fe=n(30548),me=n(13049),he=n(31931);function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ve=function(e){var t=e.data,n=e.isFetching,o=e.schemaData,i=e.graphId,a=e.onQuery,c=ye(r.useState(null),2),l=c[0],u=c[1],s=(0,b.Z)(),p=function(e,t,n){var r=e.nodes,o=void 0===r?[]:r,i=e.edges,a=void 0===i?[]:i,c=e.table,l=void 0===c?[]:c,u=(e.raw,o.length>0),s=a.length>0,p=l.length>0,d="raw",f=["raw"];return u&&(d="graph",f=["raw","table","graph"]),!u&&s&&(d="table",f=["raw","table"]),u||s||!p||(d="table",f=["raw","table"]),n&&(d=n),t&&(f=["raw"],d="raw"),{viewMode:d,options:f}}(t,n,l),d=p.viewMode,f=p.options,m=function(e){return-1!==f.indexOf(e)},h=[{label:s.formatMessage({id:"Graph"}),key:"graph",icon:r.createElement(me.Z,null),children:r.createElement(fe.Z,{data:t,schemaData:o,graphId:i,onQuery:a}),disabled:!m("graph")},{label:s.formatMessage({id:"Table"}),key:"table",icon:r.createElement(I.Z,null),children:r.createElement(ce,{data:t}),disabled:!m("table")},{label:s.formatMessage({id:"Raw"}),key:"raw",icon:r.createElement(he.Z,null),children:r.createElement(de,{data:t,isFetching:n}),disabled:!m("raw")}];return r.createElement("div",{style:{padding:"16px 0px"}},r.createElement(T.Z,{items:h,size:"small",type:"card",activeKey:d,onChange:function(e){u(e)}}))},be=(0,r.memo)(ve);function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function we(){we=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new O(r||[]);return o(a,"_invoke",{value:C(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",f="executing",m="completed",h={};function y(){}function g(){}function v(){}var b={};u(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(I([])));w&&w!==n&&r.call(w,a)&&(b=w);var E=v.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,i,a,c){var l=p(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==xe(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,n,r){var o=d;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var l=T(c,r);if(l){if(l===h)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?m:"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(xe(t)+" is not iterable")}return g.prototype=v,o(E,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:g,configurable:!0}),g.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){var r;return r=function(e,t){if("object"!=xe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==xe(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pe=o.Z.useToken,Oe=function(e){var t=e.onQuery,n=e.onClose,o=e.onCancel,i=e.onSave,c=e.script,l=e.id,u=e.active,s=e.mode,p=e.schemaData,d=e.enableImmediateQuery,f=e.graphId,m=e.timestamp,h=e.language,y=Pe().token,g=(0,b.Z)(),v=u&&"flow"===s?{border:"1px solid ".concat(y.colorBorder)}:{border:"1px solid  ".concat(y.colorBorder)},x=(0,r.useRef)(null),w=Te((0,r.useState)({data:{},isFetching:!1,startTime:0,endTime:0,abort:!1}),2),E=w[0],S=w[1],k=E.data,T=E.isFetching,j=E.startTime,P=E.endTime;(0,r.useEffect)((function(){x.current&&u&&"flow"===s&&x.current.scrollIntoView({behavior:"smooth"})}),[u]);var O=function(){var e,n=(e=we().mark((function e(n){var r;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=4;break}return o&&o(n),S((function(e){return Se(Se({},e),{},{isFetching:!1,data:{}})})),e.abrupt("return");case 4:return S((function(e){return Se(Se({},e),{},{isFetching:!0,startTime:(new Date).getTime()})})),e.next=7,t(n);case 7:r=e.sent,S((function(e){return Se(Se({},e),{},{data:r,isFetching:!1,endTime:(new Date).getTime()})}));case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ce(i,r,o,a,c,"next",e)}function c(e){Ce(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}();(0,r.useEffect)((function(){d&&(console.log("enableImmediateQuery script",d,c,h),O({id:l,script:c,language:h}))}),[d]);var I=P-j<0?g.formatMessage({id:"query submmited on {submitTime}. It's running ... "},{submitTime:a()(j).format("HH:mm:ss YYYY-MM-DD")}):g.formatMessage({id:"query submmited on {submitTime}. Running {runningTime} ms"},{submitTime:a()(j).format("HH:mm:ss YYYY-MM-DD"),runningTime:P-j});return r.createElement("div",{ref:x,style:Se(Se({display:"flex",flexDirection:"column",flex:1,margin:"12px",padding:"8px 16px",borderRadius:"8px"},v),{},{background:y.colorBgBase})},r.createElement(C,{message:I,language:h,timestamp:m,schemaData:p,id:l,script:c,onClose:n,onQuery:O,onSave:i,isFetching:T,antdToken:y}),r.createElement(be,{data:k,isFetching:T,schemaData:p,graphId:f,onQuery:t}))},Ie=(0,r.memo)(Oe)},30548:function(e,t,n){n.d(t,{h:function(){return f}});var r=n(50959),o=n(50318);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var a=["properties","constraints"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){var r;return r=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==i(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function f(e){return{nodes:e.nodes,edges:e.edges.map((function(e){var t=e.properties,n=e.constraints,r=d(e,a),o=s(n[0],2),i=o[0],c=o[1];return l(l({},r),{},{source:i,target:c,properties:t})}))}}t.Z=function(e){var t=e.data,n=e.schemaData,i=e.graphId,a=e.onQuery,c=f(n);return r.createElement("div",{style:{width:"100%"}},r.createElement(o.QueryGraph,{data:t,schema:c,graphId:i,onQuery:a}))}},43282:function(e,t,n){n.r(t),n.d(t,{demos:function(){return r}});n(50959),n(85430);var r={}},78624:function(e,t,n){n.r(t),n.d(t,{demos:function(){return l}});var r=n(90228),o=n.n(r),i=n(87999),a=n.n(i),c=n(50959),l=(n(8646),{"packages-studio-components-readme-demo-0":{component:c.memo(c.lazy(a()(o()().mark((function e(){var t,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(2428).then(n.bind(n,22428));case 2:return t=e.sent,r=t.default,e.abrupt("return",{default:function(){return c.createElement(r,null)}});case 5:case"end":return e.stop()}}),e)}))))),asset:null,context:void 0,renderOpts:void 0}})},31482:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return h}});var o,i=n(90228),a=n.n(i),c=n(26068),l=n.n(c),u=n(48305),s=n.n(u),p=n(87999),d=n.n(p),f=n(50959),m=(n(4480),n(58002)),h={"editabletext-demo-0":{component:f.memo(f.lazy(d()(a()().mark((function e(){var t,r,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,o=t.useState,e.next=7,Promise.resolve().then(n.bind(n,58002));case 7:return i=e.sent,c=i.EditableText,e.abrupt("return",{default:function(){var e=o({text:"double click"}),t=s()(e,2),n=t[0],i=t[1],a=n.text;return r.createElement("div",null,r.createElement(c,{text:a,onTextChange:function(e){console.log("value",e),i((function(t){return l()(l()({},t),{},{text:e})}))}}))}});case 10:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"editabletext-demo-0",refAtomIds:["EditableText"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { EditableText } from '@graphscope/studio-components';\nexport default () => {\n  const [state, updateState] = useState({\n    text: 'double click',\n  });\n  const onChange = value => {\n    console.log('value', value);\n    updateState(preState => {\n      return {\n        ...preState,\n        text: value,\n      };\n    });\n  };\n  const { text } = state;\n  return (\n    <div>\n      <EditableText text={text} onTextChange={onChange} />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.8"}},entry:"index.jsx"},context:{react:r||(r=n.t(f,2)),"@graphscope/studio-components":m},renderOpts:{compile:(o=d()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},87231:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return p}});var o,i=n(90228),a=n.n(i),c=n(87999),l=n.n(c),u=n(50959),s=(n(93238),n(58002)),p={"emptycanvas-demo-0":{component:u.memo(u.lazy(l()(a()().mark((function e(){var t,r,o,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,58002));case 7:return o=e.sent,i=o.EmptyCanvas,e.abrupt("return",{default:function(){return r.createElement("div",null,r.createElement(i,null))}});case 10:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"emptycanvas-demo-0",refAtomIds:["EmptyCanvas"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { EmptyCanvas } from '@graphscope/studio-components';\nexport default () => {\n  return (\n    <div>\n      <EmptyCanvas />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.8"}},entry:"index.jsx"},context:{react:r||(r=n.t(u,2)),"@graphscope/studio-components":s},renderOpts:{compile:(o=l()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},70432:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return p}});var o,i=n(90228),a=n.n(i),c=n(87999),l=n.n(c),u=n(50959),s=(n(48741),n(58002)),p={"fullscreen-demo-0":{component:u.memo(u.lazy(l()(a()().mark((function e(){var t,r,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,o=t.useRef,e.next=8,Promise.resolve().then(n.bind(n,58002));case 8:return i=e.sent,c=i.FullScreen,e.abrupt("return",{default:function(){var e=o(null);return r.createElement("div",null,r.createElement(c,{containerRef:e}),r.createElement("div",{ref:e,style:{width:"100%",height:"500px",background:"#ddd",textAlign:"center",lineHeight:"100%"}},"Trigger full screen"))}});case 11:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"fullscreen-demo-0",refAtomIds:["FullScreen"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState, useRef } from 'react';\nimport { FullScreen } from '@graphscope/studio-components';\nexport default () => {\n  const containerRef = useRef(null);\n  return (\n    <div>\n      <FullScreen containerRef={containerRef} />\n      <div\n        ref={containerRef}\n        style={{ width: '100%', height: '500px', background: '#ddd', textAlign: 'center', lineHeight: '100%' }}\n      >\n        Trigger full screen\n      </div>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.8"}},entry:"index.jsx"},context:{react:r||(r=n.t(u,2)),"@graphscope/studio-components":s},renderOpts:{compile:(o=l()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},83039:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return d}});var o,i=n(90228),a=n.n(i),c=n(87999),l=n.n(c),u=n(50959),s=(n(36666),n(2739)),p=n(58002),d={"illustration-demo-0":{component:u.memo(u.lazy(l()(a()().mark((function e(){var t,r,o,i,c,l,u;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,2739));case 7:return o=e.sent,o.Space,i=o.Flex,c=o.Typography,e.next=13,Promise.resolve().then(n.bind(n,58002));case 13:return l=e.sent,u=l.Illustration,e.abrupt("return",{default:function(){return r.createElement(i,{wrap:!0,gap:44},Object.keys(u).map((function(e){var t=u[e];return r.createElement(i,{key:e,gap:8,vertical:!0,align:"center"},r.createElement(t,null),r.createElement(c.Text,null,e))})))}});case 16:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"illustration-demo-0",refAtomIds:["Illustration"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space, Flex, Typography } from 'antd';\nimport { Illustration } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <Flex wrap gap={44}>\n      {Object.keys(Illustration).map(key => {\n        const Item = Illustration[key];\n        return (\n          <Flex key={key} gap={8} vertical align=\"center\">\n            <Item />\n            <Typography.Text>{key}</Typography.Text>\n          </Flex>\n        );\n      })}\n    </Flex>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.8"}},entry:"index.jsx"},context:{react:r||(r=n.t(u,2)),antd:s,"@graphscope/studio-components":p},renderOpts:{compile:(o=l()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},67114:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return p}});var o,i=n(90228),a=n.n(i),c=n(87999),l=n.n(c),u=n(50959),s=(n(19895),n(58002)),p={"importfiles-demo-0":{component:u.memo(u.lazy(l()(a()().mark((function e(){var t,r,o,i,c,l;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,t.useRef,e.next=8,Promise.resolve().then(n.bind(n,58002));case 8:return o=e.sent,i=o.ImportFiles,c=o.Button,l=o.message,e.abrupt("return",{default:function(){return r.createElement("div",{style:{height:"500px"}},r.createElement(i,{upload:{accept:".json,.csv",title:"xxx",description:"xxx"},type:"json"},(function(e){return r.createElement(r.Fragment,null,r.createElement(c,{type:"primary",onClick:function(){return function(e){l(e)}(e)},loading:e.loading},"Visualization"))})))}});case 13:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"importfiles-demo-0",refAtomIds:["ImportFiles"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState, useRef } from 'react';\nimport { ImportFiles, Button, message } from '@graphscope/studio-components';\n\nexport default () => {\n  const onSubmit = params => {\n    message(params);\n  };\n  return (\n    <div style={{ height: '500px' }}>\n      <ImportFiles\n        upload={{\n          accept: '.json,.csv',\n          title: 'xxx',\n          description: 'xxx',\n        }}\n        type=\"json\"\n      >\n        {params => {\n          return (\n            <>\n              <Button type=\"primary\" onClick={() => onSubmit(params)} loading={params.loading}>\n                Visualization\n              </Button>\n            </>\n          );\n        }}\n      </ImportFiles>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.8"}},entry:"index.jsx"},context:{react:r||(r=n.t(u,2)),"@graphscope/studio-components":s},renderOpts:{compile:(o=l()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},98063:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return d}});var o,i=n(90228),a=n.n(i),c=n(87999),l=n.n(c),u=n(50959),s=(n(54581),n(2739)),p=n(58002),d={"logo-demo-0":{component:u.memo(u.lazy(l()(a()().mark((function e(){var t,r,o,i,c,l,u;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,2739));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(n.bind(n,58002));case 11:return i=e.sent,c=i.Logo,l=i.LogoText,u=i.LogoImage,e.abrupt("return",{default:function(){return r.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"40px"}},r.createElement(c,null),r.createElement(l,null),r.createElement(u,null))}});case 16:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"logo-demo-0",refAtomIds:["Logo"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { Logo, LogoText, LogoImage } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', gap: '40px' }}>\n      <Logo />\n      <LogoText />\n      <LogoImage />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.8"}},entry:"index.jsx"},context:{react:r||(r=n.t(u,2)),antd:s,"@graphscope/studio-components":p},renderOpts:{compile:(o=l()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},47785:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return m}});var o,i=n(90228),a=n.n(i),c=n(87999),l=n.n(c),u=n(50959),s=(n(518),n(2739)),p=n(53420),d=n(9102),f=n(5855),m={"provider-demo-0":{component:u.memo(u.lazy(l()(a()().mark((function e(){var t,r,o,i,c,l,u,s,p,d,f,m;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,2739));case 7:return o=e.sent,i=o.Button,o.Space,o.Input,e.next=13,Promise.resolve().then(n.bind(n,9102));case 13:return c=e.sent,l=c.default,e.next=17,Promise.resolve().then(n.bind(n,5855));case 17:return u=e.sent,s=u.useStudioProvier,e.next=21,Promise.resolve().then(n.bind(n,53420));case 21:return p=e.sent,d=p.components,f=p.token,m=function(){var e=s().handleThemeOrLocale;return r.createElement(i,{onClick:function(){e({components:d,token:f})}},"edit")},e.abrupt("return",{default:function(){return r.createElement(l,{mode:"defaultAlgorithm"},r.createElement(m,null),r.createElement(i,null,"colorPrimary"))}});case 26:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"provider-demo-0",refAtomIds:["Provider"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Button, Space, Input } from 'antd';\nimport ThemeProvider from './index.tsx';\nimport { useStudioProvier } from './useThemeConfigProvider.tsx';\nimport { components, token } from './const.ts';\n/** 修改主题色 */\nconst ToogleButton = () => {\n  const { handleThemeOrLocale } = useStudioProvier();\n  return (\n    <Button\n      onClick={() => {\n        handleThemeOrLocale({\n          components,\n          token,\n        });\n      }}\n    >\n      edit\n    </Button>\n  );\n};\n\nexport default () => {\n  return (\n    <ThemeProvider\n      /** 主题模式 */\n      mode=\"defaultAlgorithm\"\n    >\n      <ToogleButton />\n      <Button>colorPrimary</Button>\n    </ThemeProvider>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"./const.ts":{type:"FILE",value:n(22211).Z},"./index.tsx":{type:"FILE",value:n(20880).Z},"./useThemeConfigProvider.tsx":{type:"FILE",value:n(88241).Z}},entry:"index.jsx"},context:{"./const.ts":p,"./index.tsx":d,"./useThemeConfigProvider.tsx":f,react:r||(r=n.t(u,2)),antd:s,"/home/runner/work/portal/portal/packages/studio-components/src/Provider/const.ts":p,"/home/runner/work/portal/portal/packages/studio-components/src/Provider/index.tsx":d,"/home/runner/work/portal/portal/packages/studio-components/src/Provider/useThemeConfigProvider.tsx":f},renderOpts:{compile:(o=l()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},91445:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return p}});var o,i=n(90228),a=n.n(i),c=n(87999),l=n.n(c),u=n(50959),s=(n(3750),n(78781)),p={"resizablepanel-demo-0":{component:u.memo(u.lazy(l()(a()().mark((function e(){var t,r,o,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,e.next=6,Promise.resolve().then(n.bind(n,78781));case 6:return o=e.sent,i=o.default,e.abrupt("return",{default:function(){return r.createElement(i,{leftSide:r.createElement("div",{style:{minWidth:"300px",height:"300px",background:"#F7F7F7",textAlign:"center"}},"leftSide"),middleSide:r.createElement("div",{style:{minWidth:"600px",height:"300px",background:"#FFA444",textAlign:"center"}},"middleSide"),rightSide:r.createElement("div",{style:{minWidth:"300px",height:"300px",background:"#91CAFA",textAlign:"center"}},"rightSide")})}});case 9:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"resizablepanel-demo-0",refAtomIds:["ResizablePanel"],dependencies:{"index.jsx":{type:"FILE",value:"import React from 'react';\nimport ResizablePanel from './index.tsx';\n\nexport default () => {\n  return (\n    <ResizablePanel\n      leftSide={\n        <div style={{ minWidth: '300px', height: '300px', background: '#F7F7F7', textAlign: 'center' }}>leftSide</div>\n      }\n      middleSide={\n        <div style={{ minWidth: '600px', height: '300px', background: '#FFA444', textAlign: 'center' }}>middleSide</div>\n      }\n      rightSide={\n        <div\n          style={{\n            minWidth: '300px',\n            height: '300px',\n            background: '#91CAFA',\n            textAlign: 'center',\n          }}\n        >\n          rightSide\n        </div>\n      }\n    />\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"./index.tsx":{type:"FILE",value:n(17239).Z}},entry:"index.jsx"},context:{"./index.tsx":s,react:r||(r=n.t(u,2)),"/home/runner/work/portal/portal/packages/studio-components/src/ResizablePanel/index.tsx":s},renderOpts:{compile:(o=l()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},3151:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return d}});var o,i=n(90228),a=n.n(i),c=n(87999),l=n.n(c),u=n(50959),s=(n(43716),n(2739)),p=n(58002),d={"segmentedtabs-demo-0":{component:u.memo(u.lazy(l()(a()().mark((function e(){var t,r,o,i,c,l,u,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,2739));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(n.bind(n,58002));case 11:return i=e.sent,c=i.SegmentedTabs,l=function(){return r.createElement("div",null,"Tab-1 components")},u=function(){return r.createElement("div",null,"Tab-2 components")},s=function(){return r.createElement("div",null,"Tab-3 components")},e.abrupt("return",{default:function(){var e=[{key:"Tab-1",children:r.createElement(l,null),label:"Tab-1"},{key:"Tab-2",children:r.createElement(u,null),label:"Tab-2"},{key:"Tab-3",children:r.createElement(s,null),label:"Tab-3"}];return r.createElement("div",null,r.createElement(c,{items:e}))}});case 17:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"segmentedtabs-demo-0",refAtomIds:["SegmentedTabs"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { SegmentedTabs } from '@graphscope/studio-components';\nconst Tab1 = () => {\n  return <div>Tab-1 components</div>;\n};\nconst Tab2 = () => {\n  return <div>Tab-2 components</div>;\n};\nconst Tab3 = () => {\n  return <div>Tab-3 components</div>;\n};\nexport default () => {\n  const items = [\n    {\n      key: 'Tab-1',\n      children: <Tab1 />,\n      label: 'Tab-1',\n    },\n    {\n      key: 'Tab-2',\n      children: <Tab2 />,\n      label: 'Tab-2',\n    },\n    {\n      key: 'Tab-3',\n      children: <Tab3 />,\n      label: 'Tab-3',\n    },\n  ];\n  return (\n    <div>\n      <SegmentedTabs items={items}></SegmentedTabs>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.8"}},entry:"index.jsx"},context:{react:r||(r=n.t(u,2)),antd:s,"@graphscope/studio-components":p},renderOpts:{compile:(o=l()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},62359:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return d}});var o,i=n(90228),a=n.n(i),c=n(87999),l=n.n(c),u=n(50959),s=(n(43765),n(2739)),p=n(58002),d={"sidetabs-demo-0":{component:u.memo(u.lazy(l()(a()().mark((function e(){var t,r,o,i,c,l,u;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,2739));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(n.bind(n,58002));case 11:return i=e.sent,i.SegmentedTabs,c=function(){return r.createElement("div",null,"Tab-1 components")},l=function(){return r.createElement("div",null,"Tab-2 components")},u=function(){return r.createElement("div",null,"Tab-3 components")},e.abrupt("return",{default:function(){var e=[{key:"Tab-1",children:r.createElement(c,null),label:"Tab-1"},{key:"Tab-2",children:r.createElement(l,null),label:"Tab-2"},{key:"Tab-3",children:r.createElement(u,null),label:"Tab-3"}];return r.createElement("div",null,r.createElement(Sidebar,{options:e,value:"Tab-1",collapse:!1}))}});case 17:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"sidetabs-demo-0",refAtomIds:["SideTabs"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { SegmentedTabs } from '@graphscope/studio-components';\nconst Tab1 = () => {\n  return <div>Tab-1 components</div>;\n};\nconst Tab2 = () => {\n  return <div>Tab-2 components</div>;\n};\nconst Tab3 = () => {\n  return <div>Tab-3 components</div>;\n};\nexport default () => {\n  const items = [\n    {\n      key: 'Tab-1',\n      children: <Tab1 />,\n      label: 'Tab-1',\n    },\n    {\n      key: 'Tab-2',\n      children: <Tab2 />,\n      label: 'Tab-2',\n    },\n    {\n      key: 'Tab-3',\n      children: <Tab3 />,\n      label: 'Tab-3',\n    },\n  ];\n  return (\n    <div>\n      <Sidebar options={items} value=\"Tab-1\" collapse={false} />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.8"}},entry:"index.jsx"},context:{react:r||(r=n.t(u,2)),antd:s,"@graphscope/studio-components":p},renderOpts:{compile:(o=l()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},99409:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return d}});var o,i=n(90228),a=n.n(i),c=n(87999),l=n.n(c),u=n(50959),s=(n(44412),n(2739)),p=n(58002),d={"tablecard-demo-0":{component:u.memo(u.lazy(l()(a()().mark((function e(){var t,r,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,2739));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(n.bind(n,58002));case 11:return i=e.sent,c=i.TableCard,e.abrupt("return",{default:function(){return r.createElement("div",null,r.createElement(c,{data:{label:"table-1",properties:[{}]}}))}});case 14:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"tablecard-demo-0",refAtomIds:["TableCard"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { TableCard } from '@graphscope/studio-components';\n\nexport default () => {\n  const data = {\n    label: 'table-1',\n    properties: [{}],\n  };\n  return (\n    <div>\n      <TableCard data={data}></TableCard>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.8"}},entry:"index.jsx"},context:{react:r||(r=n.t(u,2)),antd:s,"@graphscope/studio-components":p},renderOpts:{compile:(o=l()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},98440:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return d}});var o,i=n(90228),a=n.n(i),c=n(87999),l=n.n(c),u=n(50959),s=(n(85792),n(2739)),p=n(58002),d={"toolbar-demo-0":{component:u.memo(u.lazy(l()(a()().mark((function e(){var t,r,o,i,c,l,u;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,2739));case 7:return o=e.sent,o.Space,i=o.Button,e.next=12,Promise.resolve().then(n.bind(n,58002));case 12:return c=e.sent,l=c.Toolbar,u=c.Icons,e.abrupt("return",{default:function(){return r.createElement("div",{style:{position:"relative",height:"400px"}},r.createElement(l,null,r.createElement(i,{type:"text",icon:r.createElement(u.Sidebar,null)}),r.createElement(i,{type:"text",icon:r.createElement(u.AddNode,null)})))}});case 16:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"toolbar-demo-0",refAtomIds:["Toolbar"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space, Button } from 'antd';\nimport { Toolbar, Icons } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <div style={{ position: 'relative', height: '400px' }}>\n      <Toolbar>\n        <Button type=\"text\" icon={<Icons.Sidebar />} />\n        <Button type=\"text\" icon={<Icons.AddNode />} />\n      </Toolbar>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.8"}},entry:"index.jsx"},context:{react:r||(r=n.t(u,2)),antd:s,"@graphscope/studio-components":p},renderOpts:{compile:(o=l()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},2434:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return d}});var o,i=n(90228),a=n.n(i),c=n(87999),l=n.n(c),u=n(50959),s=(n(44117),n(2739)),p=n(58002),d={"typingtext-demo-0":{component:u.memo(u.lazy(l()(a()().mark((function e(){var t,r,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,e.next=7,Promise.resolve().then(n.bind(n,2739));case 7:return o=e.sent,o.Space,o.Button,e.next=12,Promise.resolve().then(n.bind(n,58002));case 12:return i=e.sent,c=i.TypingText,e.abrupt("return",{default:function(){return r.createElement(c,null,"GraphScope Portal is a user-friendly web interface that simplifies managing graph data with GraphScope. It offers one-stop access to data modeling, importing, querying, and monitoring, catering to both Interactive and Insight engines within the GraphScope Flex architecture.")}});case 15:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"typingtext-demo-0",refAtomIds:["TypingText"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space, Button } from 'antd';\nimport { TypingText } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <TypingText>\n      GraphScope Portal is a user-friendly web interface that simplifies managing graph data with GraphScope. It offers\n      one-stop access to data modeling, importing, querying, and monitoring, catering to both Interactive and Insight\n      engines within the GraphScope Flex architecture.\n    </TypingText>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.8"}},entry:"index.jsx"},context:{react:r||(r=n.t(u,2)),antd:s,"@graphscope/studio-components":p},renderOpts:{compile:(o=l()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},54734:function(e,t,n){n.r(t),n.d(t,{demos:function(){return r}});n(50959),n(4866);var r={}},82463:function(e,t,n){n.r(t),n.d(t,{demos:function(){return s}});var r,o=n(90228),i=n.n(o),a=n(87999),c=n.n(a),l=n(50959),u=(n(93995),n(58002)),s={"layout-demo-0":{component:l.memo(l.lazy(c()(i()().mark((function e(){var t,r,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,58002));case 2:return t=e.sent,r=t.Layout,o=t.Icons,t.StudioProvider,e.abrupt("return",{default:function(){var e=[{label:"home",key:"/home",icon:l.createElement(o.Cluster,null)}];return l.createElement("div",{style:{height:"500px",border:"1px solid red"}},l.createElement(r,{sideMenu:[e]}))}});case 7:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"layout-demo-0",refAtomIds:["layout"],dependencies:{"index.jsx":{type:"FILE",value:"import { Layout, Icons, StudioProvider } from '@graphscope/studio-components';\n\nexport default () => {\n  const sideMenu = [\n    {\n      label: 'home',\n      key: '/home',\n      icon: <Icons.Cluster />,\n    },\n  ];\n  return (\n    <div style={{ height: '500px', border: '1px solid red' }}>\n      <Layout sideMenu={[sideMenu]} />\n    </div>\n  );\n};"},"@graphscope/studio-components":{type:"NPM",value:"0.1.8"}},entry:"index.jsx"},context:{"@graphscope/studio-components":u},renderOpts:{compile:(r=c()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})}}}},55348:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return p}});var o,i=n(90228),a=n.n(i),c=n(87999),l=n.n(c),u=n(50959),s=(n(26973),n(61719)),p={"packages-studio-importor-src-app-demo-0":{component:u.memo(u.lazy(l()(a()().mark((function e(){var t,r,o,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,r=t.default,t.useState,t.useEffect,e.next=8,Promise.resolve().then(n.bind(n,61719));case 8:return o=e.sent,i=o.default,e.abrupt("return",{default:function(){var e=function(){var e=l()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{nodes:[],edges:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.createElement("div",{style:{position:"fixed",top:"65px",left:"0px",right:"0px",zIndex:999,bottom:"0px",background:"#fff"}},r.createElement(i,{queryPrimitiveTypes:function(){return["DT_DOUBLE","DT_STRING","DT_SIGNED_INT32","DT_SIGNED_INT64"].map((function(e){return{label:e,value:e}}))},queryGraphSchema:e,appMode:"DATA_MODELING"}))}});case 11:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"packages-studio-importor-src-app-demo-0",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState, useEffect } from 'react';\nimport ModelingApp from '@graphscope/studio-importor';\nexport default () => {\n  const queryGraphSchema = async () => {\n    return { nodes: [], edges: [] };\n  };\n  return (\n    <div\n      style={{\n        // padding: '12px',\n        // height: 'calc(100vh - 64px)',\n        // boxSizing: 'border-box',\n        position: 'fixed',\n        top: '65px',\n        left: '0px',\n        right: '0px',\n        zIndex: 999,\n        bottom: '0px',\n        background: '#fff',\n      }}\n    >\n      <ModelingApp\n        /** 属性下拉选项值 */\n        queryPrimitiveTypes={() => {\n          return ['DT_DOUBLE', 'DT_STRING', 'DT_SIGNED_INT32', 'DT_SIGNED_INT64'].map(item => {\n            return { label: item, value: item };\n          });\n        }}\n        queryGraphSchema={queryGraphSchema}\n        appMode=\"DATA_MODELING\"\n      />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-importor":{type:"NPM",value:"0.1.8"}},entry:"index.jsx"},context:{react:r||(r=n.t(u,2)),"@graphscope/studio-importor":s},renderOpts:{compile:(o=l()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},52545:function(e,t,n){n.r(t),n.d(t,{demos:function(){return p}});var r,o=n(90228),i=n.n(o),a=n(87999),c=n.n(a),l=n(50959),u=(n(67866),n(21050)),s=n(58002),p={"packages-studio-query-src-app-demo-0":{component:l.memo(l.lazy(c()(i()().mark((function e(){var t,r,o,a,c;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,21050));case 2:return t=e.sent,r=t.default,e.next=6,Promise.resolve().then(n.bind(n,58002));case 6:return o=e.sent,a=o.Utils,c=a.storage,e.abrupt("return",{default:function(){var e=window.GS_ENGINE_TYPE,t="groot"===e?"gremlin":"cypher",n="groot"===e?"g.V().limit 10":"Match (n) return n limit 10",o=c.get("locale")||"en-US",i=c.get("primaryColor")||"#1978FF",a=c.get("themeColor")||"defaultAlgorithm";return l.createElement("div",{style:{position:"fixed",top:"65px",left:"0px",right:"0px",zIndex:999,bottom:"0px",background:"#fff"}},l.createElement(r,{theme:{mode:a,primaryColor:i},locale:o,globalScript:n,language:t,queryInfo:function(){return new Promise((function(e){e({graph_name:"demo"})}))},queryGraphSchema:function(){return new Promise((function(e){e({nodes:[],edges:[]})}))},queryStatements:function(){return new Promise((function(e){e([])}))}}))}});case 10:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"packages-studio-query-src-app-demo-0",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:"import QueryApp from '@graphscope/studio-query';\nimport { Utils } from '@graphscope/studio-components';\nconst { storage } = Utils;\n\nexport default () => {\n  const queryInfo = () => {\n    return new Promise(resolve => {\n      resolve({\n        graph_name: 'demo',\n      });\n    });\n  };\n  const queryGraphSchema = () => {\n    return new Promise(resolve => {\n      resolve({\n        nodes: [],\n        edges: [],\n      });\n    });\n  };\n  const queryStatements = () => {\n    return new Promise(resolve => {\n      resolve([]);\n    });\n  };\n  const { GS_ENGINE_TYPE } = window;\n  const language = GS_ENGINE_TYPE === 'groot' ? 'gremlin' : 'cypher';\n  const globalScript = GS_ENGINE_TYPE === 'groot' ? 'g.V().limit 10' : 'Match (n) return n limit 10';\n\n  const locale = storage.get('locale') || 'en-US';\n  const primaryColor = storage.get('primaryColor') || '#1978FF';\n  const themeMode = storage.get('themeColor') || 'defaultAlgorithm';\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        top: '65px',\n        left: '0px',\n        right: '0px',\n        zIndex: 999,\n        bottom: '0px',\n        background: '#fff',\n      }}\n    >\n      <QueryApp\n        /** 主题相关 */\n        theme={{ mode: themeMode, primaryColor }}\n        /** 国际化 */\n        locale={locale}\n        /** 返回导航 */\n        globalScript={globalScript}\n        language={language}\n        queryInfo={queryInfo}\n        queryGraphSchema={queryGraphSchema}\n        queryStatements={queryStatements}\n      />\n    </div>\n  );\n};"},"@graphscope/studio-query":{type:"NPM",value:"0.1.8"},"@graphscope/studio-components":{type:"NPM",value:"0.1.8"}},entry:"index.jsx"},context:{"@graphscope/studio-query":u,"@graphscope/studio-components":s},renderOpts:{compile:(r=c()(i()().mark((function e(){var t,r=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})}}}},57298:function(e,t,n){var r;n.r(t),n.d(t,{demos:function(){return p}});var o,i=n(90228),a=n.n(i),c=n(87999),l=n.n(c),u=n(50959),s=(n(37275),n(59506)),p={"packages-studio-query-src-statement-demo-0":{component:u.memo(u.lazy(l()(a()().mark((function e(){var t,r,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.t.bind(n,50959,19));case 2:return t=e.sent,t.default,e.next=6,Promise.resolve().then(n.bind(n,59506));case 6:return r=e.sent,o=r.default,e.abrupt("return",{default:o});case 9:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"packages-studio-query-src-statement-demo-0",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:"import React from 'react';\nimport SDK from '../sdk/index.tsx';\nexport default SDK;"},react:{type:"NPM",value:"18.2.0"},"../sdk/index.tsx":{type:"FILE",value:n(9534).Z}},entry:"index.jsx"},context:{"../sdk/index.tsx":s,react:r||(r=n.t(u,2)),"/home/runner/work/portal/portal/packages/studio-query/src/sdk/index.tsx":s},renderOpts:{compile:(o=l()(a()().mark((function e(){var t,r=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1128).then(n.bind(n,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,r));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},53420:function(e,t,n){n.r(t),n.d(t,{components:function(){return r},token:function(){return o}});var r={Menu:{itemBg:"rgba(255, 255, 255, 0)",subMenuItemBg:"rgba(255, 255, 255, 0)",iconMarginInlineEnd:14,itemMarginInline:4,iconSize:14,collapsedWidth:50,itemActiveBg:"#eaeaea"},Typography:{titleMarginBottom:"0.2em",titleMarginTop:"0.8em"},Table:{cellPaddingBlock:4,cellPaddingInline:8},Pagination:{itemSize:20},Result:{iconFontSize:62,titleFontSize:20,colorError:"#00000073"}},o={colorBorder:"red",colorBgBase:"#fff"}},9102:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var r=n(26068),o=n.n(r),i=n(48305),a=n.n(i),c=n(50959),l=n(36276),u=n(53531),s=n(98262),p=n(5855);n(15558),n(31759),n(90228),n(87999);new(n(49582).Parser)("mysql");var d=function(e){try{var t=localStorage.getItem(e);if(t)return function(e){try{return JSON.parse(e)}catch(t){if("string"!=typeof e||e.startsWith('"')||e.endsWith('"'))return e;try{return JSON.parse('"'.concat(e,'"'))}catch(t){return console.error("Failed to parse the input:",t),e}}}(t)}catch(e){console.error("Error while retrieving data from localStorage:",e)}},f=function(e,t){try{localStorage.setItem(e,JSON.stringify(t,null,2))}catch(e){console.error("Error while storing data in localStorage:",e)}};var m=n(11527),h=function(e){var t=e.children,n=e.locales,r=(0,c.useState)((function(){var t=e.algorithm,n=e.locale;return n||(n=d("locale"))||f("locale",n="en-US"),t||(t=d("algorithm"))||f("algorithm",t="defaultAlgorithm"),{components:d("components"),token:d("token"),algorithm:t,locale:n}})),i=a()(r,2),h=i[0],y=i[1],g=h.components,v=h.token,b=h.algorithm,x=h.locale,w=function(e){var t="defaultAlgorithm"===e;return{componentsConfig:{Menu:{itemBg:"rgba(255, 255, 255, 0)",subMenuItemBg:"rgba(255, 255, 255, 0)",iconMarginInlineEnd:14,itemMarginInline:4,iconSize:14,collapsedWidth:56,horizontalLineHeight:32,itemHeight:32},Typography:{titleMarginBottom:"0.2em",titleMarginTop:"0.8em"},Table:{cellPaddingBlock:4,cellPaddingInline:8},Pagination:{itemSize:20},Result:{iconFontSize:62,titleFontSize:20,colorError:"#00000073"}},tokenConfig:{colorBorder:t?"#F0F0F0":"#303030",colorBgBase:t?"#fff":"#1d1d1d",colorBgLayout:t?"#f5f7f9":"rgba(43,43,43,1)"}}}(b),E=w.componentsConfig,S=w.tokenConfig,k=function(){var e="defaultAlgorithm"===(0,p.useStudioProvier)().algorithm;return{sectionBackground:e?"#fff":"#0D0D0D",containerBackground:e?"#f5f7f9":"#020202",instanceBackground:e?"#FCFCFC":"",jobDetailBorder:e?"#efefef":"#323232",jobDetailColor:e?"#1F1F1F":"#808080",codeMirrorBorder:e?"#efefef":"#323232",editorBackground:e?"#fff":"#151515",editorForeground:e?"#212121":"#FFF",buttonBackground:e?"#fff":"#1d1d1d",layoutBackground:e?"#fff":"#020202"}}(),C="defaultAlgorithm"===b,T=n[x||"en-US"];return(0,m.jsx)(p.ContainerProvider,{value:o()({token:o()(o()({},S),v),components:o()(o()({},E),g),handleThemeOrLocale:function(e){var t=e.components,n=e.token;Object.keys(e).forEach((function(t){f(t,e[t])})),y((function(r){var i;return f("token",o()(o()({},r.token),n)),o()(o()({},r),{},{components:o()(o()({},r.components),t),token:o()(o()({},r.token),n),algorithm:e.algorithm||r.algorithm,locale:null!==(i=e.locale)&&void 0!==i?i:d("locale")})}))},algorithm:b,locale:x,isLight:C},k),children:(0,m.jsx)(s.Z,{messages:T,locale:x,children:(0,m.jsx)(l.ZP,{theme:{algorithm:C?u.Z.defaultAlgorithm:u.Z.darkAlgorithm,components:o()(o()({},E),g),token:o()(o()({},S),v)},children:t})})})}},5855:function(e,t,n){n.r(t),n.d(t,{ContainerContext:function(){return a},ContainerProvider:function(){return c},useStudioProvier:function(){return l}});var r=n(36075),o=n.n(r),i=n(50959),a=(0,i.createContext)({components:{},token:{},handleThemeOrLocale:function(e){o()(e)},locale:"en-US",algorithm:"defaultAlgorithm",isLight:!1}),c=a.Provider,l=function(){var e=(0,i.useContext)(a);if(void 0===e||0===Object.keys(e).length)throw new Error("useContext must be used within a ContainerProvider");return e}},78781:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});n(50959);var r=n(8395),o=n(11527),i={ResizeHandleOuter:{flex:"0 0 1.5em",position:"relative",outline:"none",transform:"rotate(90deg)",backgroundColor:"transparent"},ResizeHandleInner:{position:"absolute",top:"0.25em",bottom:"0.25em",left:"0.25em",right:"0.25em",borderRadius:"0.25em",backgroundColor:"transparent",transition:"background-color 0.2s linear"},Icon:{width:"1em",height:"1em",position:"absolute",left:"calc(50% - 0.5rem)",top:"calc(50% - 0.5rem)"}};function a(e){e.className;var t=e.id;return(0,o.jsx)(r.OT,{style:i.ResizeHandleOuter,id:t,children:(0,o.jsx)("div",{style:i.ResizeHandleInner,children:(0,o.jsx)("svg",{style:i.Icon,viewBox:"0 0 24 24",children:(0,o.jsx)("path",{fill:"currentColor",d:"M8,18H11V15H2V13H22V15H13V18H16L12,22L8,18M12,2L8,6H11V9H2V11H22V9H13V6H16L12,2Z"})})})})}var c={Container:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:"1rem"},Panel:{display:"flex",flexDirection:"row"},PanelContent:{height:"100%",width:"100%",borderRadius:"0.5rem"}},l=function(e){var t=e.leftSide,n=e.middleSide,i=e.rightSide,l=e.leftMinSize,u=void 0===l?20:l,s=e.leftMaxSize,p=void 0===s?40:s,d=e.rightMinSize,f=void 0===d?20:d,m=e.rightMaxSize,h=void 0===m?40:m;return(0,o.jsx)("div",{style:c.Container,children:(0,o.jsxs)(r.eh,{autoSaveId:"example",direction:"horizontal",children:[t&&[(0,o.jsx)(r.s_,{style:c.Panel,collapsible:!1,order:1,minSize:u,maxSize:p,children:(0,o.jsx)("div",{style:c.PanelContent,children:t})}),(0,o.jsx)(a,{},"left-handle")],(0,o.jsx)(r.s_,{style:c.Panel,collapsible:!1,order:2,children:(0,o.jsx)("div",{style:c.PanelContent,children:n})}),i&&[(0,o.jsx)(a,{},"right-handle"),(0,o.jsx)(r.s_,{style:c.Panel,collapsible:!1,order:3,minSize:f,maxSize:h,children:(0,o.jsx)("div",{style:c.PanelContent,children:i})})]]})})}},73174:function(e,t,n){n.d(t,{qp:function(){return i},rv:function(){return o}});var r=n(33741),o={mode:"GS_STUDIO_QUERY_MODE"},i=function(){return(0,r.qp)()}},16471:function(e,t,n){n.d(t,{Ek:function(){return r}});n(58002).Utils.storage;function r(e){return(e.match(/\r?\n/g)||[]).length+1}},70667:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(50959),o=n(58002),i=n(96066),a=(n(52871),n(26068)),c=n.n(a),l=n(15558),u=n.n(l),s={comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}]},p={defaultToken:"",tokenPostfix:".gremlin",ignoreCase:!0,brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["g","V","E","out","in","both","has","hasLabel","limit","order","by","select","count","filter","map","dedup","outE","inE","bothE"],builtinLiterals:["true","false","null"],builtinFunctions:["values","keys","id","label","property","outV","inV","bothV","sum","mean","min","max","coalesce","is","not","range","fold"],operators:["+","-","*","/","%","^","=","<>","<",">","<=",">="],escapes:/\\(?:[tbnrf\\"'`]|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+/,octaldigits:/[0-7]+/,hexdigits:/[0-9a-fA-F]+/,tokenizer:{root:[[/[{}[\]()]/,"@brackets"],{include:"common"}],common:[{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/:[a-zA-Z_][\w]*/,"type.identifier"],[/[a-zA-Z_][\w]*(?=\()/,{cases:{"@builtinFunctions":"predefined.function","@keywords":"keyword","@default":"identifier"}}],[/`/,"identifier.escape","@identifierBacktick"],[/[;,.:|]/,"delimiter"],[/[\+\-\*\/\^%]+/,"delimiter.operator"],[/[\!<>\?=\|&]/,"delimiter"]],numbers:[[/-?(@digits)[eE](-?(@digits))?/,"number.float"],[/-?(@digits)?\.(@digits)([eE]-?(@digits))?/,"number.float"],[/-?0x(@hexdigits)/,"number.hex"],[/-?0(@octaldigits)/,"number.octal"],[/-?(@digits)/,"number"]],strings:[[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@stringDouble"],[/'/,"string","@stringSingle"]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/\/\/.*/,"comment"],[/[^/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],stringDouble:[[/[^\\"]+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/"/,"string","@pop"]],stringSingle:[[/[^\\']+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/'/,"string","@pop"]],identifierBacktick:[[/[^\\`]+/,"identifier.escape"],[/@escapes/,"identifier.escape"],[/\\./,"identifier.escape.invalid"],[/`/,"identifier.escape","@pop"]]}};var d=[].concat(["count","fold","sum","min","max","mean","group","groupCount"],["hasId","hasLabel","has","hasNot","is","where","not","dedup","order","limit","coin","sample","union"],["id","label","constant","valueMap","values","elementMap","select"]),f=["outV","inV","otherV","bothV"],m=["outE","inE","bothE","out","in","both"],h={};[].concat(f,["out","in","both"]).forEach((function(e){h[e]=[].concat(m,u()(d))})),["outE","inE","bothE"].forEach((function(e){h[e]=[].concat(f,u()(d))}));var y=n(11527);function g(e){return(e.match(/\r?\n/g)||[]).length+1}i.Mj.register({id:"gremlin"}),i.Mj.setMonarchTokensProvider("gremlin",p),i.Mj.setLanguageConfiguration("gremlin",s),i.Mj.registerCompletionItemProvider("gremlin",{triggerCharacters:["."],provideCompletionItems:function(e,t){var n,r=e.getLineContent(t.lineNumber).slice(0,t.column-1).trim(),o=function(e){var t=c()({g:["V","E"],V:[].concat(m,["match"],u()(d)),E:[].concat(f,u()(d))},h)[e]||[];return t.map((function(e){return{label:e,kind:i.Mj.CompletionItemKind.Function,documentation:e,insertText:"".concat(e,"()")}}))}((n=r.replace(/\(.*?\)/g,"").split(/\s|\./).filter(Boolean)).length>0?n[n.length-1]:"");return{suggestions:o}}});var v={cypher:"cypherTheme",gremlin:"GremlinTheme"},b=(0,r.forwardRef)((function(e,t){(0,o.useDynamicStyle)("\n.monaco-editor .view-overlays .current-line {\n  background-color: transparent !important;\n}\n\n.monaco-editor .monaco-scrollable-element::-webkit-scrollbar {\n  display: none;\n}\n\n.decorationsOverviewRuler {\n  display: none !important;\n}\n\n.monaco-editor .view-overlays .current-line-exact {\n  border: none !important;\n}\n\n.monaco-editor .scroll-decoration {\n  box-shadow: none;\n}\n","cypher-editor-style");var n,a=e.value,c=e.language,l=void 0===c?"cypher":c,u=e.maxRows,s=void 0===u?10:u,p=e.minRows,d=void 0===p?1:p,f=e.onChangeContent,m=e.clear,h=e.onInit,b=f?0:g(a),x=(0,o.useStudioProvier)().isLight;return(0,r.useEffect)((function(){return t&&t.current&&(g(a)<=s&&(t.current.style.height=20*g(a)+"px"),n=i.j6.create(t.current,{language:"gremlin",value:a,theme:x?v[l]:"vs-dark",suggestLineHeight:20,automaticLayout:!0,minimap:{enabled:!1},fontSize:14,lineHeight:20,folding:!0,wordWrap:"on",scrollBeyondLastLine:!1,scrollBeyondLastColumn:0}),t.current.codeEditor=n,n.onDidChangeModelContent((function(){var e,r=n.getContentHeight(),o=null===(e=n.getModel())||void 0===e?void 0:e.getLineCount();r<=20*s&&(t.current.style.height=r+"px"),f&&f(o,n)})),h&&h(t.current)),function(){n.dispose()}}),[t,a,l,!x]),r.useEffect((function(){m&&t&&t.current&&t.current.codeEditor&&t.current.codeEditor.setValue("")}),[m]),(0,y.jsx)("div",{ref:t,style:{padding:"5px 0px",width:"100%",height:20*(d+b)+"px",border:x?"1px solid rgb(187, 190, 195)":"1px solid #434343",borderRadius:"6px"}})})),x=b},59506:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r=n(26068),o=n.n(r),i=n(48305),a=n.n(i),c=n(90228),l=n.n(c),u=n(87999),s=n.n(u),p=n(50959),d=n(53531),f=(n(73174),n(11527)),m=(d.Z.useToken,n(58002)),h=(d.Z.useToken,n(15558),n(54016));n(16483),h.Z.Text,h.Z.Title,d.Z.useToken;n(17069),n(25298),n(82092),"\n你的角色是一个 Cypher 查询助手，你可以根据 Schema 结构，给用户推荐你任务最重要的5条 Cypher 查询语句\n\n任务1: 根据 Schema 结构，自动推荐出关联性最大，最利于用户分析的 10 条Cypher查询语句\nSchema：\n".concat(JSON.stringify({nodes:[{label:"Paper",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"conference",type:"DT_STRING"},{name:"CCFRank",type:"DT_STRING"},{name:"CCFField",type:"DT_STRING"},{name:"year",type:"DT_SIGNED_INT32"},{name:"paper",type:"DT_STRING"}],primary:"id"},{label:"Challenge",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"challenge",type:"DT_STRING"}],primary:"id"},{label:"Topic",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"category",type:"DT_STRING"}],primary:"id"},{label:"Task",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"task",type:"DT_STRING"}],primary:"id"},{label:"Solution",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"solution",type:"DT_STRING"}],primary:"id"},{label:"CCFField",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"field",type:"DT_STRING"}],primary:"id"}],edges:[{label:"WorkOn",properties:[],primary:"WorkOn",constraints:[["Paper","Task"]]},{label:"Resolve",properties:[],primary:"Resolve",constraints:[["Paper","Challenge"]]},{label:"Target",properties:[{name:"number",type:"DT_SIGNED_INT32"}],primary:"Target",constraints:[["Task","Challenge"]]},{label:"Belong",properties:[],primary:"Belong",constraints:[["Task","Topic"]]},{label:"Use",properties:[],primary:"Use",constraints:[["Paper","Solution"]]},{label:"ApplyOn",properties:[],primary:"ApplyOn",constraints:[["Solution","Challenge"]]},{label:"HasField",properties:[],primary:"HasField",constraints:[["Paper","CCFField"]]},{label:"Citation",properties:[],primary:"Citation",constraints:[["Paper","Paper"]]}]},null,2),"\nAnswers:\n").concat(JSON.stringify([{cypher:"Match (n:Paper) return n limit 30",desc:"查询出 Paper 类型的节点"},{cypher:"MATCH (p:Paper)-[:WorkOn]->(a:Task),(a)-[:Belong]->(t: Topic) RETURN t.category,  COUNT(p)",desc:"找出每个主题下的论文数量"},{cypher:"MATCH (t: Topic)<-[:Belong]-(a:Task),\n      (a)<-[:WorkOn]-(p:Paper)-[:Use]->(s:Solution),\n      (s)-[:ApplyOn]->(ch:Challenge)\n  WHERE t.category = $topic_name\n  RETURN t.category, ch.challenge, COUNT(p)",desc:"检索特定主题下，每个挑战（Challenge）所应用的解决方案（Solution）中与论文（Paper）相关的数量"}],null,2),"\n\n任务2: 根据 Schema 结构和用户的输入，生成 Cypher 查询语句，用于图数据库查询\n").concat("\n注意要以JSON的格式返回结果：\nRight Cases:\nquerys1: 列举出鲁迅的一个别名可以吗？\nanswer1: \"match (:ENTITY{name:'鲁迅'})<--(h)-[:Relationship{name:'别名'}]->(q) return distinct q.name limit 1\"\n\nquerys2: 我们常用的301SH不锈钢带的硬度公差是多少，你知道吗？ \nanswers2: \"match(p:ENTITY{name:'301SH不锈钢带'})-[:Relationship{name:'硬度公差'}]-> (q) return q.name\"\nWrong Cases:\nquerys: 12344加油这首歌真好听，你知道歌曲原唱是谁吗？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '12345加油' RETURN a.name\nquerys: 七宗梦是什么时候上映的？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '七宗梦' RETURN a.name LIMIT 30\n","\n\nInstructions:\nNote: Do not include any explanations or apologies in your responses.\nDo not respond to any questions that might ask anything else than for you to construct a Cypher statement.\nDo not include any text except the generated Cypher statement.\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\n你必须使用Sechema中出现的关键词！！！\n\n当前会话中图的 Schema 结构如下：\n\n{graphSchema}\n\n你需要根据用户的提问，自动切换到上述两个任务中，并且给出正确返回，让我们开始吧！\n\n");n(335);d.Z.useToken,d.Z.useToken;n(47857),n(50318),h.Z.Title,n(16471),n(37339),n(33741);var y={"en-US":{Recommended:"Recommended",History:"History",Copilot:"Copilot",Saved:"Saved","Stored Procedures":"Stored Procedures","You can write cypher or gremlin queries, and then click the {icon} button to query data":"You can write cypher or gremlin queries, and then click the {icon} button to query data","Vertex Labels":"Vertex Labels","Edge Labels":"Edge Labels","Property Keys":"Property Keys","No saved query statements {br} You can click {icon} to save.":"No saved query statements {br} You can click {icon} to save.","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"No stored procedures available. {br} Go to the <a>Extension</a> and create one now!","Privacy Security Notice":"Privacy Security Notice",Setting:"Setting","query.app.sidebar.gpt.setting.security":"To improve the quality of generated Cypher query statements, we'll utilize your graph data schema as the prompt for ChatGPT. Your data will be kept strictly confidential and solely used for this purpose.Furthermore, please note that your OpenAI API key is only stored locally in your browser for added security","OpenAI API key is only stored locally in your browser":"OpenAI API key is only stored locally in your browser","query.copilot.welcome":"Hello! I'm the GraphScope Query Assistant. Feel free to ask me any questions about Cypher or Gremlin queries.","recommend 5 interesting query statements":"recommend 5 interesting query statements","query any subgraph":"query any subgraph","insight the statistical distribution of vertex labels in the graph":"insight the statistical distribution of vertex labels in the graph",Save:"Save",Delete:"Delete",Query:"Query",Share:"Share","query submmited on {submitTime}. It's running ... ":"query submmited on {submitTime}. It's running ... ","query submmited on {submitTime}. Running {runningTime} ms":"query submmited on {submitTime}. Running {runningTime} ms","A total of {totalCount} records were retrieved":"A total of {totalCount} records were retrieved","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.",Color:"Color",Size:"Size",Caption:"Caption",LineWidth:"LineWidth","Node properties":"Node properties",Graph:"Graph",Table:"Table",Raw:"Raw","Style Setting":"Style Setting","You can click on each label to set the color, size, and display text for vertices and edges.":"You can click on each label to set the color, size, and display text for vertices and edges.","Export graph json":"Export graph json","Clustering layout":"Clustering layout","Vertex Properties":"Vertex Properties","Connect Endpoint":"Connect Endpoint","Connection URL":"Connection URL","Query language":"Query language","Query initiation method":"Query initiation method",Username:"Username",Password:"Password",Connect:"Connect",Close:"Close","Select nodes by box selection":"Select nodes by box selection","Switch graph view dimensions":"Switch graph view dimensions","Zoom to fitview":"Zoom to fitview",Fullscreen:"Fullscreen","Toggle Right Side":"Toggle Right Side","Caption Status":"Caption Status"},"zh-CN":{Recommended:"推荐查询",History:"历史查询",Copilot:"智能查询",Saved:"保存查询","Stored Procedures":"存储过程","You can write cypher or gremlin queries, and then click the {icon} button to query data":"您可以在这里编写 cypher 或 gremlin 语句，点击 {icon} 按钮查询数据","Vertex Labels":"节点类型","Edge Labels":"边类型","Property Keys":"属性字段","No saved query statements {br} You can click {icon} to save.":"暂无保存的查询语句 {br} 您可以点击 {icon} 保存","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"暂无存储过程 {br} 快去 <a>插件市场</a> 创建一个吧","Privacy Security Notice":"隐私安全说明",Setting:"设置","query.app.sidebar.gpt.setting.security":"为了提高生成Cypher查询语句的质量，我们将使用您的图数据模式作为ChatGPT的提示。您的数据将被严格保密，仅用于此目的。此外，请注意我们的OpenAI API密钥仅存在于您的浏览器本地，以增加安全性。","OpenAI API key is only stored locally in your browser":"OpenAI API key 仅保存在您浏览器本地","query.copilot.welcome":"您好！我是 GraphScope 查询助理，您有任何关于 Cypher 或者 Gremlin 查询的问题都可以随时问我","recommend 5 interesting query statements":"帮我推荐5个有意思的查询","query any subgraph":"查询任意一个子图","insight the statistical distribution of vertex labels in the graph":"帮我分析图中节点类型的分布情况",Save:"保存",Delete:"删除",Query:"查询",Share:"分享","query submmited on {submitTime}. It's running ... ":"查询提交于 {submitTime}. 正在运行中...","query submmited on {submitTime}. Running {runningTime} ms":"查询提交于 {submitTime}. 查询时长 {runningTime} ms","A total of {totalCount} records were retrieved":"一共检索到 {totalCount} 条记录","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"一共检索到 {totalCount} 条记录, 其中包含 {nodeCount} 个节点，{edgeCount} 条边",Color:"颜色",Size:"大小",Caption:"文本",LineWidth:"边宽","Node properties":"属性详情",Graph:"图展示",Table:"表格展示",Raw:"原始数据","Style Setting":"样式设置","You can click on each label to set the color, size, and display text for vertices and edges.":"您可以单击每个标签来设置顶点和边缘的颜色、大小和显示文本。","Export graph json":"导出 json","Clustering layout":"集群布局","Vertex Properties":"节点属性","Connect Endpoint":"连接查询服务","Connection URL":"连接 URL","Query language":"查询语言","Query initiation method":"查询发起方式",Username:"用户名",Password:"密码",Connect:"连接",Close:"关闭","Select nodes by box selection":"通过框选选择节点","Switch graph view dimensions":"切换图表视图维度","Zoom to fitview":"缩放适当视图",Fullscreen:"全屏","Toggle Right Side":"切换右侧","Caption Status":"是否展示标签"}},g=(m.Utils.getSearchParams,n(39462)),v=n(40434),b=n(57526),x=n(16889),w=n(7234),E=n(38943),S=n(84155),k=m.Utils.storage,C=h.Z.Title,T=(h.Z.Text,function(e){var t=v.Z.useForm(),n=a()(t,1)[0],r=e.onConnect,o=e.onClose;p.useEffect((function(){n.setFieldsValue({query_language:e.query_language||k.get("query_language")||"cypher",query_endpoint:e.query_endpoint||k.get("query_endpoint")||"neo4j://127.0.0.1:7687",query_initiation:e.query_initiation||k.get("query_initiation")||"Browser",query_username:e.query_username||k.get("query_username")||"admin",query_password:e.query_password||k.get("query_password")||"password"})}),[]);return(0,f.jsxs)(b.Z,{vertical:!0,style:{padding:"12px 24px"},children:[(0,f.jsx)(C,{level:3,style:{marginBottom:"12px"},children:(0,f.jsx)(S.Z,{id:"Connect Endpoint"})}),(0,f.jsxs)(v.Z,{layout:"vertical",form:n,children:[(0,f.jsx)(v.Z.Item,{label:(0,f.jsx)(S.Z,{id:"Connection URL"}),name:"query_endpoint",children:(0,f.jsx)(x.Z,{})}),(0,f.jsx)(v.Z.Item,{label:(0,f.jsx)(S.Z,{id:"Query language"}),name:"query_language",children:(0,f.jsx)(w.default,{allowClear:!0,options:[{label:"Cypher",value:"cypher"},{label:"Gremlin",value:"gremlin"}]})}),(0,f.jsx)(v.Z.Item,{label:(0,f.jsx)(S.Z,{id:"Query initiation method"}),name:"query_initiation",children:(0,f.jsx)(w.default,{allowClear:!0,options:[{label:"Browser (client-side)",value:"Browser"},{label:'Server (Ensure that your "'.concat(location.origin,'/query" endpoint is available)'),value:"Server"}]})}),(0,f.jsx)(v.Z.Item,{label:(0,f.jsx)(S.Z,{id:"Username"}),name:"query_username",children:(0,f.jsx)(x.Z,{})}),(0,f.jsx)(v.Z.Item,{label:(0,f.jsx)(S.Z,{id:"Password"}),name:"query_password",children:(0,f.jsx)(x.Z.Password,{})}),(0,f.jsx)(v.Z.Item,{style:{marginTop:"48px"},children:(0,f.jsxs)(b.Z,{justify:"start",children:[(0,f.jsx)(E.ZP,{type:"primary",htmlType:"submit",style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:function(){var e=n.getFieldsValue(!0);Object.keys(e).forEach((function(t){k.set(t,e[t])})),r&&r(n.getFieldsValue(!0))},children:(0,f.jsx)(S.Z,{id:"Connect"})}),o&&(0,f.jsx)(E.ZP,{style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:o,children:(0,f.jsx)(S.Z,{id:"Close"})})]})})]})]})}),j=n(31477),P={},O=function(){var e=s()(l()().mark((function e(){var t,n,r,o,i=arguments;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:"cypher",n=i.length>1?i[1]:void 0,r=P.gremlin_driver,o=P.cypher_driver,"cypher"!==t){e.next=6;break}return o||(P.cypher_driver=new j.Or(n)),e.abrupt("return",P.cypher_driver);case 6:if("gremlin"!==t){e.next=9;break}return r||(P.gremlin_driver=new j.VP(n)),e.abrupt("return",P.gremlin_driver);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){var t=e||{},n=t.enableImmediateQuery,r=void 0!==n&&n,i=t.mode,c=void 0===i?"flow":i,u=t.id,d=void 0===u?"":u,h=t.timestamp,v=void 0===h?Date.now():h,b=t.graphId,x=void 0===b?"":b,w=t.schemaData,E=void 0===w?{nodes:[],edges:[]}:w,S=t.script,k=void 0===S?"Match (n) return n limit 10":S,C=t.onQuery,j=(0,p.useState)({language:e.language||"cypher",endpoint:e.endpoint||"127.0.0.1:7687"}),P=a()(j,2),I=P[0],L=P[1],_=I.language,N=I.endpoint,A=function(){var e=s()(l()().mark((function e(t){var n,r;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.language,e.next=3,O(n,N);case 3:return r=e.sent,e.abrupt("return",r.query(t.script));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=s()(l()().mark((function e(t){var n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.language,e.next=3,O(n,N);case 3:e.sent.close();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return C||N&&_?(0,f.jsx)(m.StudioProvier,{locales:y,children:(0,f.jsx)(g.default,{language:_,enableImmediateQuery:r,mode:c,active:!0,id:d,timestamp:v,graphId:x,schemaData:E,script:k,onQuery:C||A,onCancel:Z})}):(0,f.jsx)(m.StudioProvier,{locales:y,children:(0,f.jsx)(T,{onConnect:function(e){L((function(t){return o()(o()({},t),{},{endpoint:e.query_endpoint||"",language:e.query_language})}))}})})},L=n(10422),_={render_query_statement:function(e){var t=(e||{}).id,n=void 0===t?"root":t;L.render((0,f.jsx)(I,o()({},e)),document.getElementById(n))}}},39462:function(e,t,n){n.r(t),n.d(t,{default:function(){return pe}});var r=n(90228),o=n.n(r),i=n(26068),a=n.n(i),c=n(87999),l=n.n(c),u=n(48305),s=n.n(u),p=n(50959),d=n(53531),f=n(16483),m=n.n(f),h=n(70667),y=n(57526),g=n(48722),v=n(54016),b=n(17905),x=n(38943),w=n(28541),E=n(42176),S=n(51558),k=n(45334),C=n(16889),T=n(15001),j=n(37528),P=n(11527),O=function(e){var t=e.onSave,n=(0,p.useRef)(null),r=(0,j.Z)();return(0,P.jsx)(b.Z,{title:r.formatMessage({id:"Save"}),children:(0,P.jsx)(k.Z,{title:"name your statement",description:(0,P.jsx)(C.Z,{width:"200px",ref:n}),onConfirm:function(){if(n.current){var e=n.current.input.value;console.log("InputRef.current",e),t&&t(e)}},onCancel:function(){},okText:"Save",cancelText:"Cancel",placement:"bottomRight",children:(0,P.jsx)(x.ZP,{type:"text",icon:(0,P.jsx)(T.Z,{})})})})},I=n(62950);var L=function(e){var t,n=e.onClose,r=e.onQuery,i=e.script,a=void 0===i?"Match (n) return n limit 10":i,c=e.onSave,u=e.id,s=e.isFetching,d=e.antdToken,f=(e.schemaData,e.timestamp,e.language),m=e.message,k=(0,p.useRef)(null),C=(0,j.Z)(),T=function(){var e=l()(o()().mark((function e(){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null==k||null===(t=k.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),r({id:u,script:n,language:f});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,P.jsxs)("div",{style:{},children:[(0,P.jsxs)(y.Z,{justify:"space-between",style:{paddingBottom:"8px"},children:[(0,P.jsx)(g.Z,{children:(0,P.jsxs)(v.Z.Text,{type:"secondary",style:{fontSize:"12px",textAlign:"center"},children:[(t=f,t.charAt(0).toUpperCase()+t.slice(1))," ",m]})}),(0,P.jsxs)(g.Z,{size:0,children:[(0,P.jsx)(b.Z,{title:C.formatMessage({id:"Query"}),children:(0,P.jsx)(x.ZP,{type:"text",icon:(0,P.jsx)(w.Z,{spin:s,style:{color:s?"#52c41a":d.green}}),onClick:T})}),c&&(0,P.jsx)(O,{onSave:function(e){var t,n=null==k||null===(t=k.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),r=(0,I.Z)();c&&c({id:r,script:n,name:e,language:f})}}),n&&(0,P.jsx)(b.Z,{title:C.formatMessage({id:"Share"}),children:(0,P.jsx)(x.ZP,{type:"text",icon:(0,P.jsx)(E.Z,{onClick:function(){var e,t=null==k||null===(e=k.current)||void 0===e||null===(e=e.codeEditor)||void 0===e?void 0:e.getValue();window.open("".concat(window.location.origin,"/querying?language=").concat(f,"&auto_run=true&global_script=").concat(encodeURIComponent(t)))}})})}),n&&(0,P.jsx)(b.Z,{title:C.formatMessage({id:"Delete"}),children:(0,P.jsx)(x.ZP,{type:"text",icon:(0,P.jsx)(S.Z,{onClick:function(){n&&n(u)}})})})]})]}),(0,P.jsx)(h.Z,{language:f,ref:k,value:a})]})},_=n(84723),N=n(15558),A=n.n(N),Z=n(35215),R=n(31192),D=n(9069),F=n(57591),M=n(88766),q=n(31759),G=n.n(q),z=n(7234),B=n(86976),U=function(e){var t=e.table,n=(0,p.useRef)(null),r=p.useState((function(){var e=function(e){var t=e[0],n={},r=[];Object.keys(t).forEach((function(e){var o=G()(t[e]);n[e]={key:e,type:o,enums:new Set},"number"===o&&r.push(e)})),e.forEach((function(e){Object.keys(e).forEach((function(t){n[t].enums.add(e[t])}))}));var o=Object.values(n).filter((function(e){return"string"===e.type})).sort((function(e,t){return e.enums.size<t.enums.size})).map((function(e){return e.key})),i=r[0],a=r[1],c=s()(o,2),l=c[0],u=c[1];return{type:r.length>1?"point":"interval",x:a||l,y:i,color:u,keys:Object.keys(n)}}(t);return{x:e.x,y:e.y,color:e.color,type:e.type,options:e.keys.map((function(e){return{label:e,value:e}}))}})),o=s()(r,2),i=o[0],c=o[1];console.log(i);var l=i.type,u=i.x,d=i.y,f=i.color,m=i.options;(0,p.useEffect)((function(){var e;return n.current&&((e=new B.kL({container:n.current,autoFit:!0})).options({type:l,data:t,encode:{x:u,y:d,color:f},transform:[{type:"dodgeX"}]}),e.render()),function(){n.current&&e.destroy()}}),[l,u,d,t,f,n]);return(0,P.jsxs)("div",{style:{padding:"16px",overflowX:"hidden"},children:[(0,P.jsxs)(g.Z,{style:{paddingBottom:"16px"},children:["Type:",(0,P.jsx)(z.default,{size:"small",defaultValue:l,style:{width:120},onChange:function(e){c((function(t){return a()(a()({},t),{},{type:e})}))},options:[{label:"interval",value:"interval"},{label:"point",value:"point"}]}),"X:",(0,P.jsx)(z.default,{size:"small",defaultValue:u,style:{width:120},onChange:function(e){c((function(t){return a()(a()({},t),{},{x:e})}))},options:m}),"Y:",(0,P.jsx)(z.default,{size:"small",defaultValue:d,style:{width:120},onChange:function(e){c((function(t){return a()(a()({},t),{},{y:e})}))},options:m}),"Color:",(0,P.jsx)(z.default,{size:"small",defaultValue:f,style:{width:120},onChange:function(e){c((function(t){return a()(a()({},t),{},{color:e})}))},options:m})]}),(0,P.jsx)("div",{ref:n,style:{width:"100%"}})]})},Y=n(58002),H=n(35731),V=n(36523),Q=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"12px",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-8px";return(0,P.jsx)(P.Fragment,{children:Object.entries(t).map((function(t){var o=s()(t,2),i=o[0],a=o[1];return(0,P.jsxs)("div",{style:{paddingLeft:"16px",overflowWrap:"break-word",wordBreak:"break-all",whiteSpace:"pre-wrap"},children:[(0,P.jsxs)("span",{style:{color:"#F9822F",paddingLeft:n},children:['"',i,'" :']}),(0,P.jsx)("span",{style:{paddingLeft:"6px",textIndent:r},children:"object"===G()(a)&&null!==a?(0,P.jsxs)(P.Fragment,{children:["{",e(a,"24px","16px"),"}"]}):JSON.stringify(a,null,2)})]},i)}))})},W=function(e){var t=e.expandData,n=e.width;return(0,P.jsx)(y.Z,{children:Object.values(t).map((function(e){return e.key&&(0,P.jsxs)("div",{style:{marginLeft:"12px",width:"".concat(n,"%")},children:["{",Q(e.data),"}"]},e.key)}))})},K=function(e){var t=e.data,n=t.map((function(e){var t=e.keys,n=e._fields;return t.reduce((function(e,t,r){var o=n[r];return e[t]={key:(0,I.Z)(),elementId:o.elementId,data:o,labels:o.labels?o.labels[0]:void 0,type:o.type,startNodeElementId:o.startNodeElementId,endNodeElementId:o.endNodeElementId},e.key=(0,I.Z)(),e}),{})})),r=t[0].keys,o=100/r.length,i=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,n){return n+1}}].concat(A()(r.map((function(e){return{title:e,width:"".concat(o,"%"),key:(0,I.Z)(),render:function(t){return n=t[e],r=n.startNodeElementId,o=n.endNodeElementId,i=n.type,a=n.elementId,c=n.labels,r&&o?(0,P.jsxs)("span",{children:["{",(0,P.jsx)(Y.Icons.Arrow,{style:{color:"#F97108"}})," : ",i," } ID ",a]}):(0,P.jsxs)("span",{children:["{",(0,P.jsx)(Y.Icons.Punctuation,{style:{color:"#B668B0"}})," : ",c," } ID ",a]});var n,r,o,i,a,c}}}))),[Z.Z.EXPAND_COLUMN]);return(0,P.jsx)(Z.Z,{size:"small",columns:i,dataSource:n,expandable:{expandedRowRender:function(e){return(0,P.jsx)(W,{expandData:e,width:o})},expandIcon:function(e){var t=e.expanded,n=e.onExpand,r=e.record;return t?(0,P.jsx)(H.Z,{style:{color:"#F97108"},onClick:function(e){return n(r,e)}}):(0,P.jsx)(V.Z,{onClick:function(e){return n(r,e)}})},expandRowByClick:!0}})},$=function(e){var t=e.data,n=t[0],r=Object.keys(n),o=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,n){return n+1}}].concat(A()(r.map((function(e){return{title:e,dataIndex:e,width:"".concat(100/r.length,"%"),key:e}})))),i=t.map((function(e){return a()(a()({},e),{},{key:e.id})}));return(0,P.jsx)(Z.Z,{size:"small",columns:o,dataSource:i})},J=function(e){var t,n=e.data,r=n.table,o=void 0===r?[]:r,i=n.nodes,c=void 0===i?[]:i,l=n.edges,u=void 0===l?[]:l,d=n.raw,f=c.length,m=u.length,h=o.length,w=(0,j.Z)();t=0===f&&0===m&&0!==h?w.formatMessage({id:"A total of {totalCount} records were retrieved"},{totalCount:h}):w.formatMessage({id:"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges."},{totalCount:f+m,nodeCount:f,edgeCount:m});var E,S=(0,p.useState)("table"),k=s()(S,2),C=k[0],T=k[1];return"table"===C&&0!==o.length&&(E=(0,P.jsx)($,{data:o})),"table"===C&&0===o.length&&0!==d.records.length&&(E=(0,P.jsx)(K,{data:d.records})),(0,P.jsxs)("div",{style:{overflowX:"scroll"},children:[(0,P.jsxs)(y.Z,{justify:"space-between",style:{padding:"0px 10px 10px 10px"},align:"center",children:[(0,P.jsx)(v.Z.Text,{children:t}),(0,P.jsxs)(g.Z,{children:[(0,P.jsx)(R.Z,{value:C,onChange:function(e){T(e)},options:[{value:"chart",icon:(0,P.jsx)(D.Z,{}),label:"chart"},{value:"table",icon:(0,P.jsx)(F.Z,{})}]}),(0,P.jsx)(b.Z,{title:"download",children:(0,P.jsx)(x.ZP,{icon:(0,P.jsx)(M.Z,{}),type:"text",onClick:function(){var e=c.map((function(e){var t=e.id,n=e.label,r=e.properties,o=void 0===r?{}:r;return a()({id:t,label:n},o)})),t=u.map((function(e){var t=e.id,n=e.label,r=e.source,o=e.target,i=e.properties,c=void 0===i?{}:i;return a()({id:t,label:n,source:r,target:o},c)}));Y.Utils.createDownload(JSON.stringify({nodes:e,edges:t},null,2),"result.json")},children:" "})})]})]}),E,"chart"===C&&0!==o.length&&(0,P.jsx)(U,{table:o})]})},X=n(55874),ee=n(29643),te=n(24174),ne=n.n(te),re=function(e){var t=e.data;return e.isFetching?(0,P.jsx)(X.ZP,{icon:(0,P.jsx)(ee.Z,{spin:!0}),status:"error",title:"Running"}):"error"===t.mode?(0,P.jsx)(X.ZP,{status:"error",title:t.raw&&t.raw.name,subTitle:t.raw&&t.raw.message}):(0,P.jsx)("div",{children:(0,P.jsx)(ne(),{src:t.raw})})},oe=n(47857),ie=n(13049),ae=n(31931),ce=function(e){var t=e.data,n=e.isFetching,r=e.schemaData,o=e.graphId,i=e.onQuery,a=p.useState(null),c=s()(a,2),l=c[0],u=c[1],d=(0,j.Z)(),f=function(e,t,n){var r=e.nodes,o=void 0===r?[]:r,i=e.edges,a=void 0===i?[]:i,c=e.table,l=void 0===c?[]:c,u=(e.raw,o.length>0),s=a.length>0,p=l.length>0,d="raw",f=["raw"];return u&&(d="graph",f=["raw","table","graph"]),!u&&s&&(d="table",f=["raw","table"]),u||s||!p||(d="table",f=["raw","table"]),n&&(d=n),t&&(f=["raw"],d="raw"),{viewMode:d,options:f}}(t,n,l),m=f.viewMode,h=f.options,y=function(e){return-1!==h.indexOf(e)},g=[{label:d.formatMessage({id:"Graph"}),key:"graph",icon:(0,P.jsx)(ie.Z,{}),children:(0,P.jsx)(oe.Z,{data:t,schemaData:r,graphId:o,onQuery:i}),disabled:!y("graph")},{label:d.formatMessage({id:"Table"}),key:"table",icon:(0,P.jsx)(F.Z,{}),children:(0,P.jsx)(J,{data:t}),disabled:!y("table")},{label:d.formatMessage({id:"Raw"}),key:"raw",icon:(0,P.jsx)(ae.Z,{}),children:(0,P.jsx)(re,{data:t,isFetching:n}),disabled:!y("raw")}];return(0,P.jsx)("div",{style:{padding:"16px 0px"},children:(0,P.jsx)(_.Z,{items:g,size:"small",type:"card",activeKey:m,onChange:function(e){u(e)}})})},le=(0,p.memo)(ce),ue=d.Z.useToken,se=function(e){var t=e.onQuery,n=e.onClose,r=e.onCancel,i=e.onSave,c=e.script,u=e.id,d=e.active,f=e.mode,h=e.schemaData,y=e.enableImmediateQuery,g=e.graphId,v=e.timestamp,b=e.language,x=ue().token,w=(0,j.Z)(),E=d&&"flow"===f?{border:"1px solid ".concat(x.colorBorder)}:{border:"1px solid  ".concat(x.colorBorder)},S=(0,p.useRef)(null),k=(0,p.useState)({data:{},isFetching:!1,startTime:0,endTime:0,abort:!1}),C=s()(k,2),T=C[0],O=C[1],I=T.data,_=T.isFetching,N=T.startTime,A=T.endTime;(0,p.useEffect)((function(){S.current&&d&&"flow"===f&&S.current.scrollIntoView({behavior:"smooth"})}),[d]);var Z=function(){var e=l()(o()().mark((function e(n){var i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=4;break}return r&&r(n),O((function(e){return a()(a()({},e),{},{isFetching:!1,data:{}})})),e.abrupt("return");case 4:return O((function(e){return a()(a()({},e),{},{isFetching:!0,startTime:(new Date).getTime()})})),e.next=7,t(n);case 7:i=e.sent,O((function(e){return a()(a()({},e),{},{data:i,isFetching:!1,endTime:(new Date).getTime()})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,p.useEffect)((function(){y&&(console.log("enableImmediateQuery script",y,c,b),Z({id:u,script:c,language:b}))}),[y]);var R=A-N<0?w.formatMessage({id:"query submmited on {submitTime}. It's running ... "},{submitTime:m()(N).format("HH:mm:ss YYYY-MM-DD")}):w.formatMessage({id:"query submmited on {submitTime}. Running {runningTime} ms"},{submitTime:m()(N).format("HH:mm:ss YYYY-MM-DD"),runningTime:A-N});return(0,P.jsxs)("div",{ref:S,style:a()(a()({display:"flex",flexDirection:"column",flex:1,margin:"12px",padding:"8px 16px",borderRadius:"8px"},E),{},{background:x.colorBgBase}),children:[(0,P.jsx)(L,{message:R,language:b,timestamp:v,schemaData:h,id:u,script:c,onClose:n,onQuery:Z,onSave:i,isFetching:_,antdToken:x}),(0,P.jsx)(le,{data:I,isFetching:_,schemaData:h,graphId:g,onQuery:t})]})},pe=(0,p.memo)(se)},47857:function(e,t,n){var r=n(26068),o=n.n(r),i=n(48305),a=n.n(i),c=n(67825),l=n.n(c),u=(n(50959),n(50318)),s=n(11527),p=["properties","constraints"];t.Z=function(e){var t,n=e.data,r=e.schemaData,i=e.graphId,c=e.onQuery,d={nodes:(t=r).nodes,edges:t.edges.map((function(e){var t=e.properties,n=e.constraints,r=l()(e,p),i=a()(n[0],2),c=i[0],u=i[1];return o()(o()({},r),{},{source:c,target:u,properties:t})}))};return(0,s.jsx)("div",{style:{width:"100%"},children:(0,s.jsx)(u.QueryGraph,{data:n,schema:d,graphId:i,onQuery:c})})}},15776:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(85430);const r=[{value:"update site",paraId:0,tocIndex:2},{value:"update version",paraId:1,tocIndex:4},{value:"update",paraId:2,tocIndex:6},{value:"update version",paraId:3,tocIndex:8},{value:"update graph",paraId:4,tocIndex:10},{value:"First Release",paraId:5,tocIndex:12}]},70857:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(8646);const r=[]},12457:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(4480);const r=[]},2565:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(93238);const r=[]},74972:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(48741);const r=[]},27705:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(36666);const r=[{value:"open source : ",paraId:0,tocIndex:0},{value:"https://undraw.co/illustrations",paraId:0,tocIndex:0}]},54520:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(19895);const r=[]},57481:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(54581);const r=[]},28748:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(518);const r=[]},41895:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(3750);const r=[]},56309:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(43716);const r=[]},90389:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(43765);const r=[]},20391:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(44412);const r=[]},27388:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(85792);const r=[]},14872:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(44117);const r=[]},95081:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(4866);const r=[{value:"storage",paraId:0,tocIndex:0},{value:"isDarkTheme",paraId:0,tocIndex:0},{value:"debounce",paraId:0,tocIndex:0}]},13588:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(93995);const r=[]},26103:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(26973);const r=[]},31404:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(67866);const r=[]},2500:function(e,t,n){n.r(t),n.d(t,{texts:function(){return r}});n(37275);const r=[]},22211:function(e,t){t.Z="/** components 基础配置 */\nexport const components = {\n  Menu: {\n    itemBg: 'rgba(255, 255, 255, 0)',\n    subMenuItemBg: 'rgba(255, 255, 255, 0)',\n    iconMarginInlineEnd: 14,\n    itemMarginInline: 4,\n    iconSize: 14,\n    collapsedWidth: 50,\n    itemActiveBg: '#eaeaea',\n  },\n  Typography: {\n    titleMarginBottom: '0.2em',\n    titleMarginTop: '0.8em',\n  },\n  Table: {\n    cellPaddingBlock: 4, //\t单元格纵向内间距\n    cellPaddingInline: 8, //单元格横向内间距（默认大尺寸）\n  },\n  Pagination: {\n    itemSize: 20,\n  },\n  Result: {\n    iconFontSize: 62,\n    titleFontSize: 20,\n    colorError: '#00000073',\n  },\n};\n\n/** token 基础配置 */\nexport const token = {\n  colorBorder: 'red',\n  colorBgBase: '#fff',\n};\n"},20880:function(e,t){t.Z="import React, { useEffect, useState } from 'react';\nimport { ConfigProvider, theme } from 'antd';\nimport { IntlProvider } from 'react-intl';\nimport { ContainerProvider } from './useThemeConfigProvider';\nimport type { ThemeProviderType } from './useThemeConfigProvider';\nimport { storage } from '../Utils';\nimport { getThemeConfig } from './getThemeConfig';\nimport { useCustomToken } from './useCustomToken';\n\ntype IThemeProvider = {\n  locales: {\n    'zh-CN': Record<string, string>;\n    'en-US': Record<string, string>;\n  };\n  children: React.ReactNode;\n  locale?: 'zh-CN' | 'en-US';\n  algorithm?: 'defaultAlgorithm' | 'darkAlgorithm';\n};\n\nconst Provider: React.FC<IThemeProvider> = props => {\n  const { children, locales } = props;\n  const [state, setState] = useState<ThemeProviderType>(() => {\n    let { algorithm, locale } = props;\n    if (!locale) {\n      locale = storage.get('locale');\n      if (!locale) {\n        locale = 'en-US';\n        storage.set('locale', locale);\n      }\n    }\n    if (!algorithm) {\n      algorithm = storage.get('algorithm');\n      if (!algorithm) {\n        algorithm = 'defaultAlgorithm';\n        storage.set('algorithm', algorithm);\n      }\n    }\n    return {\n      components: storage.get('components'),\n      token: storage.get('token'),\n      algorithm,\n      locale,\n    };\n  });\n\n  const { components, token, algorithm, locale } = state;\n  const { componentsConfig, tokenConfig } = getThemeConfig(algorithm);\n  const colorConfig = useCustomToken();\n  const isLight = algorithm === 'defaultAlgorithm';\n\n  const handleThemeOrLocale = (themeConfig: Partial<ThemeProviderType>) => {\n    const { components, token } = themeConfig;\n    Object.keys(themeConfig).forEach(key => {\n      storage.set(key, themeConfig[key]);\n    });\n\n    setState(preState => {\n      // 特殊化处理,切token数据需初始化数据做基础\n      storage.set('token', { ...preState.token, ...token });\n      return {\n        ...preState,\n        components: { ...preState.components, ...components },\n        token: { ...preState.token, ...token },\n        algorithm: themeConfig.algorithm || preState.algorithm,\n        locale: themeConfig.locale ?? storage.get('locale'),\n      };\n    });\n  };\n\n  const messages = locales[locale || 'en-US'];\n\n  return (\n    <ContainerProvider\n      value={{\n        token: { ...tokenConfig, ...token },\n        components: { ...componentsConfig, ...components },\n        handleThemeOrLocale,\n        algorithm,\n        locale: locale,\n        isLight,\n        ...colorConfig,\n      }}\n    >\n      <IntlProvider messages={messages} locale={locale as 'zh-CN' | 'en-US'}>\n        <ConfigProvider\n          theme={{\n            // 1. 单独使用暗色算法\n            algorithm: isLight ? theme.defaultAlgorithm : theme.darkAlgorithm,\n            components: {\n              ...componentsConfig,\n              ...components,\n            },\n            token: {\n              ...tokenConfig,\n              ...token,\n            },\n          }}\n        >\n          {children}\n        </ConfigProvider>\n      </IntlProvider>\n    </ContainerProvider>\n  );\n};\n\nexport default Provider;\n"},88241:function(e,t){t.Z="import { createContext, useContext } from 'react';\nimport type { IColorStore } from './getThemeConfig';\nexport interface ThemeProviderType extends IColorStore {\n  algorithm?: 'defaultAlgorithm' | 'darkAlgorithm';\n  components?: { [key: string]: { [key: string]: string | number } };\n  token?: { [key: string]: string | number };\n  locale?: 'zh-CN' | 'en-US';\n  isLight?: boolean;\n}\nexport interface IContainerContext extends ThemeProviderType {\n  handleThemeOrLocale: (value: ThemeProviderType) => void;\n}\nexport const ContainerContext = createContext<IContainerContext>({\n  components: {},\n  token: {},\n  handleThemeOrLocale: ({}) => {},\n  locale: 'en-US',\n  algorithm: 'defaultAlgorithm',\n  isLight: false,\n});\n\nexport const ContainerProvider = ContainerContext.Provider;\n\nexport const useStudioProvier = () => {\n  const context = useContext(ContainerContext);\n\n  if (context === undefined || Object.keys(context).length === 0) {\n    throw new Error(`useContext must be used within a ContainerProvider`);\n  }\n  return context;\n};\n"},17239:function(e,t){t.Z="import React from 'react';\nimport { Panel, PanelGroup } from 'react-resizable-panels';\nimport ResizeHandle from './ResizeHandle';\n\ninterface IResizablePanelsProps {\n  leftSide?: React.ReactNode;\n  middleSide?: React.ReactNode;\n  rightSide?: React.ReactNode;\n  leftMinSize?: number;\n  leftMaxSize?: number;\n  rightMinSize?: number;\n  rightMaxSize?: number;\n}\n\nconst styles: Record<string, React.CSSProperties> = {\n  Container: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '1rem',\n  },\n  Panel: { display: 'flex', flexDirection: 'row' },\n  PanelContent: {\n    height: '100%',\n    width: '100%',\n    borderRadius: '0.5rem',\n  },\n};\n\nconst ResizablePanels: React.FC<IResizablePanelsProps> = ({\n  leftSide,\n  middleSide,\n  rightSide,\n  leftMinSize = 20,\n  leftMaxSize = 40,\n  rightMinSize = 20,\n  rightMaxSize = 40,\n}) => {\n  const renderLeftPanel = () => (\n    <Panel style={styles.Panel} collapsible={false} order={1} minSize={leftMinSize} maxSize={leftMaxSize}>\n      <div style={styles.PanelContent}>{leftSide}</div>\n    </Panel>\n  );\n\n  const renderRightPanel = () => (\n    <Panel style={styles.Panel} collapsible={false} order={3} minSize={rightMinSize} maxSize={rightMaxSize}>\n      <div style={styles.PanelContent}>{rightSide}</div>\n    </Panel>\n  );\n\n  return (\n    <div style={styles.Container}>\n      <PanelGroup autoSaveId=\"example\" direction=\"horizontal\">\n        {leftSide && [renderLeftPanel(), <ResizeHandle key=\"left-handle\" />]}\n        <Panel style={styles.Panel} collapsible={false} order={2}>\n          <div style={styles.PanelContent}>{middleSide}</div>\n        </Panel>\n        {rightSide && [<ResizeHandle key=\"right-handle\" />, renderRightPanel()]}\n      </PanelGroup>\n    </div>\n  );\n};\n\nexport default ResizablePanels;\n"},9534:function(e,t){t.Z="import StatementQuery from './query-statement';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nexport default {\n  render_query_statement: config => {\n    const { id = 'root' } = config || {};\n    ReactDOM.render(<StatementQuery {...config} />, document.getElementById(id));\n  },\n};\n"}}]);