"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6238],{46238:(e,t,r)=>{r.d(t,{tA:()=>tX,BD:()=>tD,Xz:()=>e_,NP:()=>t0,Df:()=>eW,Ml:()=>tg,xV:()=>m,$b:()=>t3,BO:()=>t8,Hj:()=>t_,Qk:()=>tv,D7:()=>tR,Su:()=>t9,Us:()=>f,J5:()=>eh,gb:()=>tL,Xe:()=>ts,gr:()=>X,qL:()=>e9,bh:()=>eU,Xg:()=>en,o8:()=>a,dz:()=>eB,DT:()=>el,v6:()=>eu,k1:()=>n,qp:()=>l});let n={"en-US":{"Select nodes by box selection":"Select nodes by box selection","Switch graph view dimensions":"Switch graph view dimensions","Zoom to fitview":"Zoom to fitview",Fullscreen:"Fullscreen","Toggle Right Side":"Toggle Right Side","Caption Status":"Caption Status","Clustering layout":"Clustering layout","Export graph json":"Export graph json","Edge Properties":"Edge Properties","Vertex Properties":"Vertex Properties","File type":"File type"},"zh-CN":{"Select nodes by box selection":"通过框选选择节点","Switch graph view dimensions":"切换图表视图维度","Zoom to fitview":"缩放适当视图",Fullscreen:"全屏","Toggle Right Side":"切换右侧","Caption Status":"是否展示标签","Clustering layout":"聚类布局","Export graph json":"导出 JSON 数据","Edge Properties":"边属性信息","Vertex Properties":"点属性信息","File type":"文件类型"}};var o=r(52983),i=r(91359);let a=i.o8;var c=r(93795),u={data:{nodes:[],edges:[]},source:{nodes:[],edges:[]},groups:[],width:200,height:500,dataMap:{},render:"2D",graph:null,isReady:!1,emitter:null,nodeStyle:{},edgeStyle:{},nodeStatus:{},edgeStatus:{},graphId:"",schema:{nodes:[],edges:[]},isLoading:!1},l=function(){return(0,c.qp)()},f=function(e){var t=e.children,r=e.id;return o.createElement(c.ZP,{id:r,store:u},t)},s=r(8191),p=r(98117);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h(e,t,r){var n;return(n=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==y(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let m=function(e){var t,r=e.children,n=l(),i=n.store,a=n.updateStore,c=s.Z.useToken().token,u=i.graph,f=i.emitter,y=function(e){if(Array.isArray(e))return e}(t=o.useState({visible:!1,data:{},x:0,y:0}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{for(i=(r=r.call(e)).next;!(u=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,2)||function(e,t){if(e){if("string"==typeof e)return g(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),d=y[0],m=y[1],v=d.visible,S=(d.data,d.x),O=d.y;return o.useEffect(function(){return u&&f&&(f.on("node:contextmenu",function(e){var t=e.node,r=e.evt,n=r.offsetX,o=r.offsetY;m(function(e){return b(b({},e),{},{visible:!0,data:t,x:n,y:o})}),a(function(e){e.nodeStatus=b(b({},e.nodeStatus),{},h({},t.id,{selected:!0}))})}),f.on("node:click",function(){m(function(e){return b(b({},e),{},{visible:!1,data:{},x:0,y:0})})})),null==f||f.on("canvas:click",function(){m(function(e){return b(b({},e),{},{visible:!1,data:{},x:0,y:0})})}),function(){null==f||f.off("node:click"),null==f||f.off("node:contextmenu")}},[f]),o.createElement("div",{style:{opacity:v?1:0,visibility:v?"visible":"hidden",position:"absolute",left:S,top:O,width:180,height:"auto",backgroundColor:c.colorBgContainer,boxShadow:c.boxShadow,zIndex:100,padding:"4px",borderRadius:"8px"}},o.createElement(p.Z,{vertical:!0,gap:8},r))};var v=r(51430),S=r(14985),O=r(23092),j=r(28823),w=r(60545),E=r(19828),x=r(19448),P=r(38774),k=[P.iN[4],P.$y[4],P.jk[4],P.LR[4],P.Ce[4],P.sl[4],P.EV[8],P.Q6[6],"#000","#f0f0f0"],A=[0,.1,.5,1,2,3,4,6,8,10,20],D=[0,.1,.5,1,1.5,2,2.5,3,3.5,4,4.5,5],C=k[6],L=A[4],Z="rgba(255, 255, 255, 0.8)",T="#f0f0f0",I=D[3];function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){F(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function F(e,t,r){var n;return(n=function(e,t){if("object"!=M(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=M(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==M(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=s.Z.useToken,z={color:{width:"16px",height:"16px",display:"block",borderRadius:"50%",cursor:"pointer"}};let G=function(e){var t,r=e.color,n=e.size,i=e.caption,a=e.properties,c=e.label,u=e.onChange,l=e.type,f=e.captionStatus,s=R().token,y=a;Array.isArray(a)&&(y=a.reduce(function(e,t){return N(N({},e),{},F({},t.name,t[l]))},{}));var d=function(e,t){u&&u(F({type:l,label:c,color:r,size:n,caption:i,properties:a,captionStatus:f},e,t))},b="2px solid ".concat(s.colorPrimary);return o.createElement("div",{style:{maxWidth:"220px",overflow:"hidden",padding:"12px"}},o.createElement(p.Z,{gap:12,style:{padding:"6px 0px"}},o.createElement(v.Z.Text,{style:{flexShrink:0}},o.createElement(O.Z,{id:"Color"})),o.createElement(E.Z,{wrap:!0},k.map(function(e){var t=r==e;return o.createElement("span",{key:e,onClick:function(){return d("color",e)},style:N(N({},z.color),{},{backgroundColor:e,boxSizing:"border-box",border:t?b:"none"})})}))),"node"===l&&o.createElement(p.Z,{gap:12,style:{padding:"6px 0px"}},o.createElement(v.Z.Text,{style:{flexShrink:0}},o.createElement(O.Z,{id:"Size"})),o.createElement(E.Z,{size:8,wrap:!0},A.map(function(e){var t=n==e,r=4*Math.sqrt(Math.max(0,e))+2;return o.createElement("span",{key:e,onClick:function(){return d("size",e)},style:N(N({},z.color),{},{width:"".concat(2*r,"px"),height:"".concat(2*r,"px"),background:"#ddd",boxSizing:"border-box",border:t?b:"none"})})}))),"edge"===l&&o.createElement(p.Z,{gap:12,style:{padding:"6px 0px"}},o.createElement(v.Z.Text,{style:{flexShrink:0}},o.createElement(O.Z,{id:"LineWidth"})),o.createElement(E.Z,{wrap:!0},D.map(function(e){var t=n==e;return o.createElement("span",{key:e,onClick:function(){return d("size",e)},style:{cursor:"pointer",width:"".concat(5*e,"px"),height:"16px",background:"#ddd",display:"block",boxSizing:"border-box",border:t?b:"none"}})}))),o.createElement(p.Z,{gap:12,style:{padding:"6px 0px"}},o.createElement(v.Z.Text,{style:{flexShrink:0}},o.createElement(O.Z,{id:"Caption"})),o.createElement(E.Z,{wrap:!0},null===(t=Object.keys(y))||void 0===t?void 0:t.map(function(e){var t=i==e;return o.createElement("span",{key:e,style:{fontSize:"12px",color:s.colorTextSecondary,display:"block",borderRadius:"6px",padding:"0px 4px",boxSizing:"border-box",cursor:"pointer",background:s.colorBgBlur,border:t?b:"1px solid #ddd"},onClick:function(){return d("caption",e)}},e)}))),o.createElement(p.Z,{gap:12,style:{padding:"6px 0px"}},o.createElement(v.Z.Text,{style:{flexShrink:0}},o.createElement(O.Z,{id:"Caption Status"})),o.createElement(E.Z,{wrap:!0},o.createElement(x.ZP.Group,{value:f,onChange:function(e){d("captionStatus",e.target.value)}},o.createElement(x.ZP,{value:"hidden"},"hidden"),o.createElement(x.ZP,{value:"display"},"display")))))},Q=(0,o.memo)(function(e){var t=e.label,r=e.color,n=e.count,i=n?"".concat(t," (").concat(n,")"):t,a=(0,o.useRef)(null);return o.createElement(j.Z,{getPopupContainer:function(e){return a.current?a.current:e},trigger:"click",placement:"left",content:o.createElement(G,e)},o.createElement(w.Z,{style:{textAlign:"center",borderRadius:"8px",backgroundColor:r,cursor:"pointer",minWidth:"60px",minHeight:"22px",color:"#000"},bordered:!1},i))});function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var U=["properties"];function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach(function(t){V(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function V(e,t,r){var n;return(n=function(e,t){if("object"!=H(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=H(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==H(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var q=v.Z.Title,J=function(e,t){var r=t.nodeStatus,n=t.edgeStatus,o="node",i=e.nodes.find(function(e){var t=r[e.id];if(t&&t.selected)return t});if(i)return{type:o,selectElement:i};var a=e.edges.find(function(e){var t=n[e.id];if(t&&t.selected)return t});return a?{type:o="edge",selectElement:a}:{type:o,selectElement:null}};let X=function(e){var t=l(),r=t.store,n=t.updateStore,a=r.nodeStyle,c=r.nodeStatus,u=r.data,f=r.edgeStatus,s=e.children,y=J(u,{nodeStatus:c,edgeStatus:f}),d=y.selectElement,b=y.type;if(!d)return o.createElement("div",{style:{height:"100%"}},s);var h=d.label,g=d.properties,m=void 0===g?{}:g,v=d.id,j={dataSource:Object.entries(m).map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{for(i=(r=r.call(e)).next;!(u=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,2)||function(e,t){if(e){if("string"==typeof e)return Y(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[0];return{key:r,name:r,value:t[1]}}),columns:[{title:"name",dataIndex:"name",key:"name"},{title:"value",dataIndex:"value",key:"value"}]},w=j.dataSource,E=j.columns,x=a[v]||a[h];return o.createElement(p.Z,{vertical:!0,gap:12,style:$({padding:"12px 0px"},e.style||{})},o.createElement(p.Z,{justify:"space-between"},o.createElement(q,{level:5,style:{margin:"0px"}},o.createElement(O.Z,{id:"node"===b?"Vertex Properties":"Edge Properties"})),o.createElement(Q,B({},x,{label:h,type:b,properties:m,onChange:function(e){e.properties;var t=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,U);n(function(e){var n=$($({},e.nodeStyle),{},V({},v,t));e.nodeStyle=n,i.cQ.storage.set("GRAPH_".concat(r.graphId,"_STYLE"),{nodeStyle:n,edgeStyle:$({},e.edgeStyle)})})}}))),o.createElement(S.Z,{style:{height:"100%",width:"100%"},showHeader:!1,columns:E,dataSource:w,scroll:{y:410},pagination:!1}))};var K=r(73569),ee=r(36565),et=i.PJ.i7,er=i.PJ.Y;let en=function(e){var t=l(),r=t.updateStore,n=t.store.render,a=e.title;e.placement;var c=(0,i.F_)().isLight?"#000":"#ddd",u="2D"===n?o.createElement(et,{style:{color:c}}):o.createElement(er,{style:{color:c}});return o.createElement(K.Z,{title:o.createElement(O.Z,{id:"".concat(void 0===a?"Switch graph view dimensions":a)}),placement:"left"},o.createElement(ee.ZP,{onClick:function(){r(function(e){e.render="2D"===n?"3D":"2D"})},icon:u,type:"text"}))};function eo(e){return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ei(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=eo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eo(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eo(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ei(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ec=i.cQ.storage;function eu(e,t){var r=ec.get("GRAPH_".concat(t,"_STYLE"));if(r)return r;var n={nodeStyle:{},edgeStyle:{}};return e.nodes.forEach(function(e,t){var r=e.label;n.nodeStyle[r]={label:e.label,size:L,color:k[t],caption:Object.keys(e.properties||{})[0]||"id",captionStatus:"display"}}),e.edges.forEach(function(e,t){var r=e.label;n.edgeStyle[r]={label:e.label,size:I,color:T,caption:Object.keys(e.properties||{})[0]||"id",captionStatus:"display"}}),n}function el(e){var t={};return e.nodes.forEach(function(e){t[e.id]=ea(ea({},e),{},{neighbors:[],links:[]})}),e.edges.forEach(function(e){var r=e.id,n=e.source.id||e.source,o=e.target.id||e.target;t[r]=e;var i=t[n],a=t[o];if(!i||!a){console.log("edge source or target node not found",n,o);return}i.neighbors.push(o),a.neighbors.push(n),i.links.push(r),a.links.push(r)}),t}function ef(e){return(ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function es(e){return function(e){if(Array.isArray(e))return ep(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ep(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ep(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ep(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ey(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ed(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ey(Object(r),!0).forEach(function(t){eb(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ey(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eb(e,t,r){var n;return(n=function(e,t){if("object"!=ef(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ef(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ef(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let eh=function(e){var t=l(),r=t.updateStore,n=t.store.graphId,a=function(e){var t=e.files,o=[],a=[],c=new Map,u=new Map,l=new Map;t.sort(function(e,t){return"Vertex"===e.meta.graphFields.type?-1:1}).forEach(function(e){var t=e.meta,r=e.contents,n=t.graphFields;t.name;var f=[];"csv"===t.type&&(f=i.cQ.covertCSV2JSON(r,t.header,t.delimiter)),"json"===t.type&&(f=JSON.parse(r));var s=n.idField,p=n.sourceField,y=void 0===p?"source":p,d=n.targetField,b=void 0===d?"target":d,h=n.type,g=n.nodeLabelField,m=n.edgeLabelField;"Vertex"===h&&f.forEach(function(e){var t=e[s],r=e[g]||"unknow";if(t&&(l.set(t,r),o.push({id:t,label:r,properties:e})),!c.has(r)){var n={label:r,properties:i.cQ.extractProperties(e).reduce(function(e,t){return ed(ed({},e),{},eb({},t.name,t.type))},{})};c.set(r,n)}}),"Edge"===h&&f.forEach(function(e){var t=e[y],r=e[b],n=e[m]||"unknow",o=l.get(t),c=l.get(r);if(!o||!c){console.warn("数据不合法, 找不到 ".concat(o?"Target ID：".concat(r):"Source ID：".concat(t)));return}if(t&&r&&a.push({id:"".concat(e[y],"-").concat(e[b]),label:n,source:t,target:r,properties:e}),!u.has(n)){var f={label:n,source:o,target:c,properties:i.cQ.extractProperties(e).reduce(function(e,t){return ed(ed({},e),{},eb({},t.name,t.type))},{})};u.set(n,f)}})});var f={nodes:es(c.values()),edges:es(u.values())},s=n||String(new Date),p=eu(f,s);r(function(e){e.data={nodes:o,edges:a},e.source={nodes:o,edges:a},e.graphId=s,e.schema=f,e.nodeStyle=p.nodeStyle,e.edgeStyle=p.edgeStyle,e.dataMap=el(i.cQ.fakeSnapshot({nodes:o,edges:a}))})};return o.createElement(i.Pz,{upload:{accept:".json,.csv",title:"xxx",description:"xxx"},type:"json"},function(e){return o.createElement(o.Fragment,null,o.createElement(ee.ZP,{type:"primary",onClick:function(){return a(e)},loading:e.loading},"Visualization"))})};var eg=r(4184),em=r(66138),ev=r(25851),eS={color:T,size:I},eO={color:C,size:L},ej=function(e,t,r){var n=e.id,o=e.label,i=e.__style;return t[n]||t[o]||i||("edge"===r?eS:eO)},ew=function(e,t){var r=e.id,n=e.label,o=e.__status;return t[r]||t[n]||o||{}};function eE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ex=function(e,t,r){return function(n,o){if(void 0!==e.x&&void 0!==e.y){var i=ej(e,n),a=ew(e,o),c=i.color,u=i.size,l=i.caption,f=i.captionStatus;i.icon,i.captionMode;var s=a.selected,p=a.hovering,y=e.properties&&e.properties[l],d=2*Math.sqrt(Math.max(0,u))+1;if((s||p)&&(t.beginPath(),t.arc(e.x,e.y,1.2*d,0,2*Math.PI,!1),t.fillStyle="#000",p&&(t.fillStyle="rgba(255,0,0,0.3)"),t.fill()),t.beginPath(),t.arc(e.x,e.y,d,0,2*Math.PI,!1),t.fillStyle=c,t.fill(),"display"===f&&y){var b=Math.min(.5*r,14/r);if(r>3&&r<15){t.font="".concat(b,"px Sans-Serif");var h=[t.measureText(y).width,b].map(function(e){return e+.2*b});t.fillStyle=Z,t.fillRect.apply(t,[e.x-h[0]/2,1.2*d+e.y-h[1]/2].concat(function(e){if(Array.isArray(e))return eE(e)}(h)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(h)||function(e,t){if(e){if("string"==typeof e)return eE(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eE(e,void 0)}}(h)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),t.textAlign="center",t.textBaseline="middle",t.fillStyle=c,t.fillText(y,e.x,e.y+1.2*d),e.__bckgDimensions=h}if(r>=15){var g=16/r;t.font="".concat(g,"px Sans-Serif"),t.fillStyle=Z,t.textAlign="center",t.textBaseline="middle",t.fillStyle="#fff",function(e,t){for(var r=t.text,n=t.x,o=t.y,i=t.maxWidth,a=t.lineHeight,c=String(void 0===r?"":r).split(" "),u="",l=[],f=0;f<c.length;f++){var s=u+c[f]+" ";e.measureText(s).width>i&&f>0?(l.push(u.trim()),u=c[f]+" "):u=s}l.push(u.trim());var p=l.length*a,y=o-p/2;p<i&&l.forEach(function(t,r){e.fillText(t,n,y+r*a)})}(t,{text:y,x:e.x,y:e.y+g/2,maxWidth:1.6*d,lineHeight:1.2*g})}}t.restore()}}};function eP(e){return(eP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ek=function(e,t,r){return function(n,o,i){if(!i&&!(r<3)){var a=ej(e,n,"edge");a.color,a.size;var c=a.caption,u=a.captionStatus;a.icon;var l=e.properties&&e.properties[c];if("hidden"!==u&&c&&l){var f=1*l.length,s=e.source,p=e.target;if("object"===eP(s)&&"object"===eP(p)&&void 0!==s.x&&void 0!==s.y&&void 0!==p.x&&void 0!==p.y){var y={x:s.x+(p.x-s.x)/2,y:s.y+(p.y-s.y)/2},d={x:p.x-s.x,y:p.y-s.y};d.x,d.y;var b=Math.atan2(d.y,d.x);b>Math.PI/2&&(b=-(Math.PI-b)),b<-Math.PI/2&&(b=-(-Math.PI-b)),t.save(),t.font="1px Sans-Serif",t.font="".concat(2,"px Sans-Serif");var h=[f+.4,2.4];t.translate(y.x,y.y),t.rotate(b),t.fillStyle="rgba(255, 255, 255, 0.8)",t.fillRect.apply(t,[-h[0]/2,-h[1]/2].concat(h)),t.textAlign="center",t.textBaseline="middle",t.fillStyle="darkgrey",t.fillText(l,0,0),t.restore()}}}}},eA=r(34592),eD=r(27342);function eC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eL=null;function eZ(e){return(eZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var eT=["id","style","children"];function eI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var eM=(0,o.memo)((0,o.forwardRef)(function(e,t){var r,n,a,c,u,l,f,s,p,y,d,b,h,g,m,v,S,O=e.id,j=e.style,w=(n=(e.children,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,eT)).onInit,c=void 0===(r.onReady,r.onDestroy,r.options,a=r.render)?"2D":a,u=r.data,l=r.nodeStyle,f=r.edgeStyle,s=r.nodeStatus,p=r.edgeStatus,b=(d=function(e){if(Array.isArray(e))return e}(y=(0,o.useState)(!1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{for(i=(r=r.call(e)).next;!(u=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(y,2)||function(e,t){if(e){if("string"==typeof e)return eC(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eC(e,2)}}(y,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],h=d[1],g=(0,o.useRef)(null),m=(0,o.useRef)(null),v=(0,o.useRef)(null),S=(0,o.useRef)(!1),(0,o.useEffect)(function(){if(v.current){m.current=(0,ev.Z)();var e=v.current.offsetWidth,t=v.current.offsetHeight,r=null;S.current=!1,"2D"===c&&(r=(0,eg.Z)()(v.current)).width(e).height(t).graphData(i.cQ.fakeSnapshot({nodes:u.nodes,links:u.edges})).nodeRelSize(2).nodeCanvasObjectMode(function(){return"replace"}).nodeCanvasObject(function(e,t,r){ex(e,t,r)(l,s)}).linkLabel(function(e){return ej(e,f,"edge").caption}).linkWidth(function(e){return ej(e,f,"edge").width}).linkColor(function(e){return ej(e,f,"edge").color}).linkDirectionalArrowLength(3).linkDirectionalArrowRelPos(.9).linkCanvasObjectMode(function(){return"after"}).linkCanvasObject(function(e,t,r){ek(e,t,r)(f,p,u.edges.length>100)}).d3Force("collide",(0,eA.Z)().radius(function(e){return ej(e,l).size+5})).d3Force("center",(0,eD.Z)().strength(1)).onNodeHover(function(e){var t;null===(t=m.current)||void 0===t||t.emit("node:hover",e)}).onNodeClick(function(e){var t;null===(t=m.current)||void 0===t||t.emit("node:click",e)}).onNodeRightClick(function(e,t){var r;null===(r=m.current)||void 0===r||r.emit("node:contextmenu",{node:e,evt:t})}).onBackgroundClick(function(e){var t;null===(t=m.current)||void 0===t||t.emit("canvas:click",e)}).onLinkClick(function(e){var t;null===(t=m.current)||void 0===t||t.emit("edge:click",e)}),"3D"===c&&(r=(0,em.Z)()(v.current).width(e).height(t).enableNodeDrag(!1).nodeRelSize(2).nodeVal(function(e){return ej(e,l).size}).nodeLabel(function(e){return e&&e.properties&&e.properties[ej(e,l).caption]}).nodeColor(function(e){return ej(e,l).color}).linkLabel(function(e){return e&&e.properties&&e.properties[ej(e,f).caption]}).linkWidth(function(e){return ej(e,f,"edge").width}).linkColor(function(e){return ej(e,f,"edge").color}).linkDirectionalArrowLength(3).linkDirectionalArrowRelPos(.9).graphData(i.cQ.fakeSnapshot({nodes:u.nodes,links:u.edges})).onNodeClick(function(e){var t;null===(t=m.current)||void 0===t||t.emit("node:click",e)}).onNodeRightClick(function(e,t){var r;null===(r=m.current)||void 0===r||r.emit("node:contextmenu",{node:e,evt:t})}).onBackgroundClick(function(e){var t;null===(t=m.current)||void 0===t||t.emit("canvas:click",e)}).onLinkClick(function(e){var t;null===(t=m.current)||void 0===t||t.emit("edge:click",e)})),g.current=r,h(!0),null==n||n(r,m.current,{width:e,height:t});var o=new ResizeObserver(i.cQ.debounce(function(){if(v.current){var e=v.current.offsetWidth,t=v.current.offsetHeight;g.current&&g.current.width(e).height(t)}},200));return o.observe(v.current),function(){g.current&&g.current._destructor(),v.current&&o.unobserve(v.current)}}},[c]),(0,o.useEffect)(function(){if(g.current){var e=i.cQ.fakeSnapshot({nodes:u.nodes,links:u.edges}),t=1e3*Math.min(1.2+.5*Math.floor((e.nodes.length-1)/500),15);S.current=!1,g.current.cooldownTime(t),g.current.onEngineStop(function(){S.current=!0,console.log("engine stop",S.current)}),g.current.graphData(e),eL=setTimeout(function(){var e;null===(e=g.current)||void 0===e||e.zoomToFit(400,Math.max(400/(u.nodes.length+1),20))},1200)}return function(){clearTimeout(eL)}},[u]),(0,o.useEffect)(function(){if(g.current){var e=g.current;"2D"===c&&e.nodeCanvasObject(function(e,t,r){ex(e,t,r)(l,s)}),"3D"===c&&e.nodeLabel(function(e){return ej(e,l).caption}).nodeColor(function(e){return ej(e,l).color}).nodeLabel(function(e){return e&&e.properties&&e.properties[ej(e,l).caption]})}},[l,s]),(0,o.useEffect)(function(){if(g.current){var e=g.current.graphData().links.length;g.current.linkCanvasObject(function(t,r,n){ek(t,r,n)(f,p,e>100)}).linkColor(function(e){var t=ej(e,f,"edge").color,r=p[e.id];return r&&r.selected?"#000":t}).linkLabel(function(e){var t=ej(e,f,"edge").caption,r=e&&e.properties&&e.properties[t];return t&&r?"".concat(t,": ").concat(r):""}).linkWidth(function(e){var t=ej(e,f,"edge").size,r=p[e.id];return r&&r.selected?t+1:t}).linkDirectionalParticles(1).linkDirectionalParticleWidth(function(e){var t=p[e.id];return t&&t.selected?ej(e,f,"edge").size+1:0})}},[f,p]),{graph:g.current,emitter:m.current,containerRef:v,isReady:b}),E=w.graph,x=w.containerRef,P=w.isReady;(0,o.useImperativeHandle)(t,function(){return E},[P]);var k=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eI(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=eZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eZ(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eZ(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({height:"inherit",position:"relative"},j);return o.createElement("div",{id:"GRAPH_".concat(O),ref:x,style:k})}));let e_=function(e){var t=l(),r=t.id,n=t.store,i=t.updateStore,a=n.data,c=n.render,u=n.nodeStyle,f=n.edgeStyle,p=n.nodeStatus,y=n.edgeStatus,d=s.Z.useToken().token;return o.createElement("div",{style:{width:"100%",height:"100%"}},o.createElement(eM,{id:r,nodeStyle:u,edgeStyle:f,nodeStatus:p,edgeStatus:y,style:{width:"100%",height:"100%",background:d.colorBgBase},data:a,render:c,onInit:function(e,t,r){var n=r.width,o=r.height;i(function(r){r.graph=e,r.emitter=t,r.width=n,r.height=o})}}))};function eN(e){return(eN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eF(){return(eF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function eR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ez(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eR(Object(r),!0).forEach(function(t){eG(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eG(e,t,r){var n;return(n=function(e,t){if("object"!=eN(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eN(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==eN(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eQ=v.Z.Title,eH=v.Z.Text;let eU=o.memo(function(e){var t=l(),r=t.updateStore,n=t.store,a=n.schema,c=n.nodeStyle,u=n.edgeStyle,f=n.graphId,s=e.showHeader,y=function(e){console.log("value",e);var t=e.caption,n=e.color,o=e.label,a=e.size,c=e.type,u=e.captionStatus;r(function(e){if("node"===c){var r=ez(ez({},e.nodeStyle),{},eG({},o,{color:n,size:a,caption:t,captionStatus:u}));e.nodeStyle=r,i.cQ.storage.set("GRAPH_".concat(f,"_STYLE"),{nodeStyle:r,edgeStyle:ez({},e.edgeStyle)})}if("edge"===c){var l=ez(ez({},e.edgeStyle),{},eG({},o,{color:n,size:a,caption:t,captionStatus:u}));e.edgeStyle=l,i.cQ.storage.set("GRAPH_".concat(f,"_STYLE"),{nodeStyle:ez({},e.nodeStyle),edgeStyle:l})}})},d=a.nodes.map(function(e){return ez(ez({},e),{},{style:c[e.label]})}),b=a.edges.map(function(e){return ez(ez({},e),{},{style:u[e.label]})});return o.createElement(p.Z,{vertical:!0,gap:12},s&&o.createElement(eQ,{level:3,style:{margin:"0px"}},o.createElement(O.Z,{id:"Style Setting"})),o.createElement(eH,{type:"secondary"},"You can click on each label to set the color, size, and display text for vertices and edges."),o.createElement(eQ,{level:5,style:{margin:"0px"}},o.createElement(O.Z,{id:"Vertex Labels"})),o.createElement(E.Z,{wrap:!0,size:[0,6]},d.map(function(e){var t=e.label,r=e.properties,n=e.style;return o.createElement(Q,eF({key:t,label:t,properties:r},n,{type:"node",onChange:y}))})),o.createElement(eQ,{level:5,style:{margin:"0px"}},o.createElement(O.Z,{id:"Edge Labels"})),o.createElement(E.Z,{wrap:!0,size:[0,6]},b.map(function(e){var t=e.label,r=e.properties,n=e.style;return o.createElement(Q,eF({key:t,label:t,properties:r},n,{type:"edge",onChange:y}))})))}),eB=function(e){var t=e.title,r=e.placement,n=l().store.graph,a=(0,i.F_)().isLight;return o.createElement(K.Z,{title:o.createElement(O.Z,{id:"".concat(void 0===t?"Zoom to fitview":t)}),placement:void 0===r?"left":r},o.createElement(ee.ZP,{onClick:function(){null==n||n.zoomToFit(1e3)},icon:o.createElement(i.PJ.dz,{style:{color:a?"#000":"#ddd"}}),type:"text"}))},eW=function(e){var t=l(),r=t.store,n=t.updateStore,i=r.emitter;return(0,o.useEffect)(function(){var e=function(e){n(function(e){e.nodeStatus={},e.edgeStatus={}})};return null==i||i.on("canvas:click",e),function(){null==i||i.off("canvas:click",e)}},[i]),null};var e$=r(83089),eV=r(89944);function eY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eq(e,t){if(null!=e&&"string"==typeof t){for(var r=0,n="",o=t.length,i=e;r<o;){var a=t[r];if("."===a){if(null==(i=i[n]))return;n=""}else n+=a;r++}return i[n]}}var eJ=function(e,t){for(var r=t.width,n=t.height,o=t.screen2GraphCoords,a=t.nodeStyle,c=t.clusterKey,u=i.cQ.groupBy(e,function(e){return eq(e,c)}),l={name:"root",children:[]},f=0,s=Object.entries(u);f<s.length;f++){var p,y=function(e){if(Array.isArray(e))return e}(p=s[f])||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{for(i=(r=r.call(e)).next;!(u=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(p,2)||function(e,t){if(e){if("string"==typeof e)return eY(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eY(e,2)}}(p,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),d=y[0],b=y[1];l.children.push({name:d,children:b})}var h=(0,e$.ZP)(l).sort(function(e,t){try{return Number(e.data.name)-Number(t.data.name)}catch(e){return 0}});(0,eV.Z)().size([r,n]).padding(20).radius(function(e){return Math.round(4*Math.sqrt(Math.max(0,ej(e.data,a,"node").size))+2-10)})(h);var g=(h.children||[]).map(function(e){var t=o(e.x,e.y),r=t.x,n=t.y,i=ej({label:e.data.name},a,"node").color;return{id:e.data.name,cluster:e.data.name,x:r,y:n,r:e.r,color:i,children:e.data.children.map(function(e){return e.id})}}),m=new Map;return g.forEach(function(e){m.set(e.id,e)}),{groups:g,groupsMap:m}},eX=r(67454),eK=r(90648),e0=r(18473);function e1(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;function o(o){r.forEach(function(r){var i=e.get(eq(r,t));if(i){var a=i.x-r.x,c=i.y-r.y;r.vx+=a*o*n,r.vy+=c*o*n}})}return o.initialize=function(e){return r=e},o}function e2(e,t){var r;function n(n){r.forEach(function(r){var o=e.get(eq(r,t));if(o){var i=r.x-o.x,a=r.y-o.y,c=Math.sqrt(i*i+a*a),u=o.r-(r.size||3);if(c>u){var l=(c-u)/c*n;r.x-=i*l,r.y-=a*l}}})}return n.initialize=function(e){return r=e},n}let e3=function(){var e=l(),t=e.store,r=e.updateStore,n=t.graph,o=t.render,a=t.nodeStyle,c=t.width,u=t.height,f=i.cQ.fakeSnapshot(t.data);return{enableCluster:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"label";if("2D"===o&&n){n.zoom(1);var t=eJ(f.nodes,{width:c,height:u,screen2GraphCoords:n.screen2GraphCoords,nodeStyle:a,clusterKey:e}),i=t.groups,l=t.groupsMap;n.d3Force("cluster",e2(l,e)),n.d3Force("radial",e1(l,e)),n.d3Force("center",null),n.d3Force("charge",null),n.d3Force("link",null),n.d3Force("collide",e0.Z().radius(function(e){return Math.round(4*Math.sqrt(Math.max(0,ej(e,a).size))+2)})),n.onRenderFramePost(function(e,t){i.forEach(function(t){var r=t.r,n=t.x,o=t.y,i=t.color,a=t.cluster;e.beginPath(),e.setLineDash([5,5]),e.arc(n,o,r,0,2*Math.PI,!1),e.strokeStyle=i,e.lineWidth=1,e.stroke(),e.font="10px Arial",e.fillStyle=i,e.textAlign="center",e.fillText(a,n,o-r-6)})}),r(function(e){e.groups=i})}if("3D"===o&&n){var s=eJ(f.nodes,{width:c,height:u,screen2GraphCoords:function(e,t){return{x:e,y:t}},nodeStyle:a,clusterKey:e}).groupsMap;n.d3Force("cluster",e2(s,e)),n.d3Force("radial",e1(s,e))}n&&n.d3ReheatSimulation()},disableCluster:function(){"2D"===o&&n&&(n.d3Force("charge",(0,eX.Z)()),n.d3Force("center",(0,eD.Z)()),n.d3Force("cluster",null),n.d3Force("radial",null),n.d3Force("link",(0,eK.Z)().links(f.edges).id(function(e){return e.id})),n.onRenderFramePost(function(){})),"3D"===o&&n&&(n.d3Force("cluster",null),n.d3Force("radial",null))}}};function e5(e){return(e5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function e6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e8(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=e5(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=e5(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e5(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e8(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function e4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let e9=function(e){var t,r=e3(),n=r.enableCluster,a=r.disableCluster,c=function(e){if(Array.isArray(e))return e}(t=o.useState({cluster:!1}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{for(i=(r=r.call(e)).next;!(u=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,2)||function(e,t){if(e){if("string"==typeof e)return e4(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e4(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=c[0],l=c[1],f=u.cluster,s=(0,i.F_)().isLight;return o.createElement(K.Z,{title:o.createElement(O.Z,{id:"Clustering layout"}),placement:"left"},o.createElement(ee.ZP,{onClick:function(){l(function(e){return e6(e6({},e),{},{cluster:!e.cluster})}),f?a():n("label")},icon:o.createElement(i.PJ.vu,{style:{color:s?"#000":"#ddd"}}),type:"text"}))};var e7=r(97003);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach(function(t){tn(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tn(e,t,r){var n;return(n=function(e,t){if("object"!=te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=te(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==te(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var to=function(e){var t=e.nodes,r=e.edges,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{selected:!0}};return{nodeStatus:(void 0===t?[]:t).reduce(function(e,t){return tr(tr({},e),{},tn({},t.id,n(t)))},{}),edgeStatus:(void 0===r?[]:r).reduce(function(e,t){return tr(tr({},e),{},tn({},t.id,n(t)))},{})}},ti=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=2*Math.PI/e.length;return e.map(function(e,o){var i=o*n;return tr(tr({},e),{},{x:t.x+r*Math.cos(i),y:t.y+r*Math.sin(i),z:0})})},ta=function(e,t,r){var n=e.graphData(),o=n.nodes,a=n.links.map(function(e){return tr(tr({},e),{},{source:e.source.id,target:e.target.id})}),c=o.filter(function(e){return -1!==r.indexOf(e.id)}),u=ti(t.nodes,c);return i.cQ.handleExpand({nodes:o,edges:a},{nodes:u,edges:t.edges})};function tc(e){return(tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tu(){tu=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(t,r,n,i){var a,c,u=Object.create((r&&r.prototype instanceof h?r:h).prototype);return o(u,"_invoke",{value:(a=new k(i||[]),c=p,function(r,o){if(c===y)throw Error("Generator is already running");if(c===d){if("throw"===r)throw o;return{value:e,done:!0}}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var u=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),b;var a=s(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var c=a.arg;return c?c.done?(n[r.resultName]=c.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):c:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,b)}(i,a);if(u){if(u===b)continue;return u}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=d,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=y;var l=s(t,n,a);if("normal"===l.type){if(c=a.done?d:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(c=d,a.method="throw",a.arg=l.arg)}})}),u}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",y="executing",d="completed",b={};function h(){}function g(){}function m(){}var v={};l(v,a,function(){return this});var S=Object.getPrototypeOf,O=S&&S(S(A([])));O&&O!==r&&n.call(O,a)&&(v=O);var j=m.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,c){var u=s(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==tc(f)&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(f).then(function(e){l.value=e,a(l)},function(e){return r("throw",e,a,c)})}c(u.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(tc(t)+" is not iterable")}return g.prototype=m,o(j,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:g,configurable:!0}),g.displayName=l(m,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},w(E.prototype),l(E.prototype,c,function(){return this}),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},w(j),l(j,u,"Generator"),l(j,a,function(){return this}),l(j,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function tl(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){r(e);return}c.done?t(u):Promise.resolve(u).then(n,o)}function tf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let ts=function(e){var t,r,n=e.onQuery,i=l(),a=i.store,c=i.updateStore,u=a.nodeStatus,f=a.schema,s=(a.dataMap,a.emitter),p=a.graph,y=a.data,d=(0,o.useRef)(null),b=Object.keys(u).filter(function(e){return u[e].selected}),h=y.nodes.find(function(e){return e.id===b[0]});if(!h)return null;var g=f.edges.filter(function(e){return e.source===h.label}),m=g.map(function(e){var t=e.source,r=e.target,n=e.label;return t===r?{key:"(a:".concat(t,")-[b:").concat(n,"]-(c:").concat(r,")"),label:"[".concat(n,"]-(").concat(r,")")}:{key:"(a:".concat(t,")-[b:").concat(n,"]->(c:").concat(r,")"),label:"[".concat(n,"]->(").concat(r,")")}}),v=[{key:"NeighborQuery",label:"NeighborQuery",children:[].concat(g.length>1?[{key:"(a)-[b]-(c)",label:"All Neighbors"}]:[],function(e){if(Array.isArray(e))return tf(e)}(m)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(m)||function(e,t){if(e){if("string"==typeof e)return tf(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tf(e,void 0)}}(m)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}],S=(t=tu().mark(function e(t){var r,o,i,a,u,l,f;return tu().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.key,null==s||s.emit("canvas:click"),c(function(e){e.isLoading=!0}),o="\n    MATCH ".concat(r,"\n    WHERE  elementId(a) IN [").concat(b,"] \n    RETURN a,b,c\n    "),e.next=6,n({script:o,language:"cypher"});case 6:(i=e.sent).nodes.length>0&&p?(u=(a=to(i,function(e){return{selected:!0}})).nodeStatus,l=a.edgeStatus,f=ta(p,i,b),c(function(e){e.data=f,e.dataMap=el(f),e.nodeStatus=u,e.edgeStatus=l,e.isLoading=!1})):c(function(e){e.isLoading=!1});case 8:case"end":return e.stop()}},e)}),r=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){tl(i,n,o,a,c,"next",e)}function c(e){tl(i,n,o,a,c,"throw",e)}a(void 0)})},function(e){return r.apply(this,arguments)});return 0===m.length?null:o.createElement("div",{ref:d},o.createElement(e7.Z,{getPopupContainer:function(e){return d.current?d.current:e},onClick:S,style:{margin:"0px",padding:"0px",width:"103%"},mode:"vertical",items:v}))};var tp=r(98654);function ty(e){return(ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function td(){td=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(t,r,n,i){var a,c,u=Object.create((r&&r.prototype instanceof h?r:h).prototype);return o(u,"_invoke",{value:(a=new k(i||[]),c=p,function(r,o){if(c===y)throw Error("Generator is already running");if(c===d){if("throw"===r)throw o;return{value:e,done:!0}}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var u=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),b;var a=s(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,b;var c=a.arg;return c?c.done?(n[r.resultName]=c.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):c:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,b)}(i,a);if(u){if(u===b)continue;return u}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=d,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=y;var l=s(t,n,a);if("normal"===l.type){if(c=a.done?d:"suspendedYield",l.arg===b)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(c=d,a.method="throw",a.arg=l.arg)}})}),u}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",y="executing",d="completed",b={};function h(){}function g(){}function m(){}var v={};l(v,a,function(){return this});var S=Object.getPrototypeOf,O=S&&S(S(A([])));O&&O!==r&&n.call(O,a)&&(v=O);var j=m.prototype=h.prototype=Object.create(v);function w(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,c){var u=s(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==ty(f)&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(f).then(function(e){l.value=e,a(l)},function(e){return r("throw",e,a,c)})}c(u.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(ty(t)+" is not iterable")}return g.prototype=m,o(j,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:g,configurable:!0}),g.displayName=l(m,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},w(E.prototype),l(E.prototype,c,function(){return this}),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},w(j),l(j,u,"Generator"),l(j,a,function(){return this}),l(j,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function tb(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){r(e);return}c.done?t(u):Promise.resolve(u).then(n,o)}var th=function(e,t){var r=e.map(function(e,r){var n=t[e].properties,o=n.name,i=n.title,a="p".concat(r),c="l".concat(r),u="";return o&&(u="".concat(a,'.name = "').concat(o,'"\n      ')),i&&(u="".concat(a,'.title = "').concat(i,'"\n      ')),{whereScript:u,matchScript:"\n(".concat(a,")-[").concat(c,"]-(neighbor)"),returnScript:a+","+c}}),n=r.map(function(e){return e.matchScript}).join(","),o=r.map(function(e){return e.whereScript}).join(" AND "),i=r.map(function(e){return e.returnScript}).join(",");return console.log("\n  MATCH ".concat(n," \n  WHERE ").concat(o," \n  RETURN ").concat(i,",neighbor\n  ")),"\n  MATCH ".concat(n," \n  WHERE ").concat(o," \n  RETURN ").concat(i,",neighbor\n  ")};let tg=function(e){var t,r,n=e.onQuery,i=l(),a=i.store,c=i.updateStore,u=a.nodeStatus,f=(a.schema,a.dataMap),s=a.emitter,p=a.graph,y=(t=td().mark(function e(){var t,r,o,i,a,l;return td().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(function(e){e.isLoading=!0}),null==s||s.emit("canvas:click"),r=th(t=Object.keys(u).filter(function(e,t){return u[e].selected}),f),e.next=6,n({script:r,language:"cypher"});case 6:(o=e.sent).nodes.length>0?(a=(i=to(o,function(e){return{selected:!0}})).nodeStatus,l=i.edgeStatus,c(function(e){var r=ta(p,o,t);e.data=r,e.dataMap=el(r),e.isLoading=!1,e.nodeStatus=a,e.edgeStatus=l})):c(function(e){e.isLoading=!1});case 8:case"end":return e.stop()}},e)}),r=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){tb(i,n,o,a,c,"next",e)}function c(e){tb(i,n,o,a,c,"throw",e)}a(void 0)})},function(){return r.apply(this,arguments)});return o.createElement(ee.ZP,{onClick:y,icon:o.createElement(tp.Z,null),type:"text",style:{width:"100%",justifyContent:"left"}},"CommonNeighbor")};var tm=r(60371);let tv=function(e){var t=l(),r=t.store,n=t.updateStore,i=r.nodeStatus,a=r.emitter;return o.createElement(ee.ZP,{onClick:function(){null==a||a.emit("canvas:click");var e=Object.keys(i).filter(function(e,t){return i[e].selected});n(function(t){var r={nodes:t.data.nodes.filter(function(t){return!e.includes(t.id)}),edges:t.data.edges.filter(function(t){return!e.includes(t.source)&&!e.includes(t.target)})};t.data=r,t.dataMap=el(r)})},icon:o.createElement(tm.Z,null),type:"text",style:{width:"100%",justifyContent:"left"}},"Delete Vertex")};var tS=r(63730),tO=r(58615),tj=r(72905);function tw(e){return(tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tE(Object(r),!0).forEach(function(t){tP(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tP(e,t,r){var n;return(n=function(e,t){if("object"!=tw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tw(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==tw(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tA(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let tD=function(e){var t=e.onSelect,r=e.title,n=e.placement,a=l(),c=a.store,u=a.updateStore,f=a.id,s=c.graph,p=(0,i.F_)().isLight,y=(0,o.useRef)(null),d=tk((0,o.useState)(!1),2),b=d[0],h=d[1],g=function(e){var r=e.reduce(function(e,t){return tx(tx({},e),{},tP({},t.id,{selected:!0}))},{});u(function(e){e.nodeStatus=r}),t&&t(e)};(0,o.useEffect)(function(){var e=function(e){("Escape"===e.key||"Enter"===e.key)&&h(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[]),(0,o.useEffect)(function(){var e=(0,tj.Z)(y.current);if(b&&s){var t=(s.graphData()||{}).nodes,r=void 0===t?[]:t,n=(0,tO.Dm)().extent([[0,0],[e.node().clientWidth,e.node().clientHeight]]).on("end",function(e){if(e.selection){var t=tk(e.selection,2),n=tk(t[0],2),o=n[0],i=n[1],a=tk(t[1],2),c=a[0],u=a[1],l=s.screen2GraphCoords(o,i,0),f=s.screen2GraphCoords(c,u,0);g(r.filter(function(e){return e.x>=l.x&&e.x<=f.x&&e.y>=l.y&&e.y<=f.y}))}});e.append("g").attr("class","brush").call(n)}return function(){e.select(".brush").remove()}},[b,t,s]);var m=document.getElementById("GRAPH_".concat(f));return m?o.createElement(o.Fragment,null,o.createElement(K.Z,{placement:void 0===n?"left":n,title:o.createElement(O.Z,{id:"".concat(void 0===r?"Select nodes by box selection":r)})},o.createElement(ee.ZP,{icon:o.createElement(i.PJ.jn,{style:{color:p?"#000":"#ddd"}}),type:"text",onClick:function(){h(function(e){return!e})}})),tS.createPortal(o.createElement("svg",{ref:y,style:b?{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"block",background:"rgba(0, 0, 0, 0.05)"}:{display:"none"}}),m)):null};var tC=r(61445);let tL=function(e){return l().store.isLoading?o.createElement("div",{style:{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(0,0,0,0.1)"}},o.createElement(tC.Z,null)):null};var tZ=r(61796);function tT(e){return(tT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tI(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=tT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tT(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tT(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let t_=function(e){var t=l(),r=t.store,n=t.updateStore,i=r.nodeStatus,a=r.graph,c=(r.dataMap,r.emitter);return o.createElement(ee.ZP,{onClick:function(){null==c||c.emit("canvas:click");var e=Object.keys(i).filter(function(e,t){return i[e].selected})[0];if(a&&e){var t=tN(a.graphData(),e);n(function(e){e.data=t,e.dataMap=el(t)})}},icon:o.createElement(tZ.Z,null),type:"text",style:{width:"100%",justifyContent:"left"}},"Delete LeafNodes")};var tN=function(e,t){var r=e.nodes,n=e.links,o=new Map;n.forEach(function(e){o.has(e.source.id)||o.set(e.source.id,[]),o.has(e.target.id)||o.set(e.target.id,[]),o.get(e.source.id).push(e),o.get(e.target.id).push(e)});var i=new Set,a=new Set;(o.get(t)||[]).forEach(function(e){var r=e.source.id===t?e.target:e.source,n=o.get(r.id)||[],c=e.source.id===e.target.id;1!==n.length||c||(i.add(r.id),a.add(e))});var c=n.filter(function(e){return!(a.has(e)&&e.source.id!==e.target.id)}).map(function(e){return tM(tM({},e),{},{source:e.source.id,target:e.target.id})});return{nodes:r.filter(function(e){return!i.has(e.id)}),edges:c}},tF=r(96200);let tR=function(e){var t=e.title,r=void 0===t?o.createElement(O.Z,{id:"Export graph json"}):t,n=e.placement,a=l().store.data;return o.createElement(K.Z,{title:r,placement:void 0===n?"left":n},o.createElement(ee.ZP,{onClick:function(){i.cQ.createDownload(JSON.stringify({nodes:a.nodes,edges:a.edges},null,2),"graph.json")},icon:o.createElement(tF.Z,null),type:"text"}))};function tz(e){return(tz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tG(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=tz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tz(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tz(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tH(e){var t=new Map,r=new Map;return e.nodes.forEach(function(e){var n=e.id;r.set(n,tQ(tQ({},e),{},{neighbors:[],inNeighbors:[],outNeighbors:[],inEdges:[],outEdges:[]})),t.set(n,r.get(n))}),e.edges.forEach(function(e,n){var o=e.source.id||e.source,i=e.target.id||e.target,a=e.id;if(!a)throw Error("edge id is required");var c=r.get(o),u=r.get(i);if(t.has(a)||t.set(a,e),!c||!u){console.log("edge source or target node not found",o,i);return}c.outEdges.push(a),c.outNeighbors.push(i),u.inEdges.push(a),u.inNeighbors.push(o),c.neighbors.push(i),u.neighbors.push(o)}),t}function tU(e){return(tU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tB(Object(r),!0).forEach(function(t){t$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function t$(e,t,r){var n;return(n=function(e,t){if("object"!=tU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tU(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==tU(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let tV=function(){var e=l(),t=e.store,r=e.updateStore,n=t.emitter,i=t.data,a=t.graph;(0,o.useEffect)(function(){if(n&&a){var e=tH(i);n.on("node:click",function(t){var n=t.id,o=e.get(n),i=o.outNeighbors,a=o.outEdges,c=i.reduce(function(e,t){return tW(tW({},e),{},t$({},t,{hovering:!0}))},t$({},n,{selected:!0})),u=a.reduce(function(e,t){return tW(tW({},e),{},t$({},t,{selected:!0}))},{});t&&r(function(e){e.nodeStatus=c,e.edgeStatus=u})})}return function(){null==n||n.off("node:click")}},[n,i,a])};function tY(e){return(tY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tq(e,t,r){var n;return(n=function(e,t){if("object"!=tY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tY(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==tY(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let tJ=function(){var e=l(),t=e.store,r=e.updateStore,n=t.emitter,i=t.data,a=t.graph;(0,o.useEffect)(function(){if(n&&a){var e=tH(i);n.on("edge:click",function(t){var n=t.id,o=e.get(n),i=o.source,a=o.target;t&&r(function(e){e.nodeStatus=tq(tq({},i,{hovering:!0}),a,{hovering:!0}),e.edgeStatus=tq({},n,{selected:!0})})})}return function(){null==n||n.off("edge:click")}},[n,i,a])},tX=function(e){return tV(),tJ(),null};var tK=r(69745);let t0=function(e){var t=l(),r=t.updateStore,n=t.store.graph;return o.createElement(K.Z,{title:"Clear Canvas",placement:"left"},o.createElement(ee.ZP,{onClick:function(){r(function(e){e.data={nodes:[],edges:[]},e.source={nodes:[],edges:[]}}),n&&(n.zoomToFit(),n.zoom(6))},icon:o.createElement(tK.Z,null),type:"text"}))};var t1=r(32636);function t2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let t3=function(e){var t,r=l().store,n=r.graph,a=r.source,c=r.data,u=function(e){if(Array.isArray(e))return e}(t=o.useState(!1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{for(i=(r=r.call(e)).next;!(u=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,2)||function(e,t){if(e){if("string"==typeof e)return t2(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t2(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),f=u[0],s=u[1];return o.createElement(K.Z,{title:f?"Merge Edges":"UnMerge Edges",placement:"left"},o.createElement(ee.ZP,{onClick:function(){if(n){if(f)n.graphData(i.cQ.fakeSnapshot({nodes:a.nodes,links:a.edges}));else{var e,t,r,o=(e=i.cQ.fakeSnapshot(c),t={},r={},e.edges.forEach(function(e){e.nodePairId=e.source<=e.target?e.source+"_"+e.target:e.target+"_"+e.source;var n=e.source===e.target?t:r;n[e.nodePairId]||(n[e.nodePairId]=[]),n[e.nodePairId].push(e)}),Object.keys(t).forEach(function(e){var r=t[e],n=r.length-1;r[n]._style_curvature=1;for(var o=.7/n,i=0;i<n;i++)r[i]._style_curvature=.3+i*o}),Object.keys(r).filter(function(e){return r[e].length>1}).forEach(function(e){var t=r[e],n=t.length-1,o=t[n];o._style_curvature=.3;for(var i=.6/n,a=0;a<n;a++)t[a]._style_curvature=-.3+a*i,o.source!==t[a].source&&(t[a]._style_curvature*=-1)}),e),u=o.nodes,l=o.edges;n.linkCurvature("_style_curvature"),n.graphData({links:l,nodes:u})}}s(!f)},icon:o.createElement(t1.Z,null),type:"text"}))};function t5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let t8=function(e){var t,r=l().store.graph,n=function(e){if(Array.isArray(e))return e}(t=o.useState(!1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{for(i=(r=r.call(e)).next;!(u=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,2)||function(e,t){if(e){if("string"==typeof e)return t5(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t5(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=n[0],a=n[1];return o.createElement(K.Z,{title:i?"Force Mode":"Dagre Mode",placement:"left"},o.createElement(ee.ZP,{onClick:function(){r&&(i?r.dagMode(null):r.dagMode("lr")),a(!i)},icon:o.createElement(tp.Z,null),type:"text"}))};var t6=r(90895);function t4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let t9=function(e){var t,r=l().store.graph,n=function(e){if(Array.isArray(e))return e}(t=o.useState(!1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{for(i=(r=r.call(e)).next;!(u=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,2)||function(e,t){if(e){if("string"==typeof e)return t4(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t4(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=n[0],a=n[1];return o.createElement(K.Z,{title:i?"unFixed nodes when dragging":"Fixed nodes when dragging",placement:"left"},o.createElement(ee.ZP,{onClick:function(){r&&(i?r.onNodeDragEnd(function(e){e.fx=void 0,e.fy=void 0}):r.onNodeDragEnd(function(e){e.fx=e.x,e.fy=e.y})),a(!i)},icon:o.createElement(t6.Z,{rotate:i?0:90}),type:"text"}))}},93795:(e,t,r)=>{r.d(t,{ZP:()=>y,qp:()=>p});var n=r(55540),o=r(52983),i=r(99138);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,n.Fl)(!1);var l=o.createContext({id:""}),f=new Map,s=new Map;function p(e){var t=(0,o.useContext)(l).id;e&&(t=e);var r=s.get(t);return{store:new Proxy(u({},f.get(t)),{get:function(e,t){if(t in e)return r(function(e){return e[t]});console.error("prop ".concat(t.toString()," not exist"))}}),updateStore:r(function(e){return e.updateStore}),id:t}}window.GLOBAL_USE_STORE_MAP=s,window.GLOBAL_INITIAL_STORE_MAP=f;let y=function(e){var t,r,a=e.children,c=e.store,p=e.id,y=(0,o.useMemo)(function(){return p||"".concat(Math.random().toString(36).substr(2))},[]);return t=y,r=c,f.has(t)||(f.set(t,r),s.set(t,(0,i.U)(function(e,t){return u(u({},r),{},{updateStore:function(r){e((0,n.Uy)(t(),function(e){try{r(e)}catch(e){console.error("Error updating store:",e)}}))}})}))),o.createElement(l.Provider,{value:{id:y}},a)}}}]);