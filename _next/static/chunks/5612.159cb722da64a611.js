"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5612],{35001:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(52983),o=r(66221),i=r(41135);let a=function(e){var t=e.breadcrumb,r=e.children;return n.createElement("div",{style:{boxSizing:"border-box",padding:"20px",height:"calc(100% - 50px)",background:"#fff",position:"relative",overflowY:"scroll"}},n.createElement(o.Z,null,n.createElement(i.Z,{items:t,style:{fontSize:"18px",marginLeft:"8px"}})),r)}},66221:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(63730);let o=function(e){var t=e.children;return n.createPortal(t,document.getElementById("header-breadcrumb"))}},58688:(e,t,r)=>{r.d(t,{W2:()=>x.Z,nu:()=>w}),r(66221);var n=r(52983),o=r(29625),i=r(17627),a=r(51430),c=r(98117),l=r(36565),u=r(14985),s=r(96489),f=r(660),p=r(65369),d=r(45099);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){y=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,c,l=Object.create((r&&r.prototype instanceof g?r:g).prototype);return o(l,"_invoke",{value:(a=new k(i||[]),c=p,function(r,o){if(c===d)throw Error("Generator is already running");if(c===m){if("throw"===r)throw o;return{value:e,done:!0}}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var l=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),v;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var c=a.arg;return c?c.done?(n[r.resultName]=c.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):c:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,v)}(i,a);if(l){if(l===v)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=m,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=d;var u=f(t,n,a);if("normal"===u.type){if(c=a.done?m:"suspendedYield",u.arg===v)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(c=m,a.method="throw",a.arg=u.arg)}})}),l}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",m="completed",v={};function g(){}function b(){}function w(){}var x={};u(x,a,function(){return this});var E=Object.getPrototypeOf,O=E&&E(E(T([])));O&&O!==r&&n.call(O,a)&&(x=O);var _=w.prototype=g.prototype=Object.create(x);function S(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function j(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,c){var l=f(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==h(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(s).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,c)})}c(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(h(t)+" is not iterable")}return b.prototype=w,o(_,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=u(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(j.prototype),u(j.prototype,c,function(){return this}),t.AsyncIterator=j,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},S(_),u(_,l,"Generator"),u(_,a,function(){return this}),u(_,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function g(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){r(e);return}c.done?t(l):Promise.resolve(l).then(n,o)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let w=function(e){var t,r,h,m=e.datasetId,w=(0,p.s0)(),x=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)({more:!1,dataSource:[]}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,2)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),E=x[0],O=x[1],_=(0,n.useRef)(null),S=(0,n.useRef)(""),j=E.more,P=E.dataSource,L=(r=y().mark(function e(){var t,r,n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(_.current),e.next=3,(0,d.Rt)(m);case 3:(r=(t=e.sent.map(function(e){return{id:e.node_name,progress:(e.papers,e.progress)}})).map(function(e){return e.progress}).join("_"))!==S.current&&(S.current=r,O(function(e){return v(v({},e),{},{dataSource:t})})),t.every(function(e){return 100===e.progress})||(n=setTimeout(function(){L()},1e3),_.current=n);case 9:case"end":return e.stop()}},e)}),h=function(){var e=this,t=arguments;return new Promise(function(n,o){var i=r.apply(e,t);function a(e){g(i,n,o,a,c,"next",e)}function c(e){g(i,n,o,a,c,"throw",e)}a(void 0)})},function(){return h.apply(this,arguments)});(0,n.useEffect)(function(){return L(),function(){clearTimeout(_.current)}},[]);var k=function(e){console.log(e);var t=e.id;w("/dataset/cluster?datasetId=".concat(m,"&entityId=").concat(t))},T=[{title:"Entity",key:"id",dataIndex:"id"},{title:"Progress",dataIndex:"progress",render:function(e){return n.createElement(o.Z,{percent:e,size:"small",status:"active",style:{width:"80%"}})}},{title:"Clustered",key:"summarized",render:function(e){var t=e.summarized;return n.createElement(i.Z,{checked:t,size:"small",disabled:!0})}},{title:"Operator",render:function(e){var t=e.summarized;return n.createElement(a.Z.Link,{disabled:t,onClick:function(){k(e)}},"cluster")},fixed:"right",width:80}],A=j?n.createElement(s.Z,null):n.createElement(f.Z,null);return n.createElement("div",{style:{height:"100%",width:"100%"}},n.createElement(c.Z,{justify:"space-between",style:{paddingBottom:"8px"}},n.createElement(a.Z.Text,null,"Extract entities and relationships"),n.createElement(l.ZP,{icon:A,type:"text",onClick:function(){O(v(v({},E),{},{more:!E.more}))}},"More")),n.createElement(u.Z,{size:"small",dataSource:P,columns:T,style:{width:"100%",height:j?"auto":"160px",overflow:"hidden",transition:"all 0.3s ease"}}))};var x=r(35001)},34584:(e,t,r)=>{r.d(t,{y:()=>c});var n=r(91359);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var n,i;n=t,i=r[t],(n=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var c=function(e){var t=e||{},r=t.nodes,o=t.edges;return{nodes:(void 0===r?[]:r).map(function(e){return{id:e.name,type:"graph-node",data:a({label:e.name},e),position:{x:0,y:0}}}),edges:(void 0===o?[]:o).map(function(e){return{id:e.name||n.cQ.uuid(),type:"graph-edge",source:e.source,target:e.target,data:a({label:e.name},e)}})}}},69522:(e,t,r)=>{r.d(t,{ZP:()=>rC,qp:()=>f.qp});var n=r(52983),o=r(18688),i=r(70820),a=r(1693),c=r(91359);let l=(0,n.memo)(function(e){e.id;var t=e.data,r=(t||{})._fromEdge,i=r?{top:"30px",backgroundColor:"transparent",border:"none"}:{top:"60px",backgroundColor:"transparent",border:"none"};return n.createElement("div",null,n.createElement(o.HH,{type:"target",position:o.Ly.Left,id:"left",style:i}),n.createElement(o.HH,{type:"target",position:o.Ly.Right,id:"left-revert",style:i}),n.createElement(o.HH,{type:"source",position:o.Ly.Right,id:"right",style:i}),n.createElement(o.HH,{type:"source",position:o.Ly.Left,id:"right-revert",style:i}),n.createElement(c.OQ,{data:t,_fromEdge:r}))});var u=r(8191),s=r(76470),f=r(93795);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m=u.Z.useToken,v="100px",g="116px",b={handler:{width:g,height:g,zIndex:0,top:"50%",left:"50%",transform:"translate(-50%, -50%)",transition:"all 0.3s ease"}},w={"table-node":l,"graph-node":(0,n.memo)(function(e){var t,r=e.data,i=void 0===r?{}:r,a=e.id,l=i.label,u=i.filelocation,p=i.disabled,d=(0,f.qp)(),g=d.store,w=d.updateStore,x=g.currentId,E=g.theme,O=g.elementOptions,_=(0,c.F_)().isLight,S=(0,c.fp)(),j=S.toggleRightSide,P=S.toggleLeftSide,L=m().token,k=a===x,T=!O.isConnectable,A=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)({isHover:!1,contentEditable:!1}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,2)||function(e,t){if(e){if("string"==typeof e)return y(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),I=A[0],D=A[1],N=T?{cursor:"not-allow",background:"transparent",border:"none"}:h(h({},b.handler),{},{border:I.isHover?"2px dashed ".concat(E.primaryColor):"none",background:I.isHover?"#fafafa":"transparent",cursor:"copy"});return n.createElement("div",{"data-nodeid":a,style:{boxSizing:"border-box",width:"100px",height:"100px"},onMouseEnter:function(){T||D(function(e){return h(h({},e),{},{isHover:!0})})},onMouseLeave:function(){T||D(function(e){return h(h({},e),{},{isHover:!1})})},onClick:function(){w(function(e){e.currentType="nodes",e.currentId=a}),j(!1),P(!0)}},n.createElement(o.HH,{type:"target",position:o.Ly.Left,id:"left",style:{background:"transparent",position:"relative",border:"none"}}),n.createElement(o.HH,{type:"source",position:o.Ly.Right,id:"right",style:N}),n.createElement("div",{style:{position:"absolute",top:0,left:0,border:_?k?"4px solid ".concat(E.primaryColor):"2px solid #000":k?"4px solid ".concat(E.primaryColor):"2px solid #d7d7d7",backgroundColor:_?"#fafafa":"#161616",borderRadius:"50%",height:v,width:v,boxSizing:"border-box",zIndex:0,display:"flex",justifyContent:"center",alignItems:"center",fontSize:"20px"},"data-nodeid":a},u&&n.createElement("div",{style:{position:"absolute",top:"0px",right:"-16px"}},n.createElement(s.Z,{style:{color:L.colorSuccessActive,fontSize:20}})),n.createElement(c.sL,{id:a,text:l,onTextChange:function(e){w(function(t){var r=t.nodes.find(function(e){return e.id===a});r&&(r.data.label=e)})},disabled:p,style:{color:_?"#000":"#D7D7D7"}})))})},x=function(e,t){var r=e.sourceX,n=e.sourceY,o=e.targetX,i=e.targetY,a=(n+i)/2;return"M ".concat(r," ").concat(n," Q ").concat((r+o)/2," ").concat(a+t," ").concat(o," ").concat(i)};function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=E(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S(e,t){var r=e.width,n=e.height,o=e.positionAbsolute,i=t.positionAbsolute,a=r/2,c=n/2,l=o.x+a,u=o.y+c,s=i.x+t.width/2,f=i.y+t.height/2,p=(s-l)/(2*a)-(f-u)/(2*c),d=(s-l)/(2*a)+(f-u)/(2*c),h=1/(Math.abs(p)+Math.abs(d)),y=h*p,m=h*d;return{x:a*(y+m)+l,y:c*(-y+m)+u}}function j(e,t){var r=_(_({},e.positionAbsolute),e),n=Math.round(r.x),i=Math.round(r.y),a=Math.round(t.x),c=Math.round(t.y);return a<=n+1?o.Ly.Left:a>=n+r.width-1?o.Ly.Right:c<=i+1?o.Ly.Top:c>=r.y+r.height-1?o.Ly.Bottom:o.Ly.Top}var P=function(e){var t=e.sourceX,r=e.sourceY,n=e.targetX,o=e.targetY,i=e.offset,a=n-t,c=o-r,l=Math.sqrt(a*a+c*c);return{x:t+a/2+-(c/l)*i,y:r+c/2+a/l*i}},L=function(e){var t=e.source,r=e.P1,n=e.P2,o=e.P3,i=e.target,a={x:r.x+(t.x-r.x)/3,y:r.y+(t.y-r.y)/3},c={x:r.x+(n.x-r.x)/3,y:r.y+(n.y-r.y)/3},l={x:o.x+(n.x-o.x)/3,y:o.y+(n.y-o.y)/3},u={x:o.x+(i.x-o.x)/3,y:o.y+(i.y-o.y)/3};return[["M ".concat(t.x,",").concat(t.y),"L ".concat(a.x,",").concat(a.y),"Q ".concat(r.x,",").concat(r.y," ").concat(c.x,",").concat(c.y),"L ".concat(n.x,",").concat(n.y),"L ".concat(l.x,",").concat(l.y),"Q ".concat(o.x,",").concat(o.y," ").concat(u.x,",").concat(u.y),"L ".concat(i.x,",").concat(i.y)].join(" ")]},k=function(e,t){var r=t.x-e.x,n=180/Math.PI*Math.atan2(t.y-e.y,r);return n>90?n-=180:n<-90&&(n+=180),n},T=function(e){var t=e.sourceX,r=e.sourceY,n=e.targetX,o=e.targetY,i=e.offset,a=e.R1,c=void 0===a?20:a,l=e.R2,u=void 0===l?20:l,s=P({sourceX:t,sourceY:r,targetX:n,targetY:o,offset:i}),f=n-t,p=o-r,d=Math.sqrt(f*f+p*p),h=f/d,y=p/d;return{P1:{x:t+h*c+-(i*y),y:r+y*c+i*h},P2:{x:n+-(h*u)+-(i*y),y:o+-(y*u)+i*h},controlPoint:s}},A=function(e){var t=(0,f.qp)().store,r=t.currentId,n=t.theme,o=e===r;return{isSelected:o,markerEnd:o?"url(#arrow-selected)":"url(#arrow)",style:{stroke:(0,c.F_)().isLight?o?n.primaryColor:"#000":o?n.primaryColor:"#d7d7d7",strokeWidth:o?"2px":"1px"}}};function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var N=u.Z.useToken;let C=function(e){var t=e.id,r=e.label,i=e.style,a=e.filelocation,l=e.disabled,u=(0,f.qp)(),p=u.store,d=u.updateStore,h=(0,c.fp)().toggleRightSide,y=N().token,m=p.currentId,v=p.theme,g=t===m,b=(0,c.F_)().isLight;return n.createElement(o.XQ,null,n.createElement("div",{style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=I(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({cursor:"pointer",position:"absolute",fontSize:12,pointerEvents:"all"},i),className:"nodrag nopan"},a&&n.createElement("div",{style:{position:"absolute",right:"-16px",top:"-6px"}},n.createElement(s.Z,{style:{color:y.colorSuccessActive,fontSize:12}})),n.createElement("div",{className:"edgebutton",onClick:function(){d(function(e){e.currentId=t,e.currentType="edges"}),h(!1)},style:{borderRadius:"4px",background:b?g?"".concat(v.primaryColor):"#fff":g?"".concat(v.primaryColor):"#161616",border:b?g?"2px solid ".concat(v.primaryColor):"1px solid #000":g?"2px solid ".concat(v.primaryColor):"1px solid #d7d7d7"}},n.createElement(c.sL,{disabled:l,id:t,text:r||t,onTextChange:function(e){d(function(r){var n=r.edges.find(function(e){return e.id===t});n&&(n.data.label=e)})},style:{color:b?g?"#fff":"#000":g?"#fff":"#D7D7D7",fontSize:"10px",lineHeight:"14px",minHeight:"14px"}}))))};function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=F(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let M=function(e){var t,r,o,i,a=e.id,c=e.style,l=e.data,u=e.sourceX,s=e.sourceY,f=l||{},p=f._extra,d=f.label,h=f.filelocation,y=(p||{}).index,m=void 0===y?0:y,v=A(a),g=v.markerEnd,b=v.style,w=(t=u-33,r=s-40,o=60+40*m,i=t-60,"\n        M ".concat(t," ").concat(r," \n        C ").concat(t+o," ").concat(r-o,", \n          ").concat(i-o," ").concat(r-o,", \n          ").concat(i," ").concat(r)),x={x:u-63,y:s-30*m-80};return n.createElement(n.Fragment,null,n.createElement("path",{id:a,className:"react-flow__edge-path",d:w,markerEnd:g,style:G(G({},c),b)}),n.createElement(C,{filelocation:h,label:d,id:a,style:{transform:"translate(-50%, -50%) translate(".concat(x.x,"px,").concat(x.y,"px)")}}))};function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=z(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var q={"table-edge":function(e){e.source,e.target;var t=e.sourceX,r=e.sourceY,i=e.targetX,a=e.targetY,c=e.sourcePosition,l=e.targetPosition,u=e.markerEnd,s=(e.data,e.style||{}),f=(s._isLoop,s._isPoly,s._isRevert,s._offset),p=x({sourceX:t,sourceY:r,sourcePosition:c,targetX:i,targetY:a,targetPosition:l},void 0===f?0:f);return n.createElement(n.Fragment,null,n.createElement(o.u5,{path:p,markerEnd:u}))},"graph-edge":function(e){var t,r,i,a,l,u=e.id,s=e.source,p=e.target,d=e.style,h=e.data||{},y=h._extra,m=h.label,v=h.filelocation,g=h.disabled,b=(y||{}).offset,w=void 0===b?0:b,x=(0,o.oR)((0,n.useCallback)(function(e){return e.nodeInternals.get(s)},[s])),E=(0,o.oR)((0,n.useCallback)(function(e){return e.nodeInternals.get(p)},[p])),O=(0,f.qp)().store,_=O.currentId,A=O.theme,I=(0,c.F_)().isLight;if(!x||!E)return null;if(s===p)return n.createElement(M,e);var D=u===_,N=(t=S(x,E),r=S(E,x),i=j(x,t),a=j(E,r),{sx:t.x,sy:t.y,tx:r.x,ty:r.y,sourcePos:i,targetPos:a}),F=N.sx,Z=N.sy,G=N.tx,z=N.ty,Y=P({sourceX:F,sourceY:Z,targetX:G,targetY:z,offset:w}),q=T({sourceX:F,sourceY:Z,targetX:G,targetY:z,offset:w}),J=(function(e){if(Array.isArray(e))return e}(l=L({source:{x:F,y:Z},target:{x:G,y:z},P1:q.P1,P2:Y,P3:q.P2}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(c.push(n.value),1!==c.length);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(l,1)||function(e,t){if(e){if("string"==typeof e)return U(e,1);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,1)}}(l,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],H=k({x:F,y:Z},{x:G,y:z});return n.createElement(n.Fragment,null,n.createElement("path",{id:u,className:"react-flow__edge-path",d:J,markerEnd:D?"url(#arrow-selected)":"url(#arrow)",style:R(R({},d),{},{stroke:I?D?A.primaryColor:"#000":D?A.primaryColor:"#d7d7d7",strokeWidth:D?"2px":"1px"})}),n.createElement(C,{id:u,label:m,filelocation:v,disabled:g,style:{transform:"translate(-50%, -50%) translate(".concat(Y.x,"px,").concat(Y.y,"px) rotate(").concat(H,"deg)")}}))}};let J=function(e){var t=e.fromX,r=e.fromY,o=e.toX,i=e.toY;return n.createElement("g",{style:{zIndex:-1,position:"absolute"}},n.createElement("path",{fill:"none",stroke:"#000",strokeWidth:1,className:"animated",d:"M".concat(t,",").concat(r," L ").concat(o,",").concat(i),markerEnd:"url(#arrow-dragging)"}),n.createElement("circle",{cx:o,cy:i,fill:"#fff",r:50,className:"animated",stroke:"#000",strokeWidth:1,strokeDasharray:"10, 5"}))};u.Z.useToken;let H=function(e){var t=e.selectedColor,r=e.color,o=void 0===r?"#000":r;return n.createElement("svg",{id:"arrow-marker-svg",width:"200",height:"200",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:0,left:0,zIndex:-1}},n.createElement("defs",null,n.createElement("marker",{id:"arrow",markerWidth:"10",markerHeight:"10",refX:"8",refY:"3",orient:"auto",markerUnits:"strokeWidth"},n.createElement("path",{d:"M0,0 L0,6 L9,3 z",fill:o})),n.createElement("marker",{id:"arrow-selected",markerWidth:"10",markerHeight:"10",refX:"8",refY:"3",orient:"auto",markerUnits:"strokeWidth"},n.createElement("path",{d:"M0,0 L0,6 L9,3 z",fill:void 0===t?"red":t})),n.createElement("marker",{id:"arrow-dragging",markerWidth:"10",markerHeight:"10",refX:"60",refY:"3",orient:"auto",markerUnits:"strokeWidth"},n.createElement("path",{d:"M0,0 L0,6 L9,3 z",fill:o,className:"animated",strokeDasharray:"10, 5"}))))};var X=r(13778),Q=r(70810),B=r(88428),V=r(96101),$=r(65002),K=r(56184),W=r(39972),ee=o.RX,et=1,er=1,en=function(){return"Vertex_".concat(et++)},eo=function(){return"Edge_".concat(er++)},ei=function(){et=1,er=1},ea=function(e){return JSON.parse(JSON.stringify(e))};function ec(e){return(ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function el(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function es(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=ec(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ec(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ec(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let ef=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{poly:30,loop:10,loopLabelPosition:1},r=t.poly,n=void 0===r?30:r,o=t.loop,i=void 0===o?10:o;t.loopLabelPosition;var a={};e.forEach(function(e,t){var r=es({},e),n=r.source,o=r.target,i="".concat(n,"-").concat(o),c="".concat(o,"-").concat(n);a[i]?a[i].push(r):a[c]?a[c].push(r):a[i]=[r]});var c=Object.values(a),l=[];return c.forEach(function(e){if(e.length>1){var t=e.length%2==0;e.forEach(function(r,o){var c,u=r.source,s=r.target,f=r.data,p="".concat(s,"-").concat(u),d=u===s,h=!!a[p];c=t?n*Math.ceil((o+1)/2):n*Math.ceil((o%2!=0?o+1:o)/2);var y=o%2==0?c:-c,m="poly";h&&(y=-y),d&&(m="loop",y=o*i),l.push(es(es({},r),{},{data:es(es({},f),{},{_extra:{count:e.length,index:o,type:m,isPoly:!0,isLoop:d,offset:y,isRevert:h}})}))})}else{var r=(function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(c.push(n.value),1!==c.length);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,1)||function(e,t){if(e){if("string"==typeof e)return el(e,1);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return el(e,1)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],o=r.source,c=r.target,u=r.data;l.push(es(es({},r),{},{data:es(es({},u),{},{_extra:{count:1,index:0,isLoop:o===c}})}))}}),l};var ep=r(15439),ed=r.n(ep);function eh(e){return(eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ey=["position","key","id","_fromEdge","data"];function em(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ev(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?em(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=eh(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eh(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eh(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):em(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eg=new(ed()).graphlib.Graph;eg.setDefaultEdgeLabel(function(){return{}});var eb={};function ew(e,t){return e.map(function(e){var r=e.position,n=e.key,i=e.id,a=e._fromEdge,c=e.data,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ey);r&&(eb[i]=r);var u=eb[i]||eg.node(e.id)||{x:500*Math.random(),y:500*Math.random()};return{id:i||n,data:ev(ev({},void 0===c?{}:c),l),type:"table"===t?"table-node":"graph-node",_fromEdge:a,targetPosition:o.Ly.Left,sourcePosition:o.Ly.Right,position:r||{x:u.x,y:u.y}}})}function ex(e,t){return ef(e).map(function(e,r){var n=e.id,o=e.source,i=e.target,a=e.data;return{id:n||"".concat(o,"-").concat(i,"-").concat(r),source:o,target:i,type:"table"===t?"smoothstep":"graph-edge",data:a}})}function eE(e){return function(e){if(Array.isArray(e))return eO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return eO(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eO(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var e_=function(e){return JSON.parse(JSON.stringify(e))};let eS=function(){var e=(0,f.qp)(),t=e.store,r=e.updateStore,i=(0,o._K)(),a=i.screenToFlowPosition,c=i.fitBounds;i.fitView;var l=t.displayMode,u=t.nodes,s=t.edges,p=t.hasLayouted,d=t.elementOptions,h=(0,n.useRef)(null),y=(0,n.useRef)(null),m=(0,n.useRef)([]),v=(0,n.useCallback)(function(e,t){var r=t.nodeId;if(h.current=r,!d.isConnectable)return},[]),g=(0,n.useCallback)(function(e){if(h.current&&d.isConnectable){if(e.target.classList.contains("react-flow__pane")){var t=(0,Q.Z)(),n=(0,Q.Z)(),o=a({x:e.clientX,y:e.clientY}),i={id:t,position:{x:o.x-50,y:o.y-50},type:"graph-node",data:{label:en()}};r(function(e){e.nodes=[].concat(eE(e.nodes),[i]),e.edges=[].concat(eE(e.edges),[{id:n,source:h.current,target:t,type:"graph-edge",data:{label:eo()}}])})}else{var c=e.target.dataset.nodeid,u=(0,Q.Z)(),s=eo();r(function(e){e.edges=ex([].concat(eE(e.edges),[{id:u,data:{label:s},source:h.current||"",target:c}]),l)})}}},[a]);return(0,n.useEffect)(function(){if(u.length>0&&!p){var e=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.iterations,o=void 0===n?1e3:n,i=r.center,a=void 0===i?{x:window.innerWidth/2,y:window.innerHeight/2}:i,c=-1*(250*(0===t.length?.5:8)),l=(0,B.Z)(e).force("link",(0,V.Z)(t).id(function(e){return e.id}).distance(250)).force("charge",(0,$.Z)().strength(c)).force("center",(0,K.Z)(a.x,a.y)).force("radial",(0,W.Z)(0,a.x,a.y).strength(.01)).stop(),u=0;u<o;u++)l.tick();return e.forEach(function(e){delete e.index,delete e.vx,delete e.vy,e.position={x:e.x,y:e.y},delete e.x,delete e.y}),t.forEach(function(e){delete e.index,e.source=e.source.id,e.target=e.target.id}),{nodes:e,edges:t,simulation:l}}(ea(u),ea(s));y.current&&clearTimeout(y.current);var t=setTimeout(function(){c(ee(e.nodes),{duration:300})},300);y.current=t,r(function(t){t.hasLayouted=!0,t.nodes=e.nodes,t.edges=e.edges})}},[u,s,p]),(0,n.useEffect)(function(){var e=document.getElementById("arrow-marker-svg"),t=document.querySelector(".react-flow__viewport");e&&t&&t.appendChild(e)},[]),{store:t,updateStore:r,onDoubleClick:function(){c(ee(u),{duration:600})},onEdgesChange:function(e){d.isConnectable&&r(function(t){t.edges=(0,o.yn)(e,e_(t.edges))})},onNodesChange:function(e){var t=e[0].type;d.isConnectable&&"position"!==t&&r(function(t){t.nodes=(0,o.Fb)(e,e_(t.nodes))}),"position"===t&&(e[0].dragging?(m.current=e,r(function(t){t.nodePositionChange=e})):r(function(e){e.nodes=(0,o.Fb)(m.current,e.nodes)}))},onConnectStart:v,onConnectEnd:g,onReactFlowInit:function(e){if(e){var t=e.toObject().nodes;c((0,o.RX)(t),{duration:600})}}}};var ej=r(23092);function eP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let eL=function(e){var t,r=eS(),l=r.store,u=r.onDoubleClick,s=r.onEdgesChange,f=r.onNodesChange,p=r.onConnectStart,d=r.onConnectEnd,h=r.onReactFlowInit,y=l.nodes,m=l.edges,v=l.theme,g=l.collapsed,b=l.appMode,x=l.nodePositionChange,E=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)({isLocked:!1}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eP(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eP(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();E[0],E[1];var O=(0,c.F_)().isLight,_=0===y.length,S=O?g.left&&g.right?"#fff":"#f4f5f5":"#161616",j=n.createElement(ej.Z,{id:"Start sketching a model, a vertex label is a named grouping or categorization of nodes within the graph dataset",values:{icon:n.createElement(X.Z,null)}}),P="PURE"===b,L=0===x.length?y:(0,o.Fb)(x,y);return n.createElement("div",{style:{height:"100%",width:"100%"}},n.createElement("div",{style:{height:"100%",width:"100%",position:"absolute"}},n.createElement(o.x$,{nodes:L,edges:m,onNodesChange:f,onEdgesChange:s,nodeTypes:w,edgeTypes:q,connectionLineComponent:J,onConnectStart:p,onConnectEnd:d,zoomOnDoubleClick:!1,nodesDraggable:!0,proOptions:{hideAttribution:!0},onDoubleClick:u,minZoom:.01,onInit:h},n.createElement(H,{selectedColor:v.primaryColor,color:O?"#000":"#d7d7d7"}),!P&&n.createElement(i.A,{style:{background:S}}),_&&n.createElement(c.mE,{description:j,isLight:!O}),!P&&n.createElement(a.a,{style:{backgroundColor:O?"":"#161616"}}))))};var ek=r(19828),eT=r(28656),eA=r(98117),eI=r(51430),eD=r(77781);function eN(e){var t=e.type,r=e.id,n=(0,f.qp)().updateStore;return{handleChangeLabel:function(e){var o=e.target.value;n(function(e){e.displayMode="table","edges"===t&&(e.edges=e.edges.map(function(e){return e.id===r&&(e.data.label=o),e})),"nodes"===t&&(e.nodes=e.nodes.map(function(e){return e.id===r&&(e.data.label=o),e}))})},handleDataFieldsChange:function(e,t,o){n(function(n){n.edges=n.edges.map(function(n){if(n.id===r){var i=e.index,a=e.token;n.data[t]={key:r,index:i,name:o,token:a}}return n})})},handleProperty:function(e){n(function(n){"edges"===t&&(n.edges=n.edges.map(function(t){return t.id===r&&(t.data.properties=e),t})),"nodes"===t&&(n.nodes=n.nodes.map(function(t){return t.id===r&&(t.data.properties=e),t}))})}}}var eC=r(73569),eF=r(46276),eZ=r(36565),eG=r(60371),eM=r(81040),ez=function(e){var t=e.type,r=e.id,n=(0,f.qp)().updateStore;return{handleChangeUpload:function(e,o){var i=o||{},a=i.dataFields,l=void 0===a?[]:a,u=i.delimiter,s=void 0===u?"":u;n(function(n){n[t].forEach(function(n){if(n.id===r){var o;if(n.data.filelocation=e,n.data.dataFields=l,n.data.delimiter=s,null===(o=n.data.properties)||void 0===o||o.forEach(function(e){e.token=e.name,e.index=l.findIndex(function(t){return t===e.name})}),"edges"===t){var i=c.cQ.inferredGraphFields(l),a=i.sourceField,u=i.targetField;console.log(l,i),n.data.source_vertex_fields={index:null==l?void 0:l.findIndex(function(e){return e===a}),token:a||""},n.data.target_vertex_fields={index:null==l?void 0:l.findIndex(function(e){return e===u}),token:u||""}}}})})},handleChangeInput:function(e){n(function(n){n[t].forEach(function(t){if(t.id===r){var n;t.data.dataFields=[],t.data.filelocation=e.target.value,null===(n=t.data.properties)||void 0===n||n.forEach(function(e,t){e.token="",e.index=t})}})})},handleDeleteLocation:function(){n(function(e){e[t].forEach(function(e){if(e.id===r){var n;e.data.filelocation="",e.data.dataFields=[],e.data.delimiter="",null===(n=e.data.properties)||void 0===n||n.forEach(function(e,t){e.token="",e.index=t}),"edges"===t&&(e.data.source_vertex_fields={index:0,token:""},e.data.target_vertex_fields={index:0,token:""})}})})}}},eY=r(52546),eR=r(89622),eU=r(29625);function eq(e){return(eq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eJ(){eJ=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,c,l=Object.create((r&&r.prototype instanceof m?r:m).prototype);return o(l,"_invoke",{value:(a=new P(i||[]),c=p,function(r,o){if(c===d)throw Error("Generator is already running");if(c===h){if("throw"===r)throw o;return{value:e,done:!0}}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var l=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var c=a.arg;return c?c.done?(n[r.resultName]=c.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):c:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(i,a);if(l){if(l===y)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=d;var u=f(t,n,a);if("normal"===u.type){if(c=a.done?h:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(c=h,a.method="throw",a.arg=u.arg)}})}),l}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",h="completed",y={};function m(){}function v(){}function g(){}var b={};u(b,a,function(){return this});var w=Object.getPrototypeOf,x=w&&w(w(L([])));x&&x!==r&&n.call(x,a)&&(b=x);var E=g.prototype=m.prototype=Object.create(b);function O(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,c){var l=f(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==eq(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(s).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,c)})}c(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(eq(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},O(_.prototype),u(_.prototype,c,function(){return this}),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},O(E),u(E,l,"Generator"),u(E,a,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function eH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eH(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=eq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eq(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eq(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eQ(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){r(e);return}c.done?t(l):Promise.resolve(l).then(n,o)}function eB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eV=function(e){return new Promise(function(t){return setTimeout(t,e)})};let e$=function(e){var t,r,o,i=e.file,a=function(e){if(Array.isArray(e))return e}(t=n.useState({progress:0}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eB(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eB(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=a[0],l=a[1],u=c.progress,s=(r=eJ().mark(function e(){var t,r,n,o,a,c;return eJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=i.size,r=navigator.connection.downlink/2*1048576,n=50,console.log((o=Math.round(t/r*1e3))/n),a=eJ().mark(function e(){var t;return eJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eV(o/n);case 2:t=Math.round((c+1)/n*99),l(function(e){return eX(eX({},e),{},{progress:t})});case 4:case"end":return e.stop()}},e)}),c=0;case 7:if(!(c<n)){e.next=12;break}return e.delegateYield(a(),"t0",9);case 9:c++,e.next=7;break;case 12:case"end":return e.stop()}},e)}),o=function(){var e=this,t=arguments;return new Promise(function(n,o){var i=r.apply(e,t);function a(e){eQ(i,n,o,a,c,"next",e)}function c(e){eQ(i,n,o,a,c,"throw",e)}a(void 0)})},function(){return o.apply(this,arguments)});return n.useEffect(function(){s()},[]),n.createElement(eU.Z,{percent:u,size:"small",status:"active",style:{margin:"2px 4px 0px 6px"}})};function eK(e){return(eK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eW(){eW=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,c,l=Object.create((r&&r.prototype instanceof m?r:m).prototype);return o(l,"_invoke",{value:(a=new P(i||[]),c=p,function(r,o){if(c===d)throw Error("Generator is already running");if(c===h){if("throw"===r)throw o;return{value:e,done:!0}}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var l=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var c=a.arg;return c?c.done?(n[r.resultName]=c.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):c:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(i,a);if(l){if(l===y)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=d;var u=f(t,n,a);if("normal"===u.type){if(c=a.done?h:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(c=h,a.method="throw",a.arg=u.arg)}})}),l}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",h="completed",y={};function m(){}function v(){}function g(){}var b={};u(b,a,function(){return this});var w=Object.getPrototypeOf,x=w&&w(w(L([])));x&&x!==r&&n.call(x,a)&&(b=x);var E=g.prototype=m.prototype=Object.create(b);function O(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,c){var l=f(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==eK(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(s).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,c)})}c(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(eK(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},O(_.prototype),u(_.prototype,c,function(){return this}),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},O(E),u(E,l,"Generator"),u(E,a,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function e0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function e1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e0(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=eK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eK(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eK(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e0(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function e2(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){r(e);return}c.done?t(l):Promise.resolve(l).then(n,o)}function e5(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){e2(i,n,o,a,c,"next",e)}function c(e){e2(i,n,o,a,c,"throw",e)}a(void 0)})}}function e3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var e6=eI.Z.Text,e8=(0,n.forwardRef)(function(e,t){var r,o,i,a=e.schema,l=e.type,u=e.handleUploadFile,s=a.id,f=a.data,p=f.filelocation;f.isBind;var d=(0,eM.Z)(),h=ez({id:s,type:l}),y=h.handleChangeInput,m=h.handleChangeUpload,v=h.handleDeleteLocation,g=function(e){if(Array.isArray(e))return e}(r=(0,n.useState)({isLoading:!1,file:new File([],""),size:""}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(r,2)||function(e,t){if(e){if("string"==typeof e)return e3(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e3(e,2)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),b=g[0],w=g[1],x=b.isLoading,E=b.size,O=b.file;(0,n.useImperativeHandle)(t,function(){return{upload:_}});var _=(o=e5(eW().mark(function e(t){var r,n,o,i,a,l,s;return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w(function(e){return e1(e1({},e),{},{isLoading:!0,file:t,size:c.cQ.getFileSize(t.size)})}),e.next=3,u(t);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return n=void 0===(r=e.t0.file_path)?"":r,e.next=11,c.cQ.parseFile(t);case 11:o=e.sent,a=(i=c.cQ.extractHeaderAndDelimiter(o)).header,l=i.quoting,s=i.delimiter,w(function(e){return e1(e1({},e),{},{isLoading:!1})}),m(n,{dataFields:a,quoting:l,delimiter:s});case 15:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),S=(i=e5(eW().mark(function e(t){return eW().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:_(t.file);case 2:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),j=x?n.createElement(eY.Z,null):n.createElement(eR.Z,null);return n.createElement("div",{style:{borderRadius:"0px 0px 8px 8px"}},n.createElement(eA.Z,{vertical:!0,gap:8},n.createElement(e6,null,"Location"),n.createElement(eA.Z,{justify:"space-between",align:"center"},n.createElement(ek.Z.Compact,{size:"small",style:{width:"100%"}},n.createElement(n.Fragment,null,n.createElement(eC.Z,{title:x?"The file size is ".concat(E,", so this may take a bit of time to process. Please be patient..."):"Upload"},n.createElement(eF.Z,{showUploadList:!1,customRequest:S},n.createElement(eZ.ZP,{icon:j},n.createElement("span",{style:{fontSize:"12px"}},n.createElement(ej.Z,{id:x?"Uploading...":"Upload"}))))),x?n.createElement(e$,{file:O}):p?n.createElement(eD.Z,{style:{width:"100%"},disabled:!0,value:p}):n.createElement(eD.Z,{style:{width:"100%"},defaultValue:p,placeholder:d.formatMessage({id:"Please manually input the odps file location"}),onBlur:y}))),n.createElement(ek.Z,{size:0},p&&n.createElement(eC.Z,{title:"delete and re-upload"},n.createElement(eZ.ZP,{type:"text",size:"small",icon:n.createElement(eG.Z,{onClick:v})}))))))}),e7=function(e,t,r){var n,o,i,a,c,l;return e.forEach(function(e){var n=e.id,o=e.data,u=o.properties,s=void 0===u?[]:u,f=o.label;n===t&&(i=f,c=s.find(function(e){return e.primaryKey})),n===r&&(a=f,l=s.find(function(e){return e.primaryKey}))}),{source_label:i,target_label:a,target_primary_key:null===(n=l)||void 0===n?void 0:n.name,source_primary_key:null===(o=c)||void 0===o?void 0:o.name}};let e9=function(e){var t=e.id,r=e.source,o=e.target,i=e.mappingColumn,a=e.source_vertex_fields,l=e.target_vertex_fields,u=(0,f.qp)().store.nodes,s=eN({type:"edges",id:t}).handleDataFieldsChange,p=e7(u,r,o),d=p.source_label,h=p.target_label,y=p.target_primary_key,m=p.source_primary_key;return n.createElement(n.Fragment,null,n.createElement(eA.Z,{justify:"space-between",gap:"12px",align:"center"},n.createElement(eA.Z,{vertical:!0,gap:"small",flex:"1"},n.createElement(eI.Z.Text,null,n.createElement(ej.Z,{id:"Source"})),n.createElement(eD.Z,{value:d,disabled:!0,size:"small"})),i&&n.createElement(eA.Z,{vertical:!0,gap:"small"},n.createElement(eI.Z.Text,null,n.createElement(ej.Z,{id:"Data Fields"})),n.createElement(c.c4,{value:a,onChange:function(e){return s(e,"source_vertex_fields",m)},componentType:(null==i?void 0:i.type)||"Select",options:(null==i?void 0:i.options)||[]}))),n.createElement(eA.Z,{justify:"space-between",gap:"12px",style:{marginTop:"4px"}},n.createElement(eA.Z,{vertical:!0,gap:"small",flex:"1"},n.createElement(eI.Z.Text,null,n.createElement(ej.Z,{id:"Target"})),n.createElement(eD.Z,{value:h,disabled:!0,size:"small"})),i&&n.createElement(eA.Z,{vertical:!0,gap:"small"},n.createElement(eI.Z.Text,null,n.createElement(ej.Z,{id:"Data Fields"})),n.createElement(c.c4,{value:l,onChange:function(e){return s(e,"target_vertex_fields",y)},componentType:(null==i?void 0:i.type)||"Select",options:(null==i?void 0:i.options)||[]}))))};var e4=(0,n.forwardRef)(function(e,t){var r=e.schema,o=e.type,i=e.appMode,a=e.queryPrimitiveTypes,l=e.handleUploadFile,u=r.id,s=r.source,f=r.target,p=r.data||{},d=p.dataFields,h=p.properties,y=p.label,m=p.source_vertex_fields,v=p.target_vertex_fields,g=p.disabled,b=void 0!==g&&g,w=eN({type:o,id:u}),x=w.handleChangeLabel,E=w.handleProperty,O="DATA_IMPORTING"===i?{options:(null==d?void 0:d.map(function(e){return{label:e,value:e}}))||[]}:null;return n.createElement("div",null,n.createElement(eA.Z,{vertical:!0,gap:12,style:{margin:"0px 12px"}},"DATA_IMPORTING"===i?n.createElement(e8,{ref:t,schema:r,type:o,handleUploadFile:l}):n.createElement(n.Fragment,null,n.createElement(eI.Z.Text,null,n.createElement(ej.Z,{id:"Label"})),n.createElement(eD.Z,{value:y,onChange:x,disabled:b})),"edges"===o&&n.createElement(e9,{id:u,source:s,target:f,source_vertex_fields:m,target_vertex_fields:v,mappingColumn:O}),n.createElement(c.yF,{properties:void 0===h?[]:h,onChange:E,typeColumn:{options:a()},disabled:b,mappingColumn:O})))}),te=r(67632),tt=r(28826),tr=u.Z.useToken,tn=window.GS_ENGINE_TYPE;function to(e){var t=e.appMode,r=e.type,n=e.properties,o=void 0===n?[]:n,i=e.filelocation;if("DATA_IMPORTING"===t){if(!i){if("nodes"===r)return"This type of vertex has not been bound to a data source yet";if("edges"===r)return"This type of edges has not been bound to a data source yet"}return null}if("DATA_MODELING"===t){if("nodes"===r){if(!o.length)return"A vertex must have at least one property.";if(!o.some(function(e){return e.primaryKey}))return"A vertex must have a primary key.";if(!o.every(function(e){return e.type}))return"Please select a primate type."}if("edges"===r){if("interactive"===tn&&o.length>1)return"A edge can only have one property.";if(!o.every(function(e){return e.type}))return"Please select a primate type."}}return null}let ti=function(e){var t=e.appMode,r=to({appMode:void 0===t?"DATA_IMPORTING":t,type:e.type,properties:e.properties,filelocation:e.filelocation}),o=tr().token;return r?n.createElement(eC.Z,{title:n.createElement(ej.Z,{id:"".concat(r)})},n.createElement(eZ.ZP,{type:"text",size:"small",icon:n.createElement(tt.Z,{style:{color:o.colorErrorActive}})})):null};var ta=r(52092);function tc(e){return(tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tl(){tl=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,c,l=Object.create((r&&r.prototype instanceof m?r:m).prototype);return o(l,"_invoke",{value:(a=new P(i||[]),c=p,function(r,o){if(c===d)throw Error("Generator is already running");if(c===h){if("throw"===r)throw o;return{value:e,done:!0}}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var l=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var c=a.arg;return c?c.done?(n[r.resultName]=c.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):c:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(i,a);if(l){if(l===y)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=d;var u=f(t,n,a);if("normal"===u.type){if(c=a.done?h:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(c=h,a.method="throw",a.arg=u.arg)}})}),l}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",h="completed",y={};function m(){}function v(){}function g(){}var b={};u(b,a,function(){return this});var w=Object.getPrototypeOf,x=w&&w(w(L([])));x&&x!==r&&n.call(x,a)&&(b=x);var E=g.prototype=m.prototype=Object.create(b);function O(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,c){var l=f(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==tc(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(s).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,c)})}c(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(tc(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},O(_.prototype),u(_.prototype,c,function(){return this}),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},O(E),u(E,l,"Generator"),u(E,a,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function tu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ts(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tu(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=tc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tc(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tc(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tf(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){r(e);return}c.done?t(l):Promise.resolve(l).then(n,o)}let tp=function(e){var t,r,o=e.onCreateLabel,i=void 0===o?function(){return!1}:o,a=e.schema,c=e.type,l=e.nodesMap,u=a.data,s=a.id,p=u.saved,d=u.properties,h=u.filelocation,y=(0,f.qp)(),m=y.updateStore,v=y.store,g=v.nodes,b=v.appMode,w=(t=tl().mark(function e(t){return tl().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),"nodes"!==c){e.next=6;break}return e.next=4,i(c,a);case 4:e.sent&&m(function(e){e.nodes=e.nodes.map(function(e){return e.id===s?ts(ts({},e),{},{data:ts(ts({},e.data),{},{disabled:!0,saved:!0})}):e})});case 6:if("edges"!==c){e.next=11;break}return e.next=9,i(c,a,g);case 9:e.sent&&m(function(e){e.edges=e.edges.map(function(e){return e.id===s?ts(ts({},e),{},{data:ts(ts({},e.data),{},{disabled:!0,saved:!0})}):e})});case 11:case"end":return e.stop()}},e)}),r=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){tf(i,n,o,a,c,"next",e)}function c(e){tf(i,n,o,a,c,"throw",e)}a(void 0)})},function(e){return r.apply(this,arguments)});if("groot"===window.GS_ENGINE_TYPE&&!p){var x=to({appMode:b,type:c,properties:void 0===d?[]:d,filelocation:h}),E=x||"Save label",O=!!x;if("edges"===c&&l){var _=a.source,S=a.target,j=l[_],P=l[S];j&&P&&j.data.saved&&P.data.saved||(O=!0,E="Please save the related vertex first")}return n.createElement(eC.Z,{title:E},n.createElement(eZ.ZP,{size:"small",type:"text",onClick:w,icon:n.createElement(ta.Z,null),disabled:O}))}return null};function td(e){return(td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function th(){th=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,c,l=Object.create((r&&r.prototype instanceof m?r:m).prototype);return o(l,"_invoke",{value:(a=new P(i||[]),c=p,function(r,o){if(c===d)throw Error("Generator is already running");if(c===h){if("throw"===r)throw o;return{value:e,done:!0}}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var l=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var c=a.arg;return c?c.done?(n[r.resultName]=c.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):c:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(i,a);if(l){if(l===y)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=d;var u=f(t,n,a);if("normal"===u.type){if(c=a.done?h:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(c=h,a.method="throw",a.arg=u.arg)}})}),l}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",h="completed",y={};function m(){}function v(){}function g(){}var b={};u(b,a,function(){return this});var w=Object.getPrototypeOf,x=w&&w(w(L([])));x&&x!==r&&n.call(x,a)&&(b=x);var E=g.prototype=m.prototype=Object.create(b);function O(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,c){var l=f(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==td(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(s).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,c)})}c(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(td(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},O(_.prototype),u(_.prototype,c,function(){return this}),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},O(E),u(E,l,"Generator"),u(E,a,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function ty(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ty(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=td(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=td(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==td(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ty(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tv(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){r(e);return}c.done?t(l):Promise.resolve(l).then(n,o)}function tg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let tb=function(e){var t,r,o,i=e.onDeleteLabel,a=void 0===i?function(){return!0}:i,l=e.schema,u=e.type,s=e.nodesMap,p=l.data,d=l.id,h=p.saved,y=p.label,m=(0,f.qp)(),v=m.updateStore,g=m.store.appMode,b=function(e){if(Array.isArray(e))return e}(t=n.useState({loading:!1}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tg(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tg(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),w=b[0],x=b[1],E=(r=th().mark(function e(t){var r,n,o,i,c,f;return th().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),x(function(e){return tm(tm({},e),{},{loading:!0})}),r=!0,"nodes"!==u){e.next=9;break}if(!h){e.next=8;break}return e.next=7,a(u,y);case 7:r=e.sent;case 8:r&&v(function(e){e.nodes=e.nodes.filter(function(e){return e.id!==d}),e.edges=e.edges.filter(function(e){return e.source!==d&&e.target!==d})});case 9:if(!("edges"===u&&s)){e.next=18;break}if(o=(n=l).source,i=n.target,c=s[o],f=s[i],!h){e.next=17;break}return e.next=16,a(u,y,c.data.label,f.data.label);case 16:r=e.sent;case 17:r&&v(function(e){e.edges=e.edges.filter(function(e){return e.id!==d})});case 18:x(function(e){return tm(tm({},e),{},{loading:!1})});case 19:case"end":return e.stop()}},e)}),o=function(){var e=this,t=arguments;return new Promise(function(n,o){var i=r.apply(e,t);function a(e){tv(i,n,o,a,c,"next",e)}function c(e){tv(i,n,o,a,c,"throw",e)}a(void 0)})},function(e){return o.apply(this,arguments)});return"DATA_MODELING"===g?n.createElement(eC.Z,{title:n.createElement(ej.Z,{id:"Delete label"})},n.createElement(eZ.ZP,{size:"small",type:"text",loading:w.loading,onClick:E,icon:n.createElement(c.PJ.rF,null)})):null};var tw=!0,tx=function(){tw=!1},tE=function(){tw=!0};let tO=function(e){var t=e.children,r=e.currentId,o=e.items,i=(0,n.useRef)(null);return(0,n.useEffect)(function(){if(tw){var e=i.current,t=o[r];if(e&&t){var n=47*t.index;e.scrollTo({top:n,behavior:"smooth"})}}tE()},[r]),n.createElement("div",{ref:i,style:{position:"absolute",top:"65px",bottom:"0px",left:0,right:0,overflow:"scroll",padding:"0px 10px 0px 10px"}},t)};function t_(e){return(t_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tS(){tS=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,c,l=Object.create((r&&r.prototype instanceof m?r:m).prototype);return o(l,"_invoke",{value:(a=new P(i||[]),c=p,function(r,o){if(c===d)throw Error("Generator is already running");if(c===h){if("throw"===r)throw o;return{value:e,done:!0}}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var l=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var c=a.arg;return c?c.done?(n[r.resultName]=c.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):c:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(i,a);if(l){if(l===y)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=d;var u=f(t,n,a);if("normal"===u.type){if(c=a.done?h:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(c=h,a.method="throw",a.arg=u.arg)}})}),l}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",h="completed",y={};function m(){}function v(){}function g(){}var b={};u(b,a,function(){return this});var w=Object.getPrototypeOf,x=w&&w(w(L([])));x&&x!==r&&n.call(x,a)&&(b=x);var E=g.prototype=m.prototype=Object.create(b);function O(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,c){var l=f(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==t_(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(s).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,c)})}c(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(t_(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},O(_.prototype),u(_.prototype,c,function(){return this}),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},O(E),u(E,l,"Generator"),u(E,a,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function tj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tj(Object(r),!0).forEach(function(t){tL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tL(e,t,r){var n;return(n=function(e,t){if("object"!=t_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=t_(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==t_(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tk(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){r(e);return}c.done?t(l):Promise.resolve(l).then(n,o)}function tT(e){return function(e){if(Array.isArray(e))return tI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tA(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tA(e,t){if(e){if("string"==typeof e)return tI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tI(e,t)}}function tI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let tD=function(e){var t,r,o,i=(0,eM.Z)(),a=(0,f.qp)(),l=a.store,u=a.updateStore,s=l.nodes,p=l.edges,d=l.currentType,h=l.currentId;l.elementOptions;var y=e.appMode,m=e.handleUploadFile,v=e.queryPrimitiveTypes,g=e.batchUploadFiles,b=e.onCreateLabel,w=e.onDeleteLabel,x=new Set,E=[].concat(tT(s),tT(p)).reduce(function(e,t){return e[t.id]={ref:n.createRef(),file:t.data.label+".csv"},x.add(t.id),e},{});window.ITEM_REFS=E;var O=function(e){if(Array.isArray(e))return e}(t=n.useState(function(){return{autoUpload:!1}}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,2)||tA(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),_=O[0],S=O[1],j=_.autoUpload,P=j?tT(x.values()):[h],L=!j,k={},T={},A={},I=s.map(function(e,t){var r=e.id,o=e.data||{label:r},i=o.label,a=o.properties,c=o.filelocation;return k[r]={index:t},A[r]=e,{key:r,label:i,extra:n.createElement(ek.Z,null,n.createElement(tp,{schema:e,type:"nodes",onCreateLabel:b}),n.createElement(tb,{schema:e,type:"nodes",onDeleteLabel:w}),n.createElement(ti,{type:"nodes",filelocation:c,appMode:y,properties:JSON.parse(JSON.stringify(void 0===a?[]:a))})),children:n.createElement(e4,{ref:E[r].ref,schema:JSON.parse(JSON.stringify(e)),type:"nodes",queryPrimitiveTypes:v,handleUploadFile:m,appMode:y})}}),D=p.map(function(e,t){var r=e.id,o=e.data||{label:r},i=o.label,a=o.properties,c=o.filelocation;return T[r]={index:t},{key:r,label:i,extra:n.createElement(ek.Z,null,n.createElement(tp,{nodesMap:A,schema:e,type:"edges",onCreateLabel:b}),n.createElement(tb,{nodesMap:A,schema:e,type:"edges",onDeleteLabel:w}),n.createElement(ti,{type:"edges",filelocation:c,appMode:y,properties:JSON.parse(JSON.stringify(void 0===a?[]:a))})),children:n.createElement(e4,{ref:E[r].ref,schema:JSON.parse(JSON.stringify(e)),type:"edges",queryPrimitiveTypes:v,handleUploadFile:m,appMode:y})}}),N=function(e){u(function(t){t.currentId=e[0]}),tx()},C=(r=tS().mark(function e(){return tS().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("DATA_IMPORTING"!==y)){e.next=2;break}return e.abrupt("return");case 2:g&&(u(function(e){e.currentType="edges"}),S(function(e){return tP(tP({},e),{},{autoUpload:!0})}),g().then(function(e){if(e){var t=Object.values(window.ITEM_REFS).reduce(function(e,t){return console.log("acc",e,t),tP(tP({},e),{},tL({},t.file,t.ref))},{});e.forEach(function(e){var r=t[e.name];r&&r.current&&r.current.upload(e)})}else S(function(e){return tP(tP({},e),{},{autoUpload:!1})}),u(function(e){e.currentType="nodes"})}));case 3:case"end":return e.stop()}},e)}),o=function(){var e=this,t=arguments;return new Promise(function(n,o){var i=r.apply(e,t);function a(e){tk(i,n,o,a,c,"next",e)}function c(e){tk(i,n,o,a,c,"throw",e)}a(void 0)})},function(){return o.apply(this,arguments)});return(0,n.useEffect)(function(){var e=setTimeout(function(){C()},200);return function(){clearTimeout(e)}},[]),n.createElement("div",null,n.createElement(c.Z2,{block:!0,queryKey:"element",value:d,onChange:function(e){return u(function(t){t.currentType=e})},items:[{key:"nodes",label:i.formatMessage({id:"Vertex"}),children:n.createElement(tO,{currentId:h,items:k},n.createElement(eT.Z,{expandIcon:function(e){var t=e.isActive;return n.createElement(te.Z,{rotate:t?90:0})},accordion:L,items:I,activeKey:P,onChange:N}))},{key:"edges",label:i.formatMessage({id:"Edges"}),children:n.createElement(tO,{currentId:h,items:T},n.createElement(eT.Z,{expandIcon:function(e){var t=e.isActive;return n.createElement(te.Z,{rotate:t?90:0})},accordion:L,items:D,activeKey:P,onChange:N}))}]}))};var tN=r(56867);let tC=function(e){var t=(0,c.fp)().toggleRightSide,r=(0,c.F_)().isLight;return n.createElement(eZ.ZP,{type:"text",icon:n.createElement(c.PJ.YE,{revert:!0,style:{color:r?"#000":"#fff"}}),onClick:function(){t()}})},tF=function(e){var t=e.style,r=(0,f.qp)(),o=r.updateStore,i=r.store.elementOptions,a=(0,c.F_)().isLight,l=i.isEditable?n.createElement(ej.Z,{id:"The current mode is preview only, and does not support clearing the model"}):n.createElement(ej.Z,{id:"Clear graph model"});return n.createElement(eC.Z,{title:l,placement:"right"},n.createElement(eZ.ZP,{disabled:i.isEditable,onClick:function(){ei(),o(function(e){e.nodes=[],e.edges=[]})},style:t,type:"text",icon:n.createElement(c.PJ.rF,{style:{color:a?i.isEditable?"#ddd":"#000":i.isEditable?"#585858":"#fff"}})}))};function tZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tG=c.PJ.w6,tM=0;let tz=function(e){var t=e.style,r=(0,o._K)().setCenter,i=(0,f.qp)(),a=i.updateStore,c=!i.store.elementOptions.isConnectable,l=c?n.createElement(ej.Z,{id:"The current mode is preview only, and does not support creating new vertex"}):n.createElement(ej.Z,{id:"Create new vertex"});return n.createElement(eC.Z,{title:l,placement:"right"},n.createElement(eZ.ZP,{disabled:c,onClick:function(){a(function(e){var t,n=en(),o=200*tM,i=100*tM;tM++,e.nodes=[].concat(function(e){if(Array.isArray(e))return tZ(e)}(t=e.nodes)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return tZ(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tZ(e,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{id:(0,Q.Z)(),position:{x:o,y:i},type:"graph-node",data:{label:n}}]),r(o+50,i+50,{duration:600,zoom:1})})},style:t,type:"text",icon:n.createElement(tG,null)}))};var tY=r(33533),tR=r(64305);function tU(e){return(tU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tq(){tq=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,c,l=Object.create((r&&r.prototype instanceof m?r:m).prototype);return o(l,"_invoke",{value:(a=new P(i||[]),c=p,function(r,o){if(c===d)throw Error("Generator is already running");if(c===h){if("throw"===r)throw o;return{value:e,done:!0}}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var l=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var c=a.arg;return c?c.done?(n[r.resultName]=c.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):c:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(i,a);if(l){if(l===y)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=d;var u=f(t,n,a);if("normal"===u.type){if(c=a.done?h:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(c=h,a.method="throw",a.arg=u.arg)}})}),l}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",h="completed",y={};function m(){}function v(){}function g(){}var b={};u(b,a,function(){return this});var w=Object.getPrototypeOf,x=w&&w(w(L([])));x&&x!==r&&n.call(x,a)&&(b=x);var E=g.prototype=m.prototype=Object.create(b);function O(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,c){var l=f(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==tU(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(s).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,c)})}c(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(tU(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},O(_.prototype),u(_.prototype,c,function(){return this}),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},O(E),u(E,l,"Generator"),u(E,a,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function tJ(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){r(e);return}c.done?t(l):Promise.resolve(l).then(n,o)}let tH=function(e){var t,r,o=(t=tq().mark(function e(){var t,r;return tq().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=document.querySelector(".react-flow__viewport"))){e.next=6;break}return e.next=4,(0,tR.KT)(t,{});case 4:r=e.sent,c.cQ.downloadImage(r,"model.svg");case 6:case"end":return e.stop()}},e)}),r=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){tJ(i,n,o,a,c,"next",e)}function c(e){tJ(i,n,o,a,c,"throw",e)}a(void 0)})},function(){return r.apply(this,arguments)});return n.createElement(eC.Z,{title:n.createElement(ej.Z,{id:"Save graph model to svg image"}),placement:"right"},n.createElement(eZ.ZP,{type:"text",icon:n.createElement(tY.Z,null),onClick:o}))};var tX=r(50116),tQ=r(88082),tB=function(e){var t,r,n,o,i,a,c,l,u,s,f,p,d,h,y="label";return o=(t=[],r=[],e.forEach(function(e){var n=e.meta,o=e.contents,i=n.graphFields,a=n.name,c=n.header,l=n.delimiter,u=i.idField,s=i.sourceField,f=void 0===s?"source":s,p=i.targetField,d=void 0===p?"target":p,h=i.type,y=a.split(".csv")[0],m=o.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n").slice(1).map(function(e){for(var t=e.split(l),r={},n=0;n<c.length;n++)r[c[n]]=t[n];return r});"Vertex"===h&&m.forEach(function(e){t.push({id:e[u],label:y,data:e,meta:n})}),"Edge"===h&&m.forEach(function(e){r.push({id:"".concat(e[f],"-").concat(e[d]),label:y,source:e[f],target:e[d],data:e,meta:n})})}),n={nodes:t,edges:r}).nodes,i=n.edges,a=new Map,c=new Map,u=(l={}).nodeLabelFromProperties,s=l.edgeLabelFromProperties,f=function e(t,r){void 0===r&&(r="");var n=[];for(var o in t)if(t.hasOwnProperty(o)){var i=t[o],a=r?"".concat(r,".").concat(o):o;i&&"[object Object]"===Object.prototype.toString.call(i)&&!Array.isArray(i)?n.push.apply(n,e(i,a)):n.push({name:a,type:p(i)})}return n},p=function(e){return null===e?"null":Array.isArray(e)?"array":e instanceof Date?"date":"[object Number]"!==Object.prototype.toString.call(e)||isNaN(e)?"[object Boolean]"===Object.prototype.toString.call(e)?"boolean":"[object Object]"===Object.prototype.toString.call(e)?"object":Object.prototype.toString.call(e).slice(8,-1).toLowerCase():"number"},d=function(e,t,r){return r&&e.data[r]?e.data[r]:t?e[t]:"undefined"},h=new Map(o.map(function(e){return[e.id,e]})),o.forEach(function(e){var t=d(e,y,u);if(!a.has(t)){var r={label:t,meta:e.meta,properties:f(e.data)};a.set(t,r)}}),console.log("nodes.edges",o,i),i.forEach(function(e){var t=d(e,y,s),r=h.get(e.source),n=h.get(e.target);if(!r||!n){console.warn(",  ".concat(r?"Target ID".concat(e.target):"Source ID".concat(e.source)));return}if(!c.has(t)){var o={label:t,source:d(r,y,u),target:d(n,y,u),properties:f(e.data),meta:e.meta};c.set(t,o)}}),{nodes:Array.from(a.values()),edges:Array.from(c.values())}},tV={number:"DT_DOUBLE",string:"DT_STRING"},t$=function(e){var t=e.nodes.map(function(e){var t=e.label,r=e.properties,n=e.meta,o=n.graphFields.idField;return{id:t,position:{x:0,y:0},data:{label:t,dataFields:n.header,delimiter:n.delimiter,datatype:"csv",csv_location:n.name,graphFields:n.graphFields,properties:r.map(function(e){var t=e.name,r=e.type,n=o===t,i=tV[r];return{name:t,type:"DT_DOUBLE"===i&&n?"DT_SIGNED_INT64":i,key:(0,Q.Z)(),disable:!1,primaryKey:n}})}}}),r=e.edges.map(function(e){var t=e.label,r=e.properties,n=e.source,o=e.target,i=e.meta,a=i.graphFields,c=a.sourceField,l=a.targetField;return{id:t,source:n,target:o,data:{label:t,dataFields:i.header,delimiter:i.delimiter,datatype:"csv",csv_location:i.name,graphFields:i.graphFields,properties:r.map(function(e){var t=e.name,r=e.type,n=c===t||l===t;return n?null:{name:t,type:n?"DT_SIGNED_INT32":tV[r],key:(0,Q.Z)(),disable:!1,primaryKey:!1}}).filter(function(e){return null!==e})}}});return{nodes:ew(t,"graph"),edges:ex(r,"graph")}},tK=r(83680),tW=r.n(tK);function t0(e){return(t0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t1(){t1=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,c,l=Object.create((r&&r.prototype instanceof m?r:m).prototype);return o(l,"_invoke",{value:(a=new P(i||[]),c=p,function(r,o){if(c===d)throw Error("Generator is already running");if(c===h){if("throw"===r)throw o;return{value:e,done:!0}}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var l=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var c=a.arg;return c?c.done?(n[r.resultName]=c.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):c:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(i,a);if(l){if(l===y)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=d;var u=f(t,n,a);if("normal"===u.type){if(c=a.done?h:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(c=h,a.method="throw",a.arg=u.arg)}})}),l}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",h="completed",y={};function m(){}function v(){}function g(){}var b={};u(b,a,function(){return this});var w=Object.getPrototypeOf,x=w&&w(w(L([])));x&&x!==r&&n.call(x,a)&&(b=x);var E=g.prototype=m.prototype=Object.create(b);function O(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,c){var l=f(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==t0(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(s).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,c)})}c(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(t0(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},O(_.prototype),u(_.prototype,c,function(){return this}),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},O(E),u(E,l,"Generator"),u(E,a,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function t2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function t5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?t2(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=t0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=t0(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==t0(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t2(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function t3(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){r(e);return}c.done?t(l):Promise.resolve(l).then(n,o)}let t6=function(e){var t,r,o=(0,f.qp)(),i=o.updateStore,a=o.store.isSaveFiles,l=(t=t1().mark(function e(t,r){var n,o,l,u,s,f,p;return t1().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.files,o=t.csvFiles,r(function(e){return t5(t5({},e),{},{loading:!0})}),e.next=4,c.cQ.asyncFunctionWithWorker(tB)(n);case 4:u=(l=e.sent).result,l.duration,f=(s=t$(u)).nodes,p=s.edges,a&&tW().setItem("DRAFT_GRAPH_FILES",o),i(function(e){e.hasLayouted=!1,e.nodes=f,e.edges=p,e.csvFiles=o}),r(function(e){return t5(t5({},e),{},{loading:!1})});case 11:case"end":return e.stop()}},e)}),r=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){t3(i,n,o,a,c,"next",e)}function c(e){t3(i,n,o,a,c,"throw",e)}a(void 0)})},function(e,t){return r.apply(this,arguments)});return n.createElement(c.Pz,{isSaveFiles:a,upload:{accept:".csv",title:n.createElement(ej.Z,{id:"Click or drag file to this area to parse it"}),description:n.createElement(ej.Z,{id:"If you already have CSV data, feel free to parse it here, and the system will automatically infer possible graph models for you."})}},function(e,t){return n.createElement(eZ.ZP,{type:"primary",onClick:function(){return l(e,t)},loading:e.loading},n.createElement(ej.Z,{id:"Generate graph model"}))})};function t8(e){return(t8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function t9(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?t7(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=t8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=t8(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==t8(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t7(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function t4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let re=function(e){var t,r=e.style,o=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)({visible:!1}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(c.push(n.value),2!==c.length);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,2)||function(e,t){if(e){if("string"==typeof e)return t4(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t4(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=o[0],a=o[1],l=i.visible,u=(0,f.qp)().store.elementOptions,s=(0,c.F_)().isLight,p=function(){a(t9(t9({},i),{},{visible:!1}))};return n.createElement(ek.Z,null,n.createElement(eC.Z,{title:n.createElement(ej.Z,{id:"Shortcut: parse files into a graph model"}),placement:"left"},n.createElement(eZ.ZP,{type:"text",disabled:u.isEditable,onClick:function(){a(t9(t9({},i),{},{visible:!l}))},style:r,icon:n.createElement(tQ.Z,{style:{color:s?u.isEditable?"#ddd":"#000":u.isEditable?"#585858":"#fff"}})})),n.createElement(tX.Z,{title:n.createElement(ej.Z,{id:"Parse files into a graph model"}),open:l,onOk:p,onCancel:p,footer:null},n.createElement("div",{style:{height:"60vh"}},n.createElement(t6,null))))};var rt=r(28823);function rr(e){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ro(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ri(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=rr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rr(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rr(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ra(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{}},r=e||{vertex_types:[],edge_types:[]},n=r.vertex_types,o=r.edge_types,i={},a=n.map(function(e){var r=e.primary_keys,n=void 0===r?[]:r,o=e.properties,a=e.type_name,c=(0,Q.Z)();i[a]=c;var l=t(e);return{id:c,data:ri(ri({label:a,primary:n[0]},l),{},{properties:(void 0===o?[]:o).map(function(e,t){var r=e.property_name,o=e.property_type;return{key:(0,Q.Z)(),index:t,token:"",name:r,type:"primitive_type"in o?o.primitive_type:"DT_STRING",primaryKey:n[0]===r}})}),position:{x:0,y:0}}}),c=[];return o&&o.forEach(function(e){var r=e.type_name,n=e.properties,o=void 0===n?[]:n,a=e.vertex_type_pair_relations,l=t(e);a.forEach(function(e){var t=e.destination_vertex,n=e.source_vertex;e.relation;var a=i[n],u=i[t];c.push({source:a,target:u,id:(0,Q.Z)(),data:ri(ri({label:r},l),{},{properties:o.map(function(e){return{key:(0,Q.Z)(),name:e.property_name,type:"primitive_type"in e.property_type?e.property_type.primitive_type:"DT_STRING",primaryKey:!1,disable:!1,token:""}})})})})}),{nodes:a,edges:c}}var rc=function(e){return"DT_STRING"===e?{string:{long_text:""}}:{primitive_type:e}};function rl(e){return(rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ru(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(r),!0).forEach(function(t){rp(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rs(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rp(e,t,r){var n;return(n=function(e,t){if("object"!=rl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rl(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==rl(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rd=function(e,t){return t.map(function(e){return e.name})},rh=r(39773),ry=r(76862);function rm(e){return(rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rg(){rg=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,c,l=Object.create((r&&r.prototype instanceof m?r:m).prototype);return o(l,"_invoke",{value:(a=new P(i||[]),c=p,function(r,o){if(c===d)throw Error("Generator is already running");if(c===h){if("throw"===r)throw o;return{value:e,done:!0}}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var l=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var c=a.arg;return c?c.done?(n[r.resultName]=c.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):c:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(i,a);if(l){if(l===y)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=d;var u=f(t,n,a);if("normal"===u.type){if(c=a.done?h:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(c=h,a.method="throw",a.arg=u.arg)}})}),l}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",h="completed",y={};function m(){}function v(){}function g(){}var b={};u(b,a,function(){return this});var w=Object.getPrototypeOf,x=w&&w(w(L([])));x&&x!==r&&n.call(x,a)&&(b=x);var E=g.prototype=m.prototype=Object.create(b);function O(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,c){var l=f(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==rm(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(s).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,c)})}c(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(rm(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},O(_.prototype),u(_.prototype,c,function(){return this}),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},O(E),u(E,l,"Generator"),u(E,a,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function rb(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){r(e);return}c.done?t(l):Promise.resolve(l).then(n,o)}var rw=eF.Z.Dragger,rx=function(e){return"schema"in e?e.schema:"vertex_types"in e&&"edge_types"in e?e:"vertex_mappings"in e&&"edge_mappings"in e?{vertex_mappings:e.vertex_mappings,edge_mappings:e.edge_mappings}:{}};let rE=function(e){var t,r,o=e.style,i=e.icon,a=void 0===i?n.createElement(c.PJ.$B,{text:"YAML"}):i,l=e.disabled,u=(0,f.qp)(),s=u.updateStore,p=u.store,d=p.appMode,h=p.nodes,y=p.edges,m=(t=rg().mark(function e(t){var r,n,o,i,a;return rg().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=t.file).type,e.prev=2,e.next=5,c.cQ.parseFile(r);case 5:o=e.sent,"application/x-yaml"===n&&(i=rx(rh.ZP.load(o))),"application/json"===n&&(i=rx(JSON.parse(o))),"DATA_MODELING"===d&&(a=ra(i,function(){return{disabled:!1,saved:!1}})),"DATA_IMPORTING"===d&&(a=function(e,t,r){var n=r||ra(e,function(){return{disabled:!0,saved:!0}}),o=n.nodes,i=n.edges,a={};return"vertex_mappings"in t&&t.vertex_mappings.forEach(function(e){var t=e.type_name,r=e.column_mappings;a[t]=rf(rf({},e),{},{properties_mappings:(void 0===r?[]:r).reduce(function(e,t){return rf(rf({},e),{},rp({},t.property,{index:t.column.index,token:t.column.name}))},{})})}),"edge_mappings"in t&&t.edge_mappings.forEach(function(e){var t=e.type_triplet,r=e.column_mappings;a[t.edge]=rf(rf({},e),{},{properties_mappings:(void 0===r?[]:r).reduce(function(e,t){return rf(rf({},e),{},rp({},t.property,{index:t.column.index,token:t.column.name}))},{})})}),{nodes:o.map(function(e){var t=e.data,r=t.label,n=t.properties,o=void 0===n?[]:n,i=a[r]||{inputs:[""],properties_mappings:{}},c=i.inputs[0];return rf(rf({},e),{},{data:rf(rf({},e.data),{},{filelocation:c,isBind:!!c,isEidtProperty:!0,dataFields:rd("nodes",o),properties:o.map(function(e,t){var r=e.name,n=i&&i.properties_mappings&&i.properties_mappings[r]||{index:0,token:""};return rf(rf({},e),{},{index:n.index,token:n.token})})})})}),edges:i.map(function(e){var t=e.data;if(t){var r=t.label,n=t.properties,o=void 0===n?[]:n,i=a[r]||{source_vertex_mappings:[{column:{index:0,name:""}}],destination_vertex_mappings:[{column:{index:0,name:""}}],properties_mappings:{},inputs:[""]};if("destination_vertex_mappings"in i){var c=i.source_vertex_mappings,l=void 0===c?[]:c,u=i.destination_vertex_mappings,s=void 0===u?[]:u,f=i.properties_mappings,p=i.inputs[0],d=[l[0].column,s[0].column].concat(function(e){if(Array.isArray(e))return ru(e)}(o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return ru(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ru(e,void 0)}}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return rf(rf({},e),{},{data:rf(rf({},e.data),{},{filelocation:p,isBind:!!p,isEidtProperty:!0,dataFields:rd("edges",d),properties:o.map(function(e){var t=e.name,r=f[t]||{index:0,token:""};return rf(rf({},e),{},{index:r.index,token:r.token,name:t})}),source_vertex_fields:{index:l[0].column.index,token:l[0].column.name,name:l[0].property},target_vertex_fields:{index:s[0].column.index,token:s[0].column.name,name:s[0].property}})})}}}).filter(function(e){return e})}}({},i,{nodes:h,edges:y})),s(function(e){e.hasLayouted=!1,e.nodes=ew(a.nodes,"graph"),e.edges=ex(a.edges,"graph")}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(":",e.t0),ry.ZP.error("");case 17:case"end":return e.stop()}},e,null,[[2,13]])}),r=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){rb(i,n,o,a,c,"next",e)}function c(e){rb(i,n,o,a,c,"throw",e)}a(void 0)})},function(e){return r.apply(this,arguments)});return n.createElement("div",{style:{height:"100%",width:"100%"}},n.createElement(rw,{disabled:"DATA_MODELING"===d&&l,accept:".yaml,.json",customRequest:m,showUploadList:!1,multiple:!0,style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rv(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=rm(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rm(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rm(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({height:"100px",width:"100%"},void 0===o?{}:o)},n.createElement(eA.Z,{justify:"center",align:"center",vertical:!0,gap:24},a,n.createElement(eI.Z.Text,{type:"secondary"},n.createElement(ej.Z,{id:"For the definition and description of the schema model, please refer to the "}),n.createElement("a",{href:"https://graphscope.io/docs/flex/interactive/data_model",target:"_blank"},n.createElement(ej.Z,{id:"document"}))))))};var rO=u.Z.useToken,r_={DATA_MODELING:{importText:"Import YAML or JSON file to generate graph model",exportText:"Save graph model to local YAML or JSON file"},DATA_IMPORTING:{importText:"Import YAML or JSON file to generate graph loading config",exportText:"Save graph loading config to local YAML or JSON file"},PURE:{importText:"Import YAML or JSON file to generate graph loading config",exportText:"Save graph loading config to local YAML or JSON file"}},rS=function(){var e=rO().token,t=(0,f.qp)().store,r=t.nodes,o=t.edges,i=t.appMode,a=r_[i],l=a.importText,u=a.exportText,s=function(e){var t;if("DATA_MODELING"===i){var n,a,l,u,s,f=(n=c.cQ.fakeSnapshot({nodes:r,edges:o}),a={},l=n.nodes.map(function(e,t){var r=e.id,n=e.data,o=n.label,i=n.properties,c=n.primary;a[r]=o;var l=c;return{type_id:t,type_name:o,properties:(void 0===i?[]:i).map(function(e,t){return e.primaryKey&&(l=e.name),{property_id:t,property_name:e.name,property_type:rc(e.type)}})||[],primary_keys:[l]}}),u=new Map,n.edges.forEach(function(e,t){var r=e.source,n=e.target,o=e.data,i=o.properties,c=o.label,l=a[r],s={destination_vertex:a[n],relation:"MANY_TO_MANY",source_vertex:l},f=u.get(c);if(f){var p=(f.properties||{}).vertex_type_pair_relations;(void 0===p?[]:p).push(s),u.set(c,f)}else u.set(c,{type_id:t,type_name:c,properties:((void 0===i?[]:i)||[]).map(function(e,t){return{property_id:t,property_name:e.name,property_type:rc(e.type)}})||[],vertex_type_pair_relations:[s]})}),{vertex_types:l,edge_types:function(e){if(Array.isArray(e))return rn(e)}(s=u.values())||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return rn(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rn(e,void 0)}}(s)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()});"yaml"===e&&(t=rh.ZP.dump(f)),"json"===e&&(t=JSON.stringify(f)),c.cQ.download("create-model.".concat(e),t);return}if("DATA_IMPORTING"===i){var p,d,h,y,m,v=(p=c.cQ.fakeSnapshot({nodes:r,edges:o}),d=[],h=[],y={},m={},p.nodes.forEach(function(e){var t=e.id,r=e.data,n=r.properties,o=r.filelocation,i=r.label;r.primary,y[t]=i,d.push({type_name:i,inputs:[void 0===o?"":o],column_mappings:(void 0===n?[]:n).map(function(e){var r=e.index,n=e.token,o=e.name;return e.primaryKey&&(m[t]=o),{column:{index:r,name:n},property:o}})})}),p.edges.forEach(function(e){var t=e.data,r=e.source,n=e.target,o=t.properties,i=t.filelocation,a=t.source_vertex_fields,c=void 0===a?{index:0,token:"",name:"id"}:a,l=t.target_vertex_fields,u=void 0===l?{index:0,token:"",name:"id"}:l,s=t.label,f=[],p=[],d=[];(void 0===o?[]:o).forEach(function(e){var t=e.index,r=e.token,n=e.name;f.push({column:{index:t,name:r},property:n})}),p.push({column:{index:c.index,name:c.token},property:m[r]}),d.push({column:{index:u.index,name:u.token},property:m[n]}),h.push({type_triplet:{edge:s,source_vertex:y[r],destination_vertex:y[n]},inputs:[void 0===i?"":i],column_mappings:f,source_vertex_mappings:p,destination_vertex_mappings:d})}),{vertex_mappings:d,edge_mappings:h});"yaml"===e&&(t=rh.ZP.dump(v)),"json"===e&&(t=JSON.stringify(v)),c.cQ.download("loading-config.".concat(e),t);return}};return n.createElement(eA.Z,{justify:"center",vertical:!0,style:{padding:"20px",width:"350px"},gap:10},n.createElement(eI.Z.Text,{type:"secondary"},l),n.createElement(rE,{disabled:0!==r.length,style:{height:"160px"},icon:n.createElement(ek.Z,{split:"or"},n.createElement(c.PJ.$B,{text:"YAML",style:{fontSize:"30px",color:e.colorTextSecondary}}),n.createElement(c.PJ.$B,{text:"JSON",style:{fontSize:"30px",color:e.colorTextSecondary}}))}),n.createElement(tN.Z,{style:{margin:"12px  0px"}}),n.createElement(eI.Z.Text,{type:"secondary"},u),n.createElement(eA.Z,{gap:10},n.createElement(eZ.ZP,{style:{width:"50%"},onClick:function(){return s("yaml")}},"EXPORT YAML"),n.createElement(eZ.ZP,{style:{width:"50%"},onClick:function(){return s("json")}},"EXPORT JSON")))};let rj=function(e){return n.createElement(rt.Z,{placement:"leftBottom",content:n.createElement(rS,null)},n.createElement(eZ.ZP,{type:"text",icon:n.createElement(c.PJ.aD,null)}))},rP=function(e){var t=(0,f.qp)().store.appMode,r=(0,c.me)().buttonBackground;return"DATA_MODELING"===t?n.createElement(n.Fragment,null,n.createElement(c.o8,{style:{top:"12px",right:"24px",left:"unset",background:r},direction:"vertical"},n.createElement(tC,null),n.createElement(tN.Z,{style:{margin:"0px"}}),n.createElement(re,null),n.createElement(tN.Z,{style:{margin:"0px"}}),n.createElement(rj,null),n.createElement(tN.Z,{style:{margin:"0px"}}),n.createElement(tz,null),n.createElement(tF,null),n.createElement(tH,null))):"DATA_IMPORTING"===t?n.createElement(n.Fragment,null,n.createElement(c.o8,{style:{top:"12px",right:"24px",left:"unset",background:r},direction:"vertical"},n.createElement(tC,null),n.createElement(tN.Z,{style:{margin:"0px"}}),n.createElement(rj,null))):null};var rL={appMode:"DATA_MODELING",disabled:!1,nodes:[],edges:[],source:{nodes:[],edges:[]},nodePositionChange:[],isReady:!1,displayMode:"graph",graphPosition:{},tablePosition:{},currentType:"nodes",currentId:"",theme:{primaryColor:"#1978FF"},collapsed:{left:!0,right:!0},hasLayouted:!1,elementOptions:{isEditable:!0,isConnectable:!0},csvFiles:[],isSaveFiles:!0};let rk={"en-US":{"Start sketching a model, a vertex label is a named grouping or categorization of nodes within the graph dataset":"Start sketching a model, a vertex label is a named grouping or categorization of nodes within the graph dataset","Please manually input the odps file location":"Please manually input the odps file location",Upload:"Upload","Load data":"Load data","Start importing":"Start importing",Close:"Close","Goto Modeling":"Goto Modeling","Save Modeling":"Save Modeling","Goto Graphs":"Goto Graphs","Goto Importing":"Goto Importing","Go back to modify the graph model.":"Go back to modify the graph model.","View Schema":"View Schema","Successfully saved the graph model":"Successfully saved the graph model","Failed to save the graph model":"Failed to save the graph model","Please create the graph model first":"Please create the graph model first","Sorry, the system detected that there is no available graph model. Please create a graph model before importing data":"Sorry, the system detected that there is no available graph model. Please create a graph model before importing data","Bulk Import":"Bulk Import","Bulk Import Data":"Bulk Import Data","The system has detected that you have previously uploaded CSV files. You can quickly bulk import data into graphscope":"The system has detected that you have previously uploaded CSV files. You can quickly bulk import data into graphscope","Click or drag file to this area to upload":"Click or drag file to this area to upload","Clear all files":"Clear all files","Generate graph model":"Generate graph model","If you already have CSV data, feel free to upload it here, and the system will automatically infer possible graph models for you.":"If you already have CSV data, feel free to upload it here, and the system will automatically infer possible graph models for you.","If you already have SQLDDL file, feel free to upload it here, and the system will automatically infer possible graph models for you.":"If you already have SQLDDL file, feel free to upload it here, and the system will automatically infer possible graph models for you.","A vertex must have a primary key.":"A vertex must have a primary key.","A vertex must have at least one property.":"A vertex must have at least one property.","A edge can only have one property.":"A edge can only have one property.","The current mode is preview only, and does not support clearing the model":"The current mode is preview only, and does not support clearing the model","Clear graph model":"Clear graph model","The current mode is preview only, and does not support creating new vertex":"The current mode is preview only, and does not support creating new vertex","Create new vertex":"Create new vertex","The current mode is preview only, and does not support opening multi-source modeling":"The current mode is preview only, and does not support opening multi-source modeling","Expand or collapse multi-source modeling":"Expand or collapse multi-source modeling",Configuration:"Configuration","You have successfully bound the data source. Please complete the configuration to start importing data.":"You have successfully bound the data source. Please complete the configuration to start importing data.","The data loading task has been successfully created. You can view detailed logs in the job center.":"The data loading task has been successfully created. You can view detailed logs in the job center.","Goto Jobs":"Goto Jobs","Please select a primate type.":"Please select a primate type.","Click or drag file to this area to parse it":"Click or drag file to this area to parse it","If you already have CSV data, feel free to parse it here, and the system will automatically infer possible graph models for you.":"If you already have CSV data, feel free to parse it here, and the system will automatically infer possible graph models for you.","Data source binding":"Data source binding","Shortcut: parse files into a graph model":"Shortcut: parse files into a graph model","Save graph model to svg image":"Save graph model to svg image","Save graph model to JSON config":"Save graph model to JSON config","Parse files into a graph model":"Parse files into a graph model","For the definition and description of the schema model, please refer to the ":"For the definition and description of the schema model, please refer to the ",document:"document",Vertex:"Vertex",Edges:"Edges","File type":"File type","ID field":"ID field","Label field":"Label field","Target field":"Target field","Source field":"Source field","Delete label":"Delete label",Label:"Label","Data Fields":"Data Fields","Add Property":"Add Property",Properties:"Properties","Uploading...":"Uploading...",Delimiter:"Delimiter",Type:"Type","Header Row":"Header Row","Import Option":"Import Option",Quoting:"Quoting","Quote char":"Quote char",Source:"Source",Target:"Target"},"zh-CN":{"Start sketching a model, a vertex label is a named grouping or categorization of nodes within the graph dataset":"","Please manually input the odps file location":" odps ",Upload:"","Load data":"","Start importing":"",Close:"","Goto Modeling":"","Save Modeling":"","Goto Graphs":"","Goto Importing":"","Go back to modify the graph model.":"","View Schema":" Schema","Successfully saved the graph model":"","Failed to save the graph model":"","Please create the graph model first":"","Sorry, the system detected that there is no available graph model. Please create a graph model before importing data":".","Bulk Import":"","Bulk Import Data":"","The system has detected that you have previously uploaded CSV files. You can quickly bulk import data into graphscope":" CSV  graphscope","Click or drag file to this area to upload":"","Clear all files":"","Generate graph model":"","If you already have CSV data, feel free to upload it here, and the system will automatically infer possible graph models for you.":" CSV ","If you already have SQLDDL file, feel free to upload it here, and the system will automatically infer possible graph models for you.":" SQLDDL ","A vertex must have a primary key.":"","A vertex must have at least one property.":"","A edge can only have one property.":"","The current mode is preview only, and does not support clearing the model":"","Clear graph model":"","The current mode is preview only, and does not support creating new vertex":"","Create new vertex":"","The current mode is preview only, and does not support opening multi-source modeling":"","Expand or collapse multi-source modeling":"",Configuration:"","You have successfully bound the data source. Please complete the configuration to start importing data.":"","The data loading task has been successfully created. You can view detailed logs in the job center.":"","Goto Jobs":"","Please select a primate type.":"","Click or drag file to this area to parse it":"","If you already have CSV data, feel free to parse it here, and the system will automatically infer possible graph models for you.":" CSV ","Data source binding":"","Shortcut: parse files into a graph model":"","Save graph model to svg image":" svg ","Save graph model to JSON config":" JSON ","Parse files into a graph model":"","For the definition and description of the schema model, please refer to the ":" ",document:"",Vertex:"",Edges:"","File type":"","ID field":"ID ","Label field":"","Target field":"","Source field":"","Delete label":"",Label:"",Source:"",Target:"","Data Fields":"","Add Property":"",Properties:"","Uploading...":"...",Delimiter:"",Type:"","Header Row":"","Import Option":"",Quoting:"","Quote char":""}};function rT(e){return(rT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rI(){rI=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,c,l=Object.create((r&&r.prototype instanceof m?r:m).prototype);return o(l,"_invoke",{value:(a=new P(i||[]),c=p,function(r,o){if(c===d)throw Error("Generator is already running");if(c===h){if("throw"===r)throw o;return{value:e,done:!0}}for(a.method=r,a.arg=o;;){var i=a.delegate;if(i){var l=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var c=a.arg;return c?c.done?(n[r.resultName]=c.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):c:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(i,a);if(l){if(l===y)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=d;var u=f(t,n,a);if("normal"===u.type){if(c=a.done?h:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(c=h,a.method="throw",a.arg=u.arg)}})}),l}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",h="completed",y={};function m(){}function v(){}function g(){}var b={};u(b,a,function(){return this});var w=Object.getPrototypeOf,x=w&&w(w(L([])));x&&x!==r&&n.call(x,a)&&(b=x);var E=g.prototype=m.prototype=Object.create(b);function O(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,c){var l=f(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==rT(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(s).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,c)})}c(l.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(rT(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},O(_.prototype),u(_.prototype,c,function(){return this}),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},O(E),u(E,l,"Generator"),u(E,a,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function rD(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){r(e);return}c.done?t(l):Promise.resolve(l).then(n,o)}var rN=function(e){var t=e.appMode,r=e.GS_ENGINE_TYPE,i=e.queryGraphSchema,a=e.queryBoundSchema,l=(e.id,e.theme,e.defaultCollapsed),u=e.leftSideStyle,s=e.rightSideStyle,p=e.children,d=e.queryPrimitiveTypes,h=e.handleUploadFile,y=e.isSaveFiles,m=e.batchUploadFiles,v=e.onCreateLabel,g=e.onDeleteLabel,b=e.style,w=(e.leftSide,e.rightSide),x=(0,f.qp)(),E=x.store,O=x.updateStore,_=E.isReady,S=E.displayMode;(0,c.HM)("\n/* this gets exported as style.css and can be used for the default theming */\n/* these are the necessary styles for React Flow, they get used by base.css and style.css */\n.react-flow {\n  direction: ltr;\n}\n.react-flow__container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n.react-flow__pane {\n  z-index: 1;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.react-flow__pane.selection {\n    cursor: pointer;\n  }\n.react-flow__pane.dragging {\n    cursor: -webkit-grabbing;\n    cursor: grabbing;\n  }\n.react-flow__viewport {\n  transform-origin: 0 0;\n  z-index: 2;\n  pointer-events: none;\n}\n.react-flow__renderer {\n  z-index: 4;\n}\n.react-flow__selection {\n  z-index: 6;\n}\n.react-flow__nodesselection-rect:focus,\n.react-flow__nodesselection-rect:focus-visible {\n  outline: none;\n}\n.react-flow .react-flow__edges {\n  pointer-events: none;\n  overflow: visible;\n}\n.react-flow__edge-path,\n.react-flow__connection-path {\n  stroke: #b1b1b7;\n  stroke-width: 1;\n  fill: none;\n}\n.react-flow__edge {\n  pointer-events: visibleStroke;\n  cursor: pointer;\n}\n.react-flow__edge.animated path {\n    stroke-dasharray: 5;\n    -webkit-animation: dashdraw 0.5s linear infinite;\n            animation: dashdraw 0.5s linear infinite;\n  }\n.react-flow__edge.animated path.react-flow__edge-interaction {\n    stroke-dasharray: none;\n    -webkit-animation: none;\n            animation: none;\n  }\n.react-flow__edge.inactive {\n    pointer-events: none;\n  }\n.react-flow__edge.selected,\n  .react-flow__edge:focus,\n  .react-flow__edge:focus-visible {\n    outline: none;\n  }\n.react-flow__edge.selected .react-flow__edge-path,\n  .react-flow__edge:focus .react-flow__edge-path,\n  .react-flow__edge:focus-visible .react-flow__edge-path {\n    stroke: #555;\n  }\n.react-flow__edge-textwrapper {\n    pointer-events: all;\n  }\n.react-flow__edge-textbg {\n    fill: white;\n  }\n.react-flow__edge .react-flow__edge-text {\n    pointer-events: none;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n  }\n.react-flow__connection {\n  pointer-events: none;\n}\n.react-flow__connection .animated {\n    stroke-dasharray: 5;\n    -webkit-animation: dashdraw 0.5s linear infinite;\n            animation: dashdraw 0.5s linear infinite;\n  }\n.react-flow__connectionline {\n  z-index: 1001;\n}\n.react-flow__nodes {\n  pointer-events: none;\n  transform-origin: 0 0;\n}\n.react-flow__node {\n  position: absolute;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  pointer-events: all;\n  transform-origin: 0 0;\n  box-sizing: border-box;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.react-flow__node.dragging {\n    cursor: -webkit-grabbing;\n    cursor: grabbing;\n  }\n.react-flow__nodesselection {\n  z-index: 3;\n  transform-origin: left top;\n  pointer-events: none;\n}\n.react-flow__nodesselection-rect {\n    position: absolute;\n    pointer-events: all;\n    cursor: -webkit-grab;\n    cursor: grab;\n  }\n.react-flow__handle {\n  position: absolute;\n  pointer-events: none;\n  min-width: 5px;\n  min-height: 5px;\n  width: 6px;\n  height: 6px;\n  background: #1a192b;\n  border: 1px solid white;\n  border-radius: 100%;\n}\n.react-flow__handle.connectionindicator {\n    pointer-events: all;\n    cursor: crosshair;\n  }\n.react-flow__handle-bottom {\n    top: auto;\n    left: 50%;\n    bottom: -4px;\n    transform: translate(-50%, 0);\n  }\n.react-flow__handle-top {\n    left: 50%;\n    top: -4px;\n    transform: translate(-50%, 0);\n  }\n.react-flow__handle-left {\n    top: 50%;\n    left: -4px;\n    transform: translate(0, -50%);\n  }\n.react-flow__handle-right {\n    right: -4px;\n    top: 50%;\n    transform: translate(0, -50%);\n  }\n.react-flow__edgeupdater {\n  cursor: move;\n  pointer-events: all;\n}\n.react-flow__panel {\n  position: absolute;\n  z-index: 5;\n  margin: 15px;\n}\n.react-flow__panel.top {\n    top: 0;\n  }\n.react-flow__panel.bottom {\n    bottom: 0;\n  }\n.react-flow__panel.left {\n    left: 0;\n  }\n.react-flow__panel.right {\n    right: 0;\n  }\n.react-flow__panel.center {\n    left: 50%;\n    transform: translateX(-50%);\n  }\n.react-flow__attribution {\n  font-size: 10px;\n  background: rgba(255, 255, 255, 0.5);\n  padding: 2px 3px;\n  margin: 0;\n}\n.react-flow__attribution a {\n    text-decoration: none;\n    color: #999;\n  }\n@-webkit-keyframes dashdraw {\n  from {\n    stroke-dashoffset: 10;\n  }\n}\n@keyframes dashdraw {\n  from {\n    stroke-dashoffset: 10;\n  }\n}\n.react-flow__edgelabel-renderer {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n}\n.react-flow__edge.updating .react-flow__edge-path {\n      stroke: #777;\n    }\n.react-flow__edge-text {\n    font-size: 10px;\n  }\n.react-flow__node.selectable:focus,\n  .react-flow__node.selectable:focus-visible {\n    outline: none;\n  }\n.react-flow__node-default,\n.react-flow__node-input,\n.react-flow__node-output,\n.react-flow__node-group {\n  padding: 10px;\n  border-radius: 3px;\n  width: 150px;\n  font-size: 12px;\n  color: #222;\n  text-align: center;\n  border-width: 1px;\n  border-style: solid;\n  border-color: #1a192b;\n  background-color: white;\n}\n.react-flow__node-default.selectable:hover, .react-flow__node-input.selectable:hover, .react-flow__node-output.selectable:hover, .react-flow__node-group.selectable:hover {\n      box-shadow: 0 1px 4px 1px rgba(0, 0, 0, 0.08);\n    }\n.react-flow__node-default.selectable.selected,\n    .react-flow__node-default.selectable:focus,\n    .react-flow__node-default.selectable:focus-visible,\n    .react-flow__node-input.selectable.selected,\n    .react-flow__node-input.selectable:focus,\n    .react-flow__node-input.selectable:focus-visible,\n    .react-flow__node-output.selectable.selected,\n    .react-flow__node-output.selectable:focus,\n    .react-flow__node-output.selectable:focus-visible,\n    .react-flow__node-group.selectable.selected,\n    .react-flow__node-group.selectable:focus,\n    .react-flow__node-group.selectable:focus-visible {\n      box-shadow: 0 0 0 0.5px #1a192b;\n    }\n.react-flow__node-group {\n  background-color: rgba(240, 240, 240, 0.25);\n}\n.react-flow__nodesselection-rect,\n.react-flow__selection {\n  background: rgba(0, 89, 220, 0.08);\n  border: 1px dotted rgba(0, 89, 220, 0.8);\n}\n.react-flow__nodesselection-rect:focus,\n  .react-flow__nodesselection-rect:focus-visible,\n  .react-flow__selection:focus,\n  .react-flow__selection:focus-visible {\n    outline: none;\n  }\n.react-flow__controls {\n  box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.08);\n}\n.react-flow__controls-button {\n    border: none;\n    background: #fefefe;\n    border-bottom: 1px solid #eee;\n    box-sizing: content-box;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 16px;\n    height: 16px;\n    cursor: pointer;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n    padding: 5px;\n  }\n.react-flow__controls-button:hover {\n      background: #f4f4f4;\n    }\n.react-flow__controls-button svg {\n      width: 100%;\n      max-width: 12px;\n      max-height: 12px;\n    }\n.react-flow__controls-button:disabled {\n      pointer-events: none;\n    }\n.react-flow__controls-button:disabled svg {\n        fill-opacity: 0.4;\n      }\n.react-flow__minimap {\n  background-color: #fff;\n}\n.react-flow__minimap svg {\n  display: block;\n}\n.react-flow__resize-control {\n  position: absolute;\n}\n.react-flow__resize-control.left,\n.react-flow__resize-control.right {\n  cursor: ew-resize;\n}\n.react-flow__resize-control.top,\n.react-flow__resize-control.bottom {\n  cursor: ns-resize;\n}\n.react-flow__resize-control.top.left,\n.react-flow__resize-control.bottom.right {\n  cursor: nwse-resize;\n}\n.react-flow__resize-control.bottom.left,\n.react-flow__resize-control.top.right {\n  cursor: nesw-resize;\n}\n/* handle styles */\n.react-flow__resize-control.handle {\n  width: 4px;\n  height: 4px;\n  border: 1px solid #fff;\n  border-radius: 1px;\n  background-color: #3367d9;\n  transform: translate(-50%, -50%);\n}\n.react-flow__resize-control.handle.left {\n  left: 0;\n  top: 50%;\n}\n.react-flow__resize-control.handle.right {\n  left: 100%;\n  top: 50%;\n}\n.react-flow__resize-control.handle.top {\n  left: 50%;\n  top: 0;\n}\n.react-flow__resize-control.handle.bottom {\n  left: 50%;\n  top: 100%;\n}\n.react-flow__resize-control.handle.top.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.bottom.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.top.right {\n  left: 100%;\n}\n.react-flow__resize-control.handle.bottom.right {\n  left: 100%;\n}\n/* line styles */\n.react-flow__resize-control.line {\n  border-color: #3367d9;\n  border-width: 0;\n  border-style: solid;\n}\n.react-flow__resize-control.line.left,\n.react-flow__resize-control.line.right {\n  width: 1px;\n  transform: translate(-50%, 0);\n  top: 0;\n  height: 100%;\n}\n.react-flow__resize-control.line.left {\n  left: 0;\n  border-left-width: 1px;\n}\n.react-flow__resize-control.line.right {\n  left: 100%;\n  border-right-width: 1px;\n}\n.react-flow__resize-control.line.top,\n.react-flow__resize-control.line.bottom {\n  height: 1px;\n  transform: translate(0, -50%);\n  left: 0;\n  width: 100%;\n}\n.react-flow__resize-control.line.top {\n  top: 0;\n  border-top-width: 1px;\n}\n.react-flow__resize-control.line.bottom {\n  border-bottom-width: 1px;\n  top: 100%;\n}\n","graphscope-importor"),(0,n.useEffect)(function(){var e;(e=rI().mark(function e(){var n,o,c,l,u;return rI().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={nodes:[],edges:[]},!("DATA_MODELING"===t&&i)){e.next=5;break}return e.next=4,i();case 4:n=e.sent;case 5:if(!("DATA_IMPORTING"===t&&a)){e.next=9;break}return e.next=8,a();case 8:n=e.sent;case 9:c=(o={nodes:ew(n.nodes,S),edges:ex(n.edges,S)}||{nodes:[],edges:[]}).nodes,l=o.edges,u=0===c.length,O(function(e){e.isReady=!0,e.nodes=c,e.edges=l,e.appMode=t,e.elementOptions={isEditable:!u,isConnectable:"groot"===r&&"DATA_MODELING"===t||u},e.currentId=u?"":c[0].id,e.currentType="nodes",e.isSaveFiles=y});case 13:case"end":return e.stop()}},e)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){rD(i,n,o,a,c,"next",e)}function c(e){rD(i,n,o,a,c,"throw",e)}a(void 0)})})()},[]);var j="PURE"===t;return n.createElement(c.T6,{locales:rk},n.createElement(c.$0,{rightSide:w||n.createElement(tD,{appMode:t,queryPrimitiveTypes:d,handleUploadFile:h,batchUploadFiles:m,onCreateLabel:v,onDeleteLabel:g}),leftSideStyle:void 0===u?{width:"350px",padding:"0px 12px"}:u,rightSideStyle:void 0===s?{width:"450px",padding:"0px 12px"}:s,defaultCollapsed:void 0===l?{rightSide:!1,leftSide:!0}:l,style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rA(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=rT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rT(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rT(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({height:"calc(100vh - 50px)"},b),splitBorder:!0},_?n.createElement(o.tV,null,!j&&n.createElement(rP,null),n.createElement(eL,null),p):n.createElement(c.CP,null)))};r(63730);let rC=function(e){return n.createElement(f.ZP,{id:e.id,store:rL},n.createElement(rN,e))}}}]);