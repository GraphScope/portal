"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[56],{5576:function(e,t,r){r.d(t,{Or:function(){return v},VP:function(){return F},aq:function(){return me}});var n=r(71909),o=r.n(n);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(){l=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),c=new I(n||[]);return o(a,"_invoke",{value:P(e,r,c)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var h="suspendedStart",m="executing",y="completed",v={};function g(){}function b(){}function x(){}var w={};f(w,c,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(_([])));S&&S!==r&&n.call(S,c)&&(w=S);var k=x.prototype=g.prototype=Object.create(w);function j(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,a,c,u){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==i(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function P(t,r,n){var o=h;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=d(t,r,n);if("normal"===s.type){if(o=n.done?y:"suspendedYield",s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return b.prototype=x,o(k,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},j(O.prototype),f(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(p(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(k),f(k,s,"Generator"),f(k,c,(function(){return this})),f(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function f(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){f(i,n,o,a,c,"next",e)}function c(e){f(i,n,o,a,c,"throw",e)}a(void 0)}))}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function h(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:String(t)}var y=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"driver",void 0),h(this,"session",void 0);try{this.driver=r&&n?o().driver(t,o().auth.basic(r,n),{encrypted:!1}):o().driver(t,void 0,{encrypted:!1})}catch(e){console.log(e)}}var t,r,n,i,a,c,u,s;return t=e,r=[{key:"connect",value:(s=p(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.driver){e.next=4;break}return e.next=3,this.driver.verifyConnectivity();case 3:return e.abrupt("return",!0);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getSession",value:(u=p(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.driver){e.next=4;break}return t=this.driver.session(),this.session=t,e.abrupt("return",this.session);case 4:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getKDegreeRelationships",value:(c=p(l().mark((function e(t,r){var n,o,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.driver){e.next=3;break}return e.abrupt("return",{nodes:[],edges:[]});case 3:return n=this.driver.session({}),o="\n      match data=(n)-[*..".concat(r,"]-(m) WHERE id(n) in [").concat(t,"] RETURN data LIMIT 200\n      "),e.next=7,n.run(o);case 7:return i=e.sent,console.log("%c[Cypher Query Driver] NeighborsQuery 查询语句","color:blue",o),console.log("%c[Cypher Query Driver] NeighborsQuery 查询结果","color:green",i),n.close(),e.abrupt("return",g(i));case 14:return e.prev=14,e.t0=e.catch(0),console.log("error",e.t0),e.abrupt("return",{nodes:[],edges:[],raw:e.t0,mode:"error"});case 18:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e,t){return c.apply(this,arguments)})},{key:"query",value:(a=p(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getSession();case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",{nodes:[],edges:[]});case 6:return e.next=8,r.run(t);case 8:return n=e.sent,console.log("%c[Cypher Query Driver] QueryCypher 查询语句","color:blue",t),console.log("%c[Cypher Query Driver] QueryCypher 查询结果","color:green",n),r.close(),e.abrupt("return",g(n));case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",{nodes:[],edges:[],raw:e.t0,mode:"error"});case 18:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(e){return a.apply(this,arguments)})},{key:"close",value:(i=p(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.driver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.driver.close();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})}],r&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),v=y;function g(e){var t=[],r=[],n=[];return e.records.forEach((function(e){var o={};e._fields.forEach((function(n,i){var a="string"==typeof n,c=n.__isNode__,u=n.__isRelationship__,s=n.__isPath__,l=n.__isInteger__,f=b(n.properties);if(c){var p=n,d=p.labels,h=(p.identity,p.elementId),m=d[0];t.push({id:h,label:m,properties:f})}if(u){var y=n,v=y.type,g=y.startNodeElementId,x=y.endNodeElementId,w=y.elementId,E=g,S=x,k=v;r.push({id:w,source:E,target:S,label:k,properties:f})}s&&n.segments.forEach((function(e){var n,o,i=e.start,a=e.end,c=e.relationship,u=i.identity,s=i.labels,l=(i.properties,a.identity),f=a.labels;a.properties;t.forEach((function(e){e.id===u.low.toString()&&(n=!0),e.id===l.low.toString()&&(o=!0)})),n||t.push({id:u.low.toString(),label:s[0],properties:b(i.properties)}),o||t.push({id:l.low.toString(),label:f[0],properties:b(a.properties)});var p=c.identity,d=c.type,h=c.start,m=c.end;r.find((function(e){return e.id===p.low.toString()}))||r.push({id:"e_"+p.low.toString(),source:h.low.toString(),target:m.low.toString(),label:d,properties:b(c.properties)})}));l&&(o[e.keys[i]]=n.low),a&&(o[e.keys[i]]=n)})),0!==Object.keys(o).length&&n.push(o)})),s(s({},function(e,t){var r=new Map;e.forEach((function(e){r.set(e.id,e)}));var n=t.filter((function(e){var t=e.source,n=e.target,o=r.get(t),i=r.get(n);return o&&i}));return{nodes:a(r.values()),edges:n}}(t,r)),{},{table:n,raw:e})}function b(e){return e?(Object.keys(e).forEach((function(t){var r=e[t];r.__isInteger__&&(e[t]=r.low)})),e):{}}var x=r(35685),w=r.n(x);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=T(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function T(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(){C=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new I(n||[]);return o(a,"_invoke",{value:O(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(_([])));w&&w!==r&&n.call(w,a)&&(b=w);var S=g.prototype=y.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==E(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(E(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(j.prototype),s(j.prototype,c,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new j(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(S),s(S,u,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function I(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){I(i,n,o,a,c,"next",e)}function c(e){I(i,n,o,a,c,"throw",e)}a(void 0)}))}}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Z(n.key),n)}}function D(e,t,r){return(t=Z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:String(t)}var R=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"admin",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"password";N(this,e),D(this,"driver",void 0),D(this,"uri",void 0);try{var o=new(w().driver.auth.PlainTextSaslAuthenticator)(r,n),i=new(w().driver.Client)(t,{traversalSource:"g",authenticator:o});this.uri=t,this.driver=i}catch(e){console.log(e)}}var t,r,n,o,i,a,c,u,s,l,f,p,d;return t=e,r=[{key:"connect",value:(d=_(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.driver){e.next=4;break}return e.next=3,this.driver.verifyConnectivity();case 3:return e.abrupt("return",!0);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getSession",value:(p=_(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.driver){e.next=2;break}return e.abrupt("return",this.driver);case 2:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"query",value:(f=_(C().mark((function e(t){var r,n,o,i,a,c,u,s,l,f,p,d,h,m,y,v,g,b;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,console.log("%c[Query] 查询语句","color:blue",t),e.next=5,this.driver.submit(t);case 5:r=e.sent,console.log("%c[Query] 查询结果","color:green",r),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{nodes:[],edges:[],raw:e.t0,mode:"error"});case 12:n="graph",o=[],i={},a={},c=new Set,u=P(r),e.prev=18,u.s();case 20:if((s=u.n()).done){e.next=71;break}if(!((l=s.value)instanceof w().structure.Vertex)){e.next=27;break}return e.next=25,this.handleVertexMapping(a,c,l);case 25:e.next=69;break;case 27:if(!(l instanceof w().structure.Edge)){e.next=32;break}return e.next=30,this.handleEdgeMapping(a,i,c,l);case 30:e.next=69;break;case 32:if(!(l instanceof w().structure.Path)){e.next=35;break}e.next=69;break;case 35:if(!this.isGSExpandPath(l)){e.next=62;break}f=P(l),e.prev=37,f.s();case 39:if((p=f.n()).done){e.next=50;break}if(!((d=p.value)instanceof w().structure.Vertex)){e.next=46;break}return e.next=44,this.handleVertexMapping(a,c,d);case 44:e.next=48;break;case 46:return e.next=48,this.handleEdgeMapping(a,i,c,d);case 48:e.next=39;break;case 50:e.next=55;break;case 52:e.prev=52,e.t1=e.catch(37),f.e(e.t1);case 55:return e.prev=55,f.f(),e.finish(55);case 58:return e.next=60,this.handleTableResult(o,l);case 60:e.next=69;break;case 62:if(n="table","number"!=typeof l&&"string"!=typeof l){e.next=67;break}o.push(l),e.next=69;break;case 67:return e.next=69,this.handleTableResult(o,l);case 69:e.next=20;break;case 71:e.next=76;break;case 73:e.prev=73,e.t2=e.catch(18),u.e(e.t2);case 76:return e.prev=76,u.f(),e.finish(76);case 79:if("graph"!==n){e.next=84;break}return e.next=82,this.queryNodesProperties(O(c));case 82:for(m in h=e.sent)m in a&&(a[m].properties=h[m]);case 84:if("graph"!==n){e.next=90;break}for(g in y=[],v=[],a)y.push(a[g]);for(b in i)v.push(i[b]);return e.abrupt("return",{nodes:y,edges:v,mode:n,table:o,raw:r});case 90:if("table"!==n){e.next=92;break}return e.abrupt("return",{nodes:[],edges:[],mode:n,table:o,raw:r});case 92:case"end":return e.stop()}}),e,this,[[1,9],[18,73,76,79],[37,52,55,58]])}))),function(e){return f.apply(this,arguments)})},{key:"isGSExpandPath",value:function(e){if(!e instanceof Array)return!1;try{var t,r=!0,n=!1,o=P(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;r&&(r=i instanceof w().structure.Vertex||i instanceof w().structure.Edge),i instanceof w().structure.Edge&&(n=!0)}}catch(e){o.e(e)}finally{o.f()}return r&&n}catch(e){return!1}return!1}},{key:"jsonGraphData",value:(l=_(C().mark((function e(t){var r,n,o,i,a,c,u,s,l;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},n=t.id,o=t.label,i=t.properties,r.id="".concat(n),r.label=o,i){for(c in a={},i)(u=i[c])&&u[0]&&(a["".concat(c)]=u[0].value);r.properties=a}if(!(t instanceof w().structure.Edge)){e.next=13;break}return s=t.inV,l=t.outV,e.next=9,this.jsonGraphData(s);case 9:return r.inV=e.sent,e.next=12,this.jsonGraphData(l);case 12:r.outV=e.sent;case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"handleVertexMapping",value:(s=_(C().mark((function e(t,r,n){var o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.jsonGraphData(n);case 2:o=e.sent,t[o.id]=j(j({},o),{},{nodeType:o.label}),r.add(o.id);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return s.apply(this,arguments)})},{key:"handleEdgeMapping",value:(u=_(C().mark((function e(t,r,n,o){var i,a,c;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.jsonGraphData(o);case 2:i=e.sent,a=i.outV,c=i.inV,r[i.id]=j(j({},i),{},{edgeType:i.label,source:a.id,target:c.id}),t[a.id]=j(j({},a),{},{nodeType:a.label}),n.add(a.id),t[c.id]=j(j({},c),{},{nodeType:c.label}),n.add(c.id);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return u.apply(this,arguments)})},{key:"handleTableResult",value:(c=_(C().mark((function e(t,r){var n,o,i,a,c,u,s,l;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.entries(),o={},i=P(n),e.prev=3,i.s();case 5:if((a=i.n()).done){e.next=22;break}if(c=a.value,u=S(c,2),s=u[0],l=u[1],s instanceof w().process.EnumValue&&(s="~".concat(s.elementName)),"number"!=typeof l){e.next=13;break}o[s]=l,e.next=20;break;case 13:if(!(l instanceof w().structure.Vertex||l instanceof w().structure.Edge)){e.next=19;break}return e.next=16,this.jsonGraphData(l);case 16:o[s]=e.sent,e.next=20;break;case 19:o[s]=JSON.stringify(l);case 20:e.next=5;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(3),i.e(e.t0);case 27:return e.prev=27,i.f(),e.finish(27);case 30:t.push(o);case 31:case"end":return e.stop()}}),e,this,[[3,24,27,30]])}))),function(e,t){return c.apply(this,arguments)})},{key:"queryNodesProperties",value:(a=_(C().mark((function e(t){var r,n,o,i,a,c,u,s,l,f,p,d,h,m,y;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},t&&0!==t.length){e.next=3;break}return e.abrupt("return",r);case 3:return n="g.V(".concat(t.join(","),").elementMap()"),e.next=6,this.driver.submit(n);case 6:o=e.sent,i=P(o);try{for(i.s();!(a=i.n()).done;){c=a.value,u=null,s=c.entries(),l={},f=P(s);try{for(f.s();!(p=f.n()).done;)d=p.value,h=S(d,2),m=h[0],y=h[1],m instanceof w().process.EnumValue?"id"===m.elementName&&(u=y):l[m]=y}catch(e){f.e(e)}finally{f.f()}r[u]=l}}catch(e){i.e(e)}finally{i.f()}return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"queryEdgesProperties",value:(i=_(C().mark((function e(t){var r;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"close",value:(o=_(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.driver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.driver.close();case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}],r&&A(t.prototype,r),n&&A(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),F=R;var G=r(28526);var q=function(e,t){return e.reduce((function(e,r){return e.some((function(e){return t(r,e)}))||e.push(r),e}),[])};var M=["_id","_src","_dst","_label"];function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function H(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q(){Q=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(C([])));w&&w!==r&&n.call(w,a)&&(b=w);var E=g.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==z(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(z(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function W(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function K(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){W(i,n,o,a,c,"next",e)}function c(e){W(i,n,o,a,c,"throw",e)}a(void 0)}))}}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,te(n.key),n)}}function $(e,t,r){return t&&J(e.prototype,t),r&&J(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t,r){return(t=te(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z(t)?t:String(t)}var re=function(){function e(){X(this,e),ee(this,"kuzu",void 0),ee(this,"db",void 0),ee(this,"conn",void 0),ee(this,"FS",void 0),ee(this,"dbname",void 0),ee(this,"schema",void 0),ee(this,"curDataset",void 0),ee(this,"targetPath",void 0),ee(this,"kuzuEngine",void 0),ee(this,"indexdb",void 0),ee(this,"mountedPath",void 0),this.kuzu=G.Z,this.db=null,this.conn=null,this.FS=null,this.schema={nodes:[],edges:[]},this.dbname="",this.curDataset="",this.targetPath="",this.kuzuEngine=null,this.mountedPath=new Set}var t,r,n,o,i,a,c,u,s,l,f,p,d,h,m,y,v,g,b;return $(e,[{key:"initialize",value:(b=K(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("initialize again official"),e.next=3,this.kuzu;case 3:return this.kuzuEngine=e.sent,this.FS=this.kuzuEngine.FS,console.log("mkdir"),e.prev=6,e.next=9,null===(t=this.FS)||void 0===t?void 0:t.mkdir("data");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.log("folder data already exists");case 14:console.log("finish mkdir");case 15:case"end":return e.stop()}}),e,this,[[6,11]])}))),function(){return b.apply(this,arguments)})},{key:"installUDF",value:(g=K(Q().mark((function e(){var t,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=this.conn)||void 0===t?void 0:t.query('CREATE MACRO elementid(x) AS CAST(ID(x),"STRING")');case 3:return r=e.sent,e.t0=console,e.next=7,r.toString();case 7:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1),e.next=11,r.close();case 11:e.next=16;break;case 13:e.prev=13,e.t2=e.catch(0),console.log(e.t2);case 16:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(){return g.apply(this,arguments)})},{key:"use",value:(v=K(Q().mark((function e(t){var r,n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.curDataset){e.next=3;break}return e.next=3,this.closeDataset();case 3:return e.next=5,this.setDatasetId(t);case 5:return e.prev=5,e.next=8,null===(n=this.FS)||void 0===n?void 0:n.mkdir("".concat(this.curDataset));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log("Directory ".concat(this.curDataset," exists"));case 13:return e.next=15,null===(r=this.FS)||void 0===r?void 0:r.mountIdbfs(this.targetPath);case 15:return console.log("Mount ",this.targetPath),e.next=18,this.existDataset(t);case 18:if(!e.sent){e.next=22;break}return console.log("Loading from indexdb ".concat(t)),e.next=22,this.loadFromIndexDB();case 22:return e.next=24,this.openDataset();case 24:return e.next=26,this.installUDF();case 26:return e.abrupt("return",this.curDataset);case 27:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(e){return v.apply(this,arguments)})},{key:"setDatasetId",value:(y=K(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.curDataset=t,this.targetPath=this.pathJoin("/",this.curDataset);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"existDataset",value:(m=K(Q().mark((function e(t){var r,n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.pathJoin("/",t),!indexedDB.databases){e.next=15;break}return e.prev=2,e.next=5,indexedDB.databases();case 5:return n=e.sent,e.abrupt("return",n.some((function(e){return e.name===r})));case 9:return e.prev=9,e.t0=e.catch(2),console.error("Error accessing databases:",e.t0),e.abrupt("return",!1);case 13:e.next=17;break;case 15:return console.warn("indexedDB.databases() is not supported in this browser."),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return m.apply(this,arguments)})},{key:"datasetLoaded",value:(h=K(Q().mark((function e(t){var r,n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.FS.lookupPath("/"+t).node;case 3:if(r=e.sent,n=r.mode,r.timestamp,!this.FS.isDir(n)){e.next=8;break}return e.abrupt("return",!0);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),console.error('Error retrieving "'.concat(t,'":'),e.t0),e.abrupt("return",!1);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return h.apply(this,arguments)})},{key:"typeConvert",value:function(e){switch(e.toUpperCase()){case"DT_STRING":default:return"STRING";case"DT_DOUBLE":return"DOUBLE";case"DT_SIGNED_INT32":return"INT32";case"DT_SIGNED_INT64":return"INT64"}}},{key:"createSchema",value:(d=K(Q().mark((function e(t){var r,n,o,i,a,c,u,s,l,f,p,d=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.nodes,n=t.edges,this.schema=t,o=r.map((function(e){var t=e.label,r=e.properties,n=r.map((function(e){var t=e.name,r=e.type;return e.primaryKey,"".concat(t," ").concat(d.typeConvert(r))})),o=r.map((function(e){var t=e.name;return e.type,e.primaryKey?"PRIMARY KEY (".concat(t,")"):null})).filter((function(e){return null!==e})),i=n.concat(o);return"CREATE NODE TABLE ".concat(t," (").concat(i.join(", "),");")})),i=n.map((function(e){var t=e.label,r=e.source,n=e.target,o=e.properties.map((function(e){var t=e.name,r=e.type;return"".concat(t," ").concat(d.typeConvert(r))}));return 0===o.length?"CREATE REL TABLE ".concat(t," (FROM ").concat(r," TO ").concat(n,");"):"CREATE REL TABLE ".concat(t," (FROM ").concat(r," TO ").concat(n," , ").concat(o.join(", "),");")})),a=[],c=0;case 6:if(!(c<o.length)){e.next=21;break}return console.log("create nodes script: ",o[c]),e.next=10,null===(u=this.conn)||void 0===u?void 0:u.query(o[c]);case 10:return s=e.sent,e.t0=a,e.next=14,s.toString();case 14:return e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=18,s.close();case 18:c++,e.next=6;break;case 21:l=0;case 22:if(!(l<i.length)){e.next=37;break}return console.log("create edges script: ",i[l]),e.next=26,null===(f=this.conn)||void 0===f?void 0:f.query(i[l]);case 26:return p=e.sent,e.t2=a,e.next=30,p.toString();case 30:return e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=34,p.close();case 34:l++,e.next=22;break;case 37:console.log("Schema created: ",a);case 38:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"uploadCsvFile",value:(p=K(Q().mark((function e(t,r){var n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){if(t){var i=new FileReader;i.onload=function(){var i=K(Q().mark((function i(a){var c,u,s,l,f,p,d;return Q().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,u=new Uint8Array(a.target.result),s=t.name,l="data/"+s,f=t.name.split(".")[0],i.next=7,n.FS.writeFile(l,u);case 7:return d=r.delimiter,i.next=10,null===(c=n.conn)||void 0===c?void 0:c.query("COPY ".concat(f,' FROM "').concat(l,"\" (HEADER=true, DELIM='").concat(d,"');"));case 10:p=i.sent,e(p),i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),o(i.t0);case 17:case"end":return i.stop()}}),i,null,[[0,14]])})));return function(e){return i.apply(this,arguments)}}(),i.onerror=function(e){o(e)},i.readAsArrayBuffer(t)}else o(new Error("No file provided"))})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return p.apply(this,arguments)})},{key:"loadGraph",value:(f=K(Q().mark((function e(t){var r,n,o,i,a,c,u,s=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={nodes:[],edges:[]},n=H(this.schema.nodes),e.prev=2,i=Q().mark((function e(){var n,i,a,c;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.value,!(i=t.find((function(e){return e.name===n.label+".csv"})))){e.next=20;break}return console.log("node: ",i.name),e.prev=4,e.next=7,s.uploadCsvFile(i,n.meta);case 7:return a=e.sent,e.next=10,a.toString();case 10:return c=e.sent,e.next=13,a.close();case 13:r.nodes.push({success:!0,name:i.name,message:c}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),console.error("Error uploading file:",e.t0),r.nodes.push({success:!1,name:i.name,message:e.t0.toString()});case 20:case"end":return e.stop()}}),e,null,[[4,16]])})),n.s();case 5:if((o=n.n()).done){e.next=9;break}return e.delegateYield(i(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),n.e(e.t1);case 14:return e.prev=14,n.f(),e.finish(14);case 17:a=H(this.schema.edges),e.prev=18,u=Q().mark((function e(){var n,o,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.value,!(o=t.find((function(e){return e.name===n.label+".csv"})))){e.next=19;break}return e.prev=3,e.next=6,s.uploadCsvFile(o,n.meta);case 6:return i=e.sent,e.next=9,i.toString();case 9:return a=e.sent,e.next=12,i.close();case 12:r.edges.push({success:!0,name:o.name,message:a}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),console.error("Error uploading file:",e.t0),r.edges.push({success:!1,name:o.name,message:e.t0.toString()});case 19:case"end":return e.stop()}}),e,null,[[3,15]])})),a.s();case 21:if((c=a.n()).done){e.next=25;break}return e.delegateYield(u(),"t2",23);case 23:e.next=21;break;case 25:e.next=30;break;case 27:e.prev=27,e.t3=e.catch(18),a.e(e.t3);case 30:return e.prev=30,a.f(),e.finish(30);case 33:return e.abrupt("return",r);case 34:case"end":return e.stop()}}),e,this,[[2,11,14,17],[18,27,30,33]])}))),function(e){return f.apply(this,arguments)})},{key:"pathJoin",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((function(e){return e})).join("/").replace(/\/+/g,"/")}},{key:"rmdirs",value:(l=K(Q().mark((function e(t){var r,n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.FS.readDir(t);case 2:return r=e.sent,console.log(r),e.next=6,Promise.all(r.map(function(){var e=K(Q().mark((function e(r){var o,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("."===r||".."===r){e.next=16;break}return o=n.pathJoin(t,r),console.log("remove ".concat(o)),e.next=5,n.FS.lookupPath(o).node;case 5:if(i=e.sent,a=i.mode,i.timestamp,!n.FS.isFile(a)){e.next=13;break}return e.next=11,n.FS.unlink(o);case 11:e.next=16;break;case 13:if(!n.FS.isDir(a)){e.next=16;break}return e.next=16,n.rmdirs(o);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return e.sent,e.prev=7,e.next=10,this.FS.rmdir(t);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.log("Error when remove ".concat(t));case 15:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(e){return l.apply(this,arguments)})},{key:"query",value:(s=K(Q().mark((function e(t){var r,n,o,i,a,c,u,s,l,f;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("query: ",t),"CALL kuzu.meta.schema"!==t){e.next=5;break}return e.next=4,this.querySchema();case 4:case 8:return e.abrupt("return",e.sent);case 5:if("CALL kuzu.meta.statistics"!==t){e.next=9;break}return e.next=8,this.getCount();case 9:return console.time("Query cost"),e.next=12,null===(r=this.conn)||void 0===r?void 0:r.query(t);case 12:if(n=e.sent,console.timeEnd("Query cost"),n){e.next=18;break}return e.next=17,n.close();case 17:return e.abrupt("return",{nodes:[],edges:[],table:[]});case 18:return e.prev=18,o=function(e){return JSON.stringify(e,(function(e,t){return"bigint"==typeof t?t.toString():t}))},e.next=22,n.getAllObjects();case 22:return i=e.sent,a=JSON.parse(o(i)),c=[],u=[],a.forEach((function(e){Object.values(e).forEach((function(e){var t=e._id,r=e._src,n=e._dst,o=e._label,i=Y(e,M);if(t){var a=t.offset,s=t.table,l='"'.concat(s,":").concat(a,'"');if(r&&n){var f='"'.concat(r.table,":").concat(r.offset,'"'),p='"'.concat(n.table,":").concat(n.offset,'"');u.push({id:l,label:o,source:f,target:p,properties:U({},i)})}else c.push({id:l,label:o,properties:U({},i)})}}))})),s=q(c,(function(e,t){return e.id===t.id})),l=q(u,(function(e,t){return e.id===t.id})),console.log({nodes:s,edges:l,table:a}),e.next=32,n.close();case 32:return e.abrupt("return",{nodes:s,edges:l,table:a});case 35:return e.prev=35,e.t0=e.catch(18),console.error(e.t0),e.t1=JSON,e.next=41,n.toString();case 41:return e.t2=e.sent,f=e.t1.parse.call(e.t1,e.t2),e.next=45,n.close();case 45:return e.abrupt("return",{nodes:[],edges:[],table:f});case 46:case"end":return e.stop()}}),e,this,[[18,35]])}))),function(e){return s.apply(this,arguments)})},{key:"querySchema",value:(u=K(Q().mark((function e(){var t,r,n,o,i,a,c,u,s,l,f,p,d,h,m,y;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("query schema"),e.next=3,null===(t=this.conn)||void 0===t?void 0:t.query("call show_tables() return *");case 3:return r=e.sent,e.next=6,r.getAllObjects();case 6:return n=e.sent,e.next=9,r.close();case 9:o=[],i=[],a=0;case 12:if(!(a<n.length)){e.next=38;break}return u=n[a],s=u.name,l=u.type,e.next=16,null===(c=this.conn)||void 0===c?void 0:c.query("call TABLE_INFO('".concat(s,"') return *"));case 16:return f=e.sent,e.next=19,f.getAllObjects();case 19:return p=e.sent,e.next=22,f.close();case 22:if("NODE"===l&&o.push({label:s,properties:p.map((function(e){return{name:e.name,type:e.type}}))}),"REL"!==l){e.next=35;break}return e.next=26,null===(d=this.conn)||void 0===d?void 0:d.query("call SHOW_CONNECTION('".concat(s,"') return *"));case 26:return h=e.sent,e.next=29,h.getAllObjects();case 29:return m=e.sent,console.log(s,l,m),y=m[0],e.next=34,h.close();case 34:i.push({source:y["source table name"],target:y["destination table name"],label:s,properties:p.map((function(e){return{name:e.name,type:e.type}}))});case 35:a++,e.next=12;break;case 38:return e.abrupt("return",{nodes:o,edges:i});case 39:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getCount",value:(c=K(Q().mark((function e(){var t,r,n,o,i,a,c,u,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.curDataset){e.next=2;break}return e.abrupt("return",[0,0]);case 2:return e.next=4,null===(t=this.conn)||void 0===t?void 0:t.query("MATCH (n) RETURN COUNT(n) AS vertex_count;");case 4:return n=e.sent,e.next=7,null===(r=this.conn)||void 0===r?void 0:r.query("MATCH ()-[r]->() RETURN COUNT(r) AS edge_count;");case 7:return o=e.sent,e.next=10,n.toString();case 10:return i=e.sent,e.next=13,o.toString();case 13:return a=e.sent,c=parseInt(i.split("\n")[1],10),u=parseInt(a.split("\n")[1],10),s=[c,u],e.next=19,n.close();case 19:return e.next=21,o.close();case 21:return e.abrupt("return",s);case 22:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"loadFromIndexDB",value:(a=K(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.FS.syncfs(!0);case 3:console.log("Load from indexdb successfully"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Error loading from indexdb: ",e.t0);case 9:console.log("finish load from indexdb");case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return a.apply(this,arguments)})},{key:"openDataset",value:(i=K(Q().mark((function e(){var t,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=console,e.next=3,this.FS.readDir("/");case 3:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1),console.log("Open dataset ".concat(this.curDataset)),this.db=new this.kuzuEngine.Database(this.curDataset),this.conn=new this.kuzuEngine.Connection(this.db),e.next=10,null===(t=this.conn)||void 0===t?void 0:t.query("MATCH (n) RETURN count(n);");case 10:return r=e.sent,e.t2=console,e.next=14,r.toString();case 14:return e.t3=e.sent,e.t2.log.call(e.t2,e.t3),e.next=18,r.close();case 18:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"closeDataset",value:(o=K(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Close dataset ".concat(this.curDataset)),!this.conn){e.next=5;break}return e.next=4,this.conn.close();case 4:console.log("Connection closed.");case 5:if(!this.db){e.next=9;break}return e.next=8,this.db.close();case 8:console.log("Database closed.");case 9:return e.next=11,this.FS.unmount(this.targetPath);case 11:console.log("Unmount ",this.targetPath);case 12:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"writeBack",value:(n=K(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("start to write back"),e.prev=1,console.log("Attempting to sync to IndexDB..."),e.next=5,this.FS.syncfs(!1);case 5:return console.log("Save to indexdb successfully"),e.abrupt("return",{success:!0,message:"Save to indexdb successfully"});case 9:return e.prev=9,e.t0=e.catch(1),console.error("Error saving to indexdb: ",e.t0),e.abrupt("return",{success:!1,message:"error: "+e.t0.toString()});case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return n.apply(this,arguments)})},{key:"close",value:(r=K(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.closeDataset();case 3:return console.log("Close database successfully"),e.abrupt("return",{success:!0,message:"Cloase database successfully"});case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error saving to indexdb: ",e.t0),e.abrupt("return",{success:!1,message:"error: "+e.t0.toString()});case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return r.apply(this,arguments)})},{key:"cancel",value:(t=K(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.closeDataset();case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function oe(){oe=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(C([])));w&&w!==r&&n.call(w,a)&&(b=w);var E=g.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ne(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(ne(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ce(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function ue(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ce(i,n,o,a,c,"next",e)}function c(e){ce(i,n,o,a,c,"throw",e)}a(void 0)}))}}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fe(n.key),n)}}function le(e,t,r){return(t=fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ne(t)?t:String(t)}var pe=new Map,de=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),le(this,"_locked",void 0),le(this,"_waiting",void 0),this._locked=!1,this._waiting=[]}var t,r,n;return t=e,(r=[{key:"lock",value:function(){var e=this,t=function t(){if(e._locked=!1,e._waiting.length>0){var r=e._waiting.shift();e._locked=!0,r(t)}};return this._locked?new Promise((function(t){e._waiting.push(t)})).then((function(){return t})):(this._locked=!0,Promise.resolve(t))}}])&&se(t.prototype,r),n&&se(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()),he=function(){var e=ue(oe().mark((function e(t){var r,n,o,i,a,c,u,s,l,f,p;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.language,n=t.endpoint,o=t.username,i=t.password,a="".concat(r,"_").concat(n),e.next=4,de.lock();case 4:if(c=e.sent,pe.has(a)){e.next=26;break}if(console.log("create new driver"),"cypher"!==r){e.next=25;break}if(u=n.split("://"),s=ie(u,2),l=s[0],f=s[1],"kuzu_wasm"!==l){e.next=24;break}return p=new re,e.next=13,p.initialize();case 13:return e.next=15,p.existDataset(f);case 15:if(!e.sent){e.next=21;break}return console.log("start to use ",f),e.next=20,p.use(f);case 20:console.log("finish to use ",f);case 21:pe.set(a,p),e.next=25;break;case 24:pe.set(a,new v(n,o,i));case 25:"gremlin"===r&&pe.set(a,new F(n,o,i));case 26:return console.log("get driver: ",pe.get(a)),c(),e.abrupt("return",pe.get(a));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=ue(oe().mark((function e(t){var r,n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.script,e.next=3,he(t);case 3:return n=e.sent,e.abrupt("return",n.query(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},55736:function(e,t,r){r.d(t,{C1:function(){return i},qp:function(){return a},rv:function(){return o}});var n=r(33741),o={mode:"GS_STUDIO_QUERY_MODE"},i={isReady:!1,graphId:"",activeNavbar:"recommended",collapse:!0,activeId:"query-1",globalScript:"Match (n) return n limit 10",autoRun:!1,absolutePosition:!1,schemaData:{nodes:[],edges:[]},statements:[],historyStatements:[],savedStatements:[],storeProcedures:[],mode:"flow",enableImmediateQuery:!1,language:"gremlin",defaultCollapsed:!0,welcome:void 0},a=function(){return(0,n.qp)()}},84158:function(e,t,r){r.d(t,{Ek:function(){return o},Id:function(){return n}});r(2268).Utils.storage;function n(e){for(var t=0,r=["MATCH","WHERE","RETURN","CREATE","DELETE"];t<r.length;t++){var n=r[t];e=e.replace(new RegExp("(".concat(n,")(?![^\\(]*\\))"),"g"),"\n$1")}return(e=(e=e.replace(/, /g,",\n")).replace(/\n+/g,"\n")).trim()}function o(e){return(e.match(/\r?\n/g)||[]).length+1}},63904:function(e,t,r){r.d(t,{Z:function(){return x}});var n=r(50959),o=r(2268),i=r(96066);r(52871);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e,t,r){var n;return n=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==a(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f={comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}]},p={defaultToken:"",tokenPostfix:".gremlin",ignoreCase:!0,brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["g","V","E","out","in","both","has","hasLabel","limit","order","by","select","count","filter","map","dedup","outE","inE","bothE"],builtinLiterals:["true","false","null"],builtinFunctions:["values","keys","id","label","property","outV","inV","bothV","sum","mean","min","max","coalesce","is","not","range","fold"],operators:["+","-","*","/","%","^","=","<>","<",">","<=",">="],escapes:/\\(?:[tbnrf\\"'`]|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+/,octaldigits:/[0-7]+/,hexdigits:/[0-9a-fA-F]+/,tokenizer:{root:[[/[{}[\]()]/,"@brackets"],{include:"common"}],common:[{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/:[a-zA-Z_][\w]*/,"type.identifier"],[/[a-zA-Z_][\w]*(?=\()/,{cases:{"@builtinFunctions":"predefined.function","@keywords":"keyword","@default":"identifier"}}],[/`/,"identifier.escape","@identifierBacktick"],[/[;,.:|]/,"delimiter"],[/[\+\-\*\/\^%]+/,"delimiter.operator"],[/[\!<>\?=\|&]/,"delimiter"]],numbers:[[/-?(@digits)[eE](-?(@digits))?/,"number.float"],[/-?(@digits)?\.(@digits)([eE]-?(@digits))?/,"number.float"],[/-?0x(@hexdigits)/,"number.hex"],[/-?0(@octaldigits)/,"number.octal"],[/-?(@digits)/,"number"]],strings:[[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@stringDouble"],[/'/,"string","@stringSingle"]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/\/\/.*/,"comment"],[/[^/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],stringDouble:[[/[^\\"]+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/"/,"string","@pop"]],stringSingle:[[/[^\\']+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/'/,"string","@pop"]],identifierBacktick:[[/[^\\`]+/,"identifier.escape"],[/@escapes/,"identifier.escape"],[/\\./,"identifier.escape.invalid"],[/`/,"identifier.escape","@pop"]]}};var d=[].concat(["count","fold","sum","min","max","mean","group","groupCount"],["hasId","hasLabel","has","hasNot","is","where","not","dedup","order","limit","coin","sample","union"],["id","label","constant","valueMap","values","elementMap","select"]),h=["outV","inV","otherV","bothV"],m=["outE","inE","bothE","out","in","both"],y={};function v(e){return(e.match(/\r?\n/g)||[]).length+1}[].concat(h,["out","in","both"]).forEach((function(e){y[e]=[].concat(m,s(d))})),["outE","inE","bothE"].forEach((function(e){y[e]=[].concat(h,s(d))})),i.Mj.register({id:"gremlin"}),i.Mj.setMonarchTokensProvider("gremlin",p),i.Mj.setLanguageConfiguration("gremlin",f),i.Mj.registerCompletionItemProvider("gremlin",{triggerCharacters:["."],provideCompletionItems:function(e,t){var r,n=e.getLineContent(t.lineNumber).slice(0,t.column-1).trim(),o=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({g:["V","E"],V:[].concat(m,["match"],s(d)),E:[].concat(h,s(d))},y)[e]||[];return t.map((function(e){return{label:e,kind:i.Mj.CompletionItemKind.Function,documentation:e,insertText:"".concat(e,"()")}}))}((r=n.replace(/\(.*?\)/g,"").split(/\s|\./).filter(Boolean)).length>0?r[r.length-1]:"");return{suggestions:o}}});var g={cypher:"cypherTheme",gremlin:"GremlinTheme"},b=(0,n.forwardRef)((function(e,t){(0,o.useDynamicStyle)("\n.monaco-editor .view-overlays .current-line {\n  background-color: transparent !important;\n}\n\n.monaco-editor .monaco-scrollable-element::-webkit-scrollbar {\n  display: none;\n}\n\n.decorationsOverviewRuler {\n  display: none !important;\n}\n\n.monaco-editor .view-overlays .current-line-exact {\n  border: none !important;\n}\n\n.monaco-editor .scroll-decoration {\n  box-shadow: none;\n}\n","cypher-editor-style");var r,a=e.value,c=e.language,u=void 0===c?"cypher":c,s=e.maxRows,l=void 0===s?10:s,f=e.minRows,p=void 0===f?1:f,d=e.onChangeContent,h=e.clear,m=e.onInit,y=d?0:v(a),b=(0,o.useStudioProvier)().isLight;return(0,n.useEffect)((function(){return t&&t.current&&(v(a)<=l&&(t.current.style.height=20*v(a)+"px"),r=i.j6.create(t.current,{language:"gremlin",value:a,theme:b?g[u]:"vs-dark",suggestLineHeight:20,automaticLayout:!0,minimap:{enabled:!1},fontSize:14,lineHeight:20,folding:!0,wordWrap:"on",scrollBeyondLastLine:!1,scrollBeyondLastColumn:0}),t.current.codeEditor=r,r.onDidChangeModelContent((function(){var e,n=r.getContentHeight(),o=null===(e=r.getModel())||void 0===e?void 0:e.getLineCount();n<=20*l&&(t.current.style.height=n+"px"),d&&d(o,r)})),m&&m(t.current)),function(){r.dispose()}}),[t,a,u,!b]),n.useEffect((function(){h&&t&&t.current&&t.current.codeEditor&&t.current.codeEditor.setValue("")}),[h]),n.createElement("div",{ref:t,style:{padding:"5px 0px",width:"100%",height:20*(p+y)+"px",border:b?"1px solid rgb(187, 190, 195)":"1px solid #434343",borderRadius:"6px"}})})),x=b},21050:function(e,t,r){r.r(t),r.d(t,{ConnectEndpoint:function(){return Ct},QueryStatement:function(){return zt},Statement:function(){return Et.default},default:function(){return Yt},sdk:function(){return Ut}});var n=r(50959),o=r(53531),i=r(31192),a=r(55736),c=r(56331),u=o.Z.useToken,s=function(e){var t=u().token,r=(0,a.qp)().store.welcome;if(r){var o=r.title,i=r.description;return n.createElement("div",{style:{margin:"12px",borderRadius:"8px",background:t.colorBgBase}},n.createElement(c.Z,{message:o,description:i,type:"info",closable:!0}))}return null},l=r(54016),f=r(84155),p=r(28541),d=function(e){var t=e.isDark,r=t?"#272727":"#E6E9EE";return n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 915 866",fill:"none"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M552.085 623.067C491.189 655.842 482.589 745.72 418.484 770.756C352.941 796.353 259.359 798.915 226.164 750.352C189.108 696.141 291.287 607.551 265.559 547.035C237.793 481.726 101.961 496.952 88.3682 426.238C76.2288 363.085 150.831 297.41 208.118 248.21C263.376 200.753 332.496 162.372 402.856 156.147C468.399 150.348 511.091 201.87 571.612 216.049C633.101 230.454 738.7 185.557 759.412 239.679C782.973 301.247 654.143 363.856 654.328 432.195C654.506 498.496 794.484 523.038 760.348 586.766C727.485 648.115 617.062 588.097 552.085 623.067Z",fill:t?"#272727":"#EEF1F6"}),n.createElement("circle",{cx:"595.876",cy:"255.218",r:"12.5406",transform:"rotate(30 595.876 255.218)",fill:r}),n.createElement("circle",{cx:"724.312",cy:"289.146",r:"12.5406",transform:"rotate(30 724.312 289.146)",fill:r}),n.createElement("circle",{cx:"735.006",cy:"235.789",r:"12.5406",transform:"rotate(30 735.006 235.789)",fill:r}),n.createElement("circle",{cx:"800.535",cy:"288.103",r:"12.5406",transform:"rotate(30 800.535 288.103)",fill:r}),n.createElement("circle",{cx:"613.406",cy:"199.774",r:"12.5406",transform:"rotate(30 613.406 199.774)",fill:r}),n.createElement("circle",{cx:"662.947",cy:"242.856",r:"12.5406",transform:"rotate(30 662.947 242.856)",fill:r}),n.createElement("circle",{cx:"722.216",cy:"420.273",r:"12.5406",transform:"rotate(30 722.216 420.273)",fill:r}),n.createElement("circle",{cx:"788.851",cy:"389.157",r:"12.5406",transform:"rotate(30 788.851 389.157)",fill:r}),n.createElement("line",{x1:"594.446",y1:"254.765",x2:"611.976",y2:"199.321",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"661.962",y1:"243.988",x2:"612.422",y2:"200.905",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"663.219",y1:"244.332",x2:"596.148",y2:"256.693",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"663.85",y1:"241.659",x2:"725.215",y2:"287.949",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"736.476",y1:"236.083",x2:"725.782",y2:"289.441",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"735.152",y1:"237.281",x2:"663.093",y2:"244.349",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"735.941",y1:"234.616",x2:"801.471",y2:"286.93",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"787.591",y1:"389.971",x2:"723.052",y2:"289.96",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"787.361",y1:"388.985",x2:"799.046",y2:"287.931",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"800.556",y1:"289.603",x2:"724.333",y2:"290.646",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"789.486",y1:"390.517",x2:"722.851",y2:"421.632",stroke:r,strokeWidth:"3"}),n.createElement("circle",{cx:"165.557",cy:"381.703",r:"16.9036",transform:"rotate(165 165.557 381.703)",fill:r}),n.createElement("circle",{cx:"131.703",cy:"474.871",r:"16.9036",transform:"rotate(165 131.703 474.871)",fill:r}),n.createElement("circle",{cx:"216.702",cy:"581.703",r:"16.9036",transform:"rotate(165 216.702 581.703)",fill:r}),n.createElement("line",{x1:"132.878",y1:"473.939",x2:"218.059",y2:"581.392",stroke:r,strokeWidth:"3"}),n.createElement("line",{x1:"130.293",y1:"474.359",x2:"164.148",y2:"381.191",stroke:r,strokeWidth:"3"}),n.createElement("circle",{cx:"334",cy:"204",r:"7",fill:r}),n.createElement("circle",{cx:"361",cy:"152",r:"7",fill:r}),n.createElement("circle",{cx:"283",cy:"229",r:"7",fill:r}),n.createElement("circle",{cx:"385",cy:"219",r:"7",fill:r}),n.createElement("circle",{cx:"414",cy:"190",r:"7",fill:r}),n.createElement("line",{x1:"282.78",y1:"228.551",x2:"333.78",y2:"203.551",stroke:r}),n.createElement("line",{x1:"384.859",y1:"219.48",x2:"333.859",y2:"204.48",stroke:r}),n.createElement("line",{x1:"384.647",y1:"218.646",x2:"413.647",y2:"189.646",stroke:r}),n.createElement("line",{x1:"384.53",y1:"219.169",x2:"360.53",y2:"152.169",stroke:r}),n.createElement("line",{x1:"333.556",y1:"203.77",x2:"360.556",y2:"151.77",stroke:r}),n.createElement("ellipse",{cx:"553",cy:"673.5",rx:"25",ry:"24.5",fill:r}),n.createElement("circle",{cx:"786",cy:"553",r:"25",fill:r}),n.createElement("line",{x1:"551.872",y1:"671.669",x2:"785.082",y2:"551.223",stroke:r,strokeWidth:"4"}))},h=r(2268),m=function(e){var t=(0,h.useStudioProvier)().isLight;return n.createElement("div",{style:{fontSize:"14px",height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},n.createElement(d,{isDark:!t}),n.createElement(l.Z.Text,{type:"secondary",style:{position:"absolute"}},n.createElement(f.Z,{id:"You can write cypher or gremlin queries, and then click the {icon} button to query data",values:{icon:n.createElement(p.Z,null)}})))};function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){var n;return n=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==y(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=(0,n.lazy)((function(){return Promise.resolve().then(r.bind(r,613))})),w=(0,n.lazy)((function(){return Promise.all([r.e(3155),r.e(2548),r.e(3322)]).then(r.bind(r,93322))})),E=o.Z.useToken,S=function(e){var t=e.createStatements,r=e.queryGraphData,o=e.enableImmediateQuery,c=e.handleCancelQuery,u=e.connectComponent,l=e.displaySidebarPosition,f=(0,a.qp)(),p=f.store,d=f.updateStore,h=p.activeId,y=p.mode,v=p.statements,b=p.savedStatements,S=p.schemaData,k=p.graphId,j=(p.language,b.map((function(e){return e.id})),E().token),O="tabs"===y?{position:"absolute",width:"100%"}:{},P=v.map((function(e,t){return{label:"query-".concat(t+1),value:e.id}})),T=function(e){var r=e.id,n=e.script,o=e.name,i=e.language;d((function(e){-1!==e.savedStatements.map((function(e){return e.id})).indexOf(r)?e.savedStatements.forEach((function(e){e.id===r&&(e.script=n)})):(e.savedStatements.push({id:r,script:n,name:o,language:i}),t&&t("saved",{id:r,script:n,name:o,language:i}))}))},L=function(e){d((function(t){t.statements=t.statements.filter((function(t){return t.id!==e})),t.activeId=t.statements[0]&&t.statements[0].id}))},C=0===v.length;return(0,n.useEffect)((function(){var e;h&&(null===(e=document.getElementById("statements-layout"))||void 0===e||e.scrollTo({top:0,behavior:"smooth"}))}),[h]),n.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},n.createElement("div",{style:{minHeight:"50px",background:j.colorBgBase,padding:"0px 12px",borderBottom:"1px solid ".concat(j.colorBorder)}},n.createElement(n.Suspense,null,n.createElement(w,{connectComponent:u,displaySidebarPosition:l})),"tabs"===y&&0!==P.length&&n.createElement("div",{style:{overflowX:"scroll",padding:"8px 0px"}},n.createElement(i.Z,{options:P,onChange:function(e){d((function(t){t.activeId=e}))},value:h}))),n.createElement("div",{id:"statements-layout",style:{overflowY:"scroll",flex:"1",position:"relative",background:j.colorBgLayout}},C&&n.createElement(m,null),n.createElement(s,null),v.map((function(e){var t=e.id,i=e.script,a=e.timestamp,u=e.language;return n.createElement("div",{key:t,style:g(g({},O),{},{visibility:t===h||"flow"===y?"visible":"hidden",flex:1})},n.createElement(n.Suspense,null,n.createElement(x,{language:u,enableImmediateQuery:o,mode:y,active:t===h,id:t,timestamp:a,graphId:k,schemaData:S,script:i,onQuery:r,onCancel:c,onClose:L,onSave:T})))}))))},k=(0,n.memo)(S),j=r(791),O=r(17905),P=r(88648),T=r(57526),L=r(38943),C=r(86132),I=r(15098),_=r(41473),N=r(16483),A=r.n(N);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function Z(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||F(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||F(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){var n;return n=function(e,t){if("object"!=D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==D(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}l.Z.Text;var B=l.Z.Title,U=o.Z.useToken,Y={container:{position:"relative",flex:1,height:"100%"},list:{flex:1,height:"100%",overflow:"scroll"},ul:{paddingInlineStart:"0px",boxSizing:"border-box",margin:"0px"},li:{cursor:"pointer",listStyle:"none",boxSizing:"border-box",display:"flex",alignItems:"start",padding:"6px 12px",gap:"4px"}};function H(e){return e.sort((function(e,t){return t.timestamp-e.timestamp})).reduce((function(e,t){var r=A()(t.timestamp),n=r.format("YYYY-MM-DD"),o=r.format("HH:mm"),i=e.find((function(e){return e.day===n}));return i?i.items.push(M(M({},t),{},{hours:o})):e.push({day:n,items:[M(M({},t),{},{hours:o})]}),e}),[])}var V=function(e){var t=e.items,r=e.checkedSet,o=e.batch,i=e.onChange,a=e.onClick,c=U().token;return n.createElement("ul",{style:Y.ul},t.map((function(e){var t=e.hours,u=e.id,s=e.name,l=e.timestamp,f=e.description,p=(e.query,r.has(u)),d=s||t||A()(l).format("YYYY-MM-DD HH:mm");return n.createElement("li",{key:e.id,style:Y.li,className:"gs-query-list-item"},o&&n.createElement(j.Z,{checked:p,onChange:function(t){return i(e.id,t.target.checked)}}),n.createElement(O.Z,{title:"Click to start the query",placement:"right"},n.createElement("pre",{style:{background:c.colorBgLayout,overflow:"hidden",textWrap:"pretty",padding:"6px 14px",fontSize:"12px",border:"1px solid transparent",borderRadius:"6px",flex:1,margin:"0px"},className:"statement-list-item-pre",onClick:function(){a&&a(e)}},n.createElement("div",{style:{fontSize:"11px",padding:"4px 0px 12px 0px",color:c.colorTextDescription,fontStyle:"italic"}},d),f&&n.createElement("div",{style:{fontSize:"11px",padding:"4px 0px 12px 0px",color:c.colorTextDescription,fontStyle:"italic"}},f),n.createElement("code",{style:{fontSize:"12px",color:c.colorTextHeading}},e.script),e.query&&n.createElement(n.Fragment,null,n.createElement("br",null),n.createElement("br",null),n.createElement("code",{style:{fontSize:"12px",color:c.colorTextDescription}},e.query)))))})))},Q=function(e){var t=e.items,r=e.batch,o=e.checkedSet,i=e.onChange,a=e.onClick,c=H(t);return n.createElement("div",{style:Y.list},c.map((function(e){var t=e.day,c=e.items;return n.createElement("div",{key:t},n.createElement(B,{level:5,style:{padding:"12px 12px",margin:"0px",position:"sticky",top:0,backgroundColor:"white",zIndex:100}},t),n.createElement(V,{items:c,batch:r,checkedSet:o,onChange:i,onClick:a}))})))},W=function(e){var t=e.items,r=e.onClick,o=e.onDelete,i=e.actionStyle,a=e.group,c=e.placeholder,u=R((0,n.useState)({checkedSet:new Set,batch:!1}),2),s=u[0],f=u[1],p=s.checkedSet,d=s.batch,h=(H(t),p.size>0&&p.size<t.length),m=t.length>0&&t.length===p.size,y=function(e){f((function(t){return M(M({},t),{},{checkedSet:e})}))},v=function(e,t){t?p.add(e):p.delete(e),y(p)};return 0==t.length&&c?n.createElement("div",{style:{padding:"120px 0px"}},n.createElement(P.Z,{imageStyle:{height:"80px"},description:n.createElement(l.Z.Text,{style:{fontSize:"12px"}},c)})):n.createElement(n.Fragment,null,n.createElement(T.Z,{vertical:!0,flex:1,style:{position:"relative",height:"100%"}},n.createElement("div",{style:M({position:"absolute",top:"-34px",right:"0px",zIndex:99},i)},d&&n.createElement(j.Z,{indeterminate:h,onChange:function(e){var r=e.target.checked?new Set(t.map((function(e){return e.id}))):new Set;y(r)},checked:m},n.createElement(L.ZP,{icon:n.createElement(C.Z,null),size:"small",type:"text",onClick:function(){o(Z(p))}})),n.createElement(L.ZP,{icon:d?n.createElement(I.Z,null):n.createElement(_.Z,null),size:"small",type:"text",onClick:function(){f((function(e){return M(M({},e),{},{batch:!e.batch})}))}})),a?n.createElement(Q,{items:t,batch:d,checkedSet:p,onChange:v,onClick:r}):n.createElement("div",{style:Y.list},n.createElement(V,{items:t,batch:d,checkedSet:p,onChange:v,onClick:r}))))},K=r(15001),J=function(e){var t=e.children,r=e.title,i=o.Z.useToken().token;return n.createElement(T.Z,{vertical:!0,style:{height:"100%",overflow:"hidden",borderTop:"1px solid ".concat(i.colorBorder),marginTop:"-2px",marginLeft:"-4px",marginRight:"-8px"}},n.createElement(l.Z.Title,{level:5,style:{margin:"0px",flexBasis:"30px",padding:"12px"}},n.createElement(f.Z,{id:r})),n.createElement("div",{style:{height:"100%",overflow:"hidden",marginBottom:"8px"}},t))};function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function X(){X=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(C([])));w&&w!==r&&n.call(w,a)&&(b=w);var E=g.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==$(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError($(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function ee(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var te=function(e){var t=(0,a.qp)(),r=t.store,o=t.updateStore,i=r.savedStatements,c=e.deleteStatements,u=i.map((function(e){return e})),s=function(){var e,t=(e=X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t),o((function(e){e.savedStatements=e.savedStatements.filter((function(e){return-1===t.indexOf(e.id)}))}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ee(i,n,o,a,c,"next",e)}function c(e){ee(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return n.createElement(J,{title:"Saved"},n.createElement(W,{items:u,onClick:function(e){e.id;var t=e.script;o((function(e){e.globalScript=t,e.autoRun=!0}))},onDelete:s,placeholder:n.createElement(n.Fragment,null,n.createElement(f.Z,{id:"No saved query statements {br} You can click {icon} to save.",values:{icon:n.createElement(K.Z,null),br:n.createElement("br",null)}}))}))};function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ae(n.key),n)}}function oe(e,t,r){return t&&ne(e.prototype,t),r&&ne(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ie(e,t,r){return(t=ae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e){var t=function(e,t){if("object"!=re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==re(t)?t:String(t)}var ce=oe((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ie(this,"status",void 0),ie(this,"role",void 0),ie(this,"content",void 0),ie(this,"timestamp",void 0),ie(this,"reserved",void 0),this.status=t.status||"pending",this.role=t.role||"user",this.content=t.content||"",this.timestamp=t.timestamp||Date.now(),this.reserved=t.reserved||!1}));"\n你的角色是一个 Cypher 查询助手，你可以根据 Schema 结构，给用户推荐你任务最重要的5条 Cypher 查询语句\n\n任务1: 根据 Schema 结构，自动推荐出关联性最大，最利于用户分析的 10 条Cypher查询语句\nSchema：\n".concat(JSON.stringify({nodes:[{label:"Paper",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"conference",type:"DT_STRING"},{name:"CCFRank",type:"DT_STRING"},{name:"CCFField",type:"DT_STRING"},{name:"year",type:"DT_SIGNED_INT32"},{name:"paper",type:"DT_STRING"}],primary:"id"},{label:"Challenge",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"challenge",type:"DT_STRING"}],primary:"id"},{label:"Topic",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"category",type:"DT_STRING"}],primary:"id"},{label:"Task",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"task",type:"DT_STRING"}],primary:"id"},{label:"Solution",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"solution",type:"DT_STRING"}],primary:"id"},{label:"CCFField",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"field",type:"DT_STRING"}],primary:"id"}],edges:[{label:"WorkOn",properties:[],primary:"WorkOn",constraints:[["Paper","Task"]]},{label:"Resolve",properties:[],primary:"Resolve",constraints:[["Paper","Challenge"]]},{label:"Target",properties:[{name:"number",type:"DT_SIGNED_INT32"}],primary:"Target",constraints:[["Task","Challenge"]]},{label:"Belong",properties:[],primary:"Belong",constraints:[["Task","Topic"]]},{label:"Use",properties:[],primary:"Use",constraints:[["Paper","Solution"]]},{label:"ApplyOn",properties:[],primary:"ApplyOn",constraints:[["Solution","Challenge"]]},{label:"HasField",properties:[],primary:"HasField",constraints:[["Paper","CCFField"]]},{label:"Citation",properties:[],primary:"Citation",constraints:[["Paper","Paper"]]}]},null,2),"\nAnswers:\n").concat(JSON.stringify([{cypher:"Match (n:Paper) return n limit 30",desc:"查询出 Paper 类型的节点"},{cypher:"MATCH (p:Paper)-[:WorkOn]->(a:Task),(a)-[:Belong]->(t: Topic) RETURN t.category,  COUNT(p)",desc:"找出每个主题下的论文数量"},{cypher:"MATCH (t: Topic)<-[:Belong]-(a:Task),\n      (a)<-[:WorkOn]-(p:Paper)-[:Use]->(s:Solution),\n      (s)-[:ApplyOn]->(ch:Challenge)\n  WHERE t.category = $topic_name\n  RETURN t.category, ch.challenge, COUNT(p)",desc:"检索特定主题下，每个挑战（Challenge）所应用的解决方案（Solution）中与论文（Paper）相关的数量"}],null,2),"\n\n任务2: 根据 Schema 结构和用户的输入，生成 Cypher 查询语句，用于图数据库查询\n").concat("\n注意要以JSON的格式返回结果：\nRight Cases:\nquerys1: 列举出鲁迅的一个别名可以吗？\nanswer1: \"match (:ENTITY{name:'鲁迅'})<--(h)-[:Relationship{name:'别名'}]->(q) return distinct q.name limit 1\"\n\nquerys2: 我们常用的301SH不锈钢带的硬度公差是多少，你知道吗？ \nanswers2: \"match(p:ENTITY{name:'301SH不锈钢带'})-[:Relationship{name:'硬度公差'}]-> (q) return q.name\"\nWrong Cases:\nquerys: 12344加油这首歌真好听，你知道歌曲原唱是谁吗？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '12345加油' RETURN a.name\nquerys: 七宗梦是什么时候上映的？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '七宗梦' RETURN a.name LIMIT 30\n","\n\nInstructions:\nNote: Do not include any explanations or apologies in your responses.\nDo not respond to any questions that might ask anything else than for you to construct a Cypher statement.\nDo not include any text except the generated Cypher statement.\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\n你必须使用Sechema中出现的关键词！！！\n\n当前会话中图的 Schema 结构如下：\n\n{graphSchema}\n\n你需要根据用户的提问，自动切换到上述两个任务中，并且给出正确返回，让我们开始吧！\n\n");function ue(e,t){var r=function(e){return JSON.stringify(e,null,2)}(t);return e.replace(/\{graphSchema\}/g,r)}function se(e,t,r){return[t&&new ce({status:"success",role:"system",content:ue(t,r),timestamp:Date.now(),reserved:!0}),e&&new ce({status:"success",role:"assistant",content:e,timestamp:Date.now(),reserved:!0})].filter(Boolean)}var le=r(55216),fe=r(48722),pe=r(16889),de=r(31097),he=r(12423),me=r(25046);function ye(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){if(e){if("string"==typeof e)return ge(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ge(e,t):void 0}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function be(e){var t,r=[],n=0,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ve(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(ye(e.matchAll(/```cypher\s*([\s\S]*?)\s*```/g)));try{for(o.s();!(t=o.n()).done;){var i=t.value,a=e.substring(n,i.index).trim();a&&r.push({type:"text",content:a});var c=i[1].trim();r.push({type:"cypher",content:c}),n=i.index+i[0].length}}catch(e){o.e(e)}finally{o.f()}var u=e.substring(n).trim();return u&&r.push({type:"text",content:u}),r}var xe=function(e){var t=e.style;return n.createElement("svg",{width:"41px",height:"62px",viewBox:"0 0 41 62",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:t},n.createElement("title",null,"logo image"),n.createElement("g",{id:"页面-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n.createElement("g",{id:"Medium",transform:"translate(-332, -376)",fillRule:"nonzero"},n.createElement("g",{id:"编组",transform:"translate(332, 376)"},n.createElement("path",{d:"M20.9765256,25 L20.9743827,19.8935471 L22.5478011,18.78271 L26,16.3451158 L25.9983928,13 L18.4270199,18.1683792 C16.9071738,19.2057816 15.8019773,20.29689 15,21.3704617 L15,21.4778737 L20.9765256,25 Z",id:"路径",fill:"#2281F2"}),n.createElement("path",{d:"M6.93795336,20.7840634 C8.51291573,17.334308 13.2733365,13.6674352 13.2733365,13.6674352 L29,3.26992071 L22.9018725,0 L10.9685669,7.75591857 C10.9685669,7.75591857 -0.854857679,14.9756228 0.049338003,26.8260698 C0.761651772,36.1593797 12.3046335,39 12.3046335,39 C5.52316592,36.2295591 4.72994467,25.6215065 6.93795336,20.7840634 Z",id:"路径",fill:"#2281F2"}),n.createElement("path",{d:"M29.2439473,3 L13.4603304,13.6082752 C13.4603304,13.6082752 8.68266998,17.3489173 7.10200396,20.8691596 C4.7340225,26.1425307 5.81651263,38.201864 13.9672848,39.9124792 C13.9672848,39.9124792 17.3656344,40.7454111 23.3969644,37.2721576 C26.5517126,35.4552583 30.7231127,39.070597 30.7231127,39.070597 C35.4705973,35.3685528 31.9076521,31.827613 28.0846459,30.5007395 C24.3395483,29.2007168 21.5847673,31.781743 17.5346192,32.8378717 C13.4844711,33.8940003 12.4480677,29.1934447 12.4480677,29.1934447 C12.4480677,29.1934447 10.5497323,23.0871416 17.786999,18.1633893 L25.5410959,12.8877806 L25.5427418,16.3022982 L20.3958387,19.9243496 L20.3980333,25.1367472 L29.4222592,19.0125436 L29.2439473,3 Z",id:"路径",fill:"#1FB2FD"}),n.createElement("path",{d:"M36.7904047,27.0251597 C32.1878283,23.2677091 25.8158521,23.5156909 20.7707852,25.0562844 C18.0303799,25.8934309 12.0176813,28.5163788 12.0176813,28.5163788 C12.0176813,28.5163788 12.0918982,28.8392544 12.2746294,29.2936102 C12.3094889,29.3801542 12.3471596,29.4705815 12.3904528,29.565447 C12.4309348,29.6547648 12.476477,29.747966 12.5248305,29.8422768 C12.5928627,29.9759761 12.6687665,30.1130041 12.7536662,30.2516963 C12.8082044,30.3415689 12.8649916,30.4314415 12.9268391,30.5207593 C13.016799,30.6516848 13.1146305,30.7815007 13.2208957,30.9079881 C13.3007352,31.0034083 13.3873216,31.0960548 13.4767193,31.1864821 C13.8635471,31.5770395 14.3408972,31.9132295 14.9284481,32.1068439 C15.0189704,32.1368014 15.1117416,32.1628756 15.2078863,32.1856211 C15.7825055,32.3220943 16.4521449,32.3265324 17.2302986,32.1301442 C17.2404191,32.1279251 17.2494151,32.1245965 17.2595356,32.1218227 C19.9341576,31.4411211 21.9492606,30.1523927 23.9930384,29.7130156 C25.2822771,29.3890305 26.5895077,29.3241225 28.042361,29.8123192 C31.9601172,31.1282314 35.611367,34.640474 30.74622,38.3113806 L30.74622,38.3113806 L30.74622,38.3113806 L17.8768858,46.5019905 L17.877448,46.5014357 L14.3510177,44.4709811 L22.2523132,39.6783315 L17.0768044,37.0060091 L4,44.7372702 L4.00056225,44.737825 L13.0353533,49.5842871 L13.0342288,49.5848419 L19.4039561,53 L37.3717709,41.2716281 C37.3706464,41.2732924 45.9106577,34.4712695 36.7904047,27.0251597 Z",id:"路径",fill:"#37EDD7"}),n.createElement("path",{d:"M40.9961107,35 C40.9955641,35 40.994471,35.0005545 40.9939244,35.0011089 C40.9928312,35.0238418 40.9884586,35.0454657 40.9873655,35.0676442 C40.8900752,39.0492238 37.4668795,41.8592287 37.4668795,41.8592287 L20,53.5810744 L20.0032794,62 L38.0440621,49.2618285 C41.053501,47.4803475 41,43.5348078 41,43.5348078 L40.9961107,35 Z",id:"路径",fill:"#1FB2FD"}),n.createElement("polygon",{id:"路径",fill:"#2281F2",points:"22.9982925 41 22.9982925 41 22.9982925 41 15 45.9410083 18.498008 47.9919928 18.6237906 48 23 45.1631669"}),n.createElement("polygon",{id:"路径",fill:"#2281F2",points:"18.9961684 53.4177665 4 45 4.00328419 53.0147944 19 62"})))))},we=o.Z.useToken,Ee=function(e){var t=e.content,r=e.onQuery;return n.createElement("div",{style:{position:"relative"}},n.createElement("pre",{style:{border:"1px solid #ddd",padding:"6px",borderRadius:"4px"}},n.createElement("code",{style:{whiteSpace:"pre-wrap"}},t)),n.createElement(O.Z,{title:"开始查询"},n.createElement(L.ZP,{style:{position:"absolute",bottom:"2px",right:"2px"},onClick:function(){r&&r(t)},size:"small",icon:n.createElement(p.Z,{style:{color:"#52c41a"}}),type:"text"})))},Se=function(e){var t=e.content,r=e.role,o=we().token,i="user"===r?"rgba(221,221,221,0.3)":o.colorPrimaryBg;return n.createElement("div",{style:{background:i,borderRadius:"6px",padding:"6px"}},n.createElement(l.Z.Text,{style:{fontSize:"12px"}}," ",t))},ke=function(e){var t=e.role,r=e.content,o=(e.timestamp,e.onQuery),i="user"===t&&!r.includes("`"),a=be(r);return i?n.createElement(T.Z,{align:"start",justify:"flex-end",gap:4,style:{margin:"6px 0px"}},n.createElement(Se,{content:r,role:t})):n.createElement("div",null,n.createElement(fe.Z,{align:"start",size:2},n.createElement(xe,{style:{fontSize:"12px",height:"14px",width:"14px",border:"1px solid #ddd",borderRadius:"50%",padding:"4px"}}),n.createElement("div",null,a.map((function(e,r){return"cypher"===e.type?n.createElement(Ee,{key:r,content:e.content,onQuery:o}):n.createElement(Se,{key:r,content:e.content,role:t})})))))},je=r(52018),Oe=r(63432),Pe=r(37528);function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ce=function(e){var t=e.onChange,r=e.style,o=Te((0,n.useState)((function(){var e="copilot"===h.Utils.getSearchParams("tab");return!localStorage.getItem("OPENAI_KEY_FOR_GS")&&e})),2),i=o[0],a=o[1],c=(0,n.useRef)(null),u=(0,Pe.Z)(),s=localStorage.getItem("OPENAI_KEY_FOR_GS")||"";return n.createElement(n.Fragment,null,n.createElement(L.ZP,{icon:n.createElement(Oe.Z,null),type:"text",onClick:function(){a(!0)},style:r}),n.createElement(je.Z,{title:n.createElement(f.Z,{id:"Setting"}),open:i,onOk:function(){if(c.current){var e=c.current.input.value,r=String(e).trim();localStorage.setItem("OPENAI_KEY_FOR_GS",r),t&&t(r)}a(!1)},onCancel:function(){a(!1)}},n.createElement(T.Z,{vertical:!0,gap:12},n.createElement(l.Z.Text,{strong:!0},n.createElement(f.Z,{id:"Privacy Security Notice"})),n.createElement(l.Z.Text,null,n.createElement(f.Z,{id:"query.app.sidebar.gpt.setting.security"})),n.createElement(l.Z.Text,{strong:!0},"OpenAI API key"),n.createElement(pe.Z,{ref:c,placeholder:u.formatMessage({id:"OpenAI API key is only stored locally in your browser"}),defaultValue:s}))))};function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_e.apply(this,arguments)}function Ne(){Ne=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(C([])));w&&w!==r&&n.call(w,a)&&(b=w);var E=g.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ie(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Ie(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Ae(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function De(e){return function(e){if(Array.isArray(e))return Me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach((function(t){Fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fe(e,t,r){var n;return n=function(e,t){if("object"!=Ie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ie(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||qe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){if(e){if("string"==typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(e,t):void 0}}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ze=o.Z.useToken,Be=function(e){var t=e.schemaData,r=e.prompt,o=void 0===r?'\n你的角色是一个 Cypher 查询助手，你可以根据用户的自然语言提问，再结合图数据库的 Schema 结构，给生成标准的 Cypher 查询语句。\n为了查询的准确性，请务必充分理解 Schema，并使用 Schema 中明确的字段，不要自己随意生成字段！\n为了查询的准确性，请务必充分理解 Schema，并使用 Schema 中明确的字段，不要自己随意生成字段！\n为了查询的准确性，请务必充分理解 Schema，并使用 Schema 中明确的字段，不要自己随意生成字段！\n\n你不要着急马上给出答案，你可以多生成几个语句，然后找出一个你觉得最准确的语句告诉我，推理的过程可以不用告诉我，我只需要最准确的那一个。\n你不要着急马上给出答案，你可以多生成几个语句，然后找出一个你觉得最准确的语句告诉我，推理的过程可以不用告诉我，我只需要最准确的那一个。\n你不要着急马上给出答案，你可以多生成几个语句，然后找出一个你觉得最准确的语句告诉我，推理的过程可以不用告诉我，我只需要最准确的那一个。\n\n其他注意事项:\n不支持 "MATCH p=()-[]-() RETURN p" 的写法，请都替换成 "MATCH (a)-[b]-(c) RETURN a,b,c"\n注意返回格式需要 markdown cypher 格式\n\n下面是数据库中的 Schema：\n{graphSchema}\n让我们开始吧～\n':r,i=Ge((0,n.useState)({messages:[],isLoading:!1,OPENAI_KEY_FOR_GS:localStorage.getItem("OPENAI_KEY_FOR_GS")}),2),c=i[0],u=i[1],s=c.messages,f=c.isLoading,p=c.OPENAI_KEY_FOR_GS,d=(0,n.useRef)(null),m=ze().token,y=function(){var e=(0,n.useRef)(new AbortController);return e.current.signal.aborted&&(e.current=new AbortController),e.current}(),v=(0,a.qp)().updateStore,g=(0,Pe.Z)(),b=[g.formatMessage({id:"recommend 5 interesting query statements"}),g.formatMessage({id:"query any subgraph"}),g.formatMessage({id:"insight the statistical distribution of vertex labels in the graph"})],x=g.formatMessage({id:"query.copilot.welcome"});(0,n.useEffect)((function(){t&&u((function(e){return Re(Re({},e),{},{messages:De(se(x,o,t))})}))}),[]);var w=function(){var e,t=(e=Ne().mark((function e(t){var r,n,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.current){e.next=12;break}return r=d.current.input.value,n=new ce({role:"user",content:t||r}),u((function(e){return Re(Re({},e),{},{messages:[].concat(De(e.messages),[n]),isLoading:!0})})),console.log("OPENAI_KEY_FOR_GS",p),e.next=7,Ye([].concat(De(s),[n]),p,y.signal);case 7:if(o=e.sent){e.next=11;break}return u((function(e){return Re(Re({},e),{},{isLoading:!1})})),e.abrupt("return",!1);case 11:u((function(e){return Re(Re({},e),{},{messages:[].concat(De(e.messages),[new ce({role:o.message.role,content:o.message.content,status:"success"})]),isLoading:!1})}));case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ae(i,n,o,a,c,"next",e)}function c(e){Ae(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),E=function(e){v((function(t){t.autoRun=!0,t.globalScript=e}))};h.Utils.getSearchParams("tab");return n.createElement(T.Z,{vertical:!0,style:{height:"100%",overflow:"hidden",padding:"0px 12px"},justify:"space-between"},n.createElement("div",{style:{overflowY:"scroll",position:"relative"}},n.createElement(l.Z.Title,{level:5,style:{margin:"0px",flexBasis:"30px",padding:"12px 0px"}},"Copilot"),n.createElement(Ce,{onChange:function(e){u((function(t){return Re(Re({},t),{},{OPENAI_KEY_FOR_GS:e})}))},style:{position:"absolute",right:"0px",top:"8px"}}),n.createElement("div",null,s.filter((function(e){return"system"!==e.role})).map((function(e){return n.createElement(ke,_e({key:e.timestamp},e,{onQuery:E}))})),f&&n.createElement(le.Z,{style:{padding:"0px 6px"}}))),n.createElement("div",null,b.map((function(e,t){return n.createElement("div",{key:t,style:{cursor:"pointer",background:m.colorBgLayout,padding:"4px",borderRadius:"6px",margin:"6px 0px"}},n.createElement(de.Z,{style:{fontSize:"12px",marginRight:"4px"}}),n.createElement(l.Z.Text,{key:t,onClick:function(){w(e)},style:{fontSize:"12px"}},e))})),n.createElement(fe.Z,null,n.createElement(pe.Z,{ref:d}),n.createElement(L.ZP,{onClick:function(){return w()},icon:n.createElement(he.Z,null)}),n.createElement(L.ZP,{onClick:function(){u((function(e){return Re(Re({},e),{},{messages:De(se(x,o,t))})}))},icon:n.createElement(me.Z,null)}))))},Ue=[{name:"deepseek-chat",endpoint:"https://api.deepseek.com/chat/completions"},{name:"gpt-3.5-turbo",endpoint:"https://api.openai.com/v1/chat/completions"},{name:"qwen-plus",endpoint:"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions"}];function Ye(e,t,r,n){var o=Ue.find((function(e){return e.name===n}))||Ue[2],i=o.endpoint,a=o.name;return fetch(i,{signal:r,method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:a,messages:e.map((function(e){return{role:e.role,content:e.content}}))})}).then((function(e){return e.json()})).then((function(e){return{status:"success",message:e.choices[0].message}})).catch((function(e){return"AbortError"===e.name?{status:"cancel",message:null}:{status:"failed",message:e.message}}))}var He=r(97585),Ve=r(33052),Qe=r(16835);function We(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Je=l.Z.Title,$e={title:{marginTop:"12px",fontSize:"14px",fontWeight:400}},Xe=function(e){var t=e.schemaData,r=e.schemaId,o=(0,a.qp)(),i=o.updateStore,c=o.store.language,u=(0,Ve.h)(t),s=(0,Qe.getStyleConfig)(t,r),l=t.nodes,p=t.edges,d=function(e){var t=new Set;return e.nodes.forEach((function(e){Object.keys(e.properties||{}).forEach((function(e){t.add(e)}))})),e.edges.forEach((function(e){Object.keys(e.properties||{}).forEach((function(e){t.add(e)}))})),We(t.values())}(u),m=(0,h.useStudioProvier)().isLight,y=function(e,t){var r="";"cypher"===c&&("nodes"===t&&(r="MATCH (n:".concat(e,") RETURN n LIMIT 25")),"edges"===t&&(r="MATCH (a)-[b:".concat(e,"]->(c) RETURN a,b,c LIMIT 25;")),"property"===t&&(r="MATCH(a) where a.".concat(e," IS NOT NULL AND a.").concat(e,' <> ""\n      WITH a.').concat(e," as ").concat(e,"\n      RETURN ").concat(e," , COUNT(").concat(e,") as ").concat(e,"_COUNT\n      ORDER BY ").concat(e,"_COUNT DESC\n      "))),"gremlin"===c&&("nodes"===t&&(r="g.V().hasLabel('".concat(e,"').limit(25)")),"edges"===t&&(r="g.V().outE('".concat(e,"').limit(25)")),"property"===t&&(r="g.V().has('".concat(e,"').groupCount().by('").concat(e,"').order().by(select(values), desc)"))),i((function(e){e.globalScript=r,e.autoRun=!0}))};return n.createElement(J,{title:"Recommended"},n.createElement("div",{style:{padding:"0px 12px"}},n.createElement(Je,{level:5,style:$e.title},n.createElement(f.Z,{id:"Vertex Labels"})),l.map((function(e){var t,r=e.label,o=(null!==(t=s.nodeStyle[r])&&void 0!==t?t:{color:"#000"}).color;return n.createElement(He.Z,{key:r,style:{borderRadius:"8px",backgroundColor:o,cursor:"pointer",margin:"4px"},bordered:!1,onClick:function(){y(r,"nodes")}},r)})),n.createElement(Je,{level:5,style:$e.title},n.createElement(f.Z,{id:"Edge Labels"})),p.map((function(e){var t,r=e.label,o=(null!==(t=s.edgeStyle[r])&&void 0!==t?t:{color:"#000"}).color;return n.createElement(He.Z,{key:r,style:{borderRadius:"8px",backgroundColor:o,cursor:"pointer",margin:"4px",color:"#000"},bordered:!1,onClick:function(){y(r,"edges")}},r)})),n.createElement(Je,{style:$e.title},n.createElement(f.Z,{id:"Property Keys"})),d.map((function(e){return n.createElement(He.Z,{key:e,style:{borderRadius:"8px",backgroundColor:m?"#000":"#fff",cursor:"pointer",margin:"4px",color:m?"#fff":"#000"},bordered:!1,onClick:function(){y(e,"property")}},e)}))))};function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(){tt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(C([])));w&&w!==r&&n.call(w,a)&&(b=w);var E=g.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==et(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(et(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function rt(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var nt=function(e){var t=e.deleteStatements,r=(0,a.qp)(),o=r.store,i=r.updateStore,c=o.storeProcedures.map((function(e){return e})),u=function(){var e,r=(e=tt().mark((function e(r){return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(r),i((function(e){e.storeProcedures=e.savedStatements.filter((function(e){return-1===r.indexOf(e.id)}))}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){rt(i,n,o,a,c,"next",e)}function c(e){rt(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();return n.createElement(J,{title:"Stored Procedures"},n.createElement(W,{items:c,onClick:function(e){e.id;var t=e.script;e.name;i((function(e){e.globalScript=t,e.autoRun=!0}))},onDelete:u,placeholder:n.createElement(n.Fragment,null,n.createElement(f.Z,{id:"No stored procedures available. {br} Go to the <a>Extension</a> and create one now!",values:{a:function(e){return n.createElement(l.Z.Link,{style:{fontSize:"12px"},href:"/extension/create",target:"_blank"},e)},br:n.createElement("br",null)}}))}))};function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function it(){it=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(C([])));w&&w!==r&&n.call(w,a)&&(b=w);var E=g.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ot(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(ot(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function at(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var ct=function(e){var t=e.deleteHistoryStatements,r=(0,a.qp)(),o=r.store,i=r.updateStore,c=o.historyStatements,u=function(){var e,r=(e=it().mark((function e(r){return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(r),i((function(e){e.historyStatements=e.historyStatements.filter((function(e){return-1===r.indexOf(e.id)}))}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){at(i,n,o,a,c,"next",e)}function c(e){at(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}(),s=c.map((function(e){return e}));return n.createElement(J,{title:"History"},n.createElement(W,{items:s,onClick:function(e){e.id;var t=e.script;i((function(e){e.globalScript=t,e.autoRun=!1}))},onDelete:u,placeholder:n.createElement(f.Z,{id:"No query history available"})}))},ut=function(e){var t=e.items;return"Segmented"===e.type?n.createElement(h.SegmentedTabs,{items:t,block:!0,rootStyle:{padding:"8px 8px 8px 4px"}}):n.createElement(h.SideTabs,{items:t,width:320})},st=(0,n.memo)(ut),lt=r(62950),ft=r(84158),pt=r(37339),dt=r(91104),ht=r(33741),mt={"en-US":{Recommended:"Recommended",History:"History",Copilot:"Copilot",Saved:"Saved","Stored Procedures":"Stored Procedures","You can write cypher or gremlin queries, and then click the {icon} button to query data":"You can write cypher or gremlin queries, and then click the {icon} button to query data","Vertex Labels":"Vertex Labels","Edge Labels":"Edge Labels","Property Keys":"Property Keys","No saved query statements {br} You can click {icon} to save.":"No saved query statements {br} You can click {icon} to save.","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"No stored procedures available. {br} Go to the <a>Extension</a> and create one now!","Privacy Security Notice":"Privacy Security Notice",Setting:"Setting","query.app.sidebar.gpt.setting.security":"To improve the quality of generated Cypher query statements, we'll utilize your graph data schema as the prompt for ChatGPT. Your data will be kept strictly confidential and solely used for this purpose.Furthermore, please note that your OpenAI API key is only stored locally in your browser for added security","OpenAI API key is only stored locally in your browser":"OpenAI API key is only stored locally in your browser","query.copilot.welcome":"Hello! I'm the GraphScope Query Assistant. Feel free to ask me any questions about Cypher or Gremlin queries.","recommend 5 interesting query statements":"recommend 5 interesting query statements","query any subgraph":"query any subgraph","insight the statistical distribution of vertex labels in the graph":"insight the statistical distribution of vertex labels in the graph",Save:"Save",Delete:"Delete",Query:"Query",Share:"Share","query submmited on {submitTime}. It's running ... ":"query submmited on {submitTime}. It's running ... ","query submmited on {submitTime}. Running {runningTime} ms":"query submmited on {submitTime}. Running {runningTime} ms","A total of {totalCount} records were retrieved":"A total of {totalCount} records were retrieved","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.",Color:"Color",Size:"Size",Caption:"Caption",LineWidth:"LineWidth","Node properties":"Node properties",Graph:"Graph",Table:"Table",Raw:"Raw","Style Setting":"Style Setting","You can click on each label to set the color, size, and display text for vertices and edges.":"You can click on each label to set the color, size, and display text for vertices and edges.","Export graph json":"Export graph json","Clustering layout":"Clustering layout","Vertex Properties":"Vertex Properties","Connect Endpoint":"Connect Endpoint","Connection URL":"Connection URL","Query language":"Query language","Query initiation method":"Query initiation method",Username:"Username",Password:"Password",Connect:"Connect",Close:"Close","Select nodes by box selection":"Select nodes by box selection","Switch graph view dimensions":"Switch graph view dimensions","Zoom to fitview":"Zoom to fitview",Fullscreen:"Fullscreen","Toggle Right Side":"Toggle Right Side","Caption Status":"Caption Status"},"zh-CN":{Recommended:"推荐查询",History:"历史查询",Copilot:"智能查询",Saved:"保存查询","Stored Procedures":"存储过程","You can write cypher or gremlin queries, and then click the {icon} button to query data":"您可以在这里编写 cypher 或 gremlin 语句，点击 {icon} 按钮查询数据","Vertex Labels":"节点类型","Edge Labels":"边类型","Property Keys":"属性字段","No saved query statements {br} You can click {icon} to save.":"暂无保存的查询语句 {br} 您可以点击 {icon} 保存","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"暂无存储过程 {br} 快去 <a>插件市场</a> 创建一个吧","Privacy Security Notice":"隐私安全说明",Setting:"设置","query.app.sidebar.gpt.setting.security":"为了提高生成Cypher查询语句的质量，我们将使用您的图数据模式作为ChatGPT的提示。您的数据将被严格保密，仅用于此目的。此外，请注意我们的OpenAI API密钥仅存在于您的浏览器本地，以增加安全性。","OpenAI API key is only stored locally in your browser":"OpenAI API key 仅保存在您浏览器本地","query.copilot.welcome":"您好！我是 GraphScope 查询助理，您有任何关于 Cypher 或者 Gremlin 查询的问题都可以随时问我","recommend 5 interesting query statements":"帮我推荐5个有意思的查询","query any subgraph":"查询任意一个子图","insight the statistical distribution of vertex labels in the graph":"帮我分析图中节点类型的分布情况",Save:"保存",Delete:"删除",Query:"查询",Share:"分享","query submmited on {submitTime}. It's running ... ":"查询提交于 {submitTime}. 正在运行中...","query submmited on {submitTime}. Running {runningTime} ms":"查询提交于 {submitTime}. 查询时长 {runningTime} ms","A total of {totalCount} records were retrieved":"一共检索到 {totalCount} 条记录","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"一共检索到 {totalCount} 条记录, 其中包含 {nodeCount} 个节点，{edgeCount} 条边",Color:"颜色",Size:"大小",Caption:"文本",LineWidth:"边宽","Node properties":"属性详情",Graph:"图展示",Table:"表格展示",Raw:"原始数据","Style Setting":"样式设置","You can click on each label to set the color, size, and display text for vertices and edges.":"您可以单击每个标签来设置顶点和边缘的颜色、大小和显示文本。","Export graph json":"导出 json","Clustering layout":"集群布局","Vertex Properties":"节点属性","Connect Endpoint":"连接查询服务","Connection URL":"连接 URL","Query language":"查询语言","Query initiation method":"查询发起方式",Username:"用户名",Password:"密码",Connect:"连接",Close:"关闭","Select nodes by box selection":"通过框选选择节点","Switch graph view dimensions":"切换图表视图维度","Zoom to fitview":"缩放适当视图",Fullscreen:"全屏","Toggle Right Side":"切换右侧","Caption Status":"是否展示标签"}};function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function vt(){return vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vt.apply(this,arguments)}function gt(){gt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(C([])));w&&w!==r&&n.call(w,a)&&(b=w);var E=g.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==yt(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(yt(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function bt(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var xt=h.Utils.getSearchParams,wt=function(e){var t=e.queryGraphData,r=e.handleCancelQuery,o=e.queryGraphSchema,i=e.displaySidebarPosition,c=void 0===i?"left":i,u=e.displaySidebarType,s=void 0===u?"Sidebar":u,l=(e.enableAbsolutePosition,e.queryStatements),p=e.deleteStatements,d=e.createStatements,m=e.enableImmediateQuery,y=e.connectComponent,v=e.sidebarCollapsed,g=e.sidebarStyle,b=e.welcome,x=(0,a.qp)(),w=x.store,E=x.updateStore,S=w.graphId,j=w.isReady,O=w.schemaData,P=[{key:"recommended",title:n.createElement(f.Z,{id:"Recommended"}),icon:n.createElement(pt.G,{icon:dt.X8G}),children:n.createElement(Xe,{schemaData:O,schemaId:S})},{key:"saved",title:n.createElement(f.Z,{id:"Saved"}),icon:n.createElement(pt.G,{icon:dt.xVw}),children:n.createElement(te,{deleteStatements:function(e){return p("saved",e)}})},{key:"history",title:n.createElement(f.Z,{id:"History"}),icon:n.createElement(pt.G,{icon:dt.uF7}),children:n.createElement(ct,{deleteHistoryStatements:function(e){return p("history",e)}})},{key:"store-procedure",title:n.createElement(f.Z,{id:"Stored Procedures"}),icon:n.createElement(pt.G,{icon:dt.xf3}),children:n.createElement(nt,{deleteStatements:function(e){return p("store-procedure",e)}})},{key:"copilot",title:n.createElement(f.Z,{id:"Copilot"}),icon:n.createElement(pt.G,{icon:dt.VE0}),children:n.createElement(Be,{schemaData:O})}];(0,n.useEffect)((function(){var t;(t=gt().mark((function t(){var r,n,i,c,u,s,f,p,d,h;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=xt("graph_id")||"",n=xt("language")||e.language,i=xt("global_script")||e.globalScript,c=xt("display_mode")||localStorage.getItem(a.rv.mode)||"flow",u=xt("auto_run"),s=u?"true"===u:e.autoRun,f={nodes:[],edges:[]},p=[],d=[],h=[],t.prev=10,t.next=13,o(r);case 13:return f=t.sent,t.next=16,l("history");case 16:return p=t.sent,t.next=19,l("saved");case 19:return d=t.sent,t.next=22,l("store-procedure");case 22:h=t.sent,t.next=27;break;case 25:t.prev=25,t.t0=t.catch(10);case 27:E((function(e){e.isReady=!0,e.graphId=r,e.schemaData=f,e.historyStatements=p,e.savedStatements=d,e.storeProcedures=h,e.autoRun=s,e.globalScript=(0,ft.Id)(i),e.mode=c,e.language=n,e.welcome=b}));case 28:case"end":return t.stop()}}),t,null,[[10,25]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(e){bt(i,n,o,a,c,"next",e)}function c(e){bt(i,n,o,a,c,"throw",e)}a(void 0)}))})()}),[]);if(j){var T="left"===c?{leftSide:n.createElement(st,{items:P,type:s})}:{rightSide:n.createElement(st,{items:P,type:s})};return n.createElement(h.StudioProvier,{locales:mt},n.createElement(h.Section,vt({style:{height:"calc(100vh - 50px)"}},T,{defaultCollapsed:{leftSide:v,rightSide:v},leftSideStyle:g,rightSideStyle:g,splitBorder:!0}),n.createElement(k,{displaySidebarPosition:c,connectComponent:y,handleCancelQuery:r,createStatements:d,queryGraphData:function(e){var r=e.script,n=e.language,o={id:(0,lt.Z)(),timestamp:(new Date).getTime(),script:r,language:n};return E((function(e){e.historyStatements.push(o)})),t(o)},enableImmediateQuery:m})))}return null},Et=r(613),St=r(5576),kt=r(40434),jt=r(7234);function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Tt=h.Utils.storage,Lt=l.Z.Title,Ct=(l.Z.Text,function(e){var t=Ot(kt.Z.useForm(),1)[0],r=e.onConnect,o=e.onClose;n.useEffect((function(){t.setFieldsValue({query_language:e.query_language||Tt.get("query_language")||"cypher",query_endpoint:e.query_endpoint||Tt.get("query_endpoint")||"neo4j://127.0.0.1:7687",query_initiation:e.query_initiation||Tt.get("query_initiation")||"Browser",query_username:e.query_username||Tt.get("query_username")||"admin",query_password:e.query_password||Tt.get("query_password")||"password",query_initiation_service:e.query_initiation_service||Tt.get("query_initiation_service")||""})}),[]);var i=kt.Z.useWatch("query_initiation",t);return n.createElement(T.Z,{vertical:!0,style:{padding:"12px 24px"}},n.createElement(Lt,{level:3,style:{marginBottom:"12px"}},n.createElement(f.Z,{id:"Connect Endpoint"})),n.createElement(kt.Z,{layout:"vertical",form:t},n.createElement(kt.Z.Item,{label:n.createElement(f.Z,{id:"Connection URL"}),name:"query_endpoint"},n.createElement(pe.Z,null)),n.createElement(kt.Z.Item,{label:n.createElement(f.Z,{id:"Query language"}),name:"query_language"},n.createElement(jt.default,{allowClear:!0,options:[{label:"Cypher",value:"cypher"},{label:"Gremlin",value:"gremlin"}]})),n.createElement(kt.Z.Item,{label:n.createElement(f.Z,{id:"Query initiation method"}),name:"query_initiation"},n.createElement(jt.default,{allowClear:!0,options:[{label:"Browser (client-side)",value:"Browser"},{label:"Server (server-side)",value:"Server"}]})),"Server"===i&&n.createElement(kt.Z.Item,{label:n.createElement(f.Z,{id:"Query initiation service"}),name:"query_initiation_service"},n.createElement(pe.Z,{allowClear:!0})),n.createElement(kt.Z.Item,{label:n.createElement(f.Z,{id:"Username"}),name:"query_username"},n.createElement(pe.Z,null)),n.createElement(kt.Z.Item,{label:n.createElement(f.Z,{id:"Password"}),name:"query_password"},n.createElement(pe.Z.Password,null)),n.createElement(kt.Z.Item,{style:{marginTop:"48px"}},n.createElement(T.Z,{justify:"start"},n.createElement(L.ZP,{type:"primary",htmlType:"submit",style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:function(){var e=t.getFieldsValue(!0);Object.keys(e).forEach((function(t){Tt.set(t,e[t])})),r&&r(t.getFieldsValue(!0))}},n.createElement(f.Z,{id:"Connect"})),o&&n.createElement(L.ZP,{style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:o},n.createElement(f.Z,{id:"Close"}))))))});function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(r),!0).forEach((function(t){At(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function At(e,t,r){var n;return n=function(e,t){if("object"!=It(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==It(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rt(){Rt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(C([])));w&&w!==r&&n.call(w,a)&&(b=w);var E=g.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==It(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(It(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Ft(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Gt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ft(i,n,o,a,c,"next",e)}function c(e){Ft(i,n,o,a,c,"throw",e)}a(void 0)}))}}var qt={},Mt=function(){var e=Gt(Rt().mark((function e(){var t,r,n,o,i=arguments;return Rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:"cypher",r=i.length>1?i[1]:void 0,n=qt.gremlin_driver,o=qt.cypher_driver,"cypher"!==t){e.next=6;break}return o||(qt.cypher_driver=new St.Or(r)),e.abrupt("return",qt.cypher_driver);case 6:if("gremlin"!==t){e.next=9;break}return n||(qt.gremlin_driver=new St.VP(r)),e.abrupt("return",qt.gremlin_driver);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),zt=function(e){var t=e||{},r=t.enableImmediateQuery,o=void 0!==r&&r,i=t.mode,a=void 0===i?"flow":i,c=t.id,u=void 0===c?"":c,s=t.timestamp,l=void 0===s?Date.now():s,f=t.graphId,p=void 0===f?"":f,d=t.schemaData,m=void 0===d?{nodes:[],edges:[]}:d,y=t.script,v=void 0===y?"Match (n) return n limit 10":y,g=t.onQuery,b=Dt((0,n.useState)({language:e.language||"cypher",endpoint:e.endpoint||"127.0.0.1:7687"}),2),x=b[0],w=b[1],E=x.language,S=x.endpoint,k=function(){var e=Gt(Rt().mark((function e(t){var r,n;return Rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.language,e.next=3,Mt(r,S);case 3:return n=e.sent,e.abrupt("return",n.query(t.script));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Gt(Rt().mark((function e(t){var r;return Rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.language,e.next=3,Mt(r,S);case 3:e.sent.close();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return g||S&&E?n.createElement(h.StudioProvier,{locales:mt},n.createElement(Et.default,{language:E,enableImmediateQuery:o,mode:a,active:!0,id:u,timestamp:l,graphId:p,schemaData:m,script:v,onQuery:g||k,onCancel:j})):n.createElement(h.StudioProvier,{locales:mt},n.createElement(Ct,{onConnect:function(e){w((function(t){return Nt(Nt({},t),{},{endpoint:e.query_endpoint||"",language:e.query_language})}))}}))},Bt=r(10422),Ut={render_query_statement:function(e){var t=(e||{}).id,r=void 0===t?"root":t;Bt.render(n.createElement(zt,e),document.getElementById(r))}},Yt=function(e){return n.createElement(ht.ZP,{store:a.C1},n.createElement(wt,e))}},613:function(e,t,r){r.r(t),r.d(t,{default:function(){return _e}});var n=r(50959),o=r(53531),i=r(16483),a=r.n(i),c=r(63904),u=r(57526),s=r(48722),l=r(54016),f=r(17905),p=r(38943),d=r(28541),h=r(42176),m=r(51558),y=r(45334),v=r(16889),g=r(15001),b=r(37528),x=function(e){var t=e.onSave,r=(0,n.useRef)(null),o=(0,b.Z)();return n.createElement(f.Z,{title:o.formatMessage({id:"Save"})},n.createElement(y.Z,{title:"name your statement",description:n.createElement(v.Z,{width:"200px",ref:r}),onConfirm:function(){if(r.current){var e=r.current.input.value;console.log("InputRef.current",e),t&&t(e)}},onCancel:function(){},okText:"Save",cancelText:"Cancel",placement:"bottomRight"},n.createElement(p.ZP,{type:"text",icon:n.createElement(g.Z,null)})))},w=r(62950);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function S(){S=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new I(n||[]);return o(a,"_invoke",{value:P(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(_([])));w&&w!==r&&n.call(w,a)&&(b=w);var k=g.prototype=y.prototype=Object.create(b);function j(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==E(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function P(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(E(t)+" is not iterable")}return v.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},j(O.prototype),s(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function k(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var j=function(e){var t,r=e.onClose,o=e.onQuery,i=e.script,a=void 0===i?"Match (n) return n limit 10":i,y=e.onSave,v=e.id,g=e.isFetching,E=e.antdToken,j=(e.schemaData,e.timestamp,e.language),O=e.message,P=(0,n.useRef)(null),T=(0,b.Z)(),L=function(){var e,t=(e=S().mark((function e(){var t,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null==P||null===(t=P.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),o({id:v,script:r,language:j});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){k(i,n,o,a,c,"next",e)}function c(e){k(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return n.createElement("div",{style:{}},n.createElement(u.Z,{justify:"space-between",style:{paddingBottom:"8px"}},n.createElement(s.Z,null,n.createElement(l.Z.Text,{type:"secondary",style:{fontSize:"12px",textAlign:"center"}},(t=j).charAt(0).toUpperCase()+t.slice(1)," ",O)),n.createElement(s.Z,{size:0},n.createElement(f.Z,{title:T.formatMessage({id:"Query"})},n.createElement(p.ZP,{type:"text",icon:n.createElement(d.Z,{spin:g,style:{color:g?"#52c41a":E.green}}),onClick:L})),y&&n.createElement(x,{onSave:function(e){var t,r=null==P||null===(t=P.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),n=(0,w.Z)();y&&y({id:n,script:r,name:e,language:j})}}),r&&n.createElement(f.Z,{title:T.formatMessage({id:"Share"})},n.createElement(p.ZP,{type:"text",icon:n.createElement(h.Z,{onClick:function(){var e,t=null==P||null===(e=P.current)||void 0===e||null===(e=e.codeEditor)||void 0===e?void 0:e.getValue();window.open("".concat(window.location.origin,"/querying?language=").concat(j,"&auto_run=true&global_script=").concat(encodeURIComponent(t)))}})})),r&&n.createElement(f.Z,{title:T.formatMessage({id:"Delete"})},n.createElement(p.ZP,{type:"text",icon:n.createElement(m.Z,{onClick:function(){r&&r(v)}})})))),n.createElement(c.Z,{language:j,ref:P,value:a}))},O=r(84723),P=r(35215),T=r(65586),L=r(31192),C=r(9069),I=r(57591),_=r(88766),N=r(7234),A=r(86976);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){var n;return n=function(e,t){if("object"!=q(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==q(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}var M=function(e){var t=e.table,r=(0,n.useRef)(null),o=n.useState((function(){var e=function(e){var t=e[0],r={},n=[];Object.keys(t).forEach((function(e){var o=q(t[e]);r[e]={key:e,type:o,enums:new Set},"number"===o&&n.push(e)})),e.forEach((function(e){Object.keys(e).forEach((function(t){r[t].enums.add(e[t])}))}));var o=Object.values(r).filter((function(e){return"string"===e.type})).sort((function(e,t){return e.enums.size<t.enums.size})).map((function(e){return e.key})),i=n[0],a=n[1],c=F(o,2),u=c[0],s=c[1];return{type:n.length>1?"point":"interval",x:a||u,y:i,color:s,keys:Object.keys(r)}}(t);return{x:e.x,y:e.y,color:e.color,type:e.type,options:e.keys.map((function(e){return{label:e,value:e}}))}})),i=F(o,2),a=i[0],c=i[1];console.log(a);var u=a.type,l=a.x,f=a.y,p=a.color,d=a.options;(0,n.useEffect)((function(){var e;return r.current&&((e=new A.kL({container:r.current,autoFit:!0})).options({type:u,data:t,encode:{x:l,y:f,color:p},transform:[{type:"dodgeX"}]}),e.render()),function(){r.current&&e.destroy()}}),[u,l,f,t,p,r]);return n.createElement("div",{style:{padding:"16px",overflowX:"hidden"}},n.createElement(s.Z,{style:{paddingBottom:"16px"}},"Type:",n.createElement(N.default,{size:"small",defaultValue:u,style:{width:120},onChange:function(e){c((function(t){return Z(Z({},t),{},{type:e})}))},options:[{label:"interval",value:"interval"},{label:"point",value:"point"}]}),"X:",n.createElement(N.default,{size:"small",defaultValue:l,style:{width:120},onChange:function(e){c((function(t){return Z(Z({},t),{},{x:e})}))},options:d}),"Y:",n.createElement(N.default,{size:"small",defaultValue:f,style:{width:120},onChange:function(e){c((function(t){return Z(Z({},t),{},{y:e})}))},options:d}),"Color:",n.createElement(N.default,{size:"small",defaultValue:p,style:{width:120},onChange:function(e){c((function(t){return Z(Z({},t),{},{color:e})}))},options:d})),n.createElement("div",{ref:r,style:{width:"100%"}}))},z=r(2268),B=r(35731),U=r(36523);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Q=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"12px",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-8px";return n.createElement(n.Fragment,null,Object.entries(t).map((function(t){var i=H(t,2),a=i[0],c=i[1];return n.createElement("div",{style:{paddingLeft:"16px",overflowWrap:"break-word",wordBreak:"break-all",whiteSpace:"pre-wrap"},key:a},n.createElement("span",{style:{color:"#F9822F",paddingLeft:r}},'"',a,'" :'),n.createElement("span",{style:{paddingLeft:"6px",textIndent:o}},"object"===Y(c)&&null!==c?n.createElement(n.Fragment,null,"{",e(c,"24px","16px"),"}"):JSON.stringify(c,null,2)))})))},W=function(e){var t=e.expandData,r=e.width;return n.createElement(u.Z,null,Object.values(t).map((function(e){return e.key&&n.createElement("div",{style:{marginLeft:"12px",width:"".concat(r,"%")},key:e.key},"{",Q(e.data),"}")})))};function K(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $=function(e){var t=e.data,r=t.map((function(e){var t=e.keys,r=e._fields;return t.reduce((function(e,t,n){var o=r[n];return e[t]={key:(0,w.Z)(),elementId:o.elementId,data:o,labels:o.labels?o.labels[0]:void 0,type:o.type,startNodeElementId:o.startNodeElementId,endNodeElementId:o.endNodeElementId},e.key=(0,w.Z)(),e}),{})})),o=t[0].keys,i=100/o.length,a=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,r){return r+1}}].concat(K(o.map((function(e){return{title:e,width:"".concat(i,"%"),key:(0,w.Z)(),render:function(t){return r=t[e],o=r.startNodeElementId,i=r.endNodeElementId,a=r.type,c=r.elementId,u=r.labels,o&&i?n.createElement("span",null,"{",n.createElement(z.Icons.Arrow,{style:{color:"#F97108"}})," : ",a," } ID ",c):n.createElement("span",null,"{",n.createElement(z.Icons.Punctuation,{style:{color:"#B668B0"}})," : ",u," } ID ",c);var r,o,i,a,c,u}}}))),[P.Z.EXPAND_COLUMN]);return n.createElement(P.Z,{size:"small",columns:a,dataSource:r,expandable:{expandedRowRender:function(e){return n.createElement(W,{expandData:e,width:i})},expandIcon:function(e){var t=e.expanded,r=e.onExpand,o=e.record;return t?n.createElement(B.Z,{style:{color:"#F97108"},onClick:function(e){return r(o,e)}}):n.createElement(U.Z,{onClick:function(e){return r(o,e)}})},expandRowByClick:!0}})};function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e,t,r){var n;return n=function(e,t){if("object"!=X(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==X(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oe(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){if(e){if("string"==typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ce=function(e){var t=e.data,r=t[0],o="number"==typeof r?["value"]:Object.keys(r),i=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,r){return r+1}}].concat(oe(o.map((function(e){return{title:e,dataIndex:e,width:"".concat(100/o.length,"%"),key:e}})))),a=t.map((function(e,t){return"number"==typeof e?{value:e}:re(re({},e),{},{key:t})}));return n.createElement(P.Z,{size:"small",columns:i,dataSource:a})},ue=function(e){var t=e.nodes,r=e.edges,o={},i=t.map((function(e){var t=e.id,r=e.label,n=e.properties;return o[t]=r,{key:t,id:t,label:r,properties:JSON.stringify(re({},n),null,2)}})),a=r.map((function(e){var t=e.id,r=e.label,n=e.properties,i=e.source,a=e.target;return{key:t,id:t,label:"(".concat(o[i],")-[:").concat(r,"]-(").concat(o[a],")"),properties:JSON.stringify(n,null,2)}}));var c=[].concat(oe(i),oe(a)).map((function(e){var t=e.id,r=e.label,n=e.properties;return re({id:t,label:r},n&&JSON.parse(n))})),u=c[0],s=Object.keys(u).map((function(e){return{title:e,dataIndex:e,key:e,width:180,render:function(e){return String(e).length>30?n.createElement(T.Z,{content:n.createElement("div",{style:{width:"500px",wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap"}},e)},function(e,t){if(e.length>t)return e.substring(0,t)+"..."}(String(e),30)):n.createElement(n.Fragment,null,e)}}}));return n.createElement(P.Z,{columns:s,dataSource:c,scroll:{x:"max-content"},pagination:{simple:!0,pageSize:10,size:"small"}})},se=function(e){var t,r=e.data,o=r.table,i=void 0===o?[]:o,a=r.nodes,c=void 0===a?[]:a,d=r.edges,h=void 0===d?[]:d,m=r.raw,y=c.length,v=h.length,g=i.length,x=(0,b.Z)();t=0===y&&0===v&&0!==g?x.formatMessage({id:"A total of {totalCount} records were retrieved"},{totalCount:g}):x.formatMessage({id:"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges."},{totalCount:y+v,nodeCount:y,edgeCount:v});var w,E=ee((0,n.useState)("table"),2),S=E[0],k=E[1];return"table"===S&&(0!==c.length&&(w=n.createElement(ue,{nodes:c,edges:h})),0!==i.length&&(w=n.createElement(ce,{data:i})),0===i.length&&"interactive"===window.GS_ENGINE_TYPE&&0!==m.records.length&&(w=n.createElement($,{data:m.records}))),n.createElement("div",{style:{overflowX:"scroll"}},n.createElement(u.Z,{justify:"space-between",style:{padding:"0px 10px 10px 10px"},align:"center"},n.createElement(l.Z.Text,null,t),n.createElement(s.Z,null,n.createElement(L.Z,{value:S,onChange:function(e){k(e)},options:[{value:"chart",icon:n.createElement(C.Z,null),label:"chart"},{value:"table",icon:n.createElement(I.Z,null)}]}),n.createElement(f.Z,{title:"download"},n.createElement(p.ZP,{icon:n.createElement(_.Z,null),type:"text",onClick:function(){var e=c.map((function(e){var t=e.id,r=e.label,n=e.properties;return re({id:t,label:r},void 0===n?{}:n)})),t=h.map((function(e){var t=e.id,r=e.label,n=e.source,o=e.target,i=e.properties;return re({id:t,label:r,source:n,target:o},void 0===i?{}:i)}));z.Utils.createDownload(JSON.stringify({nodes:e,edges:t},null,2),"result.json")}})))),w,"chart"===S&&0!==i.length&&n.createElement(M,{table:i}))},le=r(55874),fe=r(29643),pe=r(24174),de=r.n(pe),he=function(e){var t=e.data;return e.isFetching?n.createElement(le.ZP,{icon:n.createElement(fe.Z,{spin:!0}),status:"success",title:"Running"}):"error"===t.mode?n.createElement(le.ZP,{status:"error",title:t.raw&&t.raw.name,subTitle:t.raw&&t.raw.message}):n.createElement("div",null,n.createElement(de(),{src:t.raw}))},me=r(33052),ye=r(13049),ve=r(31931);function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var xe=function(e){var t=e.data,r=e.isFetching,o=e.schemaData,i=e.graphId,a=(e.onQuery,ge(n.useState(null),2)),c=a[0],u=a[1],s=(0,b.Z)(),l=function(e,t,r){var n=e.nodes,o=void 0===n?[]:n,i=e.edges,a=void 0===i?[]:i,c=e.table,u=void 0===c?[]:c,s=(e.raw,o.length>0),l=a.length>0,f=u.length>0,p="raw",d=["raw"];return s&&(p="graph",d=["raw","table","graph"]),!s&&l&&(p="table",d=["raw","table"]),s||l||!f||(p="table",d=["raw","table"]),r&&(p=r),t&&(d=["raw"],p="raw"),{viewMode:p,options:d}}(t,r,c),f=l.viewMode,p=l.options,d=function(e){return-1!==p.indexOf(e)},h=[{label:s.formatMessage({id:"Graph"}),key:"graph",icon:n.createElement(ye.Z,null),children:n.createElement(me.Z,{data:t,schemaData:o,graphId:i}),disabled:!d("graph")},{label:s.formatMessage({id:"Table"}),key:"table",icon:n.createElement(I.Z,null),children:n.createElement(se,{data:t}),disabled:!d("table")},{label:s.formatMessage({id:"Raw"}),key:"raw",icon:n.createElement(ve.Z,null),children:n.createElement(he,{data:t,isFetching:r}),disabled:!d("raw")}];return n.createElement("div",{style:{padding:"16px 0px"}},n.createElement(O.Z,{items:h,size:"small",type:"card",activeKey:f,onChange:function(e){u(e)}}))},we=(0,n.memo)(xe);function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function Se(){Se=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(C([])));w&&w!==r&&n.call(w,a)&&(b=w);var E=g.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ee(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Ee(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){Oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oe(e,t,r){var n;return n=function(e,t){if("object"!=Ee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ee(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pe(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ce=o.Z.useToken,Ie=function(e){var t=e.onQuery,r=e.onClose,o=e.onCancel,i=e.onSave,c=e.script,u=e.id,s=e.active,l=e.mode,f=e.schemaData,p=e.enableImmediateQuery,d=e.graphId,h=e.timestamp,m=e.language,y=Ce().token,v=(0,b.Z)(),g=s&&"flow"===l?{border:"1px solid ".concat(y.colorBorder)}:{border:"1px solid  ".concat(y.colorBorder)},x=(0,n.useRef)(null),w=Te((0,n.useState)({data:{},isFetching:!1,startTime:0,endTime:0,abort:!1}),2),E=w[0],S=w[1],k=E.data,O=E.isFetching,P=E.startTime,T=E.endTime;(0,n.useEffect)((function(){x.current&&s&&"flow"===l&&x.current.scrollIntoView({behavior:"smooth"})}),[s]);var L=function(){var e,r=(e=Se().mark((function e(r){var n;return Se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=4;break}return o&&o(r),S((function(e){return je(je({},e),{},{isFetching:!1,data:{}})})),e.abrupt("return");case 4:return S((function(e){return je(je({},e),{},{isFetching:!0,startTime:(new Date).getTime()})})),e.next=7,t(r);case 7:n=e.sent,S((function(e){return je(je({},e),{},{data:n,isFetching:!1,endTime:(new Date).getTime()})}));case 9:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Pe(i,n,o,a,c,"next",e)}function c(e){Pe(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();(0,n.useEffect)((function(){p&&(console.log("enableImmediateQuery script",p,c,m),L({id:u,script:c,language:m}))}),[p]);var C=T-P<0?v.formatMessage({id:"query submmited on {submitTime}. It's running ... "},{submitTime:a()(P).format("HH:mm:ss YYYY-MM-DD")}):v.formatMessage({id:"query submmited on {submitTime}. Running {runningTime} ms"},{submitTime:a()(P).format("HH:mm:ss YYYY-MM-DD"),runningTime:T-P});return n.createElement("div",{ref:x,style:je(je({display:"flex",flexDirection:"column",flex:1,margin:"12px",padding:"8px 16px",borderRadius:"8px"},g),{},{background:y.colorBgContainer})},n.createElement(j,{message:C,language:m,timestamp:h,schemaData:f,id:u,script:c,onClose:r,onQuery:L,onSave:i,isFetching:O,antdToken:y}),n.createElement(we,{data:k,isFetching:O,schemaData:f,graphId:d,onQuery:t}))},_e=(0,n.memo)(Ie)},33052:function(e,t,r){r.d(t,{Z:function(){return U},h:function(){return B}});var n=r(50959),o=r(17905),i=r(38943),a=r(53531),c=r(84155),u=r(2268),s=r(16835),l=r(24279),f=r(63806),p=r(5576);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(){h=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),c=new I(n||[]);return o(a,"_invoke",{value:P(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",m="executing",y="completed",v={};function g(){}function b(){}function x(){}var w={};s(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(_([])));S&&S!==r&&n.call(S,a)&&(w=S);var k=x.prototype=g.prototype=Object.create(w);function j(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==d(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function P(t,r,n){var o=p;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?y:"suspendedYield",s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(d(t)+" is not iterable")}return b.prototype=x,o(k,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=s(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},j(O.prototype),s(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function m(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var y=u.Utils.storage,v=function(){var e,t=(e=h().mark((function e(t){var r,n,o,i,a,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.get("query_language")||"cypher",n=y.get("query_endpoint")||"",o=y.get("query_initiation"),i=y.get("query_username"),a=y.get("query_password"),c=y.get("query_initiation_service"),e.prev=6,u={script:t,language:r,endpoint:n,username:i,password:a},"Server"!==o||!c){e.next=12;break}return e.next=11,fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){return e.success?e.data:{nodes:[],edges:[]}}));case 11:return e.abrupt("return",e.sent);case 12:return e.abrupt("return",(0,p.aq)(u));case 15:return e.prev=15,e.t0=e.catch(6),e.abrupt("return",{nodes:[],edges:[]});case 18:case"end":return e.stop()}}),e,null,[[6,15]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){m(i,n,o,a,c,"next",e)}function c(e){m(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(){b=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new I(n||[]);return o(a,"_invoke",{value:P(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",h="completed",m={};function y(){}function v(){}function x(){}var w={};s(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(_([])));S&&S!==r&&n.call(S,a)&&(w=S);var k=x.prototype=y.prototype=Object.create(w);function j(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==g(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function P(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(g(t)+" is not iterable")}return v.prototype=x,o(k,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:v,configurable:!0}),v.displayName=s(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},j(O.prototype),s(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function x(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){x(i,n,o,a,c,"next",e)}function c(e){x(i,n,o,a,c,"throw",e)}a(void 0)}))}}var E=function(){var e=w(b().mark((function e(t){var r,n,o,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.key,n=t.selectIds,o="\n    MATCH ".concat(r,"\n    WHERE  elementId(a) IN [").concat(n,"] \n    RETURN a,b,c\n    "),e.next=4,v(o);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=w(b().mark((function e(t){var r,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.schema,n={all:[{key:"(a)-[b]-(c)",label:"One-Hop Neighbors"}]},r.nodes.forEach((function(e){n[e.label]=k(r,e.label)})),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function k(e,t){var r=[];return e.edges.forEach((function(e){var n=e.source,o=e.target,i=e.label;if((t===n||t===o)&&n===o)return"both",void r.push({key:"(a:".concat(n,")-[b:").concat(i,"]-(c:").concat(o,")"),label:"[".concat(i,"]-(").concat(o,")")});n===t&&("out",r.push({key:"(a:".concat(n,")-[b:").concat(i,"]->(c:").concat(o,")"),label:"[".concat(i,"]->(").concat(o,")")})),o===t&&("in",r.push({key:"(a:".concat(n,")<-[b:").concat(i,"]-(c:").concat(o,")"),label:"[".concat(i,"]<-(").concat(o,")")}))})),[{key:"(a)-[b]-(c)",label:"One-Hop Neighbors"}].concat(r)}var j={queryNeighborData:E,queryNeighborItems:S,queryStatement:v};function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function P(){P=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new I(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",h="completed",m={};function y(){}function v(){}function g(){}var b={};s(b,a,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(_([])));w&&w!==r&&n.call(w,a)&&(b=w);var E=g.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==O(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(O(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),s(E,u,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function T(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function L(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){T(i,n,o,a,c,"next",e)}function c(e){T(i,n,o,a,c,"throw",e)}a(void 0)}))}}var C=function(){var e=L(P().mark((function e(t){var r,n,o,i;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.selectIds,n=r.join(","),o="g.V().hasId(".concat(n,").both().dedup()"),e.next=5,v(o);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=L(P().mark((function e(t){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{all:[{key:"(a)-[b]-(c)",label:"One-Hop Neighbors"}]});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_={queryStatement:v,queryNeighborData:C,queryNeighborItems:I},N=function(){var e=(0,u.useSection)().toggleLeftSide;return n.createElement(o.Z,{title:n.createElement(c.Z,{id:"Style settings"}),placement:"left"},n.createElement(i.ZP,{icon:n.createElement(f.Z,null),onClick:function(){return e()},type:"text"}))};(0,s.registerIcons)();var A=function(e){var t=e.data,r=e.schema,o=e.graphId,i=e.id,c=(0,n.useRef)(null),f="gremlin"===u.Utils.storage.get("query_language")?_:j,p=a.Z.useToken().token;return n.createElement("div",{style:{borderRadius:"8px",height:"500px",background:p.colorBgContainer},ref:c},n.createElement(s.GraphProvider,{id:i,services:f},n.createElement(u.Section,{splitBorder:!0,leftSide:n.createElement(s.StyleSetting,null),autoResize:!1,rightSideStyle:{width:"300px",padding:"12px 0px 12px 18px"},defaultCollapsed:{leftSide:!0,rightSide:!0}},n.createElement(s.Prepare,{data:t,schema:r,graphId:o}),n.createElement(s.Canvas,null),n.createElement(s.ZoomStatus,null),n.createElement(s.BasicInteraction,null),n.createElement(s.ClearStatus,null),n.createElement(s.PropertiesPanel,null),n.createElement(s.Loading,null),n.createElement(s.ContextMenu,null,n.createElement(s.NeighborQuery,null),n.createElement(s.DeleteLeafNodes,null),n.createElement(s.DeleteNode,null)),n.createElement(s.Toolbar,{style:{position:"absolute",top:"20px",left:"20px",right:"unset"}},n.createElement(N,null),n.createElement(l.Z,{style:{margin:"0px"}}),n.createElement(u.FullScreen,{containerRef:c}),n.createElement(s.ZoomFit,null),n.createElement(s.Brush,null),n.createElement(s.FixedMode,null),n.createElement(l.Z,{style:{margin:"0px"}}),n.createElement(s.SwitchEngine,null),n.createElement(s.RunCluster,null),n.createElement(s.Export,null)))))};function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}var Z=["properties","constraints"];function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){var n;return n=function(e,t){if("object"!=D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==D(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function B(e){return{nodes:e.nodes,edges:e.edges.map((function(e){var t=e.properties,r=e.constraints,n=z(e,Z),o=q(r[0],2),i=o[0],a=o[1];return F(F({},n),{},{source:i,target:a,properties:t})}))}}var U=function(e){var t=e.data,r=e.schemaData,o=e.graphId,i=B(r);return n.createElement("div",{style:{width:"100%"}},n.createElement(A,{data:u.Utils.fakeSnapshot(t),schema:i,graphId:o}))}},43282:function(e,t,r){r.r(t),r.d(t,{demos:function(){return n}});r(50959),r(85430);var n={}},78624:function(e,t,r){r.r(t),r.d(t,{demos:function(){return u}});var n=r(90228),o=r.n(n),i=r(87999),a=r.n(i),c=r(50959),u=(r(8646),{"packages-studio-components-readme-demo-0":{component:c.memo(c.lazy(a()(o()().mark((function e(){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(3238).then(r.bind(r,14730));case 2:return t=e.sent,n=t.default,e.abrupt("return",{default:function(){return c.createElement(n,null)}});case 5:case"end":return e.stop()}}),e)}))))),asset:null,context:void 0,renderOpts:void 0}})},31482:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return m}});var o,i=r(90228),a=r.n(i),c=r(26068),u=r.n(c),s=r(48305),l=r.n(s),f=r(87999),p=r.n(f),d=r(50959),h=(r(4480),r(2268)),m={"editabletext-demo-0":{component:d.memo(d.lazy(p()(a()().mark((function e(){var t,n,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,o=t.useState,e.next=7,Promise.resolve().then(r.bind(r,2268));case 7:return i=e.sent,c=i.EditableText,e.abrupt("return",{default:function(){var e=o({text:"double click"}),t=l()(e,2),r=t[0],i=t[1],a=r.text;return n.createElement("div",null,n.createElement(c,{text:a,onTextChange:function(e){console.log("value",e),i((function(t){return u()(u()({},t),{},{text:e})}))}}))}});case 10:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"editabletext-demo-0",refAtomIds:["EditableText"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { EditableText } from '@graphscope/studio-components';\nexport default () => {\n  const [state, updateState] = useState({\n    text: 'double click',\n  });\n  const onChange = value => {\n    console.log('value', value);\n    updateState(preState => {\n      return {\n        ...preState,\n        text: value,\n      };\n    });\n  };\n  const { text } = state;\n  return (\n    <div>\n      <EditableText text={text} onTextChange={onChange} />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:n||(n=r.t(d,2)),"@graphscope/studio-components":h},renderOpts:{compile:(o=p()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},87231:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return f}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),s=r(50959),l=(r(93238),r(2268)),f={"emptycanvas-demo-0":{component:s.memo(s.lazy(u()(a()().mark((function e(){var t,n,o,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,2268));case 7:return o=e.sent,i=o.EmptyCanvas,e.abrupt("return",{default:function(){return n.createElement("div",null,n.createElement(i,null))}});case 10:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"emptycanvas-demo-0",refAtomIds:["EmptyCanvas"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { EmptyCanvas } from '@graphscope/studio-components';\nexport default () => {\n  return (\n    <div>\n      <EmptyCanvas />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:n||(n=r.t(s,2)),"@graphscope/studio-components":l},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},70432:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return f}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),s=r(50959),l=(r(48741),r(2268)),f={"fullscreen-demo-0":{component:s.memo(s.lazy(u()(a()().mark((function e(){var t,n,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,o=t.useRef,e.next=8,Promise.resolve().then(r.bind(r,2268));case 8:return i=e.sent,c=i.FullScreen,e.abrupt("return",{default:function(){var e=o(null);return n.createElement("div",null,n.createElement(c,{containerRef:e}),n.createElement("div",{ref:e,style:{width:"100%",height:"500px",background:"#ddd",textAlign:"center",lineHeight:"100%"}},"Trigger full screen"))}});case 11:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"fullscreen-demo-0",refAtomIds:["FullScreen"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState, useRef } from 'react';\nimport { FullScreen } from '@graphscope/studio-components';\nexport default () => {\n  const containerRef = useRef(null);\n  return (\n    <div>\n      <FullScreen containerRef={containerRef} />\n      <div\n        ref={containerRef}\n        style={{ width: '100%', height: '500px', background: '#ddd', textAlign: 'center', lineHeight: '100%' }}\n      >\n        Trigger full screen\n      </div>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:n||(n=r.t(s,2)),"@graphscope/studio-components":l},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},83039:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return p}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),s=r(50959),l=(r(36666),r(99300)),f=r(2268),p={"illustration-demo-0":{component:s.memo(s.lazy(u()(a()().mark((function e(){var t,n,o,i,c,u,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,99300));case 7:return o=e.sent,o.Space,i=o.Flex,c=o.Typography,e.next=13,Promise.resolve().then(r.bind(r,2268));case 13:return u=e.sent,s=u.Illustration,e.abrupt("return",{default:function(){return n.createElement(i,{wrap:!0,gap:44},Object.keys(s).map((function(e){var t=s[e];return n.createElement(i,{key:e,gap:8,vertical:!0,align:"center"},n.createElement(t,null),n.createElement(c.Text,null,e))})))}});case 16:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"illustration-demo-0",refAtomIds:["Illustration"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space, Flex, Typography } from 'antd';\nimport { Illustration } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <Flex wrap gap={44}>\n      {Object.keys(Illustration).map(key => {\n        const Item = Illustration[key];\n        return (\n          <Flex key={key} gap={8} vertical align=\"center\">\n            <Item />\n            <Typography.Text>{key}</Typography.Text>\n          </Flex>\n        );\n      })}\n    </Flex>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:n||(n=r.t(s,2)),antd:l,"@graphscope/studio-components":f},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},67114:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return f}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),s=r(50959),l=(r(19895),r(2268)),f={"importfiles-demo-0":{component:s.memo(s.lazy(u()(a()().mark((function e(){var t,n,o,i,c,u;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,t.useRef,e.next=8,Promise.resolve().then(r.bind(r,2268));case 8:return o=e.sent,i=o.ImportFiles,c=o.Button,u=o.message,e.abrupt("return",{default:function(){return n.createElement("div",{style:{height:"500px"}},n.createElement(i,{upload:{accept:".json,.csv",title:"xxx",description:"xxx"},type:"json"},(function(e){return n.createElement(n.Fragment,null,n.createElement(c,{type:"primary",onClick:function(){return function(e){u(e)}(e)},loading:e.loading},"Visualization"))})))}});case 13:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"importfiles-demo-0",refAtomIds:["ImportFiles"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState, useRef } from 'react';\nimport { ImportFiles, Button, message } from '@graphscope/studio-components';\n\nexport default () => {\n  const onSubmit = params => {\n    message(params);\n  };\n  return (\n    <div style={{ height: '500px' }}>\n      <ImportFiles\n        upload={{\n          accept: '.json,.csv',\n          title: 'xxx',\n          description: 'xxx',\n        }}\n        type=\"json\"\n      >\n        {params => {\n          return (\n            <>\n              <Button type=\"primary\" onClick={() => onSubmit(params)} loading={params.loading}>\n                Visualization\n              </Button>\n            </>\n          );\n        }}\n      </ImportFiles>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:n||(n=r.t(s,2)),"@graphscope/studio-components":l},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},98063:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return p}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),s=r(50959),l=(r(54581),r(99300)),f=r(2268),p={"logo-demo-0":{component:s.memo(s.lazy(u()(a()().mark((function e(){var t,n,o,i,c,u,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,99300));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(r.bind(r,2268));case 11:return i=e.sent,c=i.Logo,u=i.LogoText,s=i.LogoImage,e.abrupt("return",{default:function(){return n.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"40px"}},n.createElement(c,null),n.createElement(u,null),n.createElement(s,null))}});case 16:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"logo-demo-0",refAtomIds:["Logo"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { Logo, LogoText, LogoImage } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', gap: '40px' }}>\n      <Logo />\n      <LogoText />\n      <LogoImage />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:n||(n=r.t(s,2)),antd:l,"@graphscope/studio-components":f},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},47785:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return h}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),s=r(50959),l=(r(518),r(99300)),f=r(67794),p=r(53420),d=r(5855),h={"provider-demo-0":{component:s.memo(s.lazy(u()(a()().mark((function e(){var t,n,o,i,c,u,s,l,f,p,d,h;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,99300));case 7:return o=e.sent,i=o.Button,o.Space,o.Input,e.next=13,Promise.resolve().then(r.bind(r,67794));case 13:return c=e.sent,u=c.default,e.next=17,Promise.resolve().then(r.bind(r,5855));case 17:return s=e.sent,l=s.useStudioProvier,e.next=21,Promise.resolve().then(r.bind(r,53420));case 21:return f=e.sent,p=f.components,d=f.token,h=function(){var e=l().handleThemeOrLocale;return n.createElement(i,{onClick:function(){e({components:p,token:d})}},"edit")},e.abrupt("return",{default:function(){return n.createElement(u,{mode:"defaultAlgorithm"},n.createElement(h,null),n.createElement(i,null,"colorPrimary"))}});case 26:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"provider-demo-0",refAtomIds:["Provider"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Button, Space, Input } from 'antd';\nimport ThemeProvider from './index.tsx';\nimport { useStudioProvier } from './useThemeConfigProvider.tsx';\nimport { components, token } from './const.ts';\n/** 修改主题色 */\nconst ToogleButton = () => {\n  const { handleThemeOrLocale } = useStudioProvier();\n  return (\n    <Button\n      onClick={() => {\n        handleThemeOrLocale({\n          components,\n          token,\n        });\n      }}\n    >\n      edit\n    </Button>\n  );\n};\n\nexport default () => {\n  return (\n    <ThemeProvider\n      /** 主题模式 */\n      mode=\"defaultAlgorithm\"\n    >\n      <ToogleButton />\n      <Button>colorPrimary</Button>\n    </ThemeProvider>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"./index.tsx":{type:"FILE",value:r(20880).Z},"./const.ts":{type:"FILE",value:r(22211).Z},"./useThemeConfigProvider.tsx":{type:"FILE",value:r(88241).Z}},entry:"index.jsx"},context:{"./index.tsx":f,"./const.ts":p,"./useThemeConfigProvider.tsx":d,react:n||(n=r.t(s,2)),antd:l,"/home/runner/work/portal/portal/packages/studio-components/src/Provider/index.tsx":f,"/home/runner/work/portal/portal/packages/studio-components/src/Provider/const.ts":p,"/home/runner/work/portal/portal/packages/studio-components/src/Provider/useThemeConfigProvider.tsx":d},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},91445:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return f}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),s=r(50959),l=(r(3750),r(78781)),f={"resizablepanel-demo-0":{component:s.memo(s.lazy(u()(a()().mark((function e(){var t,n,o,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,e.next=6,Promise.resolve().then(r.bind(r,78781));case 6:return o=e.sent,i=o.default,e.abrupt("return",{default:function(){return n.createElement(i,{leftSide:n.createElement("div",{style:{minWidth:"300px",height:"300px",background:"#F7F7F7",textAlign:"center"}},"leftSide"),middleSide:n.createElement("div",{style:{minWidth:"600px",height:"300px",background:"#FFA444",textAlign:"center"}},"middleSide"),rightSide:n.createElement("div",{style:{minWidth:"300px",height:"300px",background:"#91CAFA",textAlign:"center"}},"rightSide")})}});case 9:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"resizablepanel-demo-0",refAtomIds:["ResizablePanel"],dependencies:{"index.jsx":{type:"FILE",value:"import React from 'react';\nimport ResizablePanel from './index.tsx';\n\nexport default () => {\n  return (\n    <ResizablePanel\n      leftSide={\n        <div style={{ minWidth: '300px', height: '300px', background: '#F7F7F7', textAlign: 'center' }}>leftSide</div>\n      }\n      middleSide={\n        <div style={{ minWidth: '600px', height: '300px', background: '#FFA444', textAlign: 'center' }}>middleSide</div>\n      }\n      rightSide={\n        <div\n          style={{\n            minWidth: '300px',\n            height: '300px',\n            background: '#91CAFA',\n            textAlign: 'center',\n          }}\n        >\n          rightSide\n        </div>\n      }\n    />\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"./index.tsx":{type:"FILE",value:r(17239).Z}},entry:"index.jsx"},context:{"./index.tsx":l,react:n||(n=r.t(s,2)),"/home/runner/work/portal/portal/packages/studio-components/src/ResizablePanel/index.tsx":l},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},3151:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return p}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),s=r(50959),l=(r(43716),r(99300)),f=r(2268),p={"segmentedtabs-demo-0":{component:s.memo(s.lazy(u()(a()().mark((function e(){var t,n,o,i,c,u,s,l;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,99300));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(r.bind(r,2268));case 11:return i=e.sent,c=i.SegmentedTabs,u=function(){return n.createElement("div",null,"Tab-1 components")},s=function(){return n.createElement("div",null,"Tab-2 components")},l=function(){return n.createElement("div",null,"Tab-3 components")},e.abrupt("return",{default:function(){var e=[{key:"Tab-1",children:n.createElement(u,null),label:"Tab-1"},{key:"Tab-2",children:n.createElement(s,null),label:"Tab-2"},{key:"Tab-3",children:n.createElement(l,null),label:"Tab-3"}];return n.createElement("div",null,n.createElement(c,{items:e}))}});case 17:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"segmentedtabs-demo-0",refAtomIds:["SegmentedTabs"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { SegmentedTabs } from '@graphscope/studio-components';\nconst Tab1 = () => {\n  return <div>Tab-1 components</div>;\n};\nconst Tab2 = () => {\n  return <div>Tab-2 components</div>;\n};\nconst Tab3 = () => {\n  return <div>Tab-3 components</div>;\n};\nexport default () => {\n  const items = [\n    {\n      key: 'Tab-1',\n      children: <Tab1 />,\n      label: 'Tab-1',\n    },\n    {\n      key: 'Tab-2',\n      children: <Tab2 />,\n      label: 'Tab-2',\n    },\n    {\n      key: 'Tab-3',\n      children: <Tab3 />,\n      label: 'Tab-3',\n    },\n  ];\n  return (\n    <div>\n      <SegmentedTabs items={items}></SegmentedTabs>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:n||(n=r.t(s,2)),antd:l,"@graphscope/studio-components":f},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},62359:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return p}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),s=r(50959),l=(r(43765),r(99300)),f=r(2268),p={"sidetabs-demo-0":{component:s.memo(s.lazy(u()(a()().mark((function e(){var t,n,o,i,c,u,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,99300));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(r.bind(r,2268));case 11:return i=e.sent,i.SegmentedTabs,c=function(){return n.createElement("div",null,"Tab-1 components")},u=function(){return n.createElement("div",null,"Tab-2 components")},s=function(){return n.createElement("div",null,"Tab-3 components")},e.abrupt("return",{default:function(){var e=[{key:"Tab-1",children:n.createElement(c,null),label:"Tab-1"},{key:"Tab-2",children:n.createElement(u,null),label:"Tab-2"},{key:"Tab-3",children:n.createElement(s,null),label:"Tab-3"}];return n.createElement("div",null,n.createElement(Sidebar,{options:e,value:"Tab-1",collapse:!1}))}});case 17:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"sidetabs-demo-0",refAtomIds:["SideTabs"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { SegmentedTabs } from '@graphscope/studio-components';\nconst Tab1 = () => {\n  return <div>Tab-1 components</div>;\n};\nconst Tab2 = () => {\n  return <div>Tab-2 components</div>;\n};\nconst Tab3 = () => {\n  return <div>Tab-3 components</div>;\n};\nexport default () => {\n  const items = [\n    {\n      key: 'Tab-1',\n      children: <Tab1 />,\n      label: 'Tab-1',\n    },\n    {\n      key: 'Tab-2',\n      children: <Tab2 />,\n      label: 'Tab-2',\n    },\n    {\n      key: 'Tab-3',\n      children: <Tab3 />,\n      label: 'Tab-3',\n    },\n  ];\n  return (\n    <div>\n      <Sidebar options={items} value=\"Tab-1\" collapse={false} />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:n||(n=r.t(s,2)),antd:l,"@graphscope/studio-components":f},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},99409:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return p}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),s=r(50959),l=(r(44412),r(99300)),f=r(2268),p={"tablecard-demo-0":{component:s.memo(s.lazy(u()(a()().mark((function e(){var t,n,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,99300));case 7:return o=e.sent,o.Space,e.next=11,Promise.resolve().then(r.bind(r,2268));case 11:return i=e.sent,c=i.TableCard,e.abrupt("return",{default:function(){return n.createElement("div",null,n.createElement(c,{data:{label:"table-1",properties:[{}]}}))}});case 14:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"tablecard-demo-0",refAtomIds:["TableCard"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space } from 'antd';\nimport { TableCard } from '@graphscope/studio-components';\n\nexport default () => {\n  const data = {\n    label: 'table-1',\n    properties: [{}],\n  };\n  return (\n    <div>\n      <TableCard data={data}></TableCard>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:n||(n=r.t(s,2)),antd:l,"@graphscope/studio-components":f},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},98440:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return p}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),s=r(50959),l=(r(85792),r(99300)),f=r(2268),p={"toolbar-demo-0":{component:s.memo(s.lazy(u()(a()().mark((function e(){var t,n,o,i,c,u,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,99300));case 7:return o=e.sent,o.Space,i=o.Button,e.next=12,Promise.resolve().then(r.bind(r,2268));case 12:return c=e.sent,u=c.Toolbar,s=c.Icons,e.abrupt("return",{default:function(){return n.createElement("div",{style:{position:"relative",height:"400px"}},n.createElement(u,null,n.createElement(i,{type:"text",icon:n.createElement(s.Sidebar,null)}),n.createElement(i,{type:"text",icon:n.createElement(s.AddNode,null)})))}});case 16:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"toolbar-demo-0",refAtomIds:["Toolbar"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space, Button } from 'antd';\nimport { Toolbar, Icons } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <div style={{ position: 'relative', height: '400px' }}>\n      <Toolbar>\n        <Button type=\"text\" icon={<Icons.Sidebar />} />\n        <Button type=\"text\" icon={<Icons.AddNode />} />\n      </Toolbar>\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:n||(n=r.t(s,2)),antd:l,"@graphscope/studio-components":f},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},2434:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return p}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),s=r(50959),l=(r(44117),r(99300)),f=r(2268),p={"typingtext-demo-0":{component:s.memo(s.lazy(u()(a()().mark((function e(){var t,n,o,i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,e.next=7,Promise.resolve().then(r.bind(r,99300));case 7:return o=e.sent,o.Space,o.Button,e.next=12,Promise.resolve().then(r.bind(r,2268));case 12:return i=e.sent,c=i.TypingText,e.abrupt("return",{default:function(){return n.createElement(c,null,"GraphScope Portal is a user-friendly web interface that simplifies managing graph data with GraphScope. It offers one-stop access to data modeling, importing, querying, and monitoring, catering to both Interactive and Insight engines within the GraphScope Flex architecture.")}});case 15:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"typingtext-demo-0",refAtomIds:["TypingText"],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState } from 'react';\nimport { Space, Button } from 'antd';\nimport { TypingText } from '@graphscope/studio-components';\n\nexport default () => {\n  return (\n    <TypingText>\n      GraphScope Portal is a user-friendly web interface that simplifies managing graph data with GraphScope. It offers\n      one-stop access to data modeling, importing, querying, and monitoring, catering to both Interactive and Insight\n      engines within the GraphScope Flex architecture.\n    </TypingText>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},antd:{type:"NPM",value:"5.22.2"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:n||(n=r.t(s,2)),antd:l,"@graphscope/studio-components":f},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},54734:function(e,t,r){r.r(t),r.d(t,{demos:function(){return n}});r(50959),r(4866);var n={}},82463:function(e,t,r){r.r(t),r.d(t,{demos:function(){return l}});var n,o=r(90228),i=r.n(o),a=r(87999),c=r.n(a),u=r(50959),s=(r(93995),r(2268)),l={"layout-demo-0":{component:u.memo(u.lazy(c()(i()().mark((function e(){var t,n,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.bind(r,2268));case 2:return t=e.sent,n=t.Layout,o=t.Icons,t.StudioProvider,e.abrupt("return",{default:function(){var e=[{label:"home",key:"/home",icon:u.createElement(o.Cluster,null)}];return u.createElement("div",{style:{height:"500px",border:"1px solid red"}},u.createElement(n,{sideMenu:[e]}))}});case 7:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"layout-demo-0",refAtomIds:["layout"],dependencies:{"index.jsx":{type:"FILE",value:"import { Layout, Icons, StudioProvider } from '@graphscope/studio-components';\n\nexport default () => {\n  const sideMenu = [\n    {\n      label: 'home',\n      key: '/home',\n      icon: <Icons.Cluster />,\n    },\n  ];\n  return (\n    <div style={{ height: '500px', border: '1px solid red' }}>\n      <Layout sideMenu={[sideMenu]} />\n    </div>\n  );\n};"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{"@graphscope/studio-components":s},renderOpts:{compile:(n=c()(i()().mark((function e(){var t,n=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})}}}},55348:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return f}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),s=r(50959),l=(r(26973),r(43221)),f={"packages-studio-importor-src-app-demo-0":{component:s.memo(s.lazy(u()(a()().mark((function e(){var t,n,o,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,n=t.default,t.useState,t.useEffect,e.next=8,Promise.resolve().then(r.bind(r,43221));case 8:return o=e.sent,i=o.default,e.abrupt("return",{default:function(){var e=function(){var e=u()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{nodes:[],edges:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.createElement("div",{style:{position:"fixed",top:"65px",left:"0px",right:"0px",zIndex:999,bottom:"0px",background:"#fff"}},n.createElement(i,{queryPrimitiveTypes:function(){return["DT_DOUBLE","DT_STRING","DT_SIGNED_INT32","DT_SIGNED_INT64"].map((function(e){return{label:e,value:e}}))},queryGraphSchema:e,appMode:"DATA_MODELING"}))}});case 11:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"packages-studio-importor-src-app-demo-0",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:"import React, { useState, useEffect } from 'react';\nimport ModelingApp from '@graphscope/studio-importor';\nexport default () => {\n  const queryGraphSchema = async () => {\n    return { nodes: [], edges: [] };\n  };\n  return (\n    <div\n      style={{\n        // padding: '12px',\n        // height: 'calc(100vh - 64px)',\n        // boxSizing: 'border-box',\n        position: 'fixed',\n        top: '65px',\n        left: '0px',\n        right: '0px',\n        zIndex: 999,\n        bottom: '0px',\n        background: '#fff',\n      }}\n    >\n      <ModelingApp\n        /** 属性下拉选项值 */\n        queryPrimitiveTypes={() => {\n          return ['DT_DOUBLE', 'DT_STRING', 'DT_SIGNED_INT32', 'DT_SIGNED_INT64'].map(item => {\n            return { label: item, value: item };\n          });\n        }}\n        queryGraphSchema={queryGraphSchema}\n        appMode=\"DATA_MODELING\"\n      />\n    </div>\n  );\n};"},react:{type:"NPM",value:"18.2.0"},"@graphscope/studio-importor":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{react:n||(n=r.t(s,2)),"@graphscope/studio-importor":l},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},52545:function(e,t,r){r.r(t),r.d(t,{demos:function(){return f}});var n,o=r(90228),i=r.n(o),a=r(87999),c=r.n(a),u=r(50959),s=(r(67866),r(21050)),l=r(2268),f={"packages-studio-query-src-app-demo-0":{component:u.memo(u.lazy(c()(i()().mark((function e(){var t,n,o,a,c;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.bind(r,21050));case 2:return t=e.sent,n=t.default,e.next=6,Promise.resolve().then(r.bind(r,2268));case 6:return o=e.sent,a=o.Utils,c=a.storage,e.abrupt("return",{default:function(){var e=window.GS_ENGINE_TYPE,t="groot"===e?"gremlin":"cypher",r="groot"===e?"g.V().limit 10":"Match (n) return n limit 10",o=c.get("locale")||"en-US",i=c.get("primaryColor")||"#1978FF",a=c.get("themeColor")||"defaultAlgorithm";return u.createElement("div",{style:{position:"fixed",top:"65px",left:"0px",right:"0px",zIndex:999,bottom:"0px",background:"#fff"}},u.createElement(n,{theme:{mode:a,primaryColor:i},locale:o,globalScript:r,language:t,queryInfo:function(){return new Promise((function(e){e({graph_name:"demo"})}))},queryGraphSchema:function(){return new Promise((function(e){e({nodes:[],edges:[]})}))},queryStatements:function(){return new Promise((function(e){e([])}))}}))}});case 10:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"packages-studio-query-src-app-demo-0",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:"import QueryApp from '@graphscope/studio-query';\nimport { Utils } from '@graphscope/studio-components';\nconst { storage } = Utils;\n\nexport default () => {\n  const queryInfo = () => {\n    return new Promise(resolve => {\n      resolve({\n        graph_name: 'demo',\n      });\n    });\n  };\n  const queryGraphSchema = () => {\n    return new Promise(resolve => {\n      resolve({\n        nodes: [],\n        edges: [],\n      });\n    });\n  };\n  const queryStatements = () => {\n    return new Promise(resolve => {\n      resolve([]);\n    });\n  };\n  const { GS_ENGINE_TYPE } = window;\n  const language = GS_ENGINE_TYPE === 'groot' ? 'gremlin' : 'cypher';\n  const globalScript = GS_ENGINE_TYPE === 'groot' ? 'g.V().limit 10' : 'Match (n) return n limit 10';\n\n  const locale = storage.get('locale') || 'en-US';\n  const primaryColor = storage.get('primaryColor') || '#1978FF';\n  const themeMode = storage.get('themeColor') || 'defaultAlgorithm';\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        top: '65px',\n        left: '0px',\n        right: '0px',\n        zIndex: 999,\n        bottom: '0px',\n        background: '#fff',\n      }}\n    >\n      <QueryApp\n        /** 主题相关 */\n        theme={{ mode: themeMode, primaryColor }}\n        /** 国际化 */\n        locale={locale}\n        /** 返回导航 */\n        globalScript={globalScript}\n        language={language}\n        queryInfo={queryInfo}\n        queryGraphSchema={queryGraphSchema}\n        queryStatements={queryStatements}\n      />\n    </div>\n  );\n};"},"@graphscope/studio-query":{type:"NPM",value:"0.1.18"},"@graphscope/studio-components":{type:"NPM",value:"0.1.18"}},entry:"index.jsx"},context:{"@graphscope/studio-query":s,"@graphscope/studio-components":l},renderOpts:{compile:(n=c()(i()().mark((function e(){var t,n=arguments;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})}}}},57298:function(e,t,r){var n;r.r(t),r.d(t,{demos:function(){return f}});var o,i=r(90228),a=r.n(i),c=r(87999),u=r.n(c),s=r(50959),l=(r(37275),r(59506)),f={"packages-studio-query-src-statement-demo-0":{component:s.memo(s.lazy(u()(a()().mark((function e(){var t,n,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,50959,19));case 2:return t=e.sent,t.default,e.next=6,Promise.resolve().then(r.bind(r,59506));case 6:return n=e.sent,o=n.default,e.abrupt("return",{default:o});case 9:case"end":return e.stop()}}),e)}))))),asset:{type:"BLOCK",id:"packages-studio-query-src-statement-demo-0",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:"import React from 'react';\nimport SDK from '../sdk/index.tsx';\nexport default SDK;"},react:{type:"NPM",value:"18.2.0"},"../sdk/index.tsx":{type:"FILE",value:r(9534).Z}},entry:"index.jsx"},context:{"../sdk/index.tsx":l,react:n||(n=r.t(s,2)),"/home/runner/work/portal/portal/packages/studio-query/src/sdk/index.tsx":l},renderOpts:{compile:(o=u()(a()().mark((function e(){var t,n=arguments;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1128).then(r.bind(r,61128));case 2:return e.abrupt("return",(t=e.sent).default.apply(t,n));case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}}}},53420:function(e,t,r){r.r(t),r.d(t,{components:function(){return n},token:function(){return o}});var n={Menu:{itemBg:"rgba(255, 255, 255, 0)",subMenuItemBg:"rgba(255, 255, 255, 0)",iconMarginInlineEnd:14,itemMarginInline:4,iconSize:14,collapsedWidth:50,itemActiveBg:"#eaeaea"},Typography:{titleMarginBottom:"0.2em",titleMarginTop:"0.8em"},Table:{cellPaddingBlock:4,cellPaddingInline:8},Pagination:{itemSize:20},Result:{iconFontSize:62,titleFontSize:20,colorError:"#00000073"}},o={colorBorder:"red",colorBgBase:"#fff"}},67794:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var n=r(26068),o=r.n(n),i=r(48305),a=r.n(i),c=r(50959),u=r(36276),s=r(53531),l=r(98262),f=r(5855);r(15558),r(31759),r(90228),r(87999);var p=function(e){try{var t=localStorage.getItem(e);if(t)return function(e){try{return JSON.parse(e)}catch(t){if("string"!=typeof e||e.startsWith('"')||e.endsWith('"'))return e;try{return JSON.parse('"'.concat(e,'"'))}catch(t){return console.error("Failed to parse the input:",t),e}}}(t)}catch(e){console.error("Error while retrieving data from localStorage:",e)}},d=function(e,t){try{localStorage.setItem(e,JSON.stringify(t,null,2))}catch(e){console.error("Error while storing data in localStorage:",e)}};var h=r(11527),m=function(e){var t=e.children,r=e.locales,n=(0,c.useState)((function(){var t=e.algorithm,r=e.locale;return r||(r=p("locale"))||d("locale",r="en-US"),t||(t=p("algorithm"))||d("algorithm",t="defaultAlgorithm"),{components:p("components"),token:p("token"),algorithm:t,locale:r}})),i=a()(n,2),m=i[0],y=i[1],v=m.components,g=m.token,b=m.algorithm,x=m.locale,w=function(e){var t="defaultAlgorithm"===e;return{componentsConfig:{Menu:{itemBg:"rgba(255, 255, 255, 0)",subMenuItemBg:"rgba(255, 255, 255, 0)",iconMarginInlineEnd:14,itemMarginInline:4,iconSize:14,collapsedWidth:56,horizontalLineHeight:32,itemHeight:32},Typography:{titleMarginBottom:"0.2em",titleMarginTop:"0.8em"},Table:{cellPaddingBlock:4,cellPaddingInline:8},Pagination:{itemSize:20},Result:{iconFontSize:62,titleFontSize:20,colorError:t?"#00000073":"#ddd"}},tokenConfig:{colorBorder:t?"#F0F0F0":"#303030",colorBgBase:t?"#fff":"#1d1d1d",colorBgLayout:t?"#f5f7f9":"rgba(43,43,43,1)"}}}(b),E=w.componentsConfig,S=w.tokenConfig,k=function(){var e="defaultAlgorithm"===(0,f.useStudioProvier)().algorithm;return{sectionBackground:e?"#fff":"#0D0D0D",containerBackground:e?"#f5f7f9":"#020202",instanceBackground:e?"#FCFCFC":"",jobDetailBorder:e?"#efefef":"#323232",jobDetailColor:e?"#1F1F1F":"#808080",codeMirrorBorder:e?"#efefef":"#323232",editorBackground:e?"#fff":"#151515",editorForeground:e?"#212121":"#FFF",buttonBackground:e?"#fff":"#1d1d1d",layoutBackground:e?"#fff":"#020202"}}(),j="defaultAlgorithm"===b,O=r[x||"en-US"];return(0,h.jsx)(f.ContainerProvider,{value:o()({token:o()(o()({},S),g),components:o()(o()({},E),v),handleThemeOrLocale:function(e){var t=e.components,r=e.token;Object.keys(e).forEach((function(t){d(t,e[t])})),y((function(n){var i;return d("token",o()(o()({},n.token),r)),o()(o()({},n),{},{components:o()(o()({},n.components),t),token:o()(o()({},n.token),r),algorithm:e.algorithm||n.algorithm,locale:null!==(i=e.locale)&&void 0!==i?i:p("locale")})}))},algorithm:b,locale:x,isLight:j},k),children:(0,h.jsx)(l.Z,{messages:O,locale:x,children:(0,h.jsx)(u.ZP,{theme:{algorithm:j?s.Z.defaultAlgorithm:s.Z.darkAlgorithm,components:o()(o()({},E),v),token:o()(o()({},S),g)},children:t})})})}},5855:function(e,t,r){r.r(t),r.d(t,{ContainerContext:function(){return a},ContainerProvider:function(){return c},useStudioProvier:function(){return u}});var n=r(36075),o=r.n(n),i=r(50959),a=(0,i.createContext)({components:{},token:{},handleThemeOrLocale:function(e){o()(e)},locale:"en-US",algorithm:"defaultAlgorithm",isLight:!1}),c=a.Provider,u=function(){var e=(0,i.useContext)(a);if(void 0===e||0===Object.keys(e).length)throw new Error("useContext must be used within a ContainerProvider");return e}},78781:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});r(50959);var n=r(8395),o=r(11527),i={ResizeHandleOuter:{flex:"0 0 1.5em",position:"relative",outline:"none",transform:"rotate(90deg)",backgroundColor:"transparent"},ResizeHandleInner:{position:"absolute",top:"0.25em",bottom:"0.25em",left:"0.25em",right:"0.25em",borderRadius:"0.25em",backgroundColor:"transparent",transition:"background-color 0.2s linear"},Icon:{width:"1em",height:"1em",position:"absolute",left:"calc(50% - 0.5rem)",top:"calc(50% - 0.5rem)"}};function a(e){e.className;var t=e.id;return(0,o.jsx)(n.OT,{style:i.ResizeHandleOuter,id:t,children:(0,o.jsx)("div",{style:i.ResizeHandleInner,children:(0,o.jsx)("svg",{style:i.Icon,viewBox:"0 0 24 24",children:(0,o.jsx)("path",{fill:"currentColor",d:"M8,18H11V15H2V13H22V15H13V18H16L12,22L8,18M12,2L8,6H11V9H2V11H22V9H13V6H16L12,2Z"})})})})}var c={Container:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:"1rem"},Panel:{display:"flex",flexDirection:"row"},PanelContent:{height:"100%",width:"100%",borderRadius:"0.5rem"}},u=function(e){var t=e.leftSide,r=e.middleSide,i=e.rightSide,u=e.leftMinSize,s=void 0===u?20:u,l=e.leftMaxSize,f=void 0===l?40:l,p=e.rightMinSize,d=void 0===p?20:p,h=e.rightMaxSize,m=void 0===h?40:h;return(0,o.jsx)("div",{style:c.Container,children:(0,o.jsxs)(n.eh,{autoSaveId:"example",direction:"horizontal",children:[t&&[(0,o.jsx)(n.s_,{style:c.Panel,collapsible:!1,order:1,minSize:s,maxSize:f,children:(0,o.jsx)("div",{style:c.PanelContent,children:t})}),(0,o.jsx)(a,{},"left-handle")],(0,o.jsx)(n.s_,{style:c.Panel,collapsible:!1,order:2,children:(0,o.jsx)("div",{style:c.PanelContent,children:r})}),i&&[(0,o.jsx)(a,{},"right-handle"),(0,o.jsx)(n.s_,{style:c.Panel,collapsible:!1,order:3,minSize:d,maxSize:m,children:(0,o.jsx)("div",{style:c.PanelContent,children:i})})]]})})}},73174:function(e,t,r){r.d(t,{qp:function(){return i},rv:function(){return o}});var n=r(33741),o={mode:"GS_STUDIO_QUERY_MODE"},i=function(){return(0,n.qp)()}},16471:function(e,t,r){r.d(t,{Ek:function(){return n}});r(2268).Utils.storage;function n(e){return(e.match(/\r?\n/g)||[]).length+1}},70667:function(e,t,r){r.d(t,{Z:function(){return x}});var n=r(50959),o=r(2268),i=r(96066),a=(r(52871),r(26068)),c=r.n(a),u=r(15558),s=r.n(u),l={comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}]},f={defaultToken:"",tokenPostfix:".gremlin",ignoreCase:!0,brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["g","V","E","out","in","both","has","hasLabel","limit","order","by","select","count","filter","map","dedup","outE","inE","bothE"],builtinLiterals:["true","false","null"],builtinFunctions:["values","keys","id","label","property","outV","inV","bothV","sum","mean","min","max","coalesce","is","not","range","fold"],operators:["+","-","*","/","%","^","=","<>","<",">","<=",">="],escapes:/\\(?:[tbnrf\\"'`]|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+/,octaldigits:/[0-7]+/,hexdigits:/[0-9a-fA-F]+/,tokenizer:{root:[[/[{}[\]()]/,"@brackets"],{include:"common"}],common:[{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/:[a-zA-Z_][\w]*/,"type.identifier"],[/[a-zA-Z_][\w]*(?=\()/,{cases:{"@builtinFunctions":"predefined.function","@keywords":"keyword","@default":"identifier"}}],[/`/,"identifier.escape","@identifierBacktick"],[/[;,.:|]/,"delimiter"],[/[\+\-\*\/\^%]+/,"delimiter.operator"],[/[\!<>\?=\|&]/,"delimiter"]],numbers:[[/-?(@digits)[eE](-?(@digits))?/,"number.float"],[/-?(@digits)?\.(@digits)([eE]-?(@digits))?/,"number.float"],[/-?0x(@hexdigits)/,"number.hex"],[/-?0(@octaldigits)/,"number.octal"],[/-?(@digits)/,"number"]],strings:[[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@stringDouble"],[/'/,"string","@stringSingle"]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/\/\/.*/,"comment"],[/[^/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],stringDouble:[[/[^\\"]+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/"/,"string","@pop"]],stringSingle:[[/[^\\']+/,"string"],[/@escapes/,"string"],[/\\./,"string.invalid"],[/'/,"string","@pop"]],identifierBacktick:[[/[^\\`]+/,"identifier.escape"],[/@escapes/,"identifier.escape"],[/\\./,"identifier.escape.invalid"],[/`/,"identifier.escape","@pop"]]}};var p=[].concat(["count","fold","sum","min","max","mean","group","groupCount"],["hasId","hasLabel","has","hasNot","is","where","not","dedup","order","limit","coin","sample","union"],["id","label","constant","valueMap","values","elementMap","select"]),d=["outV","inV","otherV","bothV"],h=["outE","inE","bothE","out","in","both"],m={};[].concat(d,["out","in","both"]).forEach((function(e){m[e]=[].concat(h,s()(p))})),["outE","inE","bothE"].forEach((function(e){m[e]=[].concat(d,s()(p))}));var y=r(11527);function v(e){return(e.match(/\r?\n/g)||[]).length+1}i.Mj.register({id:"gremlin"}),i.Mj.setMonarchTokensProvider("gremlin",f),i.Mj.setLanguageConfiguration("gremlin",l),i.Mj.registerCompletionItemProvider("gremlin",{triggerCharacters:["."],provideCompletionItems:function(e,t){var r,n=e.getLineContent(t.lineNumber).slice(0,t.column-1).trim(),o=function(e){var t=c()({g:["V","E"],V:[].concat(h,["match"],s()(p)),E:[].concat(d,s()(p))},m)[e]||[];return t.map((function(e){return{label:e,kind:i.Mj.CompletionItemKind.Function,documentation:e,insertText:"".concat(e,"()")}}))}((r=n.replace(/\(.*?\)/g,"").split(/\s|\./).filter(Boolean)).length>0?r[r.length-1]:"");return{suggestions:o}}});var g={cypher:"cypherTheme",gremlin:"GremlinTheme"},b=(0,n.forwardRef)((function(e,t){(0,o.useDynamicStyle)("\n.monaco-editor .view-overlays .current-line {\n  background-color: transparent !important;\n}\n\n.monaco-editor .monaco-scrollable-element::-webkit-scrollbar {\n  display: none;\n}\n\n.decorationsOverviewRuler {\n  display: none !important;\n}\n\n.monaco-editor .view-overlays .current-line-exact {\n  border: none !important;\n}\n\n.monaco-editor .scroll-decoration {\n  box-shadow: none;\n}\n","cypher-editor-style");var r,a=e.value,c=e.language,u=void 0===c?"cypher":c,s=e.maxRows,l=void 0===s?10:s,f=e.minRows,p=void 0===f?1:f,d=e.onChangeContent,h=e.clear,m=e.onInit,b=d?0:v(a),x=(0,o.useStudioProvier)().isLight;return(0,n.useEffect)((function(){return t&&t.current&&(v(a)<=l&&(t.current.style.height=20*v(a)+"px"),r=i.j6.create(t.current,{language:"gremlin",value:a,theme:x?g[u]:"vs-dark",suggestLineHeight:20,automaticLayout:!0,minimap:{enabled:!1},fontSize:14,lineHeight:20,folding:!0,wordWrap:"on",scrollBeyondLastLine:!1,scrollBeyondLastColumn:0}),t.current.codeEditor=r,r.onDidChangeModelContent((function(){var e,n=r.getContentHeight(),o=null===(e=r.getModel())||void 0===e?void 0:e.getLineCount();n<=20*l&&(t.current.style.height=n+"px"),d&&d(o,r)})),m&&m(t.current)),function(){r.dispose()}}),[t,a,u,!x]),n.useEffect((function(){h&&t&&t.current&&t.current.codeEditor&&t.current.codeEditor.setValue("")}),[h]),(0,y.jsx)("div",{ref:t,style:{padding:"5px 0px",width:"100%",height:20*(p+b)+"px",border:x?"1px solid rgb(187, 190, 195)":"1px solid #434343",borderRadius:"6px"}})})),x=b},59506:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var n=r(26068),o=r.n(n),i=r(48305),a=r.n(i),c=r(90228),u=r.n(c),s=r(87999),l=r.n(s),f=r(50959),p=r(53531),d=(r(73174),r(11527)),h=(p.Z.useToken,r(2268)),m=(p.Z.useToken,r(15558),r(54016));r(16483),m.Z.Text,m.Z.Title,p.Z.useToken;r(17069),r(25298),r(82092),"\n你的角色是一个 Cypher 查询助手，你可以根据 Schema 结构，给用户推荐你任务最重要的5条 Cypher 查询语句\n\n任务1: 根据 Schema 结构，自动推荐出关联性最大，最利于用户分析的 10 条Cypher查询语句\nSchema：\n".concat(JSON.stringify({nodes:[{label:"Paper",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"conference",type:"DT_STRING"},{name:"CCFRank",type:"DT_STRING"},{name:"CCFField",type:"DT_STRING"},{name:"year",type:"DT_SIGNED_INT32"},{name:"paper",type:"DT_STRING"}],primary:"id"},{label:"Challenge",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"challenge",type:"DT_STRING"}],primary:"id"},{label:"Topic",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"category",type:"DT_STRING"}],primary:"id"},{label:"Task",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"task",type:"DT_STRING"}],primary:"id"},{label:"Solution",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"solution",type:"DT_STRING"}],primary:"id"},{label:"CCFField",properties:[{name:"id",type:"DT_SIGNED_INT64"},{name:"field",type:"DT_STRING"}],primary:"id"}],edges:[{label:"WorkOn",properties:[],primary:"WorkOn",constraints:[["Paper","Task"]]},{label:"Resolve",properties:[],primary:"Resolve",constraints:[["Paper","Challenge"]]},{label:"Target",properties:[{name:"number",type:"DT_SIGNED_INT32"}],primary:"Target",constraints:[["Task","Challenge"]]},{label:"Belong",properties:[],primary:"Belong",constraints:[["Task","Topic"]]},{label:"Use",properties:[],primary:"Use",constraints:[["Paper","Solution"]]},{label:"ApplyOn",properties:[],primary:"ApplyOn",constraints:[["Solution","Challenge"]]},{label:"HasField",properties:[],primary:"HasField",constraints:[["Paper","CCFField"]]},{label:"Citation",properties:[],primary:"Citation",constraints:[["Paper","Paper"]]}]},null,2),"\nAnswers:\n").concat(JSON.stringify([{cypher:"Match (n:Paper) return n limit 30",desc:"查询出 Paper 类型的节点"},{cypher:"MATCH (p:Paper)-[:WorkOn]->(a:Task),(a)-[:Belong]->(t: Topic) RETURN t.category,  COUNT(p)",desc:"找出每个主题下的论文数量"},{cypher:"MATCH (t: Topic)<-[:Belong]-(a:Task),\n      (a)<-[:WorkOn]-(p:Paper)-[:Use]->(s:Solution),\n      (s)-[:ApplyOn]->(ch:Challenge)\n  WHERE t.category = $topic_name\n  RETURN t.category, ch.challenge, COUNT(p)",desc:"检索特定主题下，每个挑战（Challenge）所应用的解决方案（Solution）中与论文（Paper）相关的数量"}],null,2),"\n\n任务2: 根据 Schema 结构和用户的输入，生成 Cypher 查询语句，用于图数据库查询\n").concat("\n注意要以JSON的格式返回结果：\nRight Cases:\nquerys1: 列举出鲁迅的一个别名可以吗？\nanswer1: \"match (:ENTITY{name:'鲁迅'})<--(h)-[:Relationship{name:'别名'}]->(q) return distinct q.name limit 1\"\n\nquerys2: 我们常用的301SH不锈钢带的硬度公差是多少，你知道吗？ \nanswers2: \"match(p:ENTITY{name:'301SH不锈钢带'})-[:Relationship{name:'硬度公差'}]-> (q) return q.name\"\nWrong Cases:\nquerys: 12344加油这首歌真好听，你知道歌曲原唱是谁吗？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '12345加油' RETURN a.name\nquerys: 七宗梦是什么时候上映的？ answers: MATCH (a:Actor)-[:ACTED_IN]->(m:Movie) WHERE m.name = '七宗梦' RETURN a.name LIMIT 30\n","\n\nInstructions:\nNote: Do not include any explanations or apologies in your responses.\nDo not respond to any questions that might ask anything else than for you to construct a Cypher statement.\nDo not include any text except the generated Cypher statement.\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\nYou must use the relaship or property shown in the schema!!! do not use other keys!!!\n你必须使用Sechema中出现的关键词！！！\n\n当前会话中图的 Schema 结构如下：\n\n{graphSchema}\n\n你需要根据用户的提问，自动切换到上述两个任务中，并且给出正确返回，让我们开始吧！\n\n");r(335);p.Z.useToken,p.Z.useToken;r(53056),r(16835),m.Z.Title,r(16471),r(37339),r(33741);var y={"en-US":{Recommended:"Recommended",History:"History",Copilot:"Copilot",Saved:"Saved","Stored Procedures":"Stored Procedures","You can write cypher or gremlin queries, and then click the {icon} button to query data":"You can write cypher or gremlin queries, and then click the {icon} button to query data","Vertex Labels":"Vertex Labels","Edge Labels":"Edge Labels","Property Keys":"Property Keys","No saved query statements {br} You can click {icon} to save.":"No saved query statements {br} You can click {icon} to save.","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"No stored procedures available. {br} Go to the <a>Extension</a> and create one now!","Privacy Security Notice":"Privacy Security Notice",Setting:"Setting","query.app.sidebar.gpt.setting.security":"To improve the quality of generated Cypher query statements, we'll utilize your graph data schema as the prompt for ChatGPT. Your data will be kept strictly confidential and solely used for this purpose.Furthermore, please note that your OpenAI API key is only stored locally in your browser for added security","OpenAI API key is only stored locally in your browser":"OpenAI API key is only stored locally in your browser","query.copilot.welcome":"Hello! I'm the GraphScope Query Assistant. Feel free to ask me any questions about Cypher or Gremlin queries.","recommend 5 interesting query statements":"recommend 5 interesting query statements","query any subgraph":"query any subgraph","insight the statistical distribution of vertex labels in the graph":"insight the statistical distribution of vertex labels in the graph",Save:"Save",Delete:"Delete",Query:"Query",Share:"Share","query submmited on {submitTime}. It's running ... ":"query submmited on {submitTime}. It's running ... ","query submmited on {submitTime}. Running {runningTime} ms":"query submmited on {submitTime}. Running {runningTime} ms","A total of {totalCount} records were retrieved":"A total of {totalCount} records were retrieved","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.",Color:"Color",Size:"Size",Caption:"Caption",LineWidth:"LineWidth","Node properties":"Node properties",Graph:"Graph",Table:"Table",Raw:"Raw","Style Setting":"Style Setting","You can click on each label to set the color, size, and display text for vertices and edges.":"You can click on each label to set the color, size, and display text for vertices and edges.","Export graph json":"Export graph json","Clustering layout":"Clustering layout","Vertex Properties":"Vertex Properties","Connect Endpoint":"Connect Endpoint","Connection URL":"Connection URL","Query language":"Query language","Query initiation method":"Query initiation method",Username:"Username",Password:"Password",Connect:"Connect",Close:"Close","Select nodes by box selection":"Select nodes by box selection","Switch graph view dimensions":"Switch graph view dimensions","Zoom to fitview":"Zoom to fitview",Fullscreen:"Fullscreen","Toggle Right Side":"Toggle Right Side","Caption Status":"Caption Status"},"zh-CN":{Recommended:"推荐查询",History:"历史查询",Copilot:"智能查询",Saved:"保存查询","Stored Procedures":"存储过程","You can write cypher or gremlin queries, and then click the {icon} button to query data":"您可以在这里编写 cypher 或 gremlin 语句，点击 {icon} 按钮查询数据","Vertex Labels":"节点类型","Edge Labels":"边类型","Property Keys":"属性字段","No saved query statements {br} You can click {icon} to save.":"暂无保存的查询语句 {br} 您可以点击 {icon} 保存","No stored procedures available. {br} Go to the <a>Extension</a> and create one now!":"暂无存储过程 {br} 快去 <a>插件市场</a> 创建一个吧","Privacy Security Notice":"隐私安全说明",Setting:"设置","query.app.sidebar.gpt.setting.security":"为了提高生成Cypher查询语句的质量，我们将使用您的图数据模式作为ChatGPT的提示。您的数据将被严格保密，仅用于此目的。此外，请注意我们的OpenAI API密钥仅存在于您的浏览器本地，以增加安全性。","OpenAI API key is only stored locally in your browser":"OpenAI API key 仅保存在您浏览器本地","query.copilot.welcome":"您好！我是 GraphScope 查询助理，您有任何关于 Cypher 或者 Gremlin 查询的问题都可以随时问我","recommend 5 interesting query statements":"帮我推荐5个有意思的查询","query any subgraph":"查询任意一个子图","insight the statistical distribution of vertex labels in the graph":"帮我分析图中节点类型的分布情况",Save:"保存",Delete:"删除",Query:"查询",Share:"分享","query submmited on {submitTime}. It's running ... ":"查询提交于 {submitTime}. 正在运行中...","query submmited on {submitTime}. Running {runningTime} ms":"查询提交于 {submitTime}. 查询时长 {runningTime} ms","A total of {totalCount} records were retrieved":"一共检索到 {totalCount} 条记录","A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges.":"一共检索到 {totalCount} 条记录, 其中包含 {nodeCount} 个节点，{edgeCount} 条边",Color:"颜色",Size:"大小",Caption:"文本",LineWidth:"边宽","Node properties":"属性详情",Graph:"图展示",Table:"表格展示",Raw:"原始数据","Style Setting":"样式设置","You can click on each label to set the color, size, and display text for vertices and edges.":"您可以单击每个标签来设置顶点和边缘的颜色、大小和显示文本。","Export graph json":"导出 json","Clustering layout":"集群布局","Vertex Properties":"节点属性","Connect Endpoint":"连接查询服务","Connection URL":"连接 URL","Query language":"查询语言","Query initiation method":"查询发起方式",Username:"用户名",Password:"密码",Connect:"连接",Close:"关闭","Select nodes by box selection":"通过框选选择节点","Switch graph view dimensions":"切换图表视图维度","Zoom to fitview":"缩放适当视图",Fullscreen:"全屏","Toggle Right Side":"切换右侧","Caption Status":"是否展示标签"}},v=(h.Utils.getSearchParams,r(39462)),g=r(40434),b=r(57526),x=r(16889),w=r(7234),E=r(38943),S=r(84155),k=h.Utils.storage,j=m.Z.Title,O=(m.Z.Text,function(e){var t=g.Z.useForm(),r=a()(t,1)[0],n=e.onConnect,o=e.onClose;f.useEffect((function(){r.setFieldsValue({query_language:e.query_language||k.get("query_language")||"cypher",query_endpoint:e.query_endpoint||k.get("query_endpoint")||"neo4j://127.0.0.1:7687",query_initiation:e.query_initiation||k.get("query_initiation")||"Browser",query_username:e.query_username||k.get("query_username")||"admin",query_password:e.query_password||k.get("query_password")||"password",query_initiation_service:e.query_initiation_service||k.get("query_initiation_service")||""})}),[]);var i=g.Z.useWatch("query_initiation",r);return(0,d.jsxs)(b.Z,{vertical:!0,style:{padding:"12px 24px"},children:[(0,d.jsx)(j,{level:3,style:{marginBottom:"12px"},children:(0,d.jsx)(S.Z,{id:"Connect Endpoint"})}),(0,d.jsxs)(g.Z,{layout:"vertical",form:r,children:[(0,d.jsx)(g.Z.Item,{label:(0,d.jsx)(S.Z,{id:"Connection URL"}),name:"query_endpoint",children:(0,d.jsx)(x.Z,{})}),(0,d.jsx)(g.Z.Item,{label:(0,d.jsx)(S.Z,{id:"Query language"}),name:"query_language",children:(0,d.jsx)(w.default,{allowClear:!0,options:[{label:"Cypher",value:"cypher"},{label:"Gremlin",value:"gremlin"}]})}),(0,d.jsx)(g.Z.Item,{label:(0,d.jsx)(S.Z,{id:"Query initiation method"}),name:"query_initiation",children:(0,d.jsx)(w.default,{allowClear:!0,options:[{label:"Browser (client-side)",value:"Browser"},{label:"Server (server-side)",value:"Server"}]})}),"Server"===i&&(0,d.jsx)(g.Z.Item,{label:(0,d.jsx)(S.Z,{id:"Query initiation service"}),name:"query_initiation_service",children:(0,d.jsx)(x.Z,{allowClear:!0})}),(0,d.jsx)(g.Z.Item,{label:(0,d.jsx)(S.Z,{id:"Username"}),name:"query_username",children:(0,d.jsx)(x.Z,{})}),(0,d.jsx)(g.Z.Item,{label:(0,d.jsx)(S.Z,{id:"Password"}),name:"query_password",children:(0,d.jsx)(x.Z.Password,{})}),(0,d.jsx)(g.Z.Item,{style:{marginTop:"48px"},children:(0,d.jsxs)(b.Z,{justify:"start",children:[(0,d.jsx)(E.ZP,{type:"primary",htmlType:"submit",style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:function(){var e=r.getFieldsValue(!0);Object.keys(e).forEach((function(t){k.set(t,e[t])})),n&&n(r.getFieldsValue(!0))},children:(0,d.jsx)(S.Z,{id:"Connect"})}),o&&(0,d.jsx)(E.ZP,{style:{width:"100%",marginBottom:"12px",marginRight:"12px"},onClick:o,children:(0,d.jsx)(S.Z,{id:"Close"})})]})})]})]})}),P=r(5576),T={},L=function(){var e=l()(u()().mark((function e(){var t,r,n,o,i=arguments;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:"cypher",r=i.length>1?i[1]:void 0,n=T.gremlin_driver,o=T.cypher_driver,"cypher"!==t){e.next=6;break}return o||(T.cypher_driver=new P.Or(r)),e.abrupt("return",T.cypher_driver);case 6:if("gremlin"!==t){e.next=9;break}return n||(T.gremlin_driver=new P.VP(r)),e.abrupt("return",T.gremlin_driver);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e){var t=e||{},r=t.enableImmediateQuery,n=void 0!==r&&r,i=t.mode,c=void 0===i?"flow":i,s=t.id,p=void 0===s?"":s,m=t.timestamp,g=void 0===m?Date.now():m,b=t.graphId,x=void 0===b?"":b,w=t.schemaData,E=void 0===w?{nodes:[],edges:[]}:w,S=t.script,k=void 0===S?"Match (n) return n limit 10":S,j=t.onQuery,P=(0,f.useState)({language:e.language||"cypher",endpoint:e.endpoint||"127.0.0.1:7687"}),T=a()(P,2),C=T[0],I=T[1],_=C.language,N=C.endpoint,A=function(){var e=l()(u()().mark((function e(t){var r,n;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.language,e.next=3,L(r,N);case 3:return n=e.sent,e.abrupt("return",n.query(t.script));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=l()(u()().mark((function e(t){var r;return u()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.language,e.next=3,L(r,N);case 3:e.sent.close();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return j||N&&_?(0,d.jsx)(h.StudioProvier,{locales:y,children:(0,d.jsx)(v.default,{language:_,enableImmediateQuery:n,mode:c,active:!0,id:p,timestamp:g,graphId:x,schemaData:E,script:k,onQuery:j||A,onCancel:D})}):(0,d.jsx)(h.StudioProvier,{locales:y,children:(0,d.jsx)(O,{onConnect:function(e){I((function(t){return o()(o()({},t),{},{endpoint:e.query_endpoint||"",language:e.query_language})}))}})})},I=r(10422),_={render_query_statement:function(e){var t=(e||{}).id,r=void 0===t?"root":t;I.render((0,d.jsx)(C,o()({},e)),document.getElementById(r))}}},39462:function(e,t,r){r.r(t),r.d(t,{default:function(){return de}});var n=r(90228),o=r.n(n),i=r(26068),a=r.n(i),c=r(87999),u=r.n(c),s=r(48305),l=r.n(s),f=r(50959),p=r(53531),d=r(16483),h=r.n(d),m=r(70667),y=r(57526),v=r(48722),g=r(54016),b=r(17905),x=r(38943),w=r(28541),E=r(42176),S=r(51558),k=r(45334),j=r(16889),O=r(15001),P=r(37528),T=r(11527),L=function(e){var t=e.onSave,r=(0,f.useRef)(null),n=(0,P.Z)();return(0,T.jsx)(b.Z,{title:n.formatMessage({id:"Save"}),children:(0,T.jsx)(k.Z,{title:"name your statement",description:(0,T.jsx)(j.Z,{width:"200px",ref:r}),onConfirm:function(){if(r.current){var e=r.current.input.value;console.log("InputRef.current",e),t&&t(e)}},onCancel:function(){},okText:"Save",cancelText:"Cancel",placement:"bottomRight",children:(0,T.jsx)(x.ZP,{type:"text",icon:(0,T.jsx)(O.Z,{})})})})},C=r(62950);var I=function(e){var t,r=e.onClose,n=e.onQuery,i=e.script,a=void 0===i?"Match (n) return n limit 10":i,c=e.onSave,s=e.id,l=e.isFetching,p=e.antdToken,d=(e.schemaData,e.timestamp,e.language),h=e.message,k=(0,f.useRef)(null),j=(0,P.Z)(),O=function(){var e=u()(o()().mark((function e(){var t,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null==k||null===(t=k.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),n({id:s,script:r,language:d});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,T.jsxs)("div",{style:{},children:[(0,T.jsxs)(y.Z,{justify:"space-between",style:{paddingBottom:"8px"},children:[(0,T.jsx)(v.Z,{children:(0,T.jsxs)(g.Z.Text,{type:"secondary",style:{fontSize:"12px",textAlign:"center"},children:[(t=d,t.charAt(0).toUpperCase()+t.slice(1))," ",h]})}),(0,T.jsxs)(v.Z,{size:0,children:[(0,T.jsx)(b.Z,{title:j.formatMessage({id:"Query"}),children:(0,T.jsx)(x.ZP,{type:"text",icon:(0,T.jsx)(w.Z,{spin:l,style:{color:l?"#52c41a":p.green}}),onClick:O})}),c&&(0,T.jsx)(L,{onSave:function(e){var t,r=null==k||null===(t=k.current)||void 0===t||null===(t=t.codeEditor)||void 0===t?void 0:t.getValue(),n=(0,C.Z)();c&&c({id:n,script:r,name:e,language:d})}}),r&&(0,T.jsx)(b.Z,{title:j.formatMessage({id:"Share"}),children:(0,T.jsx)(x.ZP,{type:"text",icon:(0,T.jsx)(E.Z,{onClick:function(){var e,t=null==k||null===(e=k.current)||void 0===e||null===(e=e.codeEditor)||void 0===e?void 0:e.getValue();window.open("".concat(window.location.origin,"/querying?language=").concat(d,"&auto_run=true&global_script=").concat(encodeURIComponent(t)))}})})}),r&&(0,T.jsx)(b.Z,{title:j.formatMessage({id:"Delete"}),children:(0,T.jsx)(x.ZP,{type:"text",icon:(0,T.jsx)(S.Z,{onClick:function(){r&&r(s)}})})})]})]}),(0,T.jsx)(m.Z,{language:d,ref:k,value:a})]})},_=r(84723),N=r(15558),A=r.n(N),D=r(35215),Z=r(65586),R=r(31192),F=r(9069),G=r(57591),q=r(88766),M=r(31759),z=r.n(M),B=r(7234),U=r(86976),Y=function(e){var t=e.table,r=(0,f.useRef)(null),n=f.useState((function(){var e=function(e){var t=e[0],r={},n=[];Object.keys(t).forEach((function(e){var o=z()(t[e]);r[e]={key:e,type:o,enums:new Set},"number"===o&&n.push(e)})),e.forEach((function(e){Object.keys(e).forEach((function(t){r[t].enums.add(e[t])}))}));var o=Object.values(r).filter((function(e){return"string"===e.type})).sort((function(e,t){return e.enums.size<t.enums.size})).map((function(e){return e.key})),i=n[0],a=n[1],c=l()(o,2),u=c[0],s=c[1];return{type:n.length>1?"point":"interval",x:a||u,y:i,color:s,keys:Object.keys(r)}}(t);return{x:e.x,y:e.y,color:e.color,type:e.type,options:e.keys.map((function(e){return{label:e,value:e}}))}})),o=l()(n,2),i=o[0],c=o[1];console.log(i);var u=i.type,s=i.x,p=i.y,d=i.color,h=i.options;(0,f.useEffect)((function(){var e;return r.current&&((e=new U.kL({container:r.current,autoFit:!0})).options({type:u,data:t,encode:{x:s,y:p,color:d},transform:[{type:"dodgeX"}]}),e.render()),function(){r.current&&e.destroy()}}),[u,s,p,t,d,r]);return(0,T.jsxs)("div",{style:{padding:"16px",overflowX:"hidden"},children:[(0,T.jsxs)(v.Z,{style:{paddingBottom:"16px"},children:["Type:",(0,T.jsx)(B.default,{size:"small",defaultValue:u,style:{width:120},onChange:function(e){c((function(t){return a()(a()({},t),{},{type:e})}))},options:[{label:"interval",value:"interval"},{label:"point",value:"point"}]}),"X:",(0,T.jsx)(B.default,{size:"small",defaultValue:s,style:{width:120},onChange:function(e){c((function(t){return a()(a()({},t),{},{x:e})}))},options:h}),"Y:",(0,T.jsx)(B.default,{size:"small",defaultValue:p,style:{width:120},onChange:function(e){c((function(t){return a()(a()({},t),{},{y:e})}))},options:h}),"Color:",(0,T.jsx)(B.default,{size:"small",defaultValue:d,style:{width:120},onChange:function(e){c((function(t){return a()(a()({},t),{},{color:e})}))},options:h})]}),(0,T.jsx)("div",{ref:r,style:{width:"100%"}})]})},H=r(2268),V=r(35731),Q=r(36523),W=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"12px",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-8px";return(0,T.jsx)(T.Fragment,{children:Object.entries(t).map((function(t){var o=l()(t,2),i=o[0],a=o[1];return(0,T.jsxs)("div",{style:{paddingLeft:"16px",overflowWrap:"break-word",wordBreak:"break-all",whiteSpace:"pre-wrap"},children:[(0,T.jsxs)("span",{style:{color:"#F9822F",paddingLeft:r},children:['"',i,'" :']}),(0,T.jsx)("span",{style:{paddingLeft:"6px",textIndent:n},children:"object"===z()(a)&&null!==a?(0,T.jsxs)(T.Fragment,{children:["{",e(a,"24px","16px"),"}"]}):JSON.stringify(a,null,2)})]},i)}))})},K=function(e){var t=e.expandData,r=e.width;return(0,T.jsx)(y.Z,{children:Object.values(t).map((function(e){return e.key&&(0,T.jsxs)("div",{style:{marginLeft:"12px",width:"".concat(r,"%")},children:["{",W(e.data),"}"]},e.key)}))})},J=function(e){var t=e.data,r=t.map((function(e){var t=e.keys,r=e._fields;return t.reduce((function(e,t,n){var o=r[n];return e[t]={key:(0,C.Z)(),elementId:o.elementId,data:o,labels:o.labels?o.labels[0]:void 0,type:o.type,startNodeElementId:o.startNodeElementId,endNodeElementId:o.endNodeElementId},e.key=(0,C.Z)(),e}),{})})),n=t[0].keys,o=100/n.length,i=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,r){return r+1}}].concat(A()(n.map((function(e){return{title:e,width:"".concat(o,"%"),key:(0,C.Z)(),render:function(t){return r=t[e],n=r.startNodeElementId,o=r.endNodeElementId,i=r.type,a=r.elementId,c=r.labels,n&&o?(0,T.jsxs)("span",{children:["{",(0,T.jsx)(H.Icons.Arrow,{style:{color:"#F97108"}})," : ",i," } ID ",a]}):(0,T.jsxs)("span",{children:["{",(0,T.jsx)(H.Icons.Punctuation,{style:{color:"#B668B0"}})," : ",c," } ID ",a]});var r,n,o,i,a,c}}}))),[D.Z.EXPAND_COLUMN]);return(0,T.jsx)(D.Z,{size:"small",columns:i,dataSource:r,expandable:{expandedRowRender:function(e){return(0,T.jsx)(K,{expandData:e,width:o})},expandIcon:function(e){var t=e.expanded,r=e.onExpand,n=e.record;return t?(0,T.jsx)(V.Z,{style:{color:"#F97108"},onClick:function(e){return r(n,e)}}):(0,T.jsx)(Q.Z,{onClick:function(e){return r(n,e)}})},expandRowByClick:!0}})},$=function(e){var t=e.data,r=t[0],n="number"==typeof r?["value"]:Object.keys(r),o=[{title:"#",dataIndex:"index",key:"index",width:"30px",render:function(e,t,r){return r+1}}].concat(A()(n.map((function(e){return{title:e,dataIndex:e,width:"".concat(100/n.length,"%"),key:e}})))),i=t.map((function(e,t){return"number"==typeof e?{value:e}:a()(a()({},e),{},{key:t})}));return(0,T.jsx)(D.Z,{size:"small",columns:o,dataSource:i})},X=function(e){var t=e.nodes,r=e.edges,n={},o=t.map((function(e){var t=e.id,r=e.label,o=e.properties;return n[t]=r,{key:t,id:t,label:r,properties:JSON.stringify(a()({},o),null,2)}})),i=r.map((function(e){var t=e.id,r=e.label,o=e.properties,i=e.source,a=e.target;return{key:t,id:t,label:"(".concat(n[i],")-[:").concat(r,"]-(").concat(n[a],")"),properties:JSON.stringify(o,null,2)}}));function c(e,t){if(e.length>t)return e.substring(0,t)+"..."}var u=[].concat(A()(o),A()(i)).map((function(e){var t=e.id,r=e.label,n=e.properties,o=n&&JSON.parse(n);return a()({id:t,label:r},o)})),s=u[0],l=Object.keys(s).map((function(e){return{title:e,dataIndex:e,key:e,width:180,render:function(e){return String(e).length>30?(0,T.jsx)(Z.Z,{content:(0,T.jsx)("div",{style:{width:"500px",wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap"},children:e}),children:c(String(e),30)}):(0,T.jsx)(T.Fragment,{children:e})}}}));return(0,T.jsx)(D.Z,{columns:l,dataSource:u,scroll:{x:"max-content"},pagination:{simple:!0,pageSize:10,size:"small"}})},ee=function(e){var t,r=e.data,n=r.table,o=void 0===n?[]:n,i=r.nodes,c=void 0===i?[]:i,u=r.edges,s=void 0===u?[]:u,p=r.raw,d=c.length,h=s.length,m=o.length,w=(0,P.Z)();t=0===d&&0===h&&0!==m?w.formatMessage({id:"A total of {totalCount} records were retrieved"},{totalCount:m}):w.formatMessage({id:"A total of {totalCount} records were retrieved, including {nodeCount} nodes and  {edgeCount} edges."},{totalCount:d+h,nodeCount:d,edgeCount:h});var E,S=(0,f.useState)("table"),k=l()(S,2),j=k[0],O=k[1];return"table"===j&&(0!==c.length&&(E=(0,T.jsx)(X,{nodes:c,edges:s})),0!==o.length&&(E=(0,T.jsx)($,{data:o})),0===o.length&&"interactive"===window.GS_ENGINE_TYPE&&0!==p.records.length&&(E=(0,T.jsx)(J,{data:p.records}))),(0,T.jsxs)("div",{style:{overflowX:"scroll"},children:[(0,T.jsxs)(y.Z,{justify:"space-between",style:{padding:"0px 10px 10px 10px"},align:"center",children:[(0,T.jsx)(g.Z.Text,{children:t}),(0,T.jsxs)(v.Z,{children:[(0,T.jsx)(R.Z,{value:j,onChange:function(e){O(e)},options:[{value:"chart",icon:(0,T.jsx)(F.Z,{}),label:"chart"},{value:"table",icon:(0,T.jsx)(G.Z,{})}]}),(0,T.jsx)(b.Z,{title:"download",children:(0,T.jsx)(x.ZP,{icon:(0,T.jsx)(q.Z,{}),type:"text",onClick:function(){var e=c.map((function(e){var t=e.id,r=e.label,n=e.properties,o=void 0===n?{}:n;return a()({id:t,label:r},o)})),t=s.map((function(e){var t=e.id,r=e.label,n=e.source,o=e.target,i=e.properties,c=void 0===i?{}:i;return a()({id:t,label:r,source:n,target:o},c)}));H.Utils.createDownload(JSON.stringify({nodes:e,edges:t},null,2),"result.json")}})})]})]}),E,"chart"===j&&0!==o.length&&(0,T.jsx)(Y,{table:o})]})},te=r(55874),re=r(29643),ne=r(24174),oe=r.n(ne),ie=function(e){var t=e.data;return e.isFetching?(0,T.jsx)(te.ZP,{icon:(0,T.jsx)(re.Z,{spin:!0}),status:"success",title:"Running"}):"error"===t.mode?(0,T.jsx)(te.ZP,{status:"error",title:t.raw&&t.raw.name,subTitle:t.raw&&t.raw.message}):(0,T.jsx)("div",{children:(0,T.jsx)(oe(),{src:t.raw})})},ae=r(53056),ce=r(13049),ue=r(31931),se=function(e){var t=e.data,r=e.isFetching,n=e.schemaData,o=e.graphId,i=(e.onQuery,f.useState(null)),a=l()(i,2),c=a[0],u=a[1],s=(0,P.Z)(),p=function(e,t,r){var n=e.nodes,o=void 0===n?[]:n,i=e.edges,a=void 0===i?[]:i,c=e.table,u=void 0===c?[]:c,s=(e.raw,o.length>0),l=a.length>0,f=u.length>0,p="raw",d=["raw"];return s&&(p="graph",d=["raw","table","graph"]),!s&&l&&(p="table",d=["raw","table"]),s||l||!f||(p="table",d=["raw","table"]),r&&(p=r),t&&(d=["raw"],p="raw"),{viewMode:p,options:d}}(t,r,c),d=p.viewMode,h=p.options,m=function(e){return-1!==h.indexOf(e)},y=[{label:s.formatMessage({id:"Graph"}),key:"graph",icon:(0,T.jsx)(ce.Z,{}),children:(0,T.jsx)(ae.Z,{data:t,schemaData:n,graphId:o}),disabled:!m("graph")},{label:s.formatMessage({id:"Table"}),key:"table",icon:(0,T.jsx)(G.Z,{}),children:(0,T.jsx)(ee,{data:t}),disabled:!m("table")},{label:s.formatMessage({id:"Raw"}),key:"raw",icon:(0,T.jsx)(ue.Z,{}),children:(0,T.jsx)(ie,{data:t,isFetching:r}),disabled:!m("raw")}];return(0,T.jsx)("div",{style:{padding:"16px 0px"},children:(0,T.jsx)(_.Z,{items:y,size:"small",type:"card",activeKey:d,onChange:function(e){u(e)}})})},le=(0,f.memo)(se),fe=p.Z.useToken,pe=function(e){var t=e.onQuery,r=e.onClose,n=e.onCancel,i=e.onSave,c=e.script,s=e.id,p=e.active,d=e.mode,m=e.schemaData,y=e.enableImmediateQuery,v=e.graphId,g=e.timestamp,b=e.language,x=fe().token,w=(0,P.Z)(),E=p&&"flow"===d?{border:"1px solid ".concat(x.colorBorder)}:{border:"1px solid  ".concat(x.colorBorder)},S=(0,f.useRef)(null),k=(0,f.useState)({data:{},isFetching:!1,startTime:0,endTime:0,abort:!1}),j=l()(k,2),O=j[0],L=j[1],C=O.data,_=O.isFetching,N=O.startTime,A=O.endTime;(0,f.useEffect)((function(){S.current&&p&&"flow"===d&&S.current.scrollIntoView({behavior:"smooth"})}),[p]);var D=function(){var e=u()(o()().mark((function e(r){var i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=4;break}return n&&n(r),L((function(e){return a()(a()({},e),{},{isFetching:!1,data:{}})})),e.abrupt("return");case 4:return L((function(e){return a()(a()({},e),{},{isFetching:!0,startTime:(new Date).getTime()})})),e.next=7,t(r);case 7:i=e.sent,L((function(e){return a()(a()({},e),{},{data:i,isFetching:!1,endTime:(new Date).getTime()})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){y&&(console.log("enableImmediateQuery script",y,c,b),D({id:s,script:c,language:b}))}),[y]);var Z=A-N<0?w.formatMessage({id:"query submmited on {submitTime}. It's running ... "},{submitTime:h()(N).format("HH:mm:ss YYYY-MM-DD")}):w.formatMessage({id:"query submmited on {submitTime}. Running {runningTime} ms"},{submitTime:h()(N).format("HH:mm:ss YYYY-MM-DD"),runningTime:A-N});return(0,T.jsxs)("div",{ref:S,style:a()(a()({display:"flex",flexDirection:"column",flex:1,margin:"12px",padding:"8px 16px",borderRadius:"8px"},E),{},{background:x.colorBgContainer}),children:[(0,T.jsx)(I,{message:Z,language:b,timestamp:g,schemaData:m,id:s,script:c,onClose:r,onQuery:D,onSave:i,isFetching:_,antdToken:x}),(0,T.jsx)(le,{data:C,isFetching:_,schemaData:m,graphId:v,onQuery:t})]})},de=(0,f.memo)(pe)},53056:function(e,t,r){r.d(t,{Z:function(){return Z}});var n=r(26068),o=r.n(n),i=r(48305),a=r.n(i),c=r(67825),u=r.n(c),s=r(50959),l=r(17905),f=r(38943),p=r(53531),d=r(84155),h=r(2268),m=r(16835),y=r(24279),v=r(63806),g=r(90228),b=r.n(g),x=r(87999),w=r.n(x),E=r(5576),S=h.Utils.storage,k=function(){var e=w()(b()().mark((function e(t){var r,n,o,i,a,c,u;return b()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=S.get("query_language")||"cypher",n=S.get("query_endpoint")||"",o=S.get("query_initiation"),i=S.get("query_username"),a=S.get("query_password"),c=S.get("query_initiation_service"),e.prev=6,u={script:t,language:r,endpoint:n,username:i,password:a},"Server"!==o||!c){e.next=12;break}return e.next=11,fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){return e.success?e.data:{nodes:[],edges:[]}}));case 11:return e.abrupt("return",e.sent);case 12:return e.abrupt("return",(0,E.aq)(u));case 15:return e.prev=15,e.t0=e.catch(6),e.abrupt("return",{nodes:[],edges:[]});case 18:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=w()(b()().mark((function e(t){var r,n,o,i;return b()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.key,n=t.selectIds,o="\n    MATCH ".concat(r,"\n    WHERE  elementId(a) IN [").concat(n,"] \n    RETURN a,b,c\n    "),e.next=4,k(o);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=w()(b()().mark((function e(t){var r,n;return b()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.schema,n={all:[{key:"(a)-[b]-(c)",label:"One-Hop Neighbors"}]},r.nodes.forEach((function(e){n[e.label]=P(r,e.label)})),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function P(e,t){var r=[];return e.edges.forEach((function(e){var n=e.source,o=e.target,i=e.label;if((t===n||t===o)&&n===o)return"both",void r.push({key:"(a:".concat(n,")-[b:").concat(i,"]-(c:").concat(o,")"),label:"[".concat(i,"]-(").concat(o,")")});n===t&&("out",r.push({key:"(a:".concat(n,")-[b:").concat(i,"]->(c:").concat(o,")"),label:"[".concat(i,"]->(").concat(o,")")})),o===t&&("in",r.push({key:"(a:".concat(n,")<-[b:").concat(i,"]-(c:").concat(o,")"),label:"[".concat(i,"]<-(").concat(o,")")}))})),[{key:"(a)-[b]-(c)",label:"One-Hop Neighbors"}].concat(r)}var T={queryNeighborData:j,queryNeighborItems:O,queryStatement:k},L=function(){var e=w()(b()().mark((function e(t){var r,n,o,i;return b()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.selectIds,n=r.join(","),o="g.V().hasId(".concat(n,").both().dedup()"),e.next=5,k(o);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=w()(b()().mark((function e(t){return b()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{all:[{key:"(a)-[b]-(c)",label:"One-Hop Neighbors"}]});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I={queryStatement:k,queryNeighborData:L,queryNeighborItems:C},_=r(11527),N=function(){var e=(0,h.useSection)().toggleLeftSide;return(0,_.jsx)(l.Z,{title:(0,_.jsx)(d.Z,{id:"Style settings"}),placement:"left",children:(0,_.jsx)(f.ZP,{icon:(0,_.jsx)(v.Z,{}),onClick:function(){return e()},type:"text"})})};(0,m.registerIcons)();var A=function(e){var t=e.data,r=e.schema,n=e.graphId,o=e.id,i=(0,s.useRef)(null),a="gremlin"===h.Utils.storage.get("query_language")?I:T,c=p.Z.useToken().token;return(0,_.jsx)("div",{style:{borderRadius:"8px",height:"500px",background:c.colorBgContainer},ref:i,children:(0,_.jsx)(m.GraphProvider,{id:o,services:a,children:(0,_.jsxs)(h.Section,{splitBorder:!0,leftSide:(0,_.jsx)(m.StyleSetting,{}),autoResize:!1,rightSideStyle:{width:"300px",padding:"12px 0px 12px 18px"},defaultCollapsed:{leftSide:!0,rightSide:!0},children:[(0,_.jsx)(m.Prepare,{data:t,schema:r,graphId:n}),(0,_.jsx)(m.Canvas,{}),(0,_.jsx)(m.ZoomStatus,{}),(0,_.jsx)(m.BasicInteraction,{}),(0,_.jsx)(m.ClearStatus,{}),(0,_.jsx)(m.PropertiesPanel,{}),(0,_.jsx)(m.Loading,{}),(0,_.jsxs)(m.ContextMenu,{children:[(0,_.jsx)(m.NeighborQuery,{}),(0,_.jsx)(m.DeleteLeafNodes,{}),(0,_.jsx)(m.DeleteNode,{})]}),(0,_.jsxs)(m.Toolbar,{style:{position:"absolute",top:"20px",left:"20px",right:"unset"},children:[(0,_.jsx)(N,{}),(0,_.jsx)(y.Z,{style:{margin:"0px"}}),(0,_.jsx)(h.FullScreen,{containerRef:i}),(0,_.jsx)(m.ZoomFit,{}),(0,_.jsx)(m.Brush,{}),(0,_.jsx)(m.FixedMode,{}),(0,_.jsx)(y.Z,{style:{margin:"0px"}}),(0,_.jsx)(m.SwitchEngine,{}),(0,_.jsx)(m.RunCluster,{}),(0,_.jsx)(m.Export,{})]})]})})})},D=["properties","constraints"];var Z=function(e){var t,r=e.data,n=e.schemaData,i=e.graphId,c={nodes:(t=n).nodes,edges:t.edges.map((function(e){var t=e.properties,r=e.constraints,n=u()(e,D),i=a()(r[0],2),c=i[0],s=i[1];return o()(o()({},n),{},{source:c,target:s,properties:t})}))};return(0,_.jsx)("div",{style:{width:"100%"},children:(0,_.jsx)(A,{data:h.Utils.fakeSnapshot(r),schema:c,graphId:i})})}},15776:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(85430);const n=[{value:"update website",paraId:0,tocIndex:2},{value:"update website",paraId:1,tocIndex:4},{value:"update website",paraId:2,tocIndex:6},{value:"update website",paraId:3,tocIndex:8},{value:"update studio graph",paraId:4,tocIndex:10},{value:"update website",paraId:5,tocIndex:12},{value:"update studio graph",paraId:6,tocIndex:14},{value:"update site",paraId:7,tocIndex:16},{value:"update studio-graph",paraId:8,tocIndex:18},{value:"update studio",paraId:9,tocIndex:20},{value:"update site",paraId:10,tocIndex:22},{value:"update version",paraId:11,tocIndex:24},{value:"update",paraId:12,tocIndex:26},{value:"update version",paraId:13,tocIndex:28},{value:"update graph",paraId:14,tocIndex:30},{value:"First Release",paraId:15,tocIndex:32}]},70857:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(8646);const n=[]},12457:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(4480);const n=[]},2565:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(93238);const n=[]},74972:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(48741);const n=[]},27705:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(36666);const n=[{value:"open source : ",paraId:0,tocIndex:0},{value:"https://undraw.co/illustrations",paraId:0,tocIndex:0}]},54520:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(19895);const n=[]},57481:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(54581);const n=[]},28748:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(518);const n=[]},41895:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(3750);const n=[]},56309:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(43716);const n=[]},90389:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(43765);const n=[]},20391:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(44412);const n=[]},27388:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(85792);const n=[]},14872:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(44117);const n=[]},95081:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(4866);const n=[{value:"storage",paraId:0,tocIndex:0},{value:"isDarkTheme",paraId:0,tocIndex:0},{value:"debounce",paraId:0,tocIndex:0}]},13588:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(93995);const n=[]},26103:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(26973);const n=[]},31404:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(67866);const n=[]},2500:function(e,t,r){r.r(t),r.d(t,{texts:function(){return n}});r(37275);const n=[]},22211:function(e,t){t.Z="/** components 基础配置 */\nexport const components = {\n  Menu: {\n    itemBg: 'rgba(255, 255, 255, 0)',\n    subMenuItemBg: 'rgba(255, 255, 255, 0)',\n    iconMarginInlineEnd: 14,\n    itemMarginInline: 4,\n    iconSize: 14,\n    collapsedWidth: 50,\n    itemActiveBg: '#eaeaea',\n  },\n  Typography: {\n    titleMarginBottom: '0.2em',\n    titleMarginTop: '0.8em',\n  },\n  Table: {\n    cellPaddingBlock: 4, //\t单元格纵向内间距\n    cellPaddingInline: 8, //单元格横向内间距（默认大尺寸）\n  },\n  Pagination: {\n    itemSize: 20,\n  },\n  Result: {\n    iconFontSize: 62,\n    titleFontSize: 20,\n    colorError: '#00000073',\n  },\n};\n\n/** token 基础配置 */\nexport const token = {\n  colorBorder: 'red',\n  colorBgBase: '#fff',\n};\n"},20880:function(e,t){t.Z="import React, { useEffect, useState } from 'react';\nimport { ConfigProvider, theme } from 'antd';\nimport { IntlProvider } from 'react-intl';\nimport { ContainerProvider } from './useThemeConfigProvider';\nimport type { ThemeProviderType } from './useThemeConfigProvider';\nimport { storage } from '../Utils';\nimport { getThemeConfig } from './getThemeConfig';\nimport { useCustomToken } from './useCustomToken';\n\ntype IThemeProvider = {\n  locales: {\n    'zh-CN': Record<string, string>;\n    'en-US': Record<string, string>;\n  };\n  children: React.ReactNode;\n  locale?: 'zh-CN' | 'en-US';\n  algorithm?: 'defaultAlgorithm' | 'darkAlgorithm';\n};\n\nconst Provider: React.FC<IThemeProvider> = props => {\n  const { children, locales } = props;\n  const [state, setState] = useState<ThemeProviderType>(() => {\n    let { algorithm, locale } = props;\n    if (!locale) {\n      locale = storage.get('locale');\n      if (!locale) {\n        locale = 'en-US';\n        storage.set('locale', locale);\n      }\n    }\n    if (!algorithm) {\n      algorithm = storage.get('algorithm');\n      if (!algorithm) {\n        algorithm = 'defaultAlgorithm';\n        storage.set('algorithm', algorithm);\n      }\n    }\n    return {\n      components: storage.get('components'),\n      token: storage.get('token'),\n      algorithm,\n      locale,\n    };\n  });\n\n  const { components, token, algorithm, locale } = state;\n  const { componentsConfig, tokenConfig } = getThemeConfig(algorithm);\n  const colorConfig = useCustomToken();\n  const isLight = algorithm === 'defaultAlgorithm';\n\n  const handleThemeOrLocale = (themeConfig: Partial<ThemeProviderType>) => {\n    const { components, token } = themeConfig;\n    Object.keys(themeConfig).forEach(key => {\n      storage.set(key, themeConfig[key]);\n    });\n\n    setState(preState => {\n      // 特殊化处理,切token数据需初始化数据做基础\n      storage.set('token', { ...preState.token, ...token });\n      return {\n        ...preState,\n        components: { ...preState.components, ...components },\n        token: { ...preState.token, ...token },\n        algorithm: themeConfig.algorithm || preState.algorithm,\n        locale: themeConfig.locale ?? storage.get('locale'),\n      };\n    });\n  };\n\n  const messages = locales[locale || 'en-US'];\n\n  return (\n    <ContainerProvider\n      value={{\n        token: { ...tokenConfig, ...token },\n        components: { ...componentsConfig, ...components },\n        handleThemeOrLocale,\n        algorithm,\n        locale: locale,\n        isLight,\n        ...colorConfig,\n      }}\n    >\n      <IntlProvider messages={messages} locale={locale as 'zh-CN' | 'en-US'}>\n        <ConfigProvider\n          theme={{\n            // 1. 单独使用暗色算法\n            algorithm: isLight ? theme.defaultAlgorithm : theme.darkAlgorithm,\n            components: {\n              ...componentsConfig,\n              ...components,\n            },\n            token: {\n              ...tokenConfig,\n              ...token,\n            },\n          }}\n        >\n          {children}\n        </ConfigProvider>\n      </IntlProvider>\n    </ContainerProvider>\n  );\n};\n\nexport default Provider;\n"},88241:function(e,t){t.Z="import { createContext, useContext } from 'react';\nimport type { IColorStore } from './getThemeConfig';\nexport interface ThemeProviderType extends IColorStore {\n  algorithm?: 'defaultAlgorithm' | 'darkAlgorithm';\n  components?: { [key: string]: { [key: string]: string | number } };\n  token?: { [key: string]: string | number };\n  locale?: 'zh-CN' | 'en-US';\n  isLight?: boolean;\n}\nexport interface IContainerContext extends ThemeProviderType {\n  handleThemeOrLocale: (value: ThemeProviderType) => void;\n}\nexport const ContainerContext = createContext<IContainerContext>({\n  components: {},\n  token: {},\n  handleThemeOrLocale: ({}) => {},\n  locale: 'en-US',\n  algorithm: 'defaultAlgorithm',\n  isLight: false,\n});\n\nexport const ContainerProvider = ContainerContext.Provider;\n\nexport const useStudioProvier = () => {\n  const context = useContext(ContainerContext);\n\n  if (context === undefined || Object.keys(context).length === 0) {\n    throw new Error(`useContext must be used within a ContainerProvider`);\n  }\n  return context;\n};\n"},17239:function(e,t){t.Z="import React from 'react';\nimport { Panel, PanelGroup } from 'react-resizable-panels';\nimport ResizeHandle from './ResizeHandle';\n\ninterface IResizablePanelsProps {\n  leftSide?: React.ReactNode;\n  middleSide?: React.ReactNode;\n  rightSide?: React.ReactNode;\n  leftMinSize?: number;\n  leftMaxSize?: number;\n  rightMinSize?: number;\n  rightMaxSize?: number;\n}\n\nconst styles: Record<string, React.CSSProperties> = {\n  Container: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '1rem',\n  },\n  Panel: { display: 'flex', flexDirection: 'row' },\n  PanelContent: {\n    height: '100%',\n    width: '100%',\n    borderRadius: '0.5rem',\n  },\n};\n\nconst ResizablePanels: React.FC<IResizablePanelsProps> = ({\n  leftSide,\n  middleSide,\n  rightSide,\n  leftMinSize = 20,\n  leftMaxSize = 40,\n  rightMinSize = 20,\n  rightMaxSize = 40,\n}) => {\n  const renderLeftPanel = () => (\n    <Panel style={styles.Panel} collapsible={false} order={1} minSize={leftMinSize} maxSize={leftMaxSize}>\n      <div style={styles.PanelContent}>{leftSide}</div>\n    </Panel>\n  );\n\n  const renderRightPanel = () => (\n    <Panel style={styles.Panel} collapsible={false} order={3} minSize={rightMinSize} maxSize={rightMaxSize}>\n      <div style={styles.PanelContent}>{rightSide}</div>\n    </Panel>\n  );\n\n  return (\n    <div style={styles.Container}>\n      <PanelGroup autoSaveId=\"example\" direction=\"horizontal\">\n        {leftSide && [renderLeftPanel(), <ResizeHandle key=\"left-handle\" />]}\n        <Panel style={styles.Panel} collapsible={false} order={2}>\n          <div style={styles.PanelContent}>{middleSide}</div>\n        </Panel>\n        {rightSide && [<ResizeHandle key=\"right-handle\" />, renderRightPanel()]}\n      </PanelGroup>\n    </div>\n  );\n};\n\nexport default ResizablePanels;\n"},9534:function(e,t){t.Z="import StatementQuery from './query-statement';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nexport default {\n  render_query_statement: config => {\n    const { id = 'root' } = config || {};\n    ReactDOM.render(<StatementQuery {...config} />, document.getElementById(id));\n  },\n};\n"}}]);