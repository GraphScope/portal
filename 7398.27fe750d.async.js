"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7398],{16881:function(e,t,r){r.r(t),r.d(t,{BasicContainer:function(){return Ne},BasicInteraction:function(){return $n},Brush:function(){return gn},Canvas:function(){return qt},ClearCanvas:function(){return Qn},ClearStatatus:function(){return Or},CommonNeighbor:function(){return on},ContextMenu:function(){return h},CurvatureLinks:function(){return ro},DagreMode:function(){return io},DeleteLeafNodes:function(){return Pn},DeleteNode:function(){return un},Export:function(){return kn},FixedMode:function(){return lo},GraphProvider:function(){return He},LayoutSetting:function(){return Nr},LayoutSwitch:function(){return vo},LoadCSV:function(){return Me},Loading:function(){return wn},NeighborQuery:function(){return Qr},Placeholder:function(){return so},Prepare:function(){return br},PropertiesPanel:function(){return _e},RunCluster:function(){return Dr},SliderFilter:function(){return jr},StyleSetting:function(){return vr},SwitchEngine:function(){return Ae},Toolbar:function(){return i},ZoomFit:function(){return wr},ZoomStatus:function(){return Eo},getDataMap:function(){return nt},getStyleConfig:function(){return it},locales:function(){return n},registerIcons:function(){return ce},useApis:function(){return jo},useContext:function(){return Be}});var n={"en-US":{"Select nodes by box selection":"Select nodes by box selection","Switch graph view dimensions":"Switch graph view dimensions","Zoom to fitview":"Zoom to fitview",Fullscreen:"Fullscreen","Toggle Right Side":"Toggle Right Side","Caption Status":"Caption Status","Clustering layout":"Clustering layout","Export graph json":"Export graph json","Edge Properties":"Edge Properties","Vertex Properties":"Vertex Properties","File type":"File type","Vertex Labels":"Vertex Labels","Edge Labels":"Edge Labels"},"zh-CN":{"Select nodes by box selection":"通过框选选择节点","Switch graph view dimensions":"切换图表视图维度","Zoom to fitview":"缩放适当视图",Fullscreen:"全屏","Toggle Right Side":"切换右侧","Caption Status":"是否展示标签","Clustering layout":"聚类布局","Export graph json":"导出 JSON 数据","Edge Properties":"边属性信息","Vertex Properties":"点属性信息","File type":"文件类型","Vertex Labels":"点类型","Edge Labels":"边类型"}},o=r(58002),i=o.Toolbar,a=r(50959),c=r(53531),u=r(57526);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){var n;return n=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==l(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=function(e){var t=e.children,r=Be(),n=r.store,o=r.updateStore,i=c.Z.useToken().token,l=n.graph,s=n.emitter,y=d(a.useState({visible:!1,data:{},x:0,y:0}),2),h=y[0],m=y[1],v=h.visible,g=(h.data,h.x),b=h.y;return a.useEffect((function(){return l&&s&&(s.on("node:contextmenu",(function(e){var t=e.node,r=e.evt,n=r.offsetX,i=r.offsetY;m((function(e){return f(f({},e),{},{visible:!0,data:t,x:n,y:i})})),o((function(e){e.nodeStatus=f(f({},e.nodeStatus),{},p({},t.id,{selected:!0}))}))})),s.on("node:click",(function(){m((function(e){return f(f({},e),{},{visible:!1,data:{},x:0,y:0})}))}))),null==s||s.on("canvas:click",(function(){m((function(e){return f(f({},e),{},{visible:!1,data:{},x:0,y:0})}))})),function(){null==s||s.off("node:click"),null==s||s.off("node:contextmenu")}}),[s]),a.createElement("div",{style:{opacity:v?1:0,visibility:v?"visible":"hidden",position:"absolute",left:g,top:b,width:180,height:"auto",backgroundColor:i.colorBgContainer,boxShadow:i.boxShadow,zIndex:100,padding:"4px",borderRadius:"8px"}},a.createElement(u.Z,{vertical:!0,gap:8},t))},m=r(54016),v=r(35215),g=r(38943),b=r(41037);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e,t,r){var n;return n=function(e,t){if("object"!=w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==w(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(e){var t=new Map;t.set("id",{title:"id",dataIndex:"id",key:"id"}),t.set("label",{title:"label",dataIndex:"label",key:"label"});var r=e.map((function(e){var r=e.id,n=e.properties,o=void 0===n?{}:n,i=e.label;return Object.keys(o).forEach((function(e){t.set(e,{title:e,dataIndex:e,key:e})})),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:r,label:i},o)}));return{dataSource:r,columns:Array.from(t.values())}};function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){var n;return n=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==E(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L=function(e){var t=e.data,r=x(t),n=r.dataSource,o=r.columns,i=c.Z.useToken().token,l={display:"flex",position:"absolute",bottom:"12px",left:"12px",right:"12px",maxHeight:"50%",boxShadow:i.boxShadow,zIndex:1999,background:i.colorBgContainer,borderRadius:i.borderRadius,overflowY:"scroll",padding:i.padding};return a.createElement(u.Z,{style:P({overflowY:"scroll"},l),vertical:!0,gap:12},a.createElement(u.Z,{justify:"space-between"},a.createElement(m.Z.Title,{level:5},"Inspect Infos"),a.createElement(g.ZP,{icon:a.createElement(b.Z,null),type:"text"})),a.createElement(v.Z,{size:"large",pagination:!1,dataSource:n,columns:o,bordered:!0,scroll:{x:"max-content"}}))},k=r(24279),T=r(65586),A=r(97585),D=r(48722),I=r(7234),C=r(84155),N=r(75875),Z=[N.blue[4],N.orange[4],N.purple[4],N.lime[4],N.magenta[4],N.cyan[4],N.gold[8],N.red[6],"#000","#f0f0f0"],F=[0,.1,.5,1,2,3,4,6,8,10,20],M=[0,.1,.5,1,1.5,2,2.5,3,3.5,4,4.5,5],G=Z[6],z=F[4],R="rgba(255, 255, 255, 0.8)",U="#f0f0f0",Y=M[3],q="#000";function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function H(){H=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var S=g.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==B(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(B(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function V(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function X(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){V(i,n,o,a,c,"next",e)}function c(e){V(i,n,o,a,c,"throw",e)}a(void 0)}))}}function J(e){return $.apply(this,arguments)}function $(){return $=X(H().mark((function e(t){var r,n,o,i,a=arguments;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:"online",n=a.length>2?a[2]:void 0,"online"!==r){e.next=8;break}return o=n||"https://at.alicdn.com/t/a/".concat(t,".json"),e.next=6,fetch(o).then((function(e){return e.json()}));case 6:return i=e.sent,e.abrupt("return",i);case 8:return e.abrupt("return",{id:"",name:"",font_family:"",css_prefix_text:"",description:"",glyphs:[]});case 9:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}function W(e){return Q.apply(this,arguments)}function Q(){return Q=X(H().mark((function e(t){var r,n,o=arguments;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("online"!==(o.length>1&&void 0!==o[1]?o[1]:"online")){e.next=8;break}return r=[{fontUrl:"//at.alicdn.com/t/a/".concat(t,".woff2"),format:"woff2"},{fontUrl:"//at.alicdn.com/t/a/".concat(t,".woff"),format:"woff"},{fontUrl:"//at.alicdn.com/t/a/".concat(t,".ttf"),format:"truetype"}],n=function(){var e=X(H().mark((function e(t,r){var n;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FontFace(t,"url(".concat(r,")")),e.next=3,n.load();case 3:document.fonts.add(n);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),e.next=6,Promise.all(r.map((function(e){var t=e.fontUrl;return n("iconfont",t)})));case 6:e.next=8;break;case 8:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function ee(){ee=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var S=g.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==K(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(K(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e,t,r){var n;return n=function(e,t){if("object"!=K(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==K(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oe(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var ie="font_4775957_de91ktmrghn",ae={},ce=function(){var e,t=(e=ee().mark((function e(){var t,r,n,o=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:ie,e.next=3,J(t);case 3:return r=e.sent,n=r.glyphs,e.next=7,W(ie);case 7:return ae=n.reduce((function(e,t){return re(re({},e),{},ne({},t.name,String.fromCodePoint(t.unicode_decimal)))}),{}),e.abrupt("return",ae);case 9:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){oe(i,n,o,a,c,"next",e)}function c(e){oe(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function le(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return se(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){var n;return n=function(e,t){if("object"!=ue(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ue(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ye=c.Z.useToken,he={width:"16px",height:"16px",display:"block",borderRadius:"50%",cursor:"pointer"},me=function(e){var t,r=e.color,n=e.size,o=e.caption,i=e.properties,c=e.label,l=e.onChange,s=e.type,f=e.icon,p=ye().token,d=i;Array.isArray(i)&&(d=i.reduce((function(e,t){return pe(pe({},e),{},de({},t.name,t[s]))}),{}));var y=function(e,t){l&&l(de({type:s,label:c,color:r,size:n,caption:o,properties:i,icon:f},e,t))},h="2px solid ".concat(p.colorPrimary),v=Object.keys(ae).map((function(e){return{label:a.createElement(D.Z,{size:12},a.createElement("span",{style:{fontFamily:"iconfont",fontSize:"16px"}},ae[e]),e),value:e,icon:ae[e]}}));return a.createElement("div",{style:{maxWidth:"220px",overflow:"hidden",padding:"12px"}},a.createElement(u.Z,{gap:12,style:{padding:"6px 0px"}},a.createElement(m.Z.Text,{style:{flexShrink:0}},a.createElement(C.Z,{id:"Color"})),a.createElement(D.Z,{wrap:!0},Z.map((function(e){var t=r==e;return a.createElement("span",{key:e,onClick:function(){return y("color",e)},style:pe(pe({},he),{},{backgroundColor:e,boxSizing:"border-box",border:t?h:"none"})})})))),"node"===s&&a.createElement(u.Z,{gap:12,style:{padding:"6px 0px"}},a.createElement(m.Z.Text,{style:{flexShrink:0}},a.createElement(C.Z,{id:"Size"})),a.createElement(D.Z,{size:8,wrap:!0},F.map((function(e){var t=n==e,r=4*Math.sqrt(Math.max(0,e))+2;return a.createElement("span",{key:e,onClick:function(){return y("size",e)},style:pe(pe({},he),{},{width:"".concat(2*r,"px"),height:"".concat(2*r,"px"),background:"#ddd",boxSizing:"border-box",border:t?h:"none"})})})))),"edge"===s&&a.createElement(u.Z,{gap:12,style:{padding:"6px 0px"}},a.createElement(m.Z.Text,{style:{flexShrink:0}},a.createElement(C.Z,{id:"LineWidth"})),a.createElement(D.Z,{wrap:!0},M.map((function(e){var t=n==e;return a.createElement("span",{key:e,onClick:function(){return y("size",e)},style:{cursor:"pointer",width:"".concat(5*e,"px"),height:"16px",background:"#ddd",display:"block",boxSizing:"border-box",border:t?h:"none"}})})))),a.createElement(u.Z,{gap:12,style:{padding:"6px 0px"}},a.createElement(m.Z.Text,{style:{flexShrink:0}},a.createElement(C.Z,{id:"Caption"})),a.createElement(D.Z,{wrap:!0},null===(t=Object.keys(d))||void 0===t?void 0:t.map((function(e){var t=o.includes(e);return a.createElement("span",{key:e,style:{fontSize:"12px",color:p.colorTextSecondary,display:"block",borderRadius:"6px",padding:"0px 4px",boxSizing:"border-box",cursor:"pointer",background:p.colorBgBlur,border:t?h:"1px solid #ddd"},onClick:function(){var t=o.includes(e)?o.filter((function(t){return t!==e})):[].concat(le(o),[e]);console.log("newCaption",t),y("caption",t)}},e)})))),a.createElement(u.Z,{gap:12,style:{padding:"6px 0px"},justify:"space-between"},a.createElement(m.Z.Text,{style:{flexShrink:0}},a.createElement(C.Z,{id:"Icon"})),a.createElement(I.default,{defaultValue:f,size:"small",style:{width:"80%"},onChange:function(e){y("icon",e)},options:v})))},ve=function(e){var t=e.label,r=e.color,n=e.count,o=n?"".concat(t," (").concat(n,")"):t,i=(0,a.useRef)(null);return a.createElement(T.Z,{getPopupContainer:function(e){return i.current?i.current:e},trigger:"click",placement:"left",content:a.createElement(me,e)},a.createElement(A.Z,{style:{textAlign:"center",borderRadius:"8px",backgroundColor:r,cursor:"pointer",minWidth:"60px",minHeight:"22px",color:"#000"},bordered:!1},o))},ge=(0,a.memo)(ve);function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}var we=["properties"];function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oe.apply(this,arguments)}function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){Ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ee(e,t,r){var n;return n=function(e,t){if("object"!=be(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==be(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Pe=function(e){var t=e.data,r=e.style,n=e.type,i=Be(),c=i.store,l=i.updateStore,s=c.nodeStyle,f=t,p=f.id,d=f.label,y=f.properties,h=void 0===y?{}:y,v=t.source&&t.source.id,g=t.target&&t.target.id,b=s[p]||s[String(d)],w="node"===n?"Vertex Properties":"Edge Properties";return a.createElement(u.Z,{style:r,vertical:!0,gap:12},a.createElement(m.Z.Title,{level:5,style:{margin:"0px"}},w),a.createElement(u.Z,{justify:"space-between"},a.createElement(m.Z.Text,{type:"secondary",italic:!0},"id"),a.createElement(m.Z.Text,{italic:!0},p)),a.createElement(u.Z,{justify:"space-between"},a.createElement(m.Z.Text,{type:"secondary",italic:!0},"label"),a.createElement(ge,Oe({},b,{label:d,type:n,properties:h,onChange:function(e){e.properties;var t=je(e,we);l((function(e){var r=xe(xe({},e.nodeStyle),{},Ee({},p,t));e.nodeStyle=r,o.Utils.storage.set("GRAPH_".concat(c.graphId,"_STYLE"),{nodeStyle:r,edgeStyle:xe({},e.edgeStyle)})}))}}))),v&&a.createElement(u.Z,{justify:"space-between"},a.createElement(m.Z.Text,{type:"secondary",italic:!0},"source"),a.createElement(m.Z.Text,{italic:!0},v.id)),g&&a.createElement(u.Z,{justify:"space-between"},a.createElement(m.Z.Text,{type:"secondary",italic:!0},"target"),a.createElement(m.Z.Text,{italic:!0},g)),a.createElement(k.Z,{style:{margin:"0px"}}),a.createElement(u.Z,{vertical:!0,gap:12},Object.keys(h).map((function(e){return a.createElement(u.Z,{key:e,vertical:!0,gap:6},a.createElement(m.Z.Text,{type:"secondary"},e),a.createElement(m.Z.Text,null,h[e]||"-"))}))))},_e=function(e){var t=Be().store,r=t.nodeStatus,n=t.data,o=t.edgeStatus,i=c.Z.useToken().token,u=function(e,t){var r=t.nodeStatus,n=t.edgeStatus,o="node",i=e.nodes.filter((function(e){var t=r[e.id];if(t&&t.selected)return t}));if(0!==i.length)return{type:o,data:i};var a=e.edges.filter((function(e){var t=n[e.id];if(t&&t.selected)return t}));return 0!==a.length?{type:o="edge",data:a}:{type:o,data:[]}}(n,{nodeStatus:r,edgeStatus:o}),l=u.data,s=u.type,f={display:"flex",position:"absolute",top:"12px",bottom:"12px",right:"12px",width:"240px",boxShadow:i.boxShadow,zIndex:1999,background:i.colorBgContainer,borderRadius:i.borderRadius,overflowY:"scroll",padding:i.padding};return 0===l.length?null:1===l.length?a.createElement(Pe,{data:l[0],style:f,type:s}):a.createElement(L,{data:l})},Le=r(17905),ke=o.Icons.Graph3D,Te=o.Icons.Graph2D,Ae=function(e){var t=Be(),r=t.updateStore,n=t.store.render,o=c.Z.useToken().token,i=e.title,u=void 0===i?"Switch graph view dimensions":i,l=(e.placement,"2D"===n?a.createElement(ke,{style:{color:o.colorTextBase}}):a.createElement(Te,{style:{color:o.colorTextBase}}));return a.createElement(Le.Z,{title:a.createElement(C.Z,{id:"".concat(u)}),placement:"left"},a.createElement(g.ZP,{onClick:function(){r((function(e){e.render="2D"===n?"3D":"2D"}))},icon:l,type:"text"}))};function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ce=function(){var e=(0,o.useSection)().toggleLeftSide;return a.createElement("div",{style:{position:"absolute",top:"12px",left:"12px"}},a.createElement(g.ZP,{icon:a.createElement(o.Icons.Sidebar,null),onClick:function(){return e()}}))},Ne=function(e){var t,r=Be(),n=r.store,i=(r.updateStore,n.graph),c=e.items,u=e.children,l=De(c,2),s=l[0],f=void 0===s?[]:s,p=l[1],d=void 0===p?[]:p,y=f.map((function(e){console.log("item",e);var t=e.id,r=e.render;e.meta;return{label:t,key:t,children:i&&a.createElement(r,null)}})),h=null===(t=d[0])||void 0===t?void 0:t.render,m=a.createElement(o.SegmentedTabs,{items:y});return console.log(y),a.createElement(o.Section,{leftSide:m,rightSide:i&&a.createElement(h,null),splitBorder:!0},u,a.createElement(Ce,null))};function Ze(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Me=function(e){var t=e.onCallback,r=Be(),n=r.updateStore,i=r.store.graphId;return a.createElement(o.ImportFiles,{upload:{accept:".json,.csv",title:"Upload your local csv files",description:"xxx"},type:"json"},(function(e){return a.createElement(a.Fragment,null,a.createElement(g.ZP,{type:"primary",onClick:function(){return function(e){var r=e.files,a=[],c=[],u=new Map,l=new Map,s=new Map;r.sort((function(e,t){return"Vertex"===e.meta.graphFields.type?-1:1})).forEach((function(e){var t=e.meta,r=e.contents,n=t.graphFields,i=(t.name,[]);"csv"===t.type&&(i=o.Utils.covertCSV2JSON(r,t.header,t.delimiter)),"json"===t.type&&(i=JSON.parse(r));var f=n.idField,p=n.sourceField,d=void 0===p?"source":p,y=n.targetField,h=void 0===y?"target":y,m=n.type,v=n.nodeLabelField,g=n.edgeLabelField;"Vertex"===m&&i.forEach((function(e){var t=e[f],r=e[v]||"unknow";if(t&&(s.set(t,r),a.push({id:t,label:r,properties:e})),!u.has(r)){var n={label:r,properties:o.Utils.extractProperties(e)};u.set(r,n)}})),"Edge"===m&&i.forEach((function(e){var t=e[d],r=e[h],n=e[g]||"unknow",i=s.get(t),a=s.get(r);if(i&&a){if(t&&r&&c.push({id:"".concat(e[d],"-").concat(e[h]),label:n,source:t,target:r,properties:e}),!l.has(n)){var u={label:n,source:i,target:a,properties:o.Utils.extractProperties(e)};l.set(n,u)}}else console.warn("数据不合法, 找不到 ".concat(i?"Target ID：".concat(r):"Source ID：".concat(t)))}))}));var f={nodes:Ze(u.values()),edges:Ze(l.values())},p=i||String(new Date),d=it(f,p);n((function(e){e.data={nodes:a,edges:c},e.source={nodes:a,edges:c},e.graphId=p,e.schema=f,e.nodeStyle=d.nodeStyle,e.edgeStyle=d.edgeStyle,e.dataMap=nt(o.Utils.fakeSnapshot({nodes:a,edges:c}))})),t&&t()}(e)},loading:e.loading},"Visualization"))}))},Ge=r(33741);function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){Ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(e,t,r){var n;return n=function(e,t){if("object"!=ze(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ze(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qe={data:{nodes:[],edges:[]},layout:{type:"force",options:{}},source:{nodes:[],edges:[]},combos:[],enableCombo:void 0,combosByKey:"",width:200,height:500,dataMap:new Map,render:"2D",graph:void 0,isReady:!1,emitter:null,nodeStyle:{},edgeStyle:{},nodeStatus:{},edgeStatus:{},graphId:"",schema:{nodes:[],edges:[]},isLoading:!1,getService:function(){return function(){}},reheatSimulation:!1,focusNodes:[]},Be=function(){return(0,Ge.qp)()},He=function(e){var t=e.children,r=e.id,n=e.services;return a.createElement(Ge.ZP,{id:r,store:Ue(Ue({},qe),{},{getService:function(e){var t=n[e];return t||(console.error("service not found: ".concat(e)),function(){})}})},t)},Ve={color:U,size:Y,caption:[],icon:"",options:{arrowLength:10,arrowPosition:.9}},Xe={color:G,size:z,caption:[],icon:"",options:{textPosition:"bottom",iconColor:"#fff",zoomLevel:[3,15]}};function Je(e,t){var r=e.id,n=e.label,o=e.__style,i=t[r]||t[String(n)]||o;return i||Xe}function $e(e,t){var r=e.id,n=e.label,o=e.__style,i=t[r]||t[String(n)]||o;return i||Ve}function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}var Qe=function(){var e=Be().store,t=e.graph,r=e.render,n=e.edgeStatus,o=e.edgeStyle;(0,a.useEffect)((function(){if(t){console.log("edgeStyle effect ....");var e=t.graphData().links.length;"2D"===r&&t.linkCanvasObject&&t.linkCanvasObject((function(t,r,i){!function(e,t,r){return function(n,o,i){if(!(i||r<3)){var a=$e(e,n),c=(a.color,a.size,a.caption),u=(a.icon,e.properties&&e.properties[c]);if(c&&0!==c.length&&u){var l=1*u.length,s=e.source,f=e.target;if("object"===We(s)&&"object"===We(f)&&void 0!==s.x&&void 0!==s.y&&void 0!==f.x&&void 0!==f.y){var p={x:s.x+(f.x-s.x)/2,y:s.y+(f.y-s.y)/2},d={x:f.x-s.x,y:f.y-s.y},y=(Math.sqrt(Math.pow(d.x,2)+Math.pow(d.y,2)),Math.atan2(d.y,d.x));y>Math.PI/2&&(y=-(Math.PI-y)),y<-Math.PI/2&&(y=-(-Math.PI-y)),t.save(),t.font="1px Sans-Serif",t.font="".concat(2,"px Sans-Serif");var h=[l+.4,2.4];t.translate(p.x,p.y),t.rotate(y),t.fillStyle="rgba(255, 255, 255, 0.8)",t.fillRect.apply(t,[-h[0]/2,-h[1]/2].concat(h)),t.textAlign="center",t.textBaseline="middle",t.fillStyle="darkgrey",t.fillText(u,0,0),t.restore()}}}}}(t,r,i)(o,n,e>100)})).linkCanvasObjectMode((function(){return"after"})).linkDirectionalArrowLength((function(e){var t=$e(e,o),r=t.options,n=void 0===r?{}:r,i=t.size,a=n.arrowLength;return void 0===a?3*i:a})).linkDirectionalArrowRelPos((function(e){var t=$e(e,o).options,r=(void 0===t?{}:t).arrowPosition;return void 0===r?.9:r})).linkColor((function(e){var t=$e(e,o).color,r=n[e.id];return r&&r.selected?q:t})).linkLabel((function(e){return $e(e,o).caption.map((function(t){var r=e&&e.properties&&e.properties[t];if(t&&r)return"".concat(t,": ").concat(r)})).join("")})).linkWidth((function(e){var t=$e(e,o).size,r=n[e.id];return r&&r.selected?t+1:t})).linkDirectionalParticles(1).linkDirectionalParticleWidth((function(e){var t=n[e.id];return t&&t.selected?$e(e,o).size+1:0})),"3D"===r&&t.linkColor((function(e){var t=$e(e,o).color,r=n[e.id];return r&&r.selected?q:t})).linkLabel((function(e){return $e(e,o).caption.map((function(t){var r=e&&e.properties&&e.properties[t];if(t&&r)return"".concat(t,": ").concat(r)})).join("")})).linkWidth((function(e){var t=$e(e,o).size,r=n[e.id];return r&&r.selected?t+1:t})).linkDirectionalParticles(1).linkDirectionalParticleWidth((function(e){var t=n[e.id];return t&&t.selected?$e(e,o).size+1:0}))}}),[o,n,r,t])};function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?et(Object(r),!0).forEach((function(t){rt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rt(e,t,r){var n;return n=function(e,t){if("object"!=Ke(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ke(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nt(e){var t=new Map,r=new Map;return e.nodes.forEach((function(e){var n=e.id;r.set(n,tt(tt({},e),{},{neighbors:[],inNeighbors:[],outNeighbors:[],inEdges:[],outEdges:[]})),t.set(n,r.get(n))})),e.edges.forEach((function(e,n){var o=e.source.id||e.source,i=e.target.id||e.target,a=e.id;if(!a)throw new Error("edge id is required");var c=r.get(o),u=r.get(i);t.has(a)||t.set(a,e),c&&u?(c.outEdges.push(a),c.outNeighbors.push(i),u.inEdges.push(a),u.inNeighbors.push(o),c.neighbors.push(i),u.neighbors.push(o)):console.log("edge source or target node not found",o,i)})),t}var ot=o.Utils.storage;function it(e,t){var r=ot.get("GRAPH_".concat(t,"_STYLE"));if(r)return r;var n={nodeStyle:{},edgeStyle:{}};return e.nodes.forEach((function(e,t){var r=e.label,o=[];e.properties.forEach((function(e){var t=e.name;"name"===t&&(o=["name"]),"title"===t&&(o=["title"])})),n.nodeStyle[r]={label:e.label,size:z,color:Z[t],caption:o,captionStatus:"display"}})),e.edges.forEach((function(e,t){var r=e.label,o=[];e.properties.forEach((function(e){var t=e.name;"name"===t&&(o=["name"]),"title"===t&&(o=["title"])})),n.edgeStyle[r]={label:e.label,size:Y,color:U,caption:o,captionStatus:"display"}})),n}var at=function(e){return"string"==typeof e?e:e.id},ct=function(e){return"string"==typeof e?e:e.id};function ut(e){return e.map((function(e){return{id:e.id,label:e.label,source:"string"==typeof e.source?e.source:e.source.id,target:"string"==typeof e.target?e.target:e.target.id,properties:e.properties}}))}function lt(e,t){if(null!=e&&"string"==typeof t){for(var r=0,n="",o=t.length,i=e;r<o;){var a=t[r];if("."===a){if(null==(i=i[n]))return;n=""}else n+=a;r++}return i[n]}}function st(e){return function(e){if(Array.isArray(e))return ft(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ft(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var pt=function(e,t,r){return function(n,o){if(void 0!==e.x&&void 0!==e.y){var i,a,c,u,l,s,f,p=Je(e,n),d=(a=o,c=(i=e).id,u=i.label,l=i.__status,a[c]||a[u]||l||{}),y=p.color,h=p.size,m=p.caption,v=p.icon,g=2*Math.sqrt(Math.max(0,h))+1,b=Object.assign({},Xe.options,{iconSize:"".concat(g,"px"),textColor:y},p.options),w=d.selected,O=d.hovering,S=b.zoomLevel,x=b.iconColor,E=b.iconSize,j=b.textColor,P=b.textPosition,_=m.map((function(t){return e.properties&&e.properties[t]}));if((w||O)&&(t.beginPath(),t.arc(e.x,e.y,1.2*g,0,2*Math.PI,!1),w&&(t.fillStyle="#000",t.fill()),O&&(t.fillStyle=(f=.5,3===(s=(s=y).replace("#","")).length&&(s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]),6!==s.length?"transparent":"rgba("+parseInt(s.slice(0,2),16)+","+parseInt(s.slice(2,4),16)+","+parseInt(s.slice(4,6),16)+","+f+")"),t.fill())),t.beginPath(),t.arc(e.x,e.y,g,0,2*Math.PI,!1),t.fillStyle=y,t.fill(),v&&""!==v&&r>S[0]&&r<S[1]){var L=ae[v]||"";t.font="".concat(E," iconfont"),t.textAlign="center",t.textBaseline="middle",t.fillStyle=x,t.fillText(L,e.x,e.y)}!function(e){var t=e.globalScale,r=e.ctx,n=e.node,o=e.R,i=e.texts,a=e.textColor,c=e.textPosition,u=e.zoomLevel;if(0===i.length||t<u[0])return;if(t>=u[1]){var l=14/t;r.font="".concat(l,"px Sans-Serif"),r.fillStyle=R,r.textAlign="center",r.textBaseline="middle",r.fillStyle="#fff",function(e,t){for(var r=t.text,n=void 0===r?"":r,o=t.x,i=t.y,a=t.maxWidth,c=t.lineHeight,u=String(n).split(" "),l="",s=[],f=0;f<u.length;f++){var p=l+u[f]+" ";e.measureText(p).width>a&&f>0?(s.push(l.trim()),l=u[f]+" "):l=p}s.push(l.trim());var d=s.length*c,y=i-d/2;d<a&&s.forEach((function(t,r){e.fillText(t,o,y+r*c)}))}(r,{text:i.join(" "),x:n.x,y:n.y+l/2,maxWidth:2*o*.8,lineHeight:1.2*l})}if(t>=u[0]&&t<u[1]){var s=2,f=1.2*s,p=n.x,d=n.y;if("center"===c){p=n.x,d=n.y;var y=function(e){var t=e.texts,r=e.fontSize,n=e.textX,o=e.textY,i=e.ctx,a=1.2*r,c=0,u=a*t.length;t.forEach((function(e,t){c=Math.max(i.measureText(e).width,c)}));var l=[c,u].map((function(e){return e+.2*r}));return i.fillStyle=R,i.fillRect.apply(i,[n-l[0]/2,o-l[1]/2].concat(st(l))),l}({ctx:r,texts:i,fontSize:s,textX:p,textY:d});n.__bckgDimensions=y}else"top"===c?(p=n.x,d=n.y-o-f/2):"bottom"===c?(p=n.x,d=n.y+o+f/2):"left"===c?p=n.x-o-f/2:"right"===c&&(p=n.x+o+f/2);r.font="".concat(s,"px Sans-Serif"),r.textAlign="center",r.textBaseline="middle",r.fillStyle=a,i.forEach((function(e,t){r.fillText(e,p,d+t*f)}))}}({globalScale:r,ctx:t,R:g,texts:_,node:e,textColor:j,textPosition:P,zoomLevel:S}),t.restore()}}};var dt=function(){var e=Be().store,t=e.graph,r=e.render,n=e.nodeStyle,o=e.nodeStatus;(0,a.useEffect)((function(){t&&(console.log("nodeStyle effect ...."),"2D"===r&&t.nodeCanvasObject&&t.nodeCanvasObject((function(e,t,r){pt(e,t,r)(n,o)})).nodePointerAreaPaint((function(e,t,r,o){!function(e,t,r,n){return function(n){if(void 0!==e.x&&void 0!==e.y){r.fillStyle=t;var o=e.x,i=e.y,a=Je(e,n).size;r.beginPath();var c=2*Math.sqrt(Math.max(0,a))+1;r.arc(o,i,c,0,2*Math.PI,!1),r.fill()}}}(e,t,r)(n)})).nodeRelSize(2).nodeCanvasObjectMode((function(){return"replace"})),"3D"===r&&t.nodeLabel((function(e){return Je(e,n).caption.join(" ")})).nodeRelSize(2).nodeColor((function(e){return Je(e,n).color})).nodeLabel((function(e){return e&&e.properties&&e.properties[Je(e,n).caption.join(" ")]})))}),[n,o,t,r])},yt=r(21896),ht=r(19363),mt=r(92067);function vt(e,t){e&&e.onRenderFramePost&&e.onRenderFramePost((function(e){t.forEach((function(t){var r=t.x,n=void 0===r?0:r,o=t.y,i=void 0===o?0:o,a=t.r,c=void 0===a?0:a,u=t.color,l=void 0===u?"#000":u,s=t.type,f=void 0===s?"circle":s,p=t.label;if("circle"===f){var d=p;e.beginPath(),e.setLineDash([5,5]),e.arc(n,i,c,0,2*Math.PI,!1),e.strokeStyle=l,e.lineWidth=1,e.stroke();var y=n,h=i-c-8;e.font="".concat(10,"px Arial"),e.fillStyle=l,e.textAlign="center",e.fillText(d,y,h)}}))}))}var gt=r(6724),bt=r.n(gt),wt=r(4081),Ot=r(62432);function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jt(e,t,r){var n;return n=function(e,t){if("object"!=St(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==St(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _t(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _t(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Lt=function(e,t){for(var r=t.width,n=t.height,i=t.groupBy,a=t.nodeStyle,c=o.Utils.groupBy(e.nodes,(function(e){return lt(e,i)})),u={name:"root",children:[]},l=0,s=Object.entries(c);l<s.length;l++){var f=Pt(s[l],2),p=f[0],d=f[1];u.children.push({name:p,children:d})}var y=(0,wt.ZP)(u).sort((function(e,t){try{return Number(e.data.name)-Number(t.data.name)}catch(e){return 0}}));(0,Ot.Z)().size([r,n]).padding(20).radius((function(e){var t=Je(e.data,a).size;return Math.round(4*Math.sqrt(Math.max(0,t))+2-10)}))(y);var h=[];y.descendants().forEach((function(e){var t=e.data,r=e.r,n=e.depth,o=e.x,i=e.y;n>1&&h.push(Et(Et({},t),{},{x:o,y:i,r:r}))}));var m=(y.children||[]).map((function(e){var t=e.x,r=e.y,n=Je({id:e.data.name,label:e.data.name},a).color;return{id:e.data.name,label:e.data.name,type:"circle",x:t,y:r,color:n,r:e.r,children:e.data.children.map((function(e){return e.id}))}}));return{nodes:h,edges:e.edges,combos:m}},kt=r(56617);function Tt(e){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(e)}function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){It(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function It(e,t,r){var n;return n=function(e,t){if("object"!=Tt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Tt(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ct=function(e){var t=e.render,r=e.nodeStyle,n=e.graph,o=e.layout,i=e.updateStore,a=e.data;if(n)if("3D"!==t){var c=o.type,u=o.options,l=u.groupBy;if("force-combo"===c&&""!==l){var s=a.nodes,f=a.edges;n.cooldownTicks(0);var p=Dt({width:n.width(),height:n.height(),groupBy:"label",nodeStyle:r,reheatSimulation:!0},u),d=Lt({nodes:s,edges:ut(f)},p),y=d.combos,h=new Map;y.forEach((function(e){h.set(e.id,Dt({},e))})),n.d3Force("charge",null),n.d3Force("center",null),n.d3Force("link",null),n.d3Force("cluster",function(e,t){var r;function n(n){r.forEach((function(r){var o=e.get(lt(r,t)||"undefined");if(o){var i=r.x-o.x,a=r.y-o.y,c=Math.sqrt(i*i+a*a),u=o.r-(r.size||3);if(c>u){var l=(c-u)/c*n;r.x-=i*l,r.y-=a*l}}}))}return n.initialize=function(e){return r=e},n}(h,l)),n.d3Force("radial",function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.05;function o(o){r.forEach((function(r){var i=e.get(lt(r,t)||"undefined");if(i){var a=i.x-r.x,c=i.y-r.y;r.vx+=a*o*n,r.vy+=c*o*n}}))}return o.initialize=function(e){return r=e},o}(h,l)),n.d3Force("collide",kt.Z().radius((function(e){var t=Je(e,r).size;return Math.round(4*Math.sqrt(Math.max(0,t))+2)}))),i((function(e){e.combos=y})),n.cooldownTicks(1/0),n.graphData({nodes:d.nodes,links:d.edges}),n.d3ReheatSimulation(),n.zoomToFit()}}else console.warn("3D not support combo")};var Nt=r(44200),Zt=r(80621),Ft=r(5271),Mt=r(68490);function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(r),!0).forEach((function(t){Ut(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ut(e,t,r){var n;return n=function(e,t){if("object"!=Gt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Gt(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Yt=function(){var e=Be(),t=e.store,r=e.updateStore,n=t.layout,o=void 0===n?{}:n,i=t.graph,c=t.nodeStyle,u=t.render,l=t.data,s=t.width,f=t.height;(0,a.useEffect)((function(){if(i){var e=o.type,t=void 0===e?"force":e,n=o.options,a=l.nodes,p=l.edges;if(console.log("use data and layout ..."),"force"===t||"force-dagre"===t||"force-combo"===t){if("3D"===u)return void i.graphData({nodes:a,links:p});!function(e){e.cooldownTicks(1/0),e.dagMode(null),e.d3Force("cluster",null),e.d3Force("radial",null),e.onRenderFramePost&&e.onRenderFramePost((function(){}))}(i);var d=function(e){if(0===e)return 0;var t=1.2+.5*Math.floor((e-1)/500);return 1e3*Math.min(t,15)}(l.nodes.length);i.cooldownTime(d),"force"===t&&(i.d3Force("center",(0,Nt.Z)().strength(1)).d3Force("charge",(0,Zt.Z)()).d3Force("link",(0,Ft.Z)()).d3Force("collide",(0,Mt.Z)().radius((function(e){return Je(e,c).size+5}))),i.graphData({nodes:a,links:p}),i.d3ReheatSimulation()),"force-dagre"===t&&(i.dagMode("lr"),i.graphData({nodes:a,links:p})),"force-combo"===t&&Ct({data:l,layout:o,graph:i,nodeStyle:c,render:u,updateStore:r})}if("preset"===t&&(i.cooldownTicks(0),i.graphData({nodes:a,links:p})),"circle-pack"===t){i.cooldownTicks(0);var y=Rt({width:s,height:f,groupBy:"label",nodeStyle:c},n),h=Lt({nodes:a,edges:ut(p)},y);i.graphData({nodes:h.nodes,links:h.edges}),r((function(e){e.combos=h.combos})),i.zoomToFit()}if("dagre"===t){i.cooldownTicks(0);var m=4*i.nodeRelSize(),v=Rt(Rt({},n),{},{nodeWidth:m,nodeHeight:m,height:i.height(),width:i.width(),bbox:i.getGraphBbox()}),g=function(e,t){var r=e.nodes,n=e.edges,o=t.nodeId,i=void 0===o?"id":o,a=t.rankDir,c=void 0===a?"LR":a,u=t.ranker,l=void 0===u?"longest-path":u,s=t.linkSource,f=void 0===s?"source":s,p=t.linkTarget,d=void 0===p?"target":p,y=t.nodeWidth,h=void 0===y?40:y,m=t.nodeHeight,v=void 0===m?40:m,g=new(bt().graphlib.Graph);return g.setGraph({acyclicer:"greedy",nodesep:5,edgesep:1,ranksep:20,rankDir:c,ranker:l}),r.forEach((function(e){return g.setNode(e[i],Object.assign({},e,{width:h,height:v}))})),n.forEach((function(e){g.setEdge(e[f],e[d],Object.assign({},e))})),bt().layout(g),{nodes:g.nodes().map((function(e){var t=g.node(e);return t&&(delete t.width,delete t.height,delete t.fx,delete t.fy),t})),links:g.edges().map((function(e){return g.edge(e)}))}}({nodes:a,edges:ut(p)},v);i.graphData({nodes:g.nodes,links:g.links}),i.zoomToFit()}}}),[l,u,i,o,c,s,f])},qt=function(e){var t=function(){var e=Be(),t=e.store,r=e.updateStore,n=e.id,i=t.render,c=(0,a.useRef)(null),u=(0,a.useRef)(null),l=(0,a.useRef)(!1);return(0,a.useEffect)((function(){if(u.current){c.current=(0,mt.Z)();var e=u.current.offsetWidth,t=u.current.offsetHeight,n=null;l.current=!1,console.log("init......."),"2D"===i&&(n=(0,yt.Z)()(u.current)).width(e).height(t).onNodeHover((function(e,t){var r;null===(r=c.current)||void 0===r||r.emit("node:hover",{node:e,prevNode:t})})).onNodeClick((function(e){var t;null===(t=c.current)||void 0===t||t.emit("node:click",e)})).onNodeRightClick((function(e,t){var r;null===(r=c.current)||void 0===r||r.emit("node:contextmenu",{node:e,evt:t})})).onBackgroundClick((function(e){var t;null===(t=c.current)||void 0===t||t.emit("canvas:click",e)})).onLinkClick((function(e){var t;null===(t=c.current)||void 0===t||t.emit("edge:click",e)})),"3D"===i&&(n=(0,ht.Z)()(u.current).width(e).height(t).enableNodeDrag(!1).onNodeClick((function(e){var t;null===(t=c.current)||void 0===t||t.emit("node:click",e)})).onNodeRightClick((function(e,t){var r;null===(r=c.current)||void 0===r||r.emit("node:contextmenu",{node:e,evt:t})})).onBackgroundClick((function(e){var t;null===(t=c.current)||void 0===t||t.emit("canvas:click",e)})).onLinkClick((function(e){var t;null===(t=c.current)||void 0===t||t.emit("edge:click",e)})));var a=o.Utils.debounce((function(){if(u.current){var e=u.current.offsetWidth,t=u.current.offsetHeight;n&&n.width(e).height(t)}}),200),s=new ResizeObserver(a);return s.observe(u.current),r((function(r){r.graph=n,r.emitter=c.current,r.width=e,r.height=t})),function(){n&&n._destructor(),u.current&&s.unobserve(u.current)}}}),[i]),{containerRef:u,id:n}}(),r=t.containerRef,n=t.id;dt(),Qe(),Yt(),function(){var e=Be().store,t=e.graph,r=e.combos;(0,a.useEffect)((function(){t&&(0===r.length?t.onRenderFramePost&&t.onRenderFramePost((function(){})):vt(t,r))}),[r,t])}();return a.createElement("div",{id:"GRAPH_".concat(n),ref:r,style:{position:"relative",height:"100%"}})},Bt=r(31105),Ht=r(7706),Vt=r(78620);function Xt(e){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}function Jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(r),!0).forEach((function(t){Wt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wt(e,t,r){var n;return n=function(e,t){if("object"!=Xt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Xt(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||er(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e){return function(e){if(Array.isArray(e))return tr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||er(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){if(e){if("string"==typeof e)return tr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tr(e,t):void 0}}function tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rr=function(e){return Object.prototype.toString.call(e)},nr=function(e){var t=new Set;return e.forEach((function(e){var r=e.properties;r&&"[object Array]"===rr(r)&&r.forEach((function(e){"number"===e.type&&t.add(e.name)})),r&&function(e){return"[object Object]"===rr(e)}(r)&&Object.keys(r).forEach((function(e){"number"===r[e]&&t.add(e)}))})),Kt(t.values()).map((function(e){return{label:e,value:e}}))},or=function(){var e=Be(),t=e.store,r=e.updateStore,n=t.schema,o=t.data,i=n.nodes,c=(n.edges,Qt((0,a.useState)("linear"),2)),l=c[0],s=c[1],f=nr(i),p=function(e,t){var r=e.nodes,n={};return t.map((function(e){var t=e.value;return n[t]={min:1/0,max:-1/0},t})),r.forEach((function(e){var t=e.properties;e.id,t&&Object.keys(t).forEach((function(e){var r=n[e];if(r){var o=t[e];r.min=Math.min(r.min,o),r.max=Math.max(r.max,o)}}))})),n}(o,f);return a.createElement(u.Z,{vertical:!0,gap:12},a.createElement(m.Z.Text,null,"Choose Scaler:"),a.createElement(I.default,{defaultValue:"linear",style:{flex:1},options:[{label:"Linear",value:"linear"},{label:"Log",value:"log"},{label:"Pow",value:"pow"}],onChange:function(e){s(e)}}),a.createElement(m.Z.Text,null,"Choose Property:"),a.createElement(I.default,{defaultValue:"",style:{flex:1},options:f,onChange:function(e){var t=o.nodes,n=(o.edges,p[e]),i=n.min,a=n.max,c=[.01,20],u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"log",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(e){case"linear":return(0,Bt.Z)().domain(t).range(r);case"log":return 0===t[0]&&(t[0]=t[0]+1e-5),0===r[0]&&(r[0]=r[0]+1e-5),(0,Ht.Z)(t,r);case"pow":return(0,Vt.ZP)().exponent(n).domain(t).range(r);default:throw new Error("Unknown scale type: ".concat(e))}}(l,[i,a],c),s={};console.log(i,a,p,c),t.forEach((function(t){var r=t.properties,n=t.id,o=t.label;if(r){var a=Number(r[e]),c=u(a);s[n]={label:o,color:isNaN(c)?i:c}}})),r((function(e){Object.keys(s).forEach((function(t){var r=s[t],n=r.color,o=r.label;e.nodeStyle[t]=$t($t($t({},e.nodeStyle[o]),e.nodeStyle[t]),{},{size:n})}))}))}}))},ir=function(e){return a.createElement(o.CollapseCard,{title:"Advanced Setting",tooltip:"The size of nodes or width of edges is linearly scaled based on the range of values in the selected property field.",defaultCollapse:!0},a.createElement(or,null))},ar=["properties","style"],cr=["properties","style"];function ur(e){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(e)}function lr(){return lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lr.apply(this,arguments)}function sr(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(r),!0).forEach((function(t){dr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dr(e,t,r){var n;return n=function(e,t){if("object"!=ur(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ur(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yr=m.Z.Title,hr=m.Z.Text,mr=function(e){var t=Be(),r=t.updateStore,n=t.store,i=n.schema,c=n.nodeStyle,l=n.edgeStyle,s=n.graphId,f=(e.showHeader,function(e){console.log("value",e);var t=e.caption,n=e.color,i=e.label,a=e.size,c=e.type,u=e.icon;r((function(e){if("node"===c){var r=pr(pr({},e.nodeStyle),{},dr({},i,{color:n,size:a,caption:t,icon:u}));e.nodeStyle=r,o.Utils.storage.set("GRAPH_".concat(s,"_STYLE"),{nodeStyle:r,edgeStyle:pr({},e.edgeStyle)})}if("edge"===c){var l=pr(pr({},e.edgeStyle),{},dr({},i,{color:n,size:a,caption:t,icon:u}));e.edgeStyle=l,o.Utils.storage.set("GRAPH_".concat(s,"_STYLE"),{nodeStyle:pr({},e.nodeStyle),edgeStyle:l})}}))}),p=i.nodes.map((function(e){return pr(pr({},e),{},{style:c[e.label]})})),d=i.edges.map((function(e){return pr(pr({},e),{},{style:l[e.label]})}));return a.createElement(u.Z,{vertical:!0,gap:16},a.createElement(hr,{type:"secondary"},"You can click on each label to set the color, size, and display text for vertices and edges."),a.createElement(yr,{level:5,style:{margin:"0px"}},a.createElement(C.Z,{id:"Vertex Labels"})),a.createElement(D.Z,{wrap:!0,size:[0,6]},p.map((function(e,t){var r=e.properties,n=e.style,o=sr(e,ar);return a.createElement(ge,lr({key:t,properties:r},o,n,{type:"node",onChange:f}))}))),a.createElement(yr,{level:5,style:{margin:"0px"}},a.createElement(C.Z,{id:"Edge Labels"})),a.createElement(D.Z,{wrap:!0,size:[0,6]},d.map((function(e,t){var r=e.properties,n=e.style,o=sr(e,cr);return a.createElement(ge,lr({key:t,properties:r},o,n,{type:"edge",onChange:f}))}))),a.createElement(ir,null))},vr=a.memo(mr),gr=function(e){var t=e.data,r=e.schema,n=e.graphId,o=Be().updateStore;return a.useEffect((function(){if(t){var e=it(r,n);o((function(o){o.data=t,o.source=t,o.schema=r,o.graphId=n,o.nodeStyle=e.nodeStyle,o.edgeStyle=e.edgeStyle,o.dataMap=nt(t)}))}}),[t,r,n]),null},br=(0,a.memo)(gr),wr=function(e){var t=e.title,r=void 0===t?"Zoom to fitview":t,n=e.placement,i=void 0===n?"left":n,c=Be().store.graph;return a.createElement(Le.Z,{title:a.createElement(C.Z,{id:"".concat(r)}),placement:i},a.createElement(g.ZP,{onClick:function(){c&&(1===c.graphData().nodes.length?(c.centerAt(0,0),c.zoom(6,600)):c.zoomToFit(600))},icon:a.createElement(o.Icons.ZoomFit,null),type:"text"}))},Or=function(e){var t=Be(),r=t.store,n=t.updateStore,o=r.emitter;return(0,a.useEffect)((function(){var e=function(e){n((function(e){e.nodeStatus={},e.edgeStatus={},e.focusNodes=[]}))};return null==o||o.on("canvas:click",e),function(){null==o||o.off("canvas:click",e)}}),[o]),null},Sr=r(42512);function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Er(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jr=function(e){var t=Be().updateStore;return a.createElement("div",null,a.createElement(Sr.Z,{range:!0,defaultValue:[.5,1],max:1,min:.5,step:.01,onChangeComplete:function(e){t((function(t){console.log("onChangeComplete",e,t.source);var r,n,o,i,a,c,u,l,s=(r=t.source,a=(n={id:"slider-filter",prop:"weight",elementType:"edge",range:e}).prop,c=n.range,u=n.elementType,l=new Set,"edge"===u&&(o=r.edges.filter((function(e){e.id,e.label;var t=e.properties,r=e.source,n=e.target;if(c&&t&&a){var o=xr(c,2),i=o[0],u=o[1],s=t[a]>=i&&t[a]<=u;return s&&(l.add(at(r)),l.add(ct(n))),s}})),i=r.nodes.filter((function(e){return l.has(e.id)}))),{nodes:i,edges:o});t.data=s}))}}),a.createElement(g.ZP,{block:!0,onClick:function(){t((function(e){e.data=e.source}))}},"reset"))};function Pr(e){return Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pr(e)}function _r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(r),!0).forEach((function(t){kr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kr(e,t,r){var n;return n=function(e,t){if("object"!=Pr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Pr(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ar(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ar(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Dr=function(e){var t=Tr(a.useState({cluster:!1}),2),r=t[0],n=t[1],i=jo(),c=i.runCombos,u=i.clearCombos,l=r.cluster;return a.createElement(Le.Z,{title:a.createElement(C.Z,{id:"Clustering layout"}),placement:"left"},a.createElement(g.ZP,{onClick:function(){n((function(e){return Lr(Lr({},e),{},{cluster:!e.cluster})})),l?u():c("label")},icon:a.createElement(o.Icons.Cluster,null),type:"text"}))};function Ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Nr=function(e){var t=Be().store,r=t.graph,n=t.data,i=Ir((0,a.useState)({linkStrength:1,linkDistance:100}),2),c=i[0];i[1],c.linkStrength;return a.createElement("div",null,a.createElement(m.Z.Text,null,"Force Link"),a.createElement(Sr.Z,{defaultValue:.5,max:1,min:0,step:.01,onChangeComplete:function(e){if(r){var t=Ft.Z().links(o.Utils.fakeSnapshot(n.edges)).id((function(e){return e.id})).strength((function(t,r,n){return console.log((Math.abs(t.properties.weight-.7)||.1)*e),(Math.abs(t.properties.weight)||.1)*e})).distance((function(e){return 30}));r.d3Force("link",t),r.d3ReheatSimulation()}}}),a.createElement(g.ZP,{onClick:function(){if(r){var e=Ft.Z().links(o.Utils.fakeSnapshot(n.edges)).id((function(e){return e.id}));r.d3Force("link",e),r.d3ReheatSimulation()}}},"reset"))},Zr=r(83388);function Fr(e){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(e)}function Mr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(r),!0).forEach((function(t){zr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zr(e,t,r){var n;return n=function(e,t){if("object"!=Fr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Fr(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rr=function(e){var t=e.nodes,r=void 0===t?[]:t,n=e.edges,o=void 0===n?[]:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{selected:!0}},a=r.reduce((function(e,t){return Gr(Gr({},e),{},zr({},t.id,i(t)))}),{}),c=o.reduce((function(e,t){return Gr(Gr({},e),{},zr({},t.id,i(t)))}),{});return{nodeStatus:a,edgeStatus:c}},Ur=function(e,t,r){var n=e.graphData(),i=n.nodes,a=n.links.map((function(e){return Gr(Gr({},e),{},{source:e.source.id,target:e.target.id})})),c=i.filter((function(e){return-1!==r.indexOf(e.id)})),u=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=2*Math.PI/e.length;return e.map((function(e,o){var i=o*n;return Gr(Gr({},e),{},{x:t.x+r*Math.cos(i),y:t.y+r*Math.sin(i),z:0})}))}(t.nodes,c);return o.Utils.handleExpand({nodes:i,edges:a},{nodes:u,edges:t.edges})};function Yr(e){return Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yr(e)}function qr(){qr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var S=g.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Yr(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Yr(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function Br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(r),!0).forEach((function(t){Vr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vr(e,t,r){var n;return n=function(e,t){if("object"!=Yr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Yr(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xr(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Jr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Xr(i,n,o,a,c,"next",e)}function c(e){Xr(i,n,o,a,c,"throw",e)}a(void 0)}))}}function $r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Qr=function(e){var t=Be(),r=t.store,n=t.updateStore,o=r.nodeStatus,i=r.schema,c=(r.dataMap,r.emitter),u=r.graph,l=r.data,s=r.getService,f=(0,a.useRef)(null),p=$r((0,a.useState)({itemMap:{},isLoading:!1}),2),d=p[0],y=p[1],h=d.itemMap,m=function(){var e=Jr(qr().mark((function e(){var t;return qr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("queryNeighborItems")({schema:i});case 2:t=e.sent,y((function(e){return Hr(Hr({},e),{},{itemMap:t})}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){m()}),[i]);var v=Object.keys(o).filter((function(e){return o[e].selected})),g=l.nodes.find((function(e){return e.id===v[0]}));if(!g)return null;var b=function(){var e=Jr(qr().mark((function e(t){var r,o,i,a,l,f;return qr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.key,null==c||c.emit("canvas:click"),n((function(e){e.isLoading=!0})),e.next=5,s("queryNeighborData")({selectIds:v,key:r});case 5:(o=e.sent).nodes.length>0&&u?(i=Rr(o,(function(e){return{selected:!0}})),a=i.nodeStatus,l=i.edgeStatus,f=Ur(u,o,v),n((function(e){e.data=f,e.dataMap=nt(f),e.nodeStatus=a,e.edgeStatus=l,e.isLoading=!1,e.focusNodes=o.nodes.map((function(e){return e.id}))}))):n((function(e){e.isLoading=!1}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.createElement("div",{ref:f},a.createElement(Zr.Z,{getPopupContainer:function(e){return f.current?f.current:e},onClick:b,style:{margin:"0px",padding:"0px",width:"103%"},mode:"vertical",items:[{key:"NeighborQuery",label:"NeighborQuery",children:h[g.label]}]}))},Kr=r(9541);function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(){tn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var S=g.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==en(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(en(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function rn(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var nn=function(e,t){var r=e.map((function(e,r){var n=t[e].properties,o=n.name,i=n.title,a="p".concat(r),c="l".concat(r),u="";return o&&(u="".concat(a,'.name = "').concat(o,'"\n      ')),i&&(u="".concat(a,'.title = "').concat(i,'"\n      ')),{whereScript:u,matchScript:"\n(".concat(a,")-[").concat(c,"]-(neighbor)"),returnScript:a+","+c}})),n=r.map((function(e){return e.matchScript})).join(","),o=r.map((function(e){return e.whereScript})).join(" AND "),i=r.map((function(e){return e.returnScript})).join(",");return console.log("\n  MATCH ".concat(n," \n  WHERE ").concat(o," \n  RETURN ").concat(i,",neighbor\n  ")),"\n  MATCH ".concat(n," \n  WHERE ").concat(o," \n  RETURN ").concat(i,",neighbor\n  ")},on=function(e){var t=e.onQuery,r=Be(),n=r.store,o=r.updateStore,i=n.nodeStatus,c=(n.schema,n.dataMap),u=n.emitter,l=n.graph,s=function(){var e,r=(e=tn().mark((function e(){var r,n,a,s,f,p;return tn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o((function(e){e.isLoading=!0})),null==u||u.emit("canvas:click"),r=Object.keys(i).filter((function(e,t){return i[e].selected})),n=nn(r,c),e.next=6,t({script:n,language:"cypher"});case 6:(a=e.sent).nodes.length>0?(s=Rr(a,(function(e){return{selected:!0}})),f=s.nodeStatus,p=s.edgeStatus,o((function(e){var t=Ur(l,a,r);e.data=t,e.dataMap=nt(t),e.isLoading=!1,e.nodeStatus=f,e.edgeStatus=p}))):o((function(e){e.isLoading=!1}));case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){rn(i,n,o,a,c,"next",e)}function c(e){rn(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return a.createElement(g.ZP,{onClick:s,icon:a.createElement(Kr.Z,null),type:"text",style:{width:"100%",justifyContent:"left"}},"CommonNeighbor")},an=r(86132);function cn(e){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(e)}var un=function(e){var t=Be(),r=t.store,n=t.updateStore,o=r.nodeStatus,i=r.emitter;return a.createElement(g.ZP,{onClick:function(){null==i||i.emit("canvas:click");var e=Object.keys(o).filter((function(e,t){return o[e].selected}));n((function(t){var r={nodes:t.data.nodes.filter((function(t){return!e.includes(t.id)})),edges:t.data.edges.filter((function(t){return!e.includes("object"===cn(t.source)?t.source.id:t.source)&&!e.includes("object"===cn(t.target)?t.target.id:t.target)}))};t.data=r,t.dataMap=nt(r)}))},icon:a.createElement(an.Z,null),type:"text",style:{width:"100%",justifyContent:"left"}},"Delete Vertex")},ln=r(10422),sn=r(2941),fn=r(41468);function pn(e){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(e)}function dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(r),!0).forEach((function(t){hn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hn(e,t,r){var n;return n=function(e,t){if("object"!=pn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==pn(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gn=function(e){var t=e.onSelect,r=e.title,n=void 0===r?"Select nodes by box selection":r,i=e.placement,c=void 0===i?"left":i,u=Be(),l=u.store,s=u.updateStore,f=u.id,p=l.graph,d=(0,o.useStudioProvier)().isLight?"#000":"#ddd",y=(0,a.useRef)(null),h=mn((0,a.useState)(!1),2),m=h[0],v=h[1];(0,a.useEffect)((function(){var e=function(e){"Escape"!==e.key&&"Enter"!==e.key||v(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]);(0,a.useEffect)((function(){var e=(0,fn.Z)(y.current);if(m&&p){var r=(p.graphData()||{}).nodes,n=void 0===r?[]:r,o=(0,sn.Dm)().extent([[0,0],[e.node().clientWidth,e.node().clientHeight]]).on("end",(function(e){if(e.selection){var r=mn(e.selection,2),o=mn(r[0],2),i=o[0],a=o[1],c=mn(r[1],2),u=c[0],l=c[1],f=p.screen2GraphCoords(i,a,0),d=p.screen2GraphCoords(u,l,0);!function(e){var r=e.reduce((function(e,t){return yn(yn({},e),{},hn({},t.id,{selected:!0}))}),{});s((function(e){e.nodeStatus=r})),t&&t(e)}(n.filter((function(e){return e.x>=f.x&&e.x<=d.x&&e.y>=f.y&&e.y<=d.y})))}}));e.append("g").attr("class","brush").call(o)}return function(){e.select(".brush").remove()}}),[m,t,p]);var b=m?{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"block",background:"rgba(0, 0, 0, 0.05)"}:{display:"none"},w=document.getElementById("GRAPH_".concat(f));return w?a.createElement(a.Fragment,null,a.createElement(Le.Z,{placement:c,title:a.createElement(C.Z,{id:"".concat(n)})},a.createElement(g.ZP,{icon:a.createElement(o.Icons.Lasso,{style:{color:d}}),type:"text",onClick:function(){v((function(e){return!e}))}})),ln.createPortal(a.createElement("svg",{ref:y,style:b}),w)):null},bn=r(71433),wn=function(e){return Be().store.isLoading?a.createElement("div",{style:{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(0,0,0,0.1)"}},a.createElement(bn.Z,null)):null},On=r(56977);function Sn(e){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(e)}function xn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function En(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(r),!0).forEach((function(t){jn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jn(e,t,r){var n;return n=function(e,t){if("object"!=Sn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Sn(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pn=function(e){var t=Be(),r=t.store,n=t.updateStore,o=r.nodeStatus,i=r.graph,c=(r.dataMap,r.emitter);return a.createElement(g.ZP,{onClick:function(){null==c||c.emit("canvas:click");var e=Object.keys(o).filter((function(e,t){return o[e].selected}))[0];if(i&&e){var t=_n(i.graphData(),e);n((function(e){e.data=t,e.dataMap=nt(t)}))}},icon:a.createElement(On.Z,null),type:"text",style:{width:"100%",justifyContent:"left"}},"Delete LeafNodes")},_n=function(e,t){var r=e.nodes,n=e.links,o=new Map;n.forEach((function(e){o.has(e.source.id)||o.set(e.source.id,[]),o.has(e.target.id)||o.set(e.target.id,[]),o.get(e.source.id).push(e),o.get(e.target.id).push(e)}));var i=new Set,a=new Set;(o.get(t)||[]).forEach((function(e){var r=e.source.id===t?e.target:e.source,n=o.get(r.id)||[],c=e.source.id===e.target.id;1!==n.length||c||(i.add(r.id),a.add(e))}));var c=n.filter((function(e){return!(a.has(e)&&e.source.id!==e.target.id)})).map((function(e){return En(En({},e),{},{source:e.source.id,target:e.target.id})}));return{nodes:r.filter((function(e){return!i.has(e.id)})),edges:c}},Ln=r(41794),kn=function(e){var t=e.title,r=void 0===t?a.createElement(C.Z,{id:"Export graph json"}):t,n=e.placement,i=void 0===n?"left":n,c=Be().store.data;return a.createElement(Le.Z,{title:r,placement:i},a.createElement(g.ZP,{onClick:function(){o.Utils.createDownload(JSON.stringify({nodes:c.nodes,edges:c.edges},null,2),"graph.json")},icon:a.createElement(Ln.Z,null),type:"text"}))};function Tn(e){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(e)}function An(e){return function(e){if(Array.isArray(e))return Dn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Dn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function In(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?In(Object(r),!0).forEach((function(t){Nn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):In(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nn(e,t,r){var n;return n=function(e,t){if("object"!=Tn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Tn(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zn=function(){var e=Be(),t=e.store,r=e.updateStore,n=t.emitter,o=t.data,i=t.graph;(0,a.useEffect)((function(){if(n&&i){var e=nt(o);n.on("node:click",(function(t){var n=t.id,o=e.get(n)||{},i=(o.outNeighbors,o.outEdges),a=void 0===i?[]:i,c=o.neighbors,u=void 0===c?[]:c,l=o.inEdges,s=void 0===l?[]:l,f=(o.inNeighbors,u.reduce((function(e,t){return Cn(Cn({},e),{},Nn({},t,{hovering:!0}))}),Nn({},n,{selected:!0}))),p=An(new Set([].concat(An(a),An(s)))).reduce((function(e,t){return Cn(Cn({},e),{},Nn({},t,{selected:!0}))}),{});console.log(f,p,s,a),t&&r((function(e){e.nodeStatus=f,e.edgeStatus=p}))}))}return function(){null==n||n.off("node:click")}}),[n,o,i])};function Fn(e){return Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fn(e)}function Mn(e,t,r){var n;return n=function(e,t){if("object"!=Fn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Fn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Fn(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Gn=function(){var e=Be(),t=e.store,r=e.updateStore,n=t.emitter,o=t.data,i=t.graph;(0,a.useEffect)((function(){if(n&&i){var e=nt(o);n.on("edge:click",(function(t){var n=t.id,o=e.get(n)||{},i=o.source,a=o.target;t&&i&&a&&r((function(e){e.nodeStatus=Mn(Mn({},i.id,{hovering:!0}),a.id,{hovering:!0}),e.edgeStatus=Mn({},n,{selected:!0})}))}))}return function(){null==n||n.off("edge:click")}}),[n,o,i])};function zn(e){return zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn(e)}function Rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Un(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(r),!0).forEach((function(t){Yn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yn(e,t,r){var n;return n=function(e,t){if("object"!=zn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==zn(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qn=function(){var e=Be(),t=e.store,r=e.updateStore,n=t.emitter,o=t.data,i=t.graph;(0,a.useEffect)((function(){return n&&i&&n.on("node:hover",(function(e){var t=e.node,n=e.prevNode;if(n){var o=n.id;r((function(e){var t=e.nodeStatus[o]||{};e.nodeStatus[o]=Un(Un({},t),{},{hovering:!1})}))}if(t){var i=t.id;r((function(e){var t=e.nodeStatus[i]||{};e.nodeStatus[i]=Un(Un({},t),{},{hovering:!0})}))}})),function(){null==n||n.off("node:hover")}}),[n,o,i])};function Bn(e){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bn(e)}function Hn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(r),!0).forEach((function(t){Xn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xn(e,t,r){var n;return n=function(e,t){if("object"!=Bn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Bn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Bn(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jn=function(){var e=Be(),t=e.store,r=e.updateStore,n=t.emitter,i=t.graph,c=t.combos;(0,a.useEffect)((function(){var e,t,a,u=document.querySelector(".force-graph-container canvas"),l=!1,s=!1;function f(e){if(u){var t=(l=u.getBoundingClientRect(),s=window.pageXOffset||document.documentElement.scrollLeft,f=window.pageYOffset||document.documentElement.scrollTop,{top:l.top+f,left:l.left+s}),r=e.pageX-t.left,n=e.pageY-t.top,o=null==i?void 0:i.screen2GraphCoords(r,n,0);if(o){var a=c.find((function(e){var t=function(e){var t=e.x,r=e.y,n=e.r,o=e.cluster,i=t,a=r-n-8,c=Math.max(10*String(o).length*.6,50);return{x:i-c/2,y:a-5,w:c,h:10}}(e);return function(e,t){var r=e.x,n=e.y,o=t.x,i=t.y,a=t.w,c=t.h;return r>=o&&r<=o+a&&n>=i&&n<=i+c}(o,t)}));if(a)return a}}var l,s,f;return!1}function p(e,t){i&&i.graphData().nodes.forEach((function(r){"object"===Bn(l)&&-1!==l.children.indexOf(r.id)&&(r.x=r.x+e,r.y=r.y+t)}))}var d=o.Utils.fakeSnapshot(c);function y(e,t){var r=d.map((function(r){return"object"===Bn(l)&&r.id===l.id?Vn(Vn({},r),{},{x:r.x+e,y:r.y+t}):r}));d=r,vt(i,r)}function h(r){if(a=Date.now(),i.autoPauseRedraw&&i.autoPauseRedraw(!1),u&&(l=f(r))){i.enablePanInteraction(!1),u.classList.add("grabbable");var n=(null==i?void 0:i.screen2GraphCoords(r.clientX,r.clientY,0))||{x:0,y:0},o=n.x,c=n.y;e=o,t=c,s=!0}}function m(r){if(s&&u){var n=(null==i?void 0:i.screen2GraphCoords(r.clientX,r.clientY,0))||{x:0,y:0},o=n.x,a=n.y,c=o-e,l=a-t;e=o,t=a,p(c,l),y(c,l)}}function v(o){if(i.autoPauseRedraw&&i.autoPauseRedraw(!0),s&&u)if(s=!1,u.classList.remove("grabbable"),Date.now()-a<200)!function(e){var t=f(e);t&&(null==n||n.emit("combo:click",Vn(Vn({},e),{},{item:t})))}(o);else{var c=(null==i?void 0:i.screen2GraphCoords(o.clientX,o.clientY,0))||{x:0,y:0},l=c.x,h=c.y,m=l-e,v=h-t;p(m,v),y(m,v),r((function(e){e.combos=d}))}i.enablePanInteraction(!0)}function g(){}return u&&(u.addEventListener("pointerdown",h),u.addEventListener("pointermove",m),u.addEventListener("pointerup",v),u.addEventListener("pointerout",g)),function(){u&&(u.removeEventListener("pointerdown",h),u.removeEventListener("pointermove",m),u.removeEventListener("pointerup",v),u.removeEventListener("pointerout",g))}}),[c,i,n])},$n=function(e){return Zn(),qn(),Gn(),Jn(),function(){var e=Be().store,t=e.graph,r=e.focusNodes,n=e.width,o=(0,a.useRef)(0);(0,a.useEffect)((function(){return o.current=setTimeout((function(){if(r.length,t){var e=t.getGraphBbox((function(e){return r.includes(e.id)}));if(e){var n={x:(e.x[0]+e.x[1])/2,y:(e.y[0]+e.y[1])/2};t&&t.centerAt&&t.centerAt(n.x,n.y,400)}}}),200),function(){clearTimeout(o.current)}}),[t,r,n])}(),null},Wn=r(25046),Qn=function(e){var t=Be(),r=t.updateStore,n=t.store.graph;return a.createElement(Le.Z,{title:"Clear Canvas",placement:"left"},a.createElement(g.ZP,{onClick:function(){r((function(e){e.data={nodes:[],edges:[]},e.source={nodes:[],edges:[]},e.combos=[],e.layout={type:"force",options:{}}})),n&&(n.zoomToFit(),n.zoom(6))},icon:a.createElement(Wn.Z,null),type:"text"}))},Kn=r(73873);function eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return to(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return to(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function to(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ro=function(e){var t=Be().store,r=t.graph,n=t.source,i=t.data,c=eo(a.useState(!1),2),u=c[0],l=c[1],s=u?"Merge Edges":"UnMerge Edges";return a.createElement(Le.Z,{title:s,placement:"left"},a.createElement(g.ZP,{onClick:function(){if(r)if(u)r.graphData(o.Utils.fakeSnapshot({nodes:n.nodes,links:n.edges}));else{var e=function(e){var t=o.Utils.fakeSnapshot(e),r={},n={},i=.3;return t.edges.forEach((function(e){e.nodePairId=e.source<=e.target?e.source+"_"+e.target:e.target+"_"+e.source;var t=e.source===e.target?r:n;t[e.nodePairId]||(t[e.nodePairId]=[]),t[e.nodePairId].push(e)})),Object.keys(r).forEach((function(e){var t=r[e],n=t.length-1;t[n]._style_curvature=1;for(var o=(1-i)/n,a=0;a<n;a++)t[a]._style_curvature=i+a*o})),Object.keys(n).filter((function(e){return n[e].length>1})).forEach((function(e){var t=n[e],r=t.length-1,o=t[r];o._style_curvature=i;for(var a=2*i/r,c=0;c<r;c++)t[c]._style_curvature=c*a-i,o.source!==t[c].source&&(t[c]._style_curvature*=-1)})),t}(i),t=e.nodes,a=e.edges;r.linkCurvature("_style_curvature"),r.graphData({links:a,nodes:t})}l(!u)},icon:a.createElement(Kn.Z,null),type:"text"}))};function no(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var io=function(e){var t=Be().store.graph,r=no(a.useState(!1),2),n=r[0],o=r[1],i=n?"Force Mode":"Dagre Mode";return a.createElement(Le.Z,{title:i,placement:"left"},a.createElement(g.ZP,{onClick:function(){t&&(n?t.dagMode(null):t.dagMode("lr")),o(!n)},icon:a.createElement(Kr.Z,null),type:"text"}))},ao=r(84254);function co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lo=function(e){var t=Be().store.graph,r=co(a.useState(!1),2),n=r[0],o=r[1],i=n?"unFixed nodes when dragging":"Fixed nodes when dragging";return a.createElement(Le.Z,{title:i,placement:"left"},a.createElement(g.ZP,{onClick:function(){t&&(n?t.onNodeDragEnd((function(e){e.fx=void 0,e.fy=void 0})):t.onNodeDragEnd((function(e){e.fx=e.x,e.fy=e.y}))),o(!n)},icon:a.createElement(ao.Z,{rotate:n?0:90}),type:"text"}))},so=function(e){return 0===Be().store.data.nodes.length?a.createElement(u.Z,{vertical:!0,justify:"center",align:"center",style:{position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px"},gap:8},a.createElement(o.Illustration.Explore,{style:{width:"50%",height:"50%"}}),a.createElement(m.Z.Text,{type:"secondary"},"Connect the Complex, Simplify the Insights.")):null},fo=r(54666),po=r(91702),yo=function(e,t){return{label:a.createElement(u.Z,{justify:"center",align:"center",vertical:!0,gap:12},a.createElement(o.Illustration.Welcome,{style:{width:"100px",height:"100px"}}),a.createElement(m.Z.Text,null,t)),value:e,style:{height:"150px"}}},ho=[yo("force","Force Layout"),yo("force-combo","Force Combo"),yo("force-dagre","Force Dagre"),yo("dagre","Dagre Layout"),yo("circle-pack","Circle Pack")],mo=function(){var e=Be(),t=e.store,r=e.updateStore,n=t.layout;t.graph;return a.createElement(po.ZP.Group,{block:!0,options:ho,defaultValue:n.type,optionType:"button",onChange:function(e){r((function(t){t.layout={type:e.target.value,options:{}}}))}})},vo=function(e){return a.createElement(T.Z,{content:a.createElement(mo,null),title:"Switch Layout",placement:"right"},a.createElement(g.ZP,{type:"text",icon:a.createElement(fo.Z,null)}))};function go(e){return go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},go(e)}function bo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(r),!0).forEach((function(t){Oo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oo(e,t,r){var n;return n=function(e,t){if("object"!=go(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=go(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==go(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function So(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Eo=function(e){var t=Be().store,r=t.graph,n=t.data,o=So(a.useState({zoom:"1"}),2),i=o[0],c=o[1];return a.useEffect((function(){r&&r.onZoom&&r.onZoom((function(e){c((function(t){return wo(wo({},t),{},{zoom:e.k.toFixed(2)})}))}))}),[r,n]),a.createElement("div",{style:{position:"absolute",bottom:0,left:0,zIndex:1e3,padding:"12px"}},a.createElement(D.Z,{size:"large"},a.createElement(m.Z.Text,{type:"secondary"},"Node Counts: ",n.nodes.length),a.createElement(m.Z.Text,{type:"secondary"},"Edge Counts: ",n.edges.length),a.createElement(m.Z.Text,{type:"secondary"},"Zoom Ratio: ",i.zoom)))},jo=function(){var e=Be(),t=e.store,r=e.updateStore,n=t.graph;return{runCombos:function(e){r((function(t){t.layout={type:"force-combo",options:{groupBy:e,reheatSimulation:!0}}}))},clearCombos:function(){r((function(e){e.combos=[],e.layout={type:"force",options:{}}}))},focusNodes:function(e){if(n){var t=n.getGraphBbox((function(t){return e.includes(t.id)}));if(t){var r={x:(t.x[0]+t.x[1])/2,y:(t.y[0]+t.y[1])/2};n.centerAt(r.x,r.y,400)}}}}}},61719:function(e,t,r){r.r(t),r.d(t,{default:function(){return $n},layout:function(){return Ze},parseSchemaByFiles:function(){return Ir},sdk:function(){return Jn},transEdge2Entity:function(){return ze},transMappingSchemaToOptions:function(){return mn},transOptionsToSchema:function(){return un},transSchemaToOptions:function(){return an},transformDataToReactFlow:function(){return Ge},transformEdges:function(){return Me},transformGraphNodes:function(){return Fe},transformImportOptionsToSchemaMapping:function(){return vn},transformNodes:function(){return Re},useContext:function(){return p.qp},validateProperties:function(){return Gt}});var n=r(50959),o=r(77320),i=r(10866),a=r(11029),c=r(58002),u=function(e){e.id;var t=e.data,r=(t||{})._fromEdge,i=r?{top:"30px",backgroundColor:"transparent",border:"none"}:{top:"60px",backgroundColor:"transparent",border:"none"};return n.createElement("div",null,n.createElement(o.HH,{type:"target",position:o.Ly.Left,id:"left",style:i}),n.createElement(o.HH,{type:"target",position:o.Ly.Right,id:"left-revert",style:i}),n.createElement(o.HH,{type:"source",position:o.Ly.Right,id:"right",style:i}),n.createElement(o.HH,{type:"source",position:o.Ly.Left,id:"right-revert",style:i}),n.createElement(c.TableCard,{data:t,_fromEdge:r}))},l=(0,n.memo)(u),s=r(53531),f=r(10705),p=r(33741);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){var n;return n=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==d(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=s.Z.useToken,w="100px",O="116px",S={handler:{width:O,height:O,zIndex:0,top:"50%",left:"50%",transform:"translate(-50%, -50%)",transition:"all 0.3s ease"}},x=function(e){var t=e.data,r=void 0===t?{}:t,i=e.id,a=r.label,u=r.filelocation,l=r.disabled,s=(0,p.qp)(),d=s.store,y=s.updateStore,m=d.currentId,g=d.theme,O=d.elementOptions,x=(0,c.useStudioProvier)().isLight,E=(0,c.useSection)(),j=E.toggleRightSide,P=E.toggleLeftSide,_=b().token,L=i===m,k=!O.isConnectable,T=v((0,n.useState)({isHover:!1,contentEditable:!1}),2),A=T[0],D=T[1],I=k?{cursor:"not-allow",background:"transparent",border:"none"}:h(h({},S.handler),{},{border:A.isHover?"2px dashed ".concat(g.primaryColor):"none",background:A.isHover?"#fafafa":"transparent",cursor:"copy"});return n.createElement("div",{"data-nodeid":i,style:{boxSizing:"border-box",width:"100px",height:"100px"},onMouseEnter:function(){k||D((function(e){return h(h({},e),{},{isHover:!0})}))},onMouseLeave:function(){k||D((function(e){return h(h({},e),{},{isHover:!1})}))},onClick:function(){y((function(e){e.currentType="nodes",e.currentId=i})),j(!1),P(!0)}},n.createElement(o.HH,{type:"target",position:o.Ly.Left,id:"left",style:{background:"transparent",position:"relative",border:"none"}}),n.createElement(o.HH,{type:"source",position:o.Ly.Right,id:"right",style:I}),n.createElement("div",{style:{position:"absolute",top:0,left:0,border:x?L?"4px solid ".concat(g.primaryColor):"2px solid #000":L?"4px solid ".concat(g.primaryColor):"2px solid #d7d7d7",backgroundColor:x?"#fafafa":"#161616",borderRadius:"50%",height:w,width:w,boxSizing:"border-box",zIndex:0,display:"flex",justifyContent:"center",alignItems:"center",fontSize:"20px"},"data-nodeid":i},u&&n.createElement("div",{style:{position:"absolute",top:"0px",right:"-16px"}},n.createElement(f.Z,{style:{color:_.colorSuccessActive,fontSize:20}})),n.createElement(c.EditableText,{id:i,text:a,onTextChange:function(e){y((function(t){var r=t.nodes.find((function(e){return e.id===i}));r&&(r.data.label=e)}))},disabled:l,style:{color:x?"#000":"#D7D7D7"}})))},E={"table-node":l,"graph-node":(0,n.memo)(x)};function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){var n;return n=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==j(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){var r=e.width,n=e.height,o=e.positionAbsolute,i=t.positionAbsolute,a=r/2,c=n/2,u=o.x+a,l=o.y+c,s=i.x+t.width/2,f=i.y+t.height/2,p=(s-u)/(2*a)-(f-l)/(2*c),d=(s-u)/(2*a)+(f-l)/(2*c),y=1/(Math.abs(p)+Math.abs(d)),h=y*p,m=y*d;return{x:a*(h+m)+u,y:c*(-h+m)+l}}function T(e,t){var r=_(_({},e.positionAbsolute),e),n=Math.round(r.x),i=Math.round(r.y),a=Math.round(t.x),c=Math.round(t.y);return a<=n+1?o.Ly.Left:a>=n+r.width-1?o.Ly.Right:c<=i+1?o.Ly.Top:c>=r.y+r.height-1?o.Ly.Bottom:o.Ly.Top}var A=function(e){var t=e.sourceX,r=e.sourceY,n=e.targetX,o=e.targetY,i=e.offset,a=n-t,c=o-r,u=Math.sqrt(a*a+c*c);return{x:t+a/2+-(c/u)*i,y:r+c/2+a/u*i}};function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){var n;return n=function(e,t){if("object"!=D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==D(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Z=s.Z.useToken,F=function(e){var t=e.id,r=e.label,i=e.style,a=e.filelocation,u=e.disabled,l=(0,p.qp)(),s=l.store,d=l.updateStore,y=(0,c.useSection)().toggleRightSide,h=Z().token,m=s.currentId,v=s.theme,g=t===m,b=(0,c.useStudioProvier)().isLight;return n.createElement(o.XQ,null,n.createElement("div",{style:C({cursor:"pointer",position:"absolute",fontSize:12,pointerEvents:"all"},i),className:"nodrag nopan"},a&&n.createElement("div",{style:{position:"absolute",right:"-16px",top:"-6px"}},n.createElement(f.Z,{style:{color:h.colorSuccessActive,fontSize:12}})),n.createElement("div",{className:"edgebutton",onClick:function(){d((function(e){e.currentId=t,e.currentType="edges"})),y(!1)},style:{borderRadius:"4px",background:b?g?"".concat(v.primaryColor):"#fff":g?"".concat(v.primaryColor):"#161616",border:b?g?"2px solid ".concat(v.primaryColor):"1px solid #000":g?"2px solid ".concat(v.primaryColor):"1px solid #d7d7d7"}},n.createElement(c.EditableText,{disabled:u,id:t,text:r||t,onTextChange:function(e){d((function(r){var n=r.edges.find((function(e){return e.id===t}));n&&(n.data.label=e)}))},style:{color:b?g?"#fff":"#000":g?"#fff":"#D7D7D7",fontSize:"10px",lineHeight:"14px",minHeight:"14px"}}))))};function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){var n;return n=function(e,t){if("object"!=M(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==M(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var U=function(e){var t=e.id,r=e.style,o=e.data,i=e.sourceX,a=e.sourceY,u=o||{},l=u._extra,s=u.label,f=u.filelocation,d=(l||{}).index,y=void 0===d?0:d,h=function(e){var t=(0,p.qp)().store,r=t.currentId,n=t.theme,o=e===r,i=(0,c.useStudioProvier)().isLight;return{isSelected:o,markerEnd:o?"url(#arrow-selected)":"url(#arrow)",style:{stroke:i?o?n.primaryColor:"#000":o?n.primaryColor:"#d7d7d7",strokeWidth:o?"2px":"1px"}}}(t),m=h.markerEnd,v=h.style,g=function(e,t,r){var n=r.index,o=e-33,i=t-40,a=60+40*n,c=o,u=i,l=o-60,s=i;return"\n        M ".concat(c," ").concat(u," \n        C ").concat(c+a," ").concat(u-a,", \n          ").concat(l-a," ").concat(s-a,", \n          ").concat(l," ").concat(s)}(i,a,{index:y}),b=function(e,t,r){var n=r.index,o=30*n;return{x:e-63,y:t-o-80}}(i,a,{index:y});return n.createElement(n.Fragment,null,n.createElement("path",{id:t,className:"react-flow__edge-path",d:g,markerEnd:m,style:z(z({},r),v)}),n.createElement(F,{filelocation:f,label:s,id:t,style:{transform:"translate(-50%, -50%) translate(".concat(b.x,"px,").concat(b.y,"px)")}}))};function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){H(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(e,t,r){var n;return n=function(e,t){if("object"!=Y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Y(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var J=function(e){var t=e.id,r=e.source,i=e.target,a=e.style,u=e.data||{},l=u._extra,s=u.label,f=u.filelocation,d=u.disabled,y=(l||{}).offset,h=void 0===y?0:y,m=(0,o.oR)((0,n.useCallback)((function(e){return e.nodeInternals.get(r)}),[r])),v=(0,o.oR)((0,n.useCallback)((function(e){return e.nodeInternals.get(i)}),[i])),g=(0,p.qp)().store,b=g.currentId,w=g.theme,O=(0,c.useStudioProvier)().isLight;if(!m||!v)return null;if(r===i)return n.createElement(U,e);var S=t===b,x=function(e,t){var r=k(e,t),n=k(t,e),o=T(e,r),i=T(t,n);return{sx:r.x,sy:r.y,tx:n.x,ty:n.y,sourcePos:o,targetPos:i}}(m,v),E=x.sx,j=x.sy,P=x.tx,_=x.ty,L=A({sourceX:E,sourceY:j,targetX:P,targetY:_,offset:h}),D=function(e){var t=e.sourceX,r=e.sourceY,n=e.targetX,o=e.targetY,i=e.offset,a=e.R1,c=void 0===a?20:a,u=e.R2,l=void 0===u?20:u,s=A({sourceX:t,sourceY:r,targetX:n,targetY:o,offset:i}),f=n-t,p=o-r,d=Math.sqrt(f*f+p*p),y=f/d,h=p/d;return{P1:{x:t+y*c+i*-h,y:r+h*c+i*y},P2:{x:n+-y*l+i*-h,y:o+-h*l+i*y},controlPoint:s}}({sourceX:E,sourceY:j,targetX:P,targetY:_,offset:h}),I=V(function(e){var t=e.source,r=e.P1,n=e.P2,o=e.P3,i=e.target,a={x:r.x+(t.x-r.x)/3,y:r.y+(t.y-r.y)/3},c={x:r.x+(n.x-r.x)/3,y:r.y+(n.y-r.y)/3},u={x:o.x+(n.x-o.x)/3,y:o.y+(n.y-o.y)/3},l={x:o.x+(i.x-o.x)/3,y:o.y+(i.y-o.y)/3};return[["M ".concat(t.x,",").concat(t.y),"L ".concat(a.x,",").concat(a.y),"Q ".concat(r.x,",").concat(r.y," ").concat(c.x,",").concat(c.y),"L ".concat(n.x,",").concat(n.y),"L ".concat(u.x,",").concat(u.y),"Q ".concat(o.x,",").concat(o.y," ").concat(l.x,",").concat(l.y),"L ".concat(i.x,",").concat(i.y)].join(" ")]}({source:{x:E,y:j},target:{x:P,y:_},P1:D.P1,P2:L,P3:D.P2}),1)[0],C=function(e,t){var r=t.x-e.x,n=t.y-e.y,o=Math.atan2(n,r)*(180/Math.PI);return o>90?o-=180:o<-90&&(o+=180),o}({x:E,y:j},{x:P,y:_});return n.createElement(n.Fragment,null,n.createElement("path",{id:t,className:"react-flow__edge-path",d:I,markerEnd:S?"url(#arrow-selected)":"url(#arrow)",style:B(B({},a),{},{stroke:O?S?w.primaryColor:"#000":S?w.primaryColor:"#d7d7d7",strokeWidth:S?"2px":"1px"})}),n.createElement(F,{id:t,label:s,filelocation:f,disabled:d,style:{transform:"translate(-50%, -50%) translate(".concat(L.x,"px,").concat(L.y,"px) rotate(").concat(C,"deg)")}}))},$={"table-edge":function(e){e.source,e.target;var t=e.sourceX,r=e.sourceY,i=e.targetX,a=e.targetY,c=e.sourcePosition,u=e.targetPosition,l=e.markerEnd,s=(e.data,e.style||{}),f=(s._isLoop,s._isPoly,s._isRevert,s._offset),p=function(e,t){var r=e.sourceX,n=e.sourceY,o=e.targetX,i=e.targetY,a=(r+o)/2,c=(n+i)/2;return"M ".concat(r," ").concat(n," Q ").concat(a," ").concat(c+t," ").concat(o," ").concat(i)}({sourceX:t,sourceY:r,sourcePosition:c,targetX:i,targetY:a,targetPosition:u},void 0===f?0:f);return n.createElement(n.Fragment,null,n.createElement(o.u5,{path:p,markerEnd:l}))},"graph-edge":J},W=function(e){var t=e.fromX,r=e.fromY,o=e.toX,i=e.toY;return n.createElement("g",{style:{zIndex:-1,position:"absolute"}},n.createElement("path",{fill:"none",stroke:"#000",strokeWidth:1,className:"animated",d:"M".concat(t,",").concat(r," L ").concat(o,",").concat(i),markerEnd:"url(#arrow-dragging)"}),n.createElement("circle",{cx:o,cy:i,fill:"#fff",r:50,className:"animated",stroke:"#000",strokeWidth:1,strokeDasharray:"10, 5"}))},Q=(s.Z.useToken,function(e){var t=e.selectedColor,r=void 0===t?"red":t,o=e.color,i=void 0===o?"#000":o;return n.createElement("svg",{id:"arrow-marker-svg",width:"200",height:"200",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:0,left:0,zIndex:-1}},n.createElement("defs",null,n.createElement("marker",{id:"arrow",markerWidth:"10",markerHeight:"10",refX:"8",refY:"3",orient:"auto",markerUnits:"strokeWidth"},n.createElement("path",{d:"M0,0 L0,6 L9,3 z",fill:i})),n.createElement("marker",{id:"arrow-selected",markerWidth:"10",markerHeight:"10",refX:"8",refY:"3",orient:"auto",markerUnits:"strokeWidth"},n.createElement("path",{d:"M0,0 L0,6 L9,3 z",fill:r})),n.createElement("marker",{id:"arrow-dragging",markerWidth:"10",markerHeight:"10",refX:"60",refY:"3",orient:"auto",markerUnits:"strokeWidth"},n.createElement("path",{d:"M0,0 L0,6 L9,3 z",fill:i,className:"animated",strokeDasharray:"10, 5"}))))}),K=r(28541),ee=r(62950),te=r(42655),re=r(44575),ne=r(64681),oe=r(4507),ie=r(2881);var ae=o.RX,ce=1,ue=1,le=function(){return"Vertex_".concat(ce++)},se=function(){return"Edge_".concat(ue++)},fe=function(e){return JSON.parse(JSON.stringify(e))};function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ve(e,t,r){var n;return n=function(e,t){if("object"!=pe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==pe(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ge(e){return e%2==0}function be(e){return!ge(e)}var we=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{poly:30,loop:10,loopLabelPosition:1},r=t.poly,n=void 0===r?30:r,o=t.loop,i=void 0===o?10:o,a=(t.loopLabelPosition,{});e.forEach((function(e,t){var r=me({},e),n=r.source,o=r.target,i="".concat(n,"-").concat(o),c="".concat(o,"-").concat(n);a[i]?a[i].push(r):a[c]?a[c].push(r):a[i]=[r]}));var c=Object.values(a),u=[];return c.forEach((function(e){if(e.length>1){var t=ge(e.length);e.forEach((function(r,o){var c,l=r.source,s=r.target,f=r.data,p="".concat(s,"-").concat(l),d=l===s,y=!!a[p],h=o;if(t){var m=Math.ceil((h+1)/2);c=n*m}else{var v=be(h)?h+1:h,g=Math.ceil(v/2);c=n*g}var b=ge(h)?c:-c,w="poly";y&&(b=-b),d&&(w="loop",b=h*i),u.push(me(me({},r),{},{data:me(me({},f),{},{_extra:{count:e.length,index:h,type:w,isPoly:!0,isLoop:d,offset:b,isRevert:y}})}))}))}else{var r=de(e,1)[0],o=r.source,c=r.target,l=r.data;u.push(me(me({},r),{},{data:me(me({},l),{},{_extra:{count:1,index:0,isLoop:o===c}})}))}})),u},Oe=r(6724),Se=r.n(Oe);function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}var Ee=["position","key","id","_fromEdge","data"],je=["source","target","id","data"],Pe=["position","key","id","_fromEdge"];function _e(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){Ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ae(e,t,r){var n;return n=function(e,t){if("object"!=xe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==xe(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Ie=new(Se().graphlib.Graph);Ie.setDefaultEdgeLabel((function(){return{}}));var Ce=!1,Ne={};function Ze(e,t){var r=e.nodes,n=e.edges;return Ie.setGraph({rankdir:t}),r.forEach((function(e){var t=e._fromEdge;Ie.setNode(e.id,{width:270,height:t?100:200})})),n.forEach((function(e){Ie.setEdge(e.source,e.target)})),Se().layout(Ie),Ie}function Fe(e,t){return e.map((function(e){var r=e.position,n=e.key,i=e.id,a=e._fromEdge,c=e.data,u=void 0===c?{}:c,l=De(e,Ee);r&&(Ne[i]=r);var s=Ne[i]||Ie.node(e.id)||{x:500*Math.random(),y:500*Math.random()};return{id:i||n,data:Te(Te({},u),l),type:"table"===t?"table-node":"graph-node",_fromEdge:a,targetPosition:o.Ly.Left,sourcePosition:o.Ly.Right,position:r||{x:s.x,y:s.y}}}))}function Me(e,t){return we(e).map((function(e,r){var n=e.id,o=e.source,i=e.target,a=e.data;return{id:n||"".concat(o,"-").concat(i,"-").concat(r),source:o,target:i,type:"table"===t?"smoothstep":"graph-edge",data:a}}))}function Ge(e,t,r){var n=r.displayMode;if("table"===n){var o=ze({nodes:e,edges:t});return Ze(o,"LR"),{nodes:Re(o.nodes,n),edges:Me(o.edges,n)}}return"graph"===n?(Ce||(Ze({nodes:e,edges:t},"LR"),Ce=!0),{nodes:Fe(e,n),edges:Me(t,n)}):{nodes:[],edges:[]}}function ze(e){var t=e.nodes,r=e.edges,n=[],o=r.map((function(e){var t=e.source,r=e.target,o=e.id,i=e.data,a=De(e,je);return n.push({id:(0,ee.Z)(),source:t,target:o,type:"smoothstep",data:Te(Te({},a),{},{label:""})}),n.push({id:(0,ee.Z)(),source:o,target:r,type:"smoothstep",data:{label:""}}),Te(Te({},e),{},{_fromEdge:!0,id:e.id,data:i,position:{x:0,y:0}})}));return{nodes:[].concat(_e(t.map((function(e){return Te(Te({},e),{},{position:{x:0,y:0}})}))),_e(o.map((function(e){return Te({},e)})))),edges:n}}function Re(e,t){return e.map((function(e){var r=e.position,n=e.key,i=e.id,a=e._fromEdge,c=De(e,Pe),u=Ie.node(e.id)||{x:500*Math.random(),y:500*Math.random()};return Ne[i]=r,Te(Te({},e),{},{id:i||n,type:"table"===t?"table-node":"graph-node",_fromEdge:a,targetPosition:o.Ly.Left,sourcePosition:o.Ly.Right,position:r||{x:u.x,y:u.y},data:Te(Te({_fromEdge:a},c),{},{label:i})})}))}function Ue(e){return function(e){if(Array.isArray(e))return Ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qe=function(e){return JSON.parse(JSON.stringify(e))},Be=function(){var e=(0,p.qp)(),t=e.store,r=e.updateStore,i=(0,o._K)(),a=i.screenToFlowPosition,c=i.fitBounds,u=(i.fitView,t.displayMode),l=t.nodes,s=t.edges,f=t.hasLayouted,d=t.elementOptions,y=(0,n.useRef)(null),h=(0,n.useRef)(null),m=(0,n.useRef)([]),v=(0,n.useCallback)((function(e,t){var r=t.nodeId;y.current=r,d.isConnectable}),[]),g=(0,n.useCallback)((function(e){if(y.current&&d.isConnectable)if(e.target.classList.contains("react-flow__pane")){var t=(0,ee.Z)(),n=(0,ee.Z)(),o=a({x:e.clientX,y:e.clientY}),i={id:t,position:{x:o.x-50,y:o.y-50},type:"graph-node",data:{label:le()}};r((function(e){e.nodes=[].concat(Ue(e.nodes),[i]),e.edges=[].concat(Ue(e.edges),[{id:n,source:y.current,target:t,type:"graph-edge",data:{label:se()}}])}))}else{var c=e.target.dataset.nodeid,l=(0,ee.Z)(),s=se();r((function(e){e.edges=Me([].concat(Ue(e.edges),[{id:l,data:{label:s},source:y.current||"",target:c}]),u)}))}}),[a]);(0,n.useEffect)((function(){if(l.length>0&&!f){var e=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.iterations,o=void 0===n?1e3:n,i=r.center,a=void 0===i?{x:window.innerWidth/2,y:window.innerHeight/2}:i,c=250,u=c*(0===t.length?.5:8)*-1,l=(0,te.Z)(e).force("link",(0,re.Z)(t).id((function(e){return e.id})).distance(c)).force("charge",(0,ne.Z)().strength(u)).force("center",(0,oe.Z)(a.x,a.y)).force("radial",(0,ie.Z)(0,a.x,a.y).strength(.01)).stop(),s=0;s<o;s++)l.tick();return e.forEach((function(e){delete e.index,delete e.vx,delete e.vy,e.position={x:e.x,y:e.y},delete e.x,delete e.y})),t.forEach((function(e){delete e.index,e.source=e.source.id,e.target=e.target.id})),{nodes:e,edges:t,simulation:l}}(fe(l),fe(s));h.current&&clearTimeout(h.current);var t=setTimeout((function(){var t=ae(e.nodes);c(t,{duration:300})}),300);h.current=t,r((function(t){t.hasLayouted=!0,t.nodes=e.nodes,t.edges=e.edges}))}}),[l,s,f]),(0,n.useEffect)((function(){var e=document.getElementById("arrow-marker-svg"),t=document.querySelector(".react-flow__viewport");e&&t&&t.appendChild(e)}),[]);return{store:t,updateStore:r,onDoubleClick:function(){var e=ae(l);c(e,{duration:600})},onEdgesChange:function(e){d.isConnectable&&r((function(t){t.edges=(0,o.yn)(e,qe(t.edges))}))},onNodesChange:function(e){var t=e[0].type;d.isConnectable&&"position"!==t&&r((function(t){t.nodes=(0,o.Fb)(e,qe(t.nodes))})),"position"===t&&(e[0].dragging?(m.current=e,r((function(t){t.nodePositionChange=e}))):r((function(e){e.nodes=(0,o.Fb)(m.current,e.nodes)})))},onConnectStart:v,onConnectEnd:g,onReactFlowInit:function(e){if(e){var t=e.toObject().nodes,r=(0,o.RX)(t);c(r,{duration:600})}}}},He=r(84155);function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Je=function(e){var t=Be(),r=t.store,u=t.onDoubleClick,l=t.onEdgesChange,s=t.onNodesChange,f=t.onConnectStart,p=t.onConnectEnd,d=t.onReactFlowInit,y=r.nodes,h=r.edges,m=r.theme,v=r.collapsed,g=r.appMode,b=r.nodePositionChange,w=Ve((0,n.useState)({isLocked:!1}),2),O=(w[0],w[1],(0,c.useStudioProvier)().isLight),S=0===y.length,x=O?v.left&&v.right?"#fff":"#f4f5f5":"#161616",j=n.createElement(He.Z,{id:"Start sketching a model, a vertex label is a named grouping or categorization of nodes within the graph dataset",values:{icon:n.createElement(K.Z,null)}}),P="PURE"===g,_=0===b.length?y:(0,o.Fb)(b,y);return n.createElement("div",{style:{height:"100%",width:"100%"}},n.createElement("div",{style:{height:"100%",width:"100%",position:"absolute"}},n.createElement(o.x$,{nodes:_,edges:h,onNodesChange:s,onEdgesChange:l,nodeTypes:E,edgeTypes:$,connectionLineComponent:W,onConnectStart:f,onConnectEnd:p,zoomOnDoubleClick:!1,nodesDraggable:!0,proOptions:{hideAttribution:!0},onDoubleClick:u,minZoom:.01,onInit:d},n.createElement(Q,{selectedColor:m.primaryColor,color:O?"#000":"#d7d7d7"}),!P&&n.createElement(i.A,{style:{background:x}}),S&&n.createElement(c.EmptyCanvas,{description:j,isLight:!O}),!P&&n.createElement(a.a,{style:{backgroundColor:O?"":"#161616"}}))))},$e=r(48722),We=r(96149),Qe=r(57526),Ke=r(54016),et=r(16889);function tt(e){var t=e.type,r=e.id,n=(0,p.qp)().updateStore;return{handleChangeLabel:function(e){var o=e.target.value;n((function(e){e.displayMode="table","edges"===t&&(e.edges=e.edges.map((function(e){return e.id===r&&(e.data.label=o),e}))),"nodes"===t&&(e.nodes=e.nodes.map((function(e){return e.id===r&&(e.data.label=o),e})))}))},handleDataFieldsChange:function(e,t,o){n((function(n){n.edges=n.edges.map((function(n){if(n.id===r){var i=e.index,a=e.token;n.data[t]={key:r,index:i,name:o,token:a}}return n}))}))},handleProperty:function(e){n((function(n){"edges"===t&&(n.edges=n.edges.map((function(t){return t.id===r&&(t.data.properties=e),t}))),"nodes"===t&&(n.nodes=n.nodes.map((function(t){return t.id===r&&(t.data.properties=e),t})))}))}}}var rt=r(17905),nt=r(9739),ot=r(38943),it=r(86132),at=r(37528),ct=r(62299),ut=r(89543),lt=r(93681);function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function ft(){ft=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var S=g.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==st(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(st(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach((function(t){yt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yt(e,t,r){var n;return n=function(e,t){if("object"!=st(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==st(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ht(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gt=function(e){return new Promise((function(t){return setTimeout(t,e)}))},bt=function(e){var t=e.file,r=mt(n.useState({progress:0}),2),o=r[0],i=r[1],a=o.progress,c=function(){var e,r=(e=ft().mark((function e(){var r,n,o,a,c,u;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.size,n=navigator.connection.downlink/2*1024*1024,o=50,a=Math.round(r/n*1e3),console.log(a/o),c=ft().mark((function e(){var t;return ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(a/o);case 2:t=Math.round((u+1)/o*99),i((function(e){return dt(dt({},e),{},{progress:t})}));case 4:case"end":return e.stop()}}),e)})),u=0;case 7:if(!(u<o)){e.next=12;break}return e.delegateYield(c(),"t0",9);case 9:u++,e.next=7;break;case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ht(i,n,o,a,c,"next",e)}function c(e){ht(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return n.useEffect((function(){c()}),[]),n.createElement(lt.Z,{percent:a,size:"small",status:"active",style:{margin:"2px 4px 0px 6px"}})};function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function Ot(){Ot=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var S=g.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==wt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(wt(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(Object(r),!0).forEach((function(t){Et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Et(e,t,r){var n;return n=function(e,t){if("object"!=wt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==wt(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jt(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Pt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){jt(i,n,o,a,c,"next",e)}function c(e){jt(i,n,o,a,c,"throw",e)}a(void 0)}))}}function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var kt=Ke.Z.Text,Tt=(0,n.forwardRef)((function(e,t){var r=e.schema,o=e.type,i=e.handleUploadFile,a=r.id,u=r.data,l=u.filelocation,s=(u.isBind,(0,at.Z)()),f=function(e){var t=e.type,r=e.id,n=(0,p.qp)().updateStore;return{handleChangeUpload:function(e,o){var i=o||{},a=i.dataFields,u=void 0===a?[]:a,l=i.delimiter,s=void 0===l?"":l;n((function(n){n[t].forEach((function(n){var o;if(n.id===r&&(n.data.filelocation=e,n.data.dataFields=u,n.data.delimiter=s,null===(o=n.data.properties)||void 0===o||o.forEach((function(e){e.token=e.name,e.index=u.findIndex((function(t){return t===e.name}))})),"edges"===t)){var i=c.Utils.inferredGraphFields(u),a=i.sourceField,l=i.targetField;console.log(u,i),n.data.source_vertex_fields={index:null==u?void 0:u.findIndex((function(e){return e===a})),token:a||""},n.data.target_vertex_fields={index:null==u?void 0:u.findIndex((function(e){return e===l})),token:l||""}}}))}))},handleChangeInput:function(e){n((function(n){n[t].forEach((function(t){var n;t.id===r&&(t.data.dataFields=[],t.data.filelocation=e.target.value,null===(n=t.data.properties)||void 0===n||n.forEach((function(e,t){e.token="",e.index=t})))}))}))},handleDeleteLocation:function(){n((function(e){e[t].forEach((function(e){var n;e.id===r&&(e.data.filelocation="",e.data.dataFields=[],e.data.delimiter="",null===(n=e.data.properties)||void 0===n||n.forEach((function(e,t){e.token="",e.index=t})),"edges"===t&&(e.data.source_vertex_fields={index:0,token:""},e.data.target_vertex_fields={index:0,token:""}))}))}))}}}({id:a,type:o}),d=f.handleChangeInput,y=f.handleChangeUpload,h=f.handleDeleteLocation,m=_t((0,n.useState)({isLoading:!1,file:new File([],""),size:""}),2),v=m[0],g=m[1],b=v.isLoading,w=v.size,O=v.file;(0,n.useImperativeHandle)(t,(function(){return{upload:S}}));var S=function(){var e=Pt(Ot().mark((function e(t){var r,n,o,a,u,l,s,f;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g((function(e){return xt(xt({},e),{},{isLoading:!0,file:t,size:c.Utils.getFileSize(t.size)})})),e.next=3,i(t);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return r=e.t0,n=r.file_path,o=void 0===n?"":n,e.next=11,c.Utils.parseFile(t);case 11:a=e.sent,u=c.Utils.extractHeaderAndDelimiter(a),l=u.header,s=u.quoting,f=u.delimiter,g((function(e){return xt(xt({},e),{},{isLoading:!1})})),y(o,{dataFields:l,quoting:s,delimiter:f});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Pt(Ot().mark((function e(t){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.file,S(r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=b?n.createElement(ct.Z,null):n.createElement(ut.Z,null),j=b?"Uploading...":"Upload",P=b?"The file size is ".concat(w,", so this may take a bit of time to process. Please be patient..."):"Upload";return n.createElement("div",{style:{borderRadius:"0px 0px 8px 8px"}},n.createElement(Qe.Z,{vertical:!0,gap:8},n.createElement(kt,null,"Location"),n.createElement(Qe.Z,{justify:"space-between",align:"center"},n.createElement($e.Z.Compact,{size:"small",style:{width:"100%"}},n.createElement(n.Fragment,null,n.createElement(rt.Z,{title:P},n.createElement(nt.Z,{showUploadList:!1,customRequest:x},n.createElement(ot.ZP,{icon:E},n.createElement("span",{style:{fontSize:"12px"}},n.createElement(He.Z,{id:j}))))),b?n.createElement(bt,{file:O}):l?n.createElement(et.Z,{style:{width:"100%"},disabled:!0,value:l}):n.createElement(et.Z,{style:{width:"100%"},defaultValue:l,placeholder:s.formatMessage({id:"Please manually input the odps file location"}),onBlur:d}))),n.createElement($e.Z,{size:0},l&&n.createElement(rt.Z,{title:"delete and re-upload"},n.createElement(ot.ZP,{type:"text",size:"small",icon:n.createElement(it.Z,{onClick:h})}))))))})),At=Tt,Dt=function(e){var t=e.id,r=e.source,o=e.target,i=e.mappingColumn,a=e.source_vertex_fields,u=e.target_vertex_fields,l=(0,p.qp)().store.nodes,s=tt({type:"edges",id:t}).handleDataFieldsChange,f=function(e,t,r){var n,o,i,a,c,u;return e.forEach((function(e){var n=e.id,o=e.data,l=o.properties,s=void 0===l?[]:l,f=o.label;n===t&&(i=f,c=s.find((function(e){return e.primaryKey}))),n===r&&(a=f,u=s.find((function(e){return e.primaryKey})))})),{source_label:i,target_label:a,target_primary_key:null===(n=u)||void 0===n?void 0:n.name,source_primary_key:null===(o=c)||void 0===o?void 0:o.name}}(l,r,o),d=f.source_label,y=f.target_label,h=f.target_primary_key,m=f.source_primary_key;return n.createElement(n.Fragment,null,n.createElement(Qe.Z,{justify:"space-between",gap:"12px",align:"center"},n.createElement(Qe.Z,{vertical:!0,gap:"small",flex:"1"},n.createElement(Ke.Z.Text,null,n.createElement(He.Z,{id:"Source"})),n.createElement(et.Z,{value:d,disabled:!0,size:"small"})),i&&n.createElement(Qe.Z,{vertical:!0,gap:"small"},n.createElement(Ke.Z.Text,null,n.createElement(He.Z,{id:"Data Fields"})),n.createElement(c.MappingFields,{value:a,onChange:function(e){return s(e,"source_vertex_fields",m)},componentType:(null==i?void 0:i.type)||"Select",options:(null==i?void 0:i.options)||[]}))),n.createElement(Qe.Z,{justify:"space-between",gap:"12px",style:{marginTop:"4px"}},n.createElement(Qe.Z,{vertical:!0,gap:"small",flex:"1"},n.createElement(Ke.Z.Text,null,n.createElement(He.Z,{id:"Target"})),n.createElement(et.Z,{value:y,disabled:!0,size:"small"})),i&&n.createElement(Qe.Z,{vertical:!0,gap:"small"},n.createElement(Ke.Z.Text,null,n.createElement(He.Z,{id:"Data Fields"})),n.createElement(c.MappingFields,{value:u,onChange:function(e){return s(e,"target_vertex_fields",h)},componentType:(null==i?void 0:i.type)||"Select",options:(null==i?void 0:i.options)||[]}))))},It=(0,n.forwardRef)((function(e,t){var r=e.schema,o=e.type,i=e.appMode,a=e.queryPrimitiveTypes,u=e.handleUploadFile,l=r.id,s=r.source,f=r.target,p=r.data||{},d=p.dataFields,y=p.properties,h=void 0===y?[]:y,m=p.label,v=p.source_vertex_fields,g=p.target_vertex_fields,b=p.disabled,w=void 0!==b&&b,O=tt({type:o,id:l}),S=O.handleChangeLabel,x=O.handleProperty,E="DATA_IMPORTING"===i?{options:(null==d?void 0:d.map((function(e){return{label:e,value:e}})))||[]}:null;return n.createElement("div",null,n.createElement(Qe.Z,{vertical:!0,gap:12,style:{margin:"0px 12px"}},"DATA_IMPORTING"===i?n.createElement(At,{ref:t,schema:r,type:o,handleUploadFile:u}):n.createElement(n.Fragment,null,n.createElement(Ke.Z.Text,null,n.createElement(He.Z,{id:"Label"})),n.createElement(et.Z,{value:m,onChange:S,disabled:w})),"edges"===o&&n.createElement(Dt,{id:l,source:s,target:f,source_vertex_fields:v,target_vertex_fields:g,mappingColumn:E}),n.createElement(c.PropertiesList,{properties:h,onChange:x,typeColumn:{options:a()},disabled:w,mappingColumn:E})))})),Ct=It,Nt=r(77469),Zt=r(75377),Ft=s.Z.useToken,Mt=window.GS_ENGINE_TYPE;function Gt(e){var t=e.appMode,r=e.type,n=e.properties,o=void 0===n?[]:n,i=e.filelocation;if("DATA_IMPORTING"===t){if(!i){if("nodes"===r)return"This type of vertex has not been bound to a data source yet";if("edges"===r)return"This type of edges has not been bound to a data source yet"}return null}if("DATA_MODELING"===t){if("nodes"===r){if(!o.length)return"A vertex must have at least one property.";if(!o.some((function(e){return e.primaryKey})))return"A vertex must have a primary key.";if(!o.every((function(e){return e.type})))return"Please select a primate type."}if("edges"===r){if("interactive"===Mt&&o.length>1)return"A edge can only have one property.";if(!o.every((function(e){return e.type})))return"Please select a primate type."}return null}return null}var zt=function(e){var t=e.appMode,r=Gt({appMode:void 0===t?"DATA_IMPORTING":t,type:e.type,properties:e.properties,filelocation:e.filelocation}),o=Ft().token;return r?n.createElement(rt.Z,{title:n.createElement(He.Z,{id:"".concat(r)})},n.createElement(ot.ZP,{type:"text",size:"small",icon:n.createElement(Zt.Z,{style:{color:o.colorErrorActive}})})):null},Rt=r(67492);function Ut(e){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function Yt(){Yt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var S=g.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Ut(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Ut(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(r),!0).forEach((function(t){Ht(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ht(e,t,r){var n;return n=function(e,t){if("object"!=Ut(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ut(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vt(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var Xt=function(e){var t=e.onCreateLabel,r=void 0===t?function(){return!1}:t,o=e.schema,i=e.type,a=e.nodesMap,c=o.data,u=o.id,l=c.saved,s=c.properties,f=void 0===s?[]:s,d=c.filelocation,y=(0,p.qp)(),h=y.updateStore,m=y.store,v=m.nodes,g=m.appMode,b=function(){var e,t=(e=Yt().mark((function e(t){return Yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),"nodes"!==i){e.next=6;break}return e.next=4,r(i,o);case 4:e.sent&&h((function(e){e.nodes=e.nodes.map((function(e){return e.id===u?Bt(Bt({},e),{},{data:Bt(Bt({},e.data),{},{disabled:!0,saved:!0})}):e}))}));case 6:if("edges"!==i){e.next=11;break}return e.next=9,r(i,o,v);case 9:e.sent&&h((function(e){e.edges=e.edges.map((function(e){return e.id===u?Bt(Bt({},e),{},{data:Bt(Bt({},e.data),{},{disabled:!0,saved:!0})}):e}))}));case 11:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Vt(i,n,o,a,c,"next",e)}function c(e){Vt(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();if("groot"===window.GS_ENGINE_TYPE&&!l){var w=Gt({appMode:g,type:i,properties:f,filelocation:d}),O=w||"Save label",S=!!w;if("edges"===i&&a){var x=o,E=x.source,j=x.target,P=a[E],_=a[j];P&&_&&P.data.saved&&_.data.saved||(S=!0,O="Please save the related vertex first")}return n.createElement(rt.Z,{title:O},n.createElement(ot.ZP,{size:"small",type:"text",onClick:b,icon:n.createElement(Rt.Z,null),disabled:S}))}return null};function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function $t(){$t=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var S=g.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Jt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Jt(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(r),!0).forEach((function(t){Kt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kt(e,t,r){var n;return n=function(e,t){if("object"!=Jt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Jt(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function er(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var nr=function(e){var t=e.onDeleteLabel,r=void 0===t?function(){return!0}:t,o=e.schema,i=e.type,a=e.nodesMap,u=o.data,l=o.id,s=u.saved,f=u.label,d=(0,p.qp)(),y=d.updateStore,h=d.store.appMode,m=tr(n.useState({loading:!1}),2),v=m[0],g=m[1],b=function(){var e,t=(e=$t().mark((function e(t){var n,c,u,p,d,h;return $t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),g((function(e){return Qt(Qt({},e),{},{loading:!0})})),n=!0,"nodes"!==i){e.next=9;break}if(!s){e.next=8;break}return e.next=7,r(i,f);case 7:n=e.sent;case 8:n&&y((function(e){e.nodes=e.nodes.filter((function(e){return e.id!==l})),e.edges=e.edges.filter((function(e){return e.source!==l&&e.target!==l}))}));case 9:if("edges"!==i||!a){e.next=18;break}if(u=(c=o).source,p=c.target,d=a[u],h=a[p],!s){e.next=17;break}return e.next=16,r(i,f,d.data.label,h.data.label);case 16:n=e.sent;case 17:n&&y((function(e){e.edges=e.edges.filter((function(e){return e.id!==l}))}));case 18:g((function(e){return Qt(Qt({},e),{},{loading:!1})}));case 19:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){er(i,n,o,a,c,"next",e)}function c(e){er(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return"DATA_MODELING"===h?n.createElement(rt.Z,{title:n.createElement(He.Z,{id:"Delete label"})},n.createElement(ot.ZP,{size:"small",type:"text",loading:v.loading,onClick:b,icon:n.createElement(c.Icons.Trash,null)})):null},or=!0,ir=function(e){var t=e.children,r=e.currentId,o=e.items,i=(0,n.useRef)(null);return(0,n.useEffect)((function(){if(or){var e=i.current,t=o[r];if(e&&t){var n=47*t.index;e.scrollTo({top:n,behavior:"smooth"})}}or=!0}),[r]),n.createElement("div",{ref:i,style:{position:"absolute",top:"65px",bottom:"0px",left:0,right:0,overflow:"scroll",padding:"0px 10px 0px 10px"}},t)};function ar(e){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(e)}function cr(){cr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var S=g.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==ar(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(ar(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){sr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sr(e,t,r){var n;return n=function(e,t){if("object"!=ar(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ar(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ar(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fr(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||yr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dr(e){return function(e){if(Array.isArray(e))return hr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yr(e,t){if(e){if("string"==typeof e)return hr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hr(e,t):void 0}}function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var mr=function(e){var t=(0,at.Z)(),r=(0,p.qp)(),o=r.store,i=r.updateStore,a=o.nodes,u=o.edges,l=o.currentType,s=o.currentId,f=(o.elementOptions,e.appMode),d=e.handleUploadFile,y=e.queryPrimitiveTypes,h=e.batchUploadFiles,m=e.onCreateLabel,v=e.onDeleteLabel,g=new Set,b=[].concat(dr(a),dr(u)).reduce((function(e,t){return e[t.id]={ref:n.createRef(),file:t.data.label+".csv"},g.add(t.id),e}),{});window.ITEM_REFS=b;var w=pr(n.useState((function(){return{autoUpload:!1}})),2),O=w[0],S=w[1],x=O.autoUpload,E=x?dr(g.values()):[s],j=!x,P={},_={},L={},k=a.map((function(e,t){var r=e.id,o=e.data||{label:r},i=o.label,a=o.properties,c=void 0===a?[]:a,u=o.filelocation;return P[r]={index:t},L[r]=e,{key:r,label:i,extra:n.createElement($e.Z,null,n.createElement(Xt,{schema:e,type:"nodes",onCreateLabel:m}),n.createElement(nr,{schema:e,type:"nodes",onDeleteLabel:v}),n.createElement(zt,{type:"nodes",filelocation:u,appMode:f,properties:JSON.parse(JSON.stringify(c))})),children:n.createElement(Ct,{ref:b[r].ref,schema:JSON.parse(JSON.stringify(e)),type:"nodes",queryPrimitiveTypes:y,handleUploadFile:d,appMode:f})}})),T=u.map((function(e,t){var r=e.id,o=e.data||{label:r},i=o.label,a=o.properties,c=void 0===a?[]:a,u=o.filelocation;return _[r]={index:t},{key:r,label:i,extra:n.createElement($e.Z,null,n.createElement(Xt,{nodesMap:L,schema:e,type:"edges",onCreateLabel:m}),n.createElement(nr,{nodesMap:L,schema:e,type:"edges",onDeleteLabel:v}),n.createElement(zt,{type:"edges",filelocation:u,appMode:f,properties:JSON.parse(JSON.stringify(c))})),children:n.createElement(Ct,{ref:b[r].ref,schema:JSON.parse(JSON.stringify(e)),type:"edges",queryPrimitiveTypes:y,handleUploadFile:d,appMode:f})}})),A=function(e){i((function(t){t.currentId=e[0]})),or=!1},D=function(){var e,t=(e=cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("DATA_IMPORTING"===f){e.next=2;break}return e.abrupt("return");case 2:h&&(i((function(e){e.currentType="edges"})),S((function(e){return lr(lr({},e),{},{autoUpload:!0})})),h().then((function(e){if(e){var t=Object.values(window.ITEM_REFS).reduce((function(e,t){return console.log("acc",e,t),lr(lr({},e),{},sr({},t.file,t.ref))}),{});e.forEach((function(e){var r=t[e.name];r&&r.current&&r.current.upload(e)}))}else S((function(e){return lr(lr({},e),{},{autoUpload:!1})})),i((function(e){e.currentType="nodes"}))})));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){fr(i,n,o,a,c,"next",e)}function c(e){fr(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,n.useEffect)((function(){var e=setTimeout((function(){D()}),200);return function(){clearTimeout(e)}}),[]),n.createElement("div",null,n.createElement(c.SegmentedTabs,{block:!0,queryKey:"element",value:l,onChange:function(e){return i((function(t){t.currentType=e}))},items:[{key:"nodes",label:t.formatMessage({id:"Vertex"}),children:n.createElement(ir,{currentId:s,items:P},n.createElement(We.Z,{expandIcon:function(e){var t=e.isActive;return n.createElement(Nt.Z,{rotate:t?90:0})},accordion:j,items:k,activeKey:E,onChange:A}))},{key:"edges",label:t.formatMessage({id:"Edges"}),children:n.createElement(ir,{currentId:s,items:_},n.createElement(We.Z,{expandIcon:function(e){var t=e.isActive;return n.createElement(Nt.Z,{rotate:t?90:0})},accordion:j,items:T,activeKey:E,onChange:A}))}]}))},vr=r(24279),gr=function(e){var t=(0,c.useSection)().toggleRightSide;return n.createElement(ot.ZP,{type:"text",icon:n.createElement(c.Icons.Sidebar,{revert:!0}),onClick:function(){t()}})},br=function(e){var t=e.style,r=(0,p.qp)(),o=r.updateStore,i=r.store.elementOptions,a=(0,c.useStudioProvier)().isLight,u=i.isEditable?n.createElement(He.Z,{id:"The current mode is preview only, and does not support clearing the model"}):n.createElement(He.Z,{id:"Clear graph model"});return n.createElement(rt.Z,{title:u,placement:"right"},n.createElement(ot.ZP,{disabled:i.isEditable,onClick:function(){ce=1,ue=1,o((function(e){e.nodes=[],e.edges=[]}))},style:t,type:"text",icon:n.createElement(c.Icons.Trash,{style:{color:a?i.isEditable?"#ddd":"#000":i.isEditable?"#585858":"#fff"}})}))};function wr(e){return function(e){if(Array.isArray(e))return Or(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Or(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Or(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Sr=c.Icons.AddNode,xr=0,Er=function(e){var t=e.style,r=(0,o._K)().setCenter,i=(0,p.qp)(),a=i.updateStore,c=!i.store.elementOptions.isConnectable,u=c?n.createElement(He.Z,{id:"The current mode is preview only, and does not support creating new vertex"}):n.createElement(He.Z,{id:"Create new vertex"});return n.createElement(rt.Z,{title:u,placement:"right"},n.createElement(ot.ZP,{disabled:c,onClick:function(){a((function(e){var t=le(),n=200*xr,o=100*xr;xr++,e.nodes=[].concat(wr(e.nodes),[{id:(0,ee.Z)(),position:{x:n,y:o},type:"graph-node",data:{label:t}}]),r(n+50,o+50,{duration:600,zoom:1})}))},style:t,type:"text",icon:n.createElement(Sr,null)}))},jr=r(61448),Pr=r(5490);function _r(e){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(e)}function Lr(){Lr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var S=g.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==_r(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(_r(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function kr(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var Tr=function(e){var t=function(){var e,t=(e=Lr().mark((function e(){var t,r;return Lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=document.querySelector(".react-flow__viewport"))){e.next=6;break}return e.next=4,(0,Pr.KT)(t,{});case 4:r=e.sent,c.Utils.downloadImage(r,"model.svg");case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){kr(i,n,o,a,c,"next",e)}function c(e){kr(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return n.createElement(rt.Z,{title:n.createElement(He.Z,{id:"Save graph model to svg image"}),placement:"right"},n.createElement(ot.ZP,{type:"text",icon:n.createElement(jr.Z,null),onClick:t}))},Ar=r(52018),Dr=r(31097),Ir=function(e){var t="label";var r=function(e){var t=[],r=[];return e.forEach((function(e){var n=e.meta,o=e.contents,i=n.graphFields,a=n.name,c=n.header,u=n.delimiter,l=i.idField,s=i.sourceField,f=void 0===s?"source":s,p=i.targetField,d=void 0===p?"target":p,y=i.type,h=a.split(".csv")[0],m=function(e,t,r){var n=function(e){return e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")}(e).split("\n");return n.slice(1).map((function(e){for(var n=e.split(r),o={},i=0;i<t.length;i++)o[t[i]]=n[i];return o}))}(o,c,u);"Vertex"===y&&m.forEach((function(e){t.push({id:e[l],label:h,data:e,meta:n})})),"Edge"===y&&m.forEach((function(e){r.push({id:"".concat(e[f],"-").concat(e[d]),label:h,source:e[f],target:e[d],data:e,meta:n})}))})),{nodes:t,edges:r}}(e),n=function(e,r){var n=e.nodes,o=e.edges,i=new Map,a=new Map,c=r||{},u=c.nodeLabelFromProperties,l=c.edgeLabelFromProperties,s=function e(t,r){void 0===r&&(r="");var n=[];for(var o in t)if(t.hasOwnProperty(o)){var i=t[o],a=r?"".concat(r,".").concat(o):o;i&&"[object Object]"===Object.prototype.toString.call(i)&&!Array.isArray(i)?n.push.apply(n,e(i,a)):n.push({name:a,type:f(i)})}return n},f=function(e){return null===e?"null":Array.isArray(e)?"array":e instanceof Date?"date":"[object Number]"!==Object.prototype.toString.call(e)||isNaN(e)?"[object Boolean]"===Object.prototype.toString.call(e)?"boolean":"[object Object]"===Object.prototype.toString.call(e)?"object":Object.prototype.toString.call(e).slice(8,-1).toLowerCase():"number"},p=function(e,t,r){return r&&e.data[r]?e.data[r]:t?e[t]:"undefined"},d=new Map(n.map((function(e){return[e.id,e]})));return n.forEach((function(e){var r=p(e,t,u);if(!i.has(r)){var n={label:r,meta:e.meta,properties:s(e.data)};i.set(r,n)}})),console.log("nodes.edges",n,o),o.forEach((function(e){var r=p(e,t,l),n=d.get(e.source),o=d.get(e.target);if(n&&o){if(!a.has(r)){var i={label:r,source:p(n,t,u),target:p(o,t,u),properties:s(e.data),meta:e.meta};a.set(r,i)}}else console.warn("数据不合法, 找不到 ".concat(n?"Target ID：".concat(e.target):"Source ID：".concat(e.source)))})),{nodes:Array.from(i.values()),edges:Array.from(a.values())}}(r);return n},Cr={number:"DT_DOUBLE",string:"DT_STRING"},Nr=function(e){var t=e.nodes.map((function(e){var t=e.label,r=e.properties,n=e.meta,o=n.graphFields.idField;return{id:t,position:{x:0,y:0},data:{label:t,dataFields:n.header,delimiter:n.delimiter,datatype:"csv",csv_location:n.name,graphFields:n.graphFields,properties:r.map((function(e){var t=e.name,r=e.type,n=o===t,i=Cr[r];return{name:t,type:"DT_DOUBLE"===i&&n?"DT_SIGNED_INT64":i,key:(0,ee.Z)(),disable:!1,primaryKey:n}}))}}})),r=e.edges.map((function(e){var t=e.label,r=e.properties,n=e.source,o=e.target,i=e.meta,a=i.graphFields,c=a.sourceField,u=a.targetField;return{id:t,source:n,target:o,data:{label:t,dataFields:i.header,delimiter:i.delimiter,datatype:"csv",csv_location:i.name,graphFields:i.graphFields,properties:r.map((function(e){var t=e.name,r=e.type,n=c===t||u===t;return n?null:{name:t,type:n?"DT_SIGNED_INT32":Cr[r],key:(0,ee.Z)(),disable:!1,primaryKey:!1}})).filter((function(e){return null!==e}))}}}));return{nodes:Fe(t,"graph"),edges:Me(r,"graph")}},Zr=r(95170),Fr=r.n(Zr);function Mr(e){return Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mr(e)}function Gr(){Gr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var S=g.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Mr(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Mr(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(r),!0).forEach((function(t){Ur(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ur(e,t,r){var n;return n=function(e,t){if("object"!=Mr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Mr(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yr(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var qr=function(e){var t=(0,p.qp)(),r=t.updateStore,o=t.store.isSaveFiles,i=function(){var e,t=(e=Gr().mark((function e(t,n){var i,a,u,l,s,f,p;return Gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.files,a=t.csvFiles,n((function(e){return Rr(Rr({},e),{},{loading:!0})})),e.next=4,c.Utils.asyncFunctionWithWorker(Ir)(i);case 4:u=e.sent,l=u.result,u.duration,s=Nr(l),f=s.nodes,p=s.edges,o&&Fr().setItem("DRAFT_GRAPH_FILES",a),r((function(e){e.hasLayouted=!1,e.nodes=f,e.edges=p,e.csvFiles=a})),n((function(e){return Rr(Rr({},e),{},{loading:!1})}));case 11:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Yr(i,n,o,a,c,"next",e)}function c(e){Yr(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return n.createElement(c.ImportFiles,{isSaveFiles:o,upload:{accept:".csv",title:n.createElement(He.Z,{id:"Click or drag file to this area to parse it"}),description:n.createElement(He.Z,{id:"If you already have CSV data, feel free to parse it here, and the system will automatically infer possible graph models for you."})}},(function(e,t){return n.createElement(ot.ZP,{type:"primary",onClick:function(){return i(e,t)},loading:e.loading},n.createElement(He.Z,{id:"Generate graph model"}))}))};function Br(e){return Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(e)}function Hr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(r),!0).forEach((function(t){Xr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xr(e,t,r){var n;return n=function(e,t){if("object"!=Br(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Br(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $r(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Wr=function(e){var t=e.style,r=Jr((0,n.useState)({visible:!1}),2),o=r[0],i=r[1],a=o.visible,u=(0,p.qp)().store.elementOptions,l=(0,c.useStudioProvier)().isLight,s=function(){i(Vr(Vr({},o),{},{visible:!1}))};return n.createElement($e.Z,null,n.createElement(rt.Z,{title:n.createElement(He.Z,{id:"Shortcut: parse files into a graph model"}),placement:"left"},n.createElement(ot.ZP,{type:"text",disabled:u.isEditable,onClick:function(){i(Vr(Vr({},o),{},{visible:!a}))},style:t,icon:n.createElement(Dr.Z,{style:{color:l?u.isEditable?"#ddd":"#000":u.isEditable?"#585858":"#fff"}})})),n.createElement(Ar.Z,{title:n.createElement(He.Z,{id:"Parse files into a graph model"}),open:a,onOk:s,onCancel:s,footer:null},n.createElement("div",{style:{height:"60vh"}},n.createElement(qr,null))))},Qr=r(65586);function Kr(e){return Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kr(e)}function en(e){return function(e){if(Array.isArray(e))return tn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return tn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(r),!0).forEach((function(t){on(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function on(e,t,r){var n;return n=function(e,t){if("object"!=Kr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Kr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Kr(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function an(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{}},r=e||{vertex_types:[],edge_types:[]},n=r.vertex_types,o=r.edge_types,i={},a=n.map((function(e){var r=e.primary_keys,n=void 0===r?[]:r,o=e.properties,a=void 0===o?[]:o,c=e.type_name,u=(0,ee.Z)();i[c]=u;var l=t(e);return{id:u,data:nn(nn({label:c,primary:n[0]},l),{},{properties:a.map((function(e,t){var r=e.property_name,o=e.property_type;return{key:(0,ee.Z)(),index:t,token:"",name:r,type:"primitive_type"in o?o.primitive_type:"DT_STRING",primaryKey:n[0]===r}}))}),position:{x:0,y:0}}})),c=[];return o&&o.forEach((function(e){var r=e.type_name,n=e.properties,o=void 0===n?[]:n,a=e.vertex_type_pair_relations,u=t(e);a.forEach((function(e){var t=e.destination_vertex,n=e.source_vertex,a=(e.relation,i[n]),l=i[t];c.push({source:a,target:l,id:(0,ee.Z)(),data:nn(nn({label:r},u),{},{properties:o.map((function(e){return{key:(0,ee.Z)(),name:e.property_name,type:"primitive_type"in e.property_type?e.property_type.primitive_type:"DT_STRING",primaryKey:!1,disable:!1,token:""}}))})})}))})),{nodes:a,edges:c}}var cn=function(e){return"DT_STRING"===e?{string:{long_text:""}}:{primitive_type:e}};function un(e){var t={},r=e.nodes.map((function(e,r){var n=e.id,o=e.data,i=o.label,a=o.properties,c=void 0===a?[]:a,u=o.primary;t[n]=i;var l=u;return{type_id:r,type_name:i,properties:c.map((function(e,t){return e.primaryKey&&(l=e.name),{property_id:t,property_name:e.name,property_type:cn(e.type)}}))||[],primary_keys:[l]}})),n=new Map;return e.edges.forEach((function(e,r){var o=e.source,i=e.target,a=e.data,c=a.properties,u=void 0===c?[]:c,l=a.label,s=t[o],f={destination_vertex:t[i],relation:"MANY_TO_MANY",source_vertex:s},p=n.get(l);if(p){var d=(p.properties||{}).vertex_type_pair_relations;(void 0===d?[]:d).push(f),n.set(l,p)}else n.set(l,{type_id:r,type_name:l,properties:(u||[]).map((function(e,t){return{property_id:t,property_name:e.name,property_type:cn(e.type)}}))||[],vertex_type_pair_relations:[f]})})),{vertex_types:r,edge_types:en(n.values())}}function ln(e){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(e)}function sn(e){return function(e){if(Array.isArray(e))return fn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(r),!0).forEach((function(t){yn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yn(e,t,r){var n;return n=function(e,t){if("object"!=ln(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ln(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hn=function(e,t){return t.map((function(e){return e.name}))};function mn(e,t,r){var n=r||an(e,(function(){return{disabled:!0,saved:!0}})),o=n.nodes,i=n.edges,a={};return"vertex_mappings"in t&&t.vertex_mappings.forEach((function(e){var t=e.type_name,r=e.column_mappings,n=void 0===r?[]:r;a[t]=dn(dn({},e),{},{properties_mappings:n.reduce((function(e,t){return dn(dn({},e),{},yn({},t.property,{index:t.column.index,token:t.column.name}))}),{})})})),"edge_mappings"in t&&t.edge_mappings.forEach((function(e){var t=e.type_triplet,r=e.column_mappings,n=void 0===r?[]:r;a[t.edge]=dn(dn({},e),{},{properties_mappings:n.reduce((function(e,t){return dn(dn({},e),{},yn({},t.property,{index:t.column.index,token:t.column.name}))}),{})})})),{nodes:o.map((function(e){var t=e.data,r=t.label,n=t.properties,o=void 0===n?[]:n,i=a[r]||{inputs:[""],properties_mappings:{}},c=i.inputs[0];return dn(dn({},e),{},{data:dn(dn({},e.data),{},{filelocation:c,isBind:!!c,isEidtProperty:!0,dataFields:hn(0,o),properties:o.map((function(e,t){var r=e.name,n=i&&i.properties_mappings&&i.properties_mappings[r]||{index:0,token:""};return dn(dn({},e),{},{index:n.index,token:n.token})}))})})})),edges:i.map((function(e){var t=e.data;if(t){var r=t.label,n=t.properties,o=void 0===n?[]:n,i=a[r]||{source_vertex_mappings:[{column:{index:0,name:""}}],destination_vertex_mappings:[{column:{index:0,name:""}}],properties_mappings:{},inputs:[""]};if("destination_vertex_mappings"in i){var c=i.source_vertex_mappings,u=void 0===c?[]:c,l=i.destination_vertex_mappings,s=void 0===l?[]:l,f=i.properties_mappings,p=i.inputs[0],d=[u[0].column,s[0].column].concat(sn(o));return dn(dn({},e),{},{data:dn(dn({},e.data),{},{filelocation:p,isBind:!!p,isEidtProperty:!0,dataFields:hn(0,d),properties:o.map((function(e){var t=e.name,r=f[t]||{index:0,token:""};return dn(dn({},e),{},{index:r.index,token:r.token,name:t})})),source_vertex_fields:{index:u[0].column.index,token:u[0].column.name,name:u[0].property},target_vertex_fields:{index:s[0].column.index,token:s[0].column.name,name:s[0].property}})})}}})).filter((function(e){return e}))}}function vn(e){var t=[],r=[],n={},o={};return e.nodes.forEach((function(e){var r=e.id,i=e.data,a=i.properties,c=void 0===a?[]:a,u=i.filelocation,l=void 0===u?"":u,s=i.label;i.primary;n[r]=s,t.push({type_name:s,inputs:[l],column_mappings:c.map((function(e){var t=e.index,n=e.token,i=e.name;return e.primaryKey&&(o[r]=i),{column:{index:t,name:n},property:i}}))})})),e.edges.forEach((function(e){var t=e.data,i=e.source,a=e.target,c=t.properties,u=void 0===c?[]:c,l=t.filelocation,s=void 0===l?"":l,f=t.source_vertex_fields,p=void 0===f?{index:0,token:"",name:"id"}:f,d=t.target_vertex_fields,y=void 0===d?{index:0,token:"",name:"id"}:d,h=t.label,m=[],v=[],g=[];u.forEach((function(e){var t=e.index,r=e.token,n=e.name;m.push({column:{index:t,name:r},property:n})})),v.push({column:{index:p.index,name:p.token},property:o[i]}),g.push({column:{index:y.index,name:y.token},property:o[a]}),r.push({type_triplet:{edge:h,source_vertex:n[i],destination_vertex:n[a]},inputs:[s],column_mappings:m,source_vertex_mappings:v,destination_vertex_mappings:g})})),{vertex_mappings:t,edge_mappings:r}}var gn=r(80487),bn=r(27841);function wn(e){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(e)}function On(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?On(Object(r),!0).forEach((function(t){xn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xn(e,t,r){var n;return n=function(e,t){if("object"!=wn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==wn(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function En(){En=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var S=g.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==wn(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(wn(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function jn(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var Pn=nt.Z.Dragger,_n=function(e){return"schema"in e?e.schema:"vertex_types"in e&&"edge_types"in e?e:"vertex_mappings"in e&&"edge_mappings"in e?{vertex_mappings:e.vertex_mappings,edge_mappings:e.edge_mappings}:{}},Ln=function(e){var t=e.style,r=void 0===t?{}:t,o=e.icon,i=void 0===o?n.createElement(c.Icons.File,{text:"YAML"}):o,a=e.disabled,u=(0,p.qp)(),l=u.updateStore,s=u.store,f=s.appMode,d=s.nodes,y=s.edges,h=function(){var e,t=(e=En().mark((function e(t){var r,n,o,i,a;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.file,n=r.type,e.prev=2,e.next=5,c.Utils.parseFile(r);case 5:o=e.sent,"application/x-yaml"===n&&(i=_n(gn.ZP.load(o))),"application/json"===n&&(i=_n(JSON.parse(o))),"DATA_MODELING"===f&&(a=an(i,(function(){return{disabled:!1,saved:!1}}))),"DATA_IMPORTING"===f&&(a=mn({},i,{nodes:d,edges:y})),l((function(e){e.hasLayouted=!1,e.nodes=Fe(a.nodes,"graph"),e.edges=Me(a.edges,"graph")})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.error("解析文件失败:",e.t0),bn.ZP.error("解析文件失败");case 17:case"end":return e.stop()}}),e,null,[[2,13]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){jn(i,n,o,a,c,"next",e)}function c(e){jn(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return n.createElement("div",{style:{height:"100%",width:"100%"}},n.createElement(Pn,{disabled:"DATA_MODELING"===f&&a,accept:".yaml,.json",customRequest:h,showUploadList:!1,multiple:!0,style:Sn({height:"100px",width:"100%"},r)},n.createElement(Qe.Z,{justify:"center",align:"center",vertical:!0,gap:24},i,n.createElement(Ke.Z.Text,{type:"secondary"},n.createElement(He.Z,{id:"For the definition and description of the schema model, please refer to the "}),n.createElement("a",{href:"https://graphscope.io/docs/flex/interactive/data_model",target:"_blank"},n.createElement(He.Z,{id:"document"}))))))},kn=s.Z.useToken,Tn={DATA_MODELING:{importText:"Import YAML or JSON file to generate graph model",exportText:"Save graph model to local YAML or JSON file"},DATA_IMPORTING:{importText:"Import YAML or JSON file to generate graph loading config",exportText:"Save graph loading config to local YAML or JSON file"},PURE:{importText:"Import YAML or JSON file to generate graph loading config",exportText:"Save graph loading config to local YAML or JSON file"}},An=function(){var e=kn().token,t=(0,p.qp)().store,r=t.nodes,o=t.edges,i=t.appMode,a=Tn[i],u=a.importText,l=a.exportText,s=function(e){var t;if("DATA_MODELING"===i){var n=un(c.Utils.fakeSnapshot({nodes:r,edges:o}));return"yaml"===e&&(t=gn.ZP.dump(n)),"json"===e&&(t=JSON.stringify(n)),void c.Utils.download("create-model.".concat(e),t)}if("DATA_IMPORTING"===i){var a=vn(c.Utils.fakeSnapshot({nodes:r,edges:o}));return"yaml"===e&&(t=gn.ZP.dump(a)),"json"===e&&(t=JSON.stringify(a)),void c.Utils.download("loading-config.".concat(e),t)}};return n.createElement(Qe.Z,{justify:"center",vertical:!0,style:{padding:"20px",width:"350px"},gap:10},n.createElement(Ke.Z.Text,{type:"secondary"},u),n.createElement(Ln,{disabled:0!==r.length,style:{height:"160px"},icon:n.createElement($e.Z,{split:"or"},n.createElement(c.Icons.File,{text:"YAML",style:{fontSize:"30px",color:e.colorTextSecondary}}),n.createElement(c.Icons.File,{text:"JSON",style:{fontSize:"30px",color:e.colorTextSecondary}}))}),n.createElement(vr.Z,{style:{margin:"12px  0px"}}),n.createElement(Ke.Z.Text,{type:"secondary"},l),n.createElement(Qe.Z,{gap:10},n.createElement(ot.ZP,{style:{width:"50%"},onClick:function(){return s("yaml")}},"EXPORT YAML"),n.createElement(ot.ZP,{style:{width:"50%"},onClick:function(){return s("json")}},"EXPORT JSON")))},Dn=function(e){return n.createElement(Qr.Z,{placement:"leftBottom",content:n.createElement(An,null)},n.createElement(ot.ZP,{type:"text",icon:n.createElement(c.Icons.FileYaml,null)}))},In=function(e){var t=(0,p.qp)().store.appMode;return"DATA_MODELING"===t?n.createElement(n.Fragment,null,n.createElement(c.Toolbar,{style:{top:"12px",right:"24px",left:"unset"},direction:"vertical"},n.createElement(gr,null),n.createElement(vr.Z,{style:{margin:"0px"}}),n.createElement(Wr,null),n.createElement(vr.Z,{style:{margin:"0px"}}),n.createElement(Dn,null),n.createElement(vr.Z,{style:{margin:"0px"}}),n.createElement(Er,null),n.createElement(br,null),n.createElement(Tr,null))):"DATA_IMPORTING"===t?n.createElement(n.Fragment,null,n.createElement(c.Toolbar,{style:{top:"12px",right:"24px",left:"unset"},direction:"vertical"},n.createElement(gr,null),n.createElement(vr.Z,{style:{margin:"0px"}}),n.createElement(Dn,null))):null},Cn={appMode:"DATA_MODELING",disabled:!1,nodes:[],edges:[],source:{nodes:[],edges:[]},nodePositionChange:[],isReady:!1,displayMode:"graph",graphPosition:{},tablePosition:{},currentType:"nodes",currentId:"",theme:{primaryColor:"#1978FF"},collapsed:{left:!0,right:!0},hasLayouted:!1,elementOptions:{isEditable:!0,isConnectable:!0},csvFiles:[],isSaveFiles:!0},Nn={"en-US":{"Start sketching a model, a vertex label is a named grouping or categorization of nodes within the graph dataset":"Start sketching a model, a vertex label is a named grouping or categorization of nodes within the graph dataset","Please manually input the odps file location":"Please manually input the odps file location",Upload:"Upload","Load data":"Load data","Start importing":"Start importing",Close:"Close","Goto Modeling":"Goto Modeling","Save Modeling":"Save Modeling","Goto Graphs":"Goto Graphs","Goto Importing":"Goto Importing","Go back to modify the graph model.":"Go back to modify the graph model.","View Schema":"View Schema","Successfully saved the graph model":"Successfully saved the graph model","Failed to save the graph model":"Failed to save the graph model","Please create the graph model first":"Please create the graph model first","Sorry, the system detected that there is no available graph model. Please create a graph model before importing data":"Sorry, the system detected that there is no available graph model. Please create a graph model before importing data","Bulk Import":"Bulk Import","Bulk Import Data":"Bulk Import Data","The system has detected that you have previously uploaded CSV files. You can quickly bulk import data into graphscope":"The system has detected that you have previously uploaded CSV files. You can quickly bulk import data into graphscope","Click or drag file to this area to upload":"Click or drag file to this area to upload","Clear all files":"Clear all files","Generate graph model":"Generate graph model","If you already have CSV data, feel free to upload it here, and the system will automatically infer possible graph models for you.":"If you already have CSV data, feel free to upload it here, and the system will automatically infer possible graph models for you.","If you already have SQLDDL file, feel free to upload it here, and the system will automatically infer possible graph models for you.":"If you already have SQLDDL file, feel free to upload it here, and the system will automatically infer possible graph models for you.","A vertex must have a primary key.":"A vertex must have a primary key.","A vertex must have at least one property.":"A vertex must have at least one property.","A edge can only have one property.":"A edge can only have one property.","The current mode is preview only, and does not support clearing the model":"The current mode is preview only, and does not support clearing the model","Clear graph model":"Clear graph model","The current mode is preview only, and does not support creating new vertex":"The current mode is preview only, and does not support creating new vertex","Create new vertex":"Create new vertex","The current mode is preview only, and does not support opening multi-source modeling":"The current mode is preview only, and does not support opening multi-source modeling","Expand or collapse multi-source modeling":"Expand or collapse multi-source modeling",Configuration:"Configuration","You have successfully bound the data source. Please complete the configuration to start importing data.":"You have successfully bound the data source. Please complete the configuration to start importing data.","The data loading task has been successfully created. You can view detailed logs in the job center.":"The data loading task has been successfully created. You can view detailed logs in the job center.","Goto Jobs":"Goto Jobs","Please select a primate type.":"Please select a primate type.","Click or drag file to this area to parse it":"Click or drag file to this area to parse it","If you already have CSV data, feel free to parse it here, and the system will automatically infer possible graph models for you.":"If you already have CSV data, feel free to parse it here, and the system will automatically infer possible graph models for you.","Data source binding":"Data source binding","Shortcut: parse files into a graph model":"Shortcut: parse files into a graph model","Save graph model to svg image":"Save graph model to svg image","Save graph model to JSON config":"Save graph model to JSON config","Parse files into a graph model":"Parse files into a graph model","For the definition and description of the schema model, please refer to the ":"For the definition and description of the schema model, please refer to the ",document:"document",Vertex:"Vertex",Edges:"Edges","File type":"File type","ID field":"ID field","Label field":"Label field","Target field":"Target field","Source field":"Source field","Delete label":"Delete label",Label:"Label","Data Fields":"Data Fields","Add Property":"Add Property",Properties:"Properties","Uploading...":"Uploading...",Delimiter:"Delimiter",Type:"Type","Header Row":"Header Row","Import Option":"Import Option",Quoting:"Quoting","Quote char":"Quote char",Source:"Source",Target:"Target"},"zh-CN":{"Start sketching a model, a vertex label is a named grouping or categorization of nodes within the graph dataset":"开始绘制模型吧，顶点标签是图数据集中节点的命名分组或分类","Please manually input the odps file location":"请手动填写 odps 文件位置",Upload:"上传","Load data":"加载数据","Start importing":"开始导入",Close:"关闭","Goto Modeling":"跳转到建模","Save Modeling":"保存建模","Goto Graphs":"跳转到图实例列表","Goto Importing":"跳转到数据导入","Go back to modify the graph model.":"返回修改图实例。","View Schema":"查看 Schema","Successfully saved the graph model":"已成功保存图模型","Failed to save the graph model":"无法保存图模型","Please create the graph model first":"请先创建图模型","Sorry, the system detected that there is no available graph model. Please create a graph model before importing data":"对不起，系统检测到没有可用的图模型。导入数据前请先创建图模型.","Bulk Import":"批量导入","Bulk Import Data":"批量导入数据","The system has detected that you have previously uploaded CSV files. You can quickly bulk import data into graphscope":"系统检测到您之前上传过 CSV 文件。您可以快速将数据批量导入 graphscope","Click or drag file to this area to upload":"单击或拖动文件到此区域进行上传","Clear all files":"清除所有文件","Generate graph model":"生成图模型","If you already have CSV data, feel free to upload it here, and the system will automatically infer possible graph models for you.":"如果您已经有 CSV 数据，请随时将其上传到此处，系统将自动为您推断可能的图模型。","If you already have SQLDDL file, feel free to upload it here, and the system will automatically infer possible graph models for you.":"如果您已经有 SQLDDL 文件，请随时在此处上传，系统将自动为您推断可能的图模型。","A vertex must have a primary key.":"节点必须具有一个主键。","A vertex must have at least one property.":"节点必须至少具有一个属性。","A edge can only have one property.":"一条边只能有一个属性。","The current mode is preview only, and does not support clearing the model":"当前模式仅为预览模式，不支持清除模型","Clear graph model":"清除模型","The current mode is preview only, and does not support creating new vertex":"当前模式仅为预览模式，不支持创建新顶点","Create new vertex":"创建节点","The current mode is preview only, and does not support opening multi-source modeling":"当前模式仅为预览模式，不支持打开多源建模","Expand or collapse multi-source modeling":"展开或折叠多源建模",Configuration:"配置","You have successfully bound the data source. Please complete the configuration to start importing data.":"您已成功绑定数据源。请完成配置以开始导入数据。","The data loading task has been successfully created. You can view detailed logs in the job center.":"数据加载任务已成功创建。您可以在作业中心查看详细日志。","Goto Jobs":"跳转到日志","Please select a primate type.":"请补充完数据类型","Click or drag file to this area to parse it":"单击或拖动文件到此区域进行解析","If you already have CSV data, feel free to parse it here, and the system will automatically infer possible graph models for you.":"如果您已经有 CSV 数据，请随时将其放置到此处，系统将自动为您推断可能的图模型。","Data source binding":"数据绑定","Shortcut: parse files into a graph model":"快捷方式：将文件解析为图模型","Save graph model to svg image":"将图模型保存到 svg 图像","Save graph model to JSON config":"将图模型保存到 JSON 配置","Parse files into a graph model":"将文件解析为图模型","For the definition and description of the schema model, please refer to the ":"关于模式模型的定义和描述，请参阅 ",document:"文档",Vertex:"节点",Edges:"边","File type":"文件类型","ID field":"ID 字段","Label field":"标题","Target field":"终止点字段","Source field":"起始点字段","Delete label":"删除标题",Label:"标题",Source:"起始点",Target:"目标点","Data Fields":"数据","Add Property":"添加属性",Properties:"属性","Uploading...":"上传中...",Delimiter:"定界符",Type:"类型","Header Row":"标题行","Import Option":"导入选项",Quoting:"引用","Quote char":"分隔符"}};function Zn(e){return Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn(e)}function Fn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(r),!0).forEach((function(t){Gn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gn(e,t,r){var n;return n=function(e,t){if("object"!=Zn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Zn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Zn(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zn(){zn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var S=g.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Zn(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Zn(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function Rn(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var Un=function(e){var t=e.appMode,r=e.GS_ENGINE_TYPE,i=e.queryGraphSchema,a=e.queryBoundSchema,u=(e.id,e.theme,e.defaultCollapsed),l=void 0===u?{rightSide:!1,leftSide:!0}:u,s=e.leftSideStyle,f=void 0===s?{width:"350px",padding:"0px 12px"}:s,d=e.rightSideStyle,y=void 0===d?{width:"450px",padding:"0px 12px"}:d,h=e.children,m=e.queryPrimitiveTypes,v=e.handleUploadFile,g=e.isSaveFiles,b=e.batchUploadFiles,w=e.onCreateLabel,O=e.onDeleteLabel,S=e.style,x=(e.leftSide,e.rightSide),E=(0,p.qp)(),j=E.store,P=E.updateStore,_=j.isReady,L=j.displayMode;(0,c.useDynamicStyle)("\n/* this gets exported as style.css and can be used for the default theming */\n/* these are the necessary styles for React Flow, they get used by base.css and style.css */\n.react-flow {\n  direction: ltr;\n}\n.react-flow__container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n.react-flow__pane {\n  z-index: 1;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.react-flow__pane.selection {\n    cursor: pointer;\n  }\n.react-flow__pane.dragging {\n    cursor: -webkit-grabbing;\n    cursor: grabbing;\n  }\n.react-flow__viewport {\n  transform-origin: 0 0;\n  z-index: 2;\n  pointer-events: none;\n}\n.react-flow__renderer {\n  z-index: 4;\n}\n.react-flow__selection {\n  z-index: 6;\n}\n.react-flow__nodesselection-rect:focus,\n.react-flow__nodesselection-rect:focus-visible {\n  outline: none;\n}\n.react-flow .react-flow__edges {\n  pointer-events: none;\n  overflow: visible;\n}\n.react-flow__edge-path,\n.react-flow__connection-path {\n  stroke: #b1b1b7;\n  stroke-width: 1;\n  fill: none;\n}\n.react-flow__edge {\n  pointer-events: visibleStroke;\n  cursor: pointer;\n}\n.react-flow__edge.animated path {\n    stroke-dasharray: 5;\n    -webkit-animation: dashdraw 0.5s linear infinite;\n            animation: dashdraw 0.5s linear infinite;\n  }\n.react-flow__edge.animated path.react-flow__edge-interaction {\n    stroke-dasharray: none;\n    -webkit-animation: none;\n            animation: none;\n  }\n.react-flow__edge.inactive {\n    pointer-events: none;\n  }\n.react-flow__edge.selected,\n  .react-flow__edge:focus,\n  .react-flow__edge:focus-visible {\n    outline: none;\n  }\n.react-flow__edge.selected .react-flow__edge-path,\n  .react-flow__edge:focus .react-flow__edge-path,\n  .react-flow__edge:focus-visible .react-flow__edge-path {\n    stroke: #555;\n  }\n.react-flow__edge-textwrapper {\n    pointer-events: all;\n  }\n.react-flow__edge-textbg {\n    fill: white;\n  }\n.react-flow__edge .react-flow__edge-text {\n    pointer-events: none;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n  }\n.react-flow__connection {\n  pointer-events: none;\n}\n.react-flow__connection .animated {\n    stroke-dasharray: 5;\n    -webkit-animation: dashdraw 0.5s linear infinite;\n            animation: dashdraw 0.5s linear infinite;\n  }\n.react-flow__connectionline {\n  z-index: 1001;\n}\n.react-flow__nodes {\n  pointer-events: none;\n  transform-origin: 0 0;\n}\n.react-flow__node {\n  position: absolute;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  pointer-events: all;\n  transform-origin: 0 0;\n  box-sizing: border-box;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.react-flow__node.dragging {\n    cursor: -webkit-grabbing;\n    cursor: grabbing;\n  }\n.react-flow__nodesselection {\n  z-index: 3;\n  transform-origin: left top;\n  pointer-events: none;\n}\n.react-flow__nodesselection-rect {\n    position: absolute;\n    pointer-events: all;\n    cursor: -webkit-grab;\n    cursor: grab;\n  }\n.react-flow__handle {\n  position: absolute;\n  pointer-events: none;\n  min-width: 5px;\n  min-height: 5px;\n  width: 6px;\n  height: 6px;\n  background: #1a192b;\n  border: 1px solid white;\n  border-radius: 100%;\n}\n.react-flow__handle.connectionindicator {\n    pointer-events: all;\n    cursor: crosshair;\n  }\n.react-flow__handle-bottom {\n    top: auto;\n    left: 50%;\n    bottom: -4px;\n    transform: translate(-50%, 0);\n  }\n.react-flow__handle-top {\n    left: 50%;\n    top: -4px;\n    transform: translate(-50%, 0);\n  }\n.react-flow__handle-left {\n    top: 50%;\n    left: -4px;\n    transform: translate(0, -50%);\n  }\n.react-flow__handle-right {\n    right: -4px;\n    top: 50%;\n    transform: translate(0, -50%);\n  }\n.react-flow__edgeupdater {\n  cursor: move;\n  pointer-events: all;\n}\n.react-flow__panel {\n  position: absolute;\n  z-index: 5;\n  margin: 15px;\n}\n.react-flow__panel.top {\n    top: 0;\n  }\n.react-flow__panel.bottom {\n    bottom: 0;\n  }\n.react-flow__panel.left {\n    left: 0;\n  }\n.react-flow__panel.right {\n    right: 0;\n  }\n.react-flow__panel.center {\n    left: 50%;\n    transform: translateX(-50%);\n  }\n.react-flow__attribution {\n  font-size: 10px;\n  background: rgba(255, 255, 255, 0.5);\n  padding: 2px 3px;\n  margin: 0;\n}\n.react-flow__attribution a {\n    text-decoration: none;\n    color: #999;\n  }\n@-webkit-keyframes dashdraw {\n  from {\n    stroke-dashoffset: 10;\n  }\n}\n@keyframes dashdraw {\n  from {\n    stroke-dashoffset: 10;\n  }\n}\n.react-flow__edgelabel-renderer {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n}\n.react-flow__edge.updating .react-flow__edge-path {\n      stroke: #777;\n    }\n.react-flow__edge-text {\n    font-size: 10px;\n  }\n.react-flow__node.selectable:focus,\n  .react-flow__node.selectable:focus-visible {\n    outline: none;\n  }\n.react-flow__node-default,\n.react-flow__node-input,\n.react-flow__node-output,\n.react-flow__node-group {\n  padding: 10px;\n  border-radius: 3px;\n  width: 150px;\n  font-size: 12px;\n  color: #222;\n  text-align: center;\n  border-width: 1px;\n  border-style: solid;\n  border-color: #1a192b;\n  background-color: white;\n}\n.react-flow__node-default.selectable:hover, .react-flow__node-input.selectable:hover, .react-flow__node-output.selectable:hover, .react-flow__node-group.selectable:hover {\n      box-shadow: 0 1px 4px 1px rgba(0, 0, 0, 0.08);\n    }\n.react-flow__node-default.selectable.selected,\n    .react-flow__node-default.selectable:focus,\n    .react-flow__node-default.selectable:focus-visible,\n    .react-flow__node-input.selectable.selected,\n    .react-flow__node-input.selectable:focus,\n    .react-flow__node-input.selectable:focus-visible,\n    .react-flow__node-output.selectable.selected,\n    .react-flow__node-output.selectable:focus,\n    .react-flow__node-output.selectable:focus-visible,\n    .react-flow__node-group.selectable.selected,\n    .react-flow__node-group.selectable:focus,\n    .react-flow__node-group.selectable:focus-visible {\n      box-shadow: 0 0 0 0.5px #1a192b;\n    }\n.react-flow__node-group {\n  background-color: rgba(240, 240, 240, 0.25);\n}\n.react-flow__nodesselection-rect,\n.react-flow__selection {\n  background: rgba(0, 89, 220, 0.08);\n  border: 1px dotted rgba(0, 89, 220, 0.8);\n}\n.react-flow__nodesselection-rect:focus,\n  .react-flow__nodesselection-rect:focus-visible,\n  .react-flow__selection:focus,\n  .react-flow__selection:focus-visible {\n    outline: none;\n  }\n.react-flow__controls {\n  box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.08);\n}\n.react-flow__controls-button {\n    border: none;\n    background: #fefefe;\n    border-bottom: 1px solid #eee;\n    box-sizing: content-box;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 16px;\n    height: 16px;\n    cursor: pointer;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n            user-select: none;\n    padding: 5px;\n  }\n.react-flow__controls-button:hover {\n      background: #f4f4f4;\n    }\n.react-flow__controls-button svg {\n      width: 100%;\n      max-width: 12px;\n      max-height: 12px;\n    }\n.react-flow__controls-button:disabled {\n      pointer-events: none;\n    }\n.react-flow__controls-button:disabled svg {\n        fill-opacity: 0.4;\n      }\n.react-flow__minimap {\n  background-color: #fff;\n}\n.react-flow__minimap svg {\n  display: block;\n}\n.react-flow__resize-control {\n  position: absolute;\n}\n.react-flow__resize-control.left,\n.react-flow__resize-control.right {\n  cursor: ew-resize;\n}\n.react-flow__resize-control.top,\n.react-flow__resize-control.bottom {\n  cursor: ns-resize;\n}\n.react-flow__resize-control.top.left,\n.react-flow__resize-control.bottom.right {\n  cursor: nwse-resize;\n}\n.react-flow__resize-control.bottom.left,\n.react-flow__resize-control.top.right {\n  cursor: nesw-resize;\n}\n/* handle styles */\n.react-flow__resize-control.handle {\n  width: 4px;\n  height: 4px;\n  border: 1px solid #fff;\n  border-radius: 1px;\n  background-color: #3367d9;\n  transform: translate(-50%, -50%);\n}\n.react-flow__resize-control.handle.left {\n  left: 0;\n  top: 50%;\n}\n.react-flow__resize-control.handle.right {\n  left: 100%;\n  top: 50%;\n}\n.react-flow__resize-control.handle.top {\n  left: 50%;\n  top: 0;\n}\n.react-flow__resize-control.handle.bottom {\n  left: 50%;\n  top: 100%;\n}\n.react-flow__resize-control.handle.top.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.bottom.left {\n  left: 0;\n}\n.react-flow__resize-control.handle.top.right {\n  left: 100%;\n}\n.react-flow__resize-control.handle.bottom.right {\n  left: 100%;\n}\n/* line styles */\n.react-flow__resize-control.line {\n  border-color: #3367d9;\n  border-width: 0;\n  border-style: solid;\n}\n.react-flow__resize-control.line.left,\n.react-flow__resize-control.line.right {\n  width: 1px;\n  transform: translate(-50%, 0);\n  top: 0;\n  height: 100%;\n}\n.react-flow__resize-control.line.left {\n  left: 0;\n  border-left-width: 1px;\n}\n.react-flow__resize-control.line.right {\n  left: 100%;\n  border-right-width: 1px;\n}\n.react-flow__resize-control.line.top,\n.react-flow__resize-control.line.bottom {\n  height: 1px;\n  transform: translate(0, -50%);\n  left: 0;\n  width: 100%;\n}\n.react-flow__resize-control.line.top {\n  top: 0;\n  border-top-width: 1px;\n}\n.react-flow__resize-control.line.bottom {\n  border-bottom-width: 1px;\n  top: 100%;\n}\n","graphscope-importor"),(0,n.useEffect)((function(){var e;(e=zn().mark((function e(){var n,o,c,u,l,s;return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={nodes:[],edges:[]},"DATA_MODELING"!==t||!i){e.next=5;break}return e.next=4,i();case 4:n=e.sent;case 5:if("DATA_IMPORTING"!==t||!a){e.next=9;break}return e.next=8,a();case 8:n=e.sent;case 9:o={nodes:Fe(n.nodes,L),edges:Me(n.edges,L)},l=(c=o||{nodes:[],edges:[]}).edges,s=0===(u=c.nodes).length,P((function(e){e.isReady=!0,e.nodes=u,e.edges=l,e.appMode=t,e.elementOptions={isEditable:!s,isConnectable:"groot"===r&&"DATA_MODELING"===t||s},e.currentId=s?"":u[0].id,e.currentType="nodes",e.isSaveFiles=g}));case 13:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Rn(i,n,o,a,c,"next",e)}function c(e){Rn(i,n,o,a,c,"throw",e)}a(void 0)}))})()}),[]);var k="PURE"===t;return n.createElement(c.StudioProvier,{locales:Nn},n.createElement(c.Section,{rightSide:x||n.createElement(mr,{appMode:t,queryPrimitiveTypes:m,handleUploadFile:v,batchUploadFiles:b,onCreateLabel:w,onDeleteLabel:O}),leftSideStyle:f,rightSideStyle:y,defaultCollapsed:l,style:Mn({height:"calc(100vh - 50px)"},S),splitBorder:!0},_?n.createElement(o.tV,null,!k&&n.createElement(In,null),n.createElement(Je,null),h):n.createElement(c.GlobalSpin,null)))},Yn=function(e){return n.createElement(p.ZP,{id:e.id,store:Cn},n.createElement(Un,e))},qn=r(10422);function Bn(e){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bn(e)}function Hn(){Hn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new k(n||[]);return o(a,"_invoke",{value:j(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="executing",y="completed",h={};function m(){}function v(){}function g(){}var b={};l(b,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,a)&&(b=O);var S=g.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Bn(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Bn(t)+" is not iterable")}return v.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function Vn(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}var Xn={render_modeling:function(e){var t=(e||{}).id,r=void 0===t?"root":t,o=function(){var e,t=(e=Hn().mark((function e(){return Hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{nodes:[],edges:[]});case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Vn(i,n,o,a,c,"next",e)}function c(e){Vn(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),i=e.queryPrimitiveTypes,a=void 0===i?function(){return["DT_DOUBLE","DT_STRING","DT_SIGNED_INT32","DT_SIGNED_INT64"].map((function(e){return{label:e,value:e}}))}:i,c=e.queryGraphSchema,u=void 0===c?o:c,l=e.appMode,s=void 0===l?"DATA_MODELING":l;qn.render(n.createElement(Yn,{queryPrimitiveTypes:a,queryGraphSchema:u,appMode:s}),document.getElementById(r))}},Jn=Xn,$n=Yn},33741:function(e,t,r){r.d(t,{qp:function(){return y}});var n=r(53874),o=r(50959),i=r(55227);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){var n;return n=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==a(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,n.Fl)(!1);var s=o.createContext({id:""}),f=new Map,p=new Map;function d(e,t){var r;f.has(e)||(f.set(e,t),p.set(e,(r=t,(0,i.U)((function(e,t){return u(u({},r),{},{updateStore:function(r){e((0,n.Uy)(t(),(function(e){try{r(e)}catch(e){console.error("Error updating store:",e)}})))}})})))))}function y(e){var t=(0,o.useContext)(s).id;e&&(t=e);var r=p.get(t),n=f.get(t);return{store:new Proxy(u({},n),{get:function(e,t){return t in e?r((function(e){return e[t]})):void console.error("prop ".concat(t.toString()," not exist"))}}),updateStore:r((function(e){return e.updateStore})),id:t}}window.GLOBAL_USE_STORE_MAP=p,window.GLOBAL_INITIAL_STORE_MAP=f,t.ZP=function(e){var t=e.children,r=e.store,n=e.id,i=(0,o.useMemo)((function(){return n||"".concat(Math.random().toString(36).substr(2))}),[]);return d(i,r),o.createElement(s.Provider,{value:{id:i}},t)}}}]);